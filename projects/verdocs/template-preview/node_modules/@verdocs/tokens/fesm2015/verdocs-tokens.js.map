{"version":3,"file":"verdocs-tokens.js","sources":["ng://@verdocs/tokens/lib/models/email-verification-data.model.ts","ng://@verdocs/tokens/lib/services/state.service.ts","ng://@verdocs/tokens/lib/interceptors/request.interceptor.ts","ng://@verdocs/tokens/lib/services/auth.service.ts","ng://@verdocs/tokens/lib/services/authguard.service.ts","ng://@verdocs/tokens/lib/interceptors/error.interceptor.ts","ng://@verdocs/tokens/lib/interceptors/response.interceptor.ts","ng://@verdocs/tokens/lib/services/token.service.ts","ng://@verdocs/tokens/lib/dialogs/verify-email-dialog.component.ts","ng://@verdocs/tokens/lib/directives/realster-guard.directive.ts","ng://@verdocs/tokens/lib/tokens.module.ts"],"sourcesContent":["export interface EmailVerificationData {\n  emailAddress: string,\n  resendEmailVerification: Function\n}","import { Injectable, Injector, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { CookieService, CookieOptions } from 'ngx-cookie';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { VTokenConfigToken, VTokenConfig } from '../tokens.module';\nimport { ReplaySubject, Subscription, interval } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nconst helper = new JwtHelperService();\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class VerdocsStateService {\n  private static RACCOUNT_COOKIE_NAME = 'rAccount_Verdocs';\n  private static SIGNER_TOKEN_COOKIE_NAME = 'signer_token'\n  private static COOKIE_NAME_SUFFIX = '_Verdocs';\n  private static ACCESS_TOKEN_NAME = 'accessToken';\n  private static ID_TOKEN_NAME = 'idToken';\n  private static TOKEN_NAMESPACE = 'https://verdocs.com';\n\n  private loginURL: string;\n  private cookieName: string;\n  private production: boolean;\n  private accessToken: string;\n  private idToken: string;\n  private timerActive = false;\n  private domain: string;\n  private cookieConfig: CookieOptions = {\n    path: '/',\n    domain: 'localhost',\n    secure: false\n  }\n  private cookies;\n  private tokenConfig: VTokenConfig\n  private authenticationWatcher: Subscription;\n\n  public accessList: string[] = [];\n  public decodedIdTokenSubject = new ReplaySubject<any>();\n\n  constructor(\n    private cookieService: CookieService,\n    private http: HttpClient,\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n    this.tokenConfig = this.injector.get(VTokenConfigToken);\n    this.domain = this.tokenConfig.domain;\n    this.init();\n\n  }\n\n  init() {\n    if (this.tokenConfig.loginURL) {\n      this.loginURL = this.tokenConfig.loginURL;\n    }\n    if (this.tokenConfig.cookieName) {\n      this.cookieName = this.tokenConfig.cookieName;\n    } else if (this.tokenConfig.origin) {\n      this.cookieName = this.tokenConfig.origin + VerdocsStateService.COOKIE_NAME_SUFFIX;\n    }\n    this.production = this.tokenConfig.production || false;\n    this.cookieConfig.domain = this.getDomain();\n    if (this.tokenConfig.production) {\n      this.cookieConfig.secure = true;\n    }\n    this.getAccessList();\n  }\n\n  getDomain() {\n    if (this.production || this.domain !== 'localhost') {\n      const address = this.domain.split('.');\n      return '.' + address[address.length - 2] + '.' + address[address.length - 1];\n    } else {\n      return 'localhost';\n    }\n  }\n\n  watchAuthentication() {\n    if (isPlatformBrowser(this.platform)) {\n      if (!this.timerActive) {\n        this.timerActive = true;\n        this.authenticationWatcher = interval(15000).subscribe(() => {\n          this.getAccessList();\n          if ((this.accessList.indexOf(VerdocsStateService.RACCOUNT_COOKIE_NAME) === -1 || this.accessList.indexOf(this.cookieName) === -1)) {\n            this.cookieService.removeAll();\n            window.location.href = this.getLoginURL();\n          };\n        });\n      }\n    }\n  }\n\n  endWatchAuthentication() {\n    this.authenticationWatcher.unsubscribe();\n  }\n\n  getAccountCookieObject() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie_prefix = this.tokenConfig.account_name || 'rAccount';\n      const cookie_name = cookie_prefix + VerdocsStateService.COOKIE_NAME_SUFFIX;\n      const cookie = this.getOtherCookieObject(cookie_name);\n      return cookie;\n    }\n  }\n  getVerdocsCookieObject() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie_prefix = this.tokenConfig.verdocs_name || 'rForm';\n      const cookie_name = cookie_prefix + VerdocsStateService.COOKIE_NAME_SUFFIX;\n      const cookie = this.getOtherCookieObject(cookie_name);\n      return cookie;\n    }\n  }\n\n  getAccessToken() {\n    if (isPlatformBrowser(this.platform)) {\n      if (this.cookieName) {\n        const cookie = this.getOtherCookieObject(this.cookieName);\n        if (cookie && cookie[VerdocsStateService.ACCESS_TOKEN_NAME]) {\n          this.accessToken = cookie[VerdocsStateService.ACCESS_TOKEN_NAME]\n          return this.accessToken;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  getVerdocsAccessToken() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie = this.getVerdocsCookieObject();\n      if (cookie && cookie[VerdocsStateService.ACCESS_TOKEN_NAME]) {\n        this.accessToken = cookie[VerdocsStateService.ACCESS_TOKEN_NAME];\n        return this.accessToken;\n      }\n    }\n  }\n\n  getAccountAccessToken() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie = this.getAccountCookieObject();\n      if (cookie && cookie[VerdocsStateService.ACCESS_TOKEN_NAME]) {\n        this.accessToken = cookie[VerdocsStateService.ACCESS_TOKEN_NAME];\n        return this.accessToken;\n      }\n    }\n  }\n\n  getIDToken() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie = this.getAccountCookieObject();\n      if (cookie && cookie[VerdocsStateService.ID_TOKEN_NAME]) {\n        this.idToken = cookie[VerdocsStateService.ID_TOKEN_NAME]\n        this.decodedIdTokenSubject.next(helper.decodeToken(this.idToken));\n        return this.idToken;\n      }\n    }\n    return null;\n  }\n\n  getLoginURL() {\n    return this.loginURL;\n  }\n\n  setTimer(state: boolean) {\n    this.timerActive = state;\n  }\n\n  public getUserId(): string | null {\n    const idToken = this.getIDToken();\n    if (!!idToken) {\n      const idTokenContent = this.tokenToObject(idToken);\n      if (idTokenContent['sub']) {\n        return idTokenContent['sub'].replace('auth0|', '');\n      }\n      return null;\n    }\n    return;\n  }\n\n  public getAppUserId(appName?: string): string | null {\n    if (isPlatformBrowser(this.platform)) {\n      if (!appName) {\n        appName = VerdocsStateService.RACCOUNT_COOKIE_NAME;\n      }\n      const cookie = this.cookieService.getObject(appName);\n      let idToken;\n      if (cookie && cookie[VerdocsStateService.ID_TOKEN_NAME]) {\n        idToken = cookie[VerdocsStateService.ID_TOKEN_NAME];\n        const idTokenContent = this.tokenToObject(idToken);\n        if (idTokenContent['sub']) {\n          return idTokenContent['sub'].replace('auth0|', '');\n        }\n      }\n      return null;\n    }\n    return;\n  }\n\n  updateCookie(key: string, value: string, cookieName?: string) {\n    if (isPlatformBrowser(this.platform)) {\n      const cName = cookieName ? cookieName : this.cookieName;\n      this.cookieConfig.domain = this.getDomain();\n      if (window && window.location && location.protocol === 'https:') {\n        this.cookieConfig.secure = true;\n      }\n      let rAccountCookie = this.getrAccountCookieObject();\n      let otherCookie = this.getOtherCookieObject(cName);\n      let cookie;\n      if (!!cName && !!key && !!value) {\n        if (cName === VerdocsStateService.RACCOUNT_COOKIE_NAME && !!rAccountCookie) {\n          rAccountCookie[key] = value;\n          cookie = rAccountCookie;\n        } else if (!!otherCookie) {\n          otherCookie[key] = value;\n          cookie = otherCookie;\n        }\n        this.cookieService.putObject(cName, cookie, this.cookieConfig);\n      }\n    }\n  }\n\n  updateTokens(rSecureBackend) {\n    if (isPlatformBrowser(this.platform)) {\n      return this.getTokens(rSecureBackend).pipe(\n        map((tokens: any[]) => {\n          for (let x = 0; x < tokens.length; x++) {\n            if (tokens[x].clientName === 'rAccount') {\n              this.updateCookie(VerdocsStateService.ID_TOKEN_NAME, tokens[x].idToken, tokens[x].clientName + VerdocsStateService.COOKIE_NAME_SUFFIX);\n              this.decodedIdTokenSubject.next(helper.decodeToken(tokens[x].idToken));\n            }\n            this.updateCookie(VerdocsStateService.ACCESS_TOKEN_NAME, tokens[x].accessToken, tokens[x].clientName + VerdocsStateService.COOKIE_NAME_SUFFIX);\n          }\n          return tokens;\n        })\n      );\n    }\n  }\n\n  hasCookie() {\n    return !!this.cookieService.get(this.cookieName);\n  }\n\n  getAccessList() {\n    if (isPlatformBrowser(this.platform)) {\n      this.getAllCookies();\n      this.accessList = [];\n      for (const cookie in this.cookies) {\n        if (cookie.indexOf(VerdocsStateService.COOKIE_NAME_SUFFIX) !== -1) {\n          this.accessList.push(cookie);\n        }\n      }\n      return this.accessList;\n    }\n  }\n\n  getEmailVerification(): boolean {\n    if (isPlatformBrowser(this.platform)) {\n      const idToken = this.getIDToken();\n      if (!!idToken) {\n        const idTokenContent = this.tokenToObject(idToken);\n        return idTokenContent['email_verified'];\n      }\n      return false;\n    }\n  }\n\n  hasAccessTo(clientName: string) {\n    return this.accessList.indexOf(clientName) !== -1;\n  }\n\n  storeOtherCookie(key, value) {\n    if (isPlatformBrowser(this.platform)) {\n      this.setCookie(key, value);\n    }\n  }\n\n  getOtherCookie(key) {\n    if (isPlatformBrowser(this.platform)) {\n      try {\n        if (key) {\n          const value = this.cookieService.getObject(key);\n          return value;\n        } else {\n          return null;\n        }\n      } catch (err) {\n        console.error('Cannot return cookie:', err);\n        return null;\n      }\n    }\n  }\n\n  getRCookie(key: string) {\n    if (isPlatformBrowser(this.platform)) {\n      return this.cookieService.get(key);\n    }\n  }\n\n  getOtherCookieObject(key) {\n    try {\n      if (!!key) {\n        if (isPlatformBrowser(this.platform)) {\n          return this.cookieService.getObject(key);\n        }\n      }\n      return null;\n    } catch (err) {\n      if (key !== VerdocsStateService.SIGNER_TOKEN_COOKIE_NAME) {\n        console.error('Cannot get cookie: ', err);\n      }\n      return null;\n    }\n  }\n\n  removeRCookie(key) {\n    if (isPlatformBrowser(this.platform)) {\n      this.cookieService.remove(key, this.cookieConfig);\n    }\n  }\n\n  removeRCookies() {\n    if (isPlatformBrowser(this.platform)) {\n      if (this.accessList.length > 0) {\n        for (const key of this.accessList) {\n          this.removeRCookie(key);\n        }\n      };\n    }\n  }\n\n  removeIntercomCookie() {\n    if (isPlatformBrowser(this.platform)) {\n      for (const cookie in this.cookies) {\n        if (cookie.indexOf('intercom') !== -1) {\n          this.removeRCookie(cookie);\n        }\n      }\n    }\n  }\n\n  setTokens(tokens) {\n    if (isPlatformBrowser(this.platform)) {\n      if (tokens && tokens.length > 0) {\n        for (const token of tokens) {\n          if (token.clientName === 'rAccount') {\n            this.updateCookie(VerdocsStateService.ID_TOKEN_NAME, token.idToken, token.clientName + VerdocsStateService.COOKIE_NAME_SUFFIX);\n            this.decodedIdTokenSubject.next(helper.decodeToken(token.idToken));\n          }\n          this.updateCookie(VerdocsStateService.ACCESS_TOKEN_NAME, token.accessToken, token.clientName + VerdocsStateService.COOKIE_NAME_SUFFIX);\n        }\n      }\n    }\n  }\n\n  private getrAccountCookieObject() {\n    if (isPlatformBrowser(this.platform)) {\n      try {\n        if (this.cookieName && this.cookieService.get(VerdocsStateService.RACCOUNT_COOKIE_NAME)) {\n          const cookie = this.cookieService.getObject(VerdocsStateService.RACCOUNT_COOKIE_NAME);\n          return cookie;\n        }\n        return null;\n      } catch (err) {\n        return null;\n      }\n    }\n  }\n\n  private getAllCookies() {\n    if (isPlatformBrowser(this.platform)) {\n      this.cookies = this.cookieService.getAll();\n    }\n  }\n\n  private tokenToObject(token) {\n    if (token) {\n      const base64Url = token.split('.')[1];\n      var base64 = base64Url.replace('-', '+').replace('_', '/');\n      return JSON.parse(window.atob(base64));\n    }\n    return null;\n  }\n\n  private setCookie(cookieName, cookieValue) {\n    if (isPlatformBrowser(this.platform)) {\n      this.cookieService.put(cookieName, cookieValue, this.cookieConfig);\n    }\n  }\n\n  private getTokens(rSecureBackend) {\n    return this.http.get(rSecureBackend + '/token')\n  }\n\n  public getRAccountRoles() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie = this.cookieService.getObject(VerdocsStateService.RACCOUNT_COOKIE_NAME);\n      if (!!cookie) {\n        try {\n          const accessToken = cookie[VerdocsStateService.ACCESS_TOKEN_NAME];\n          const tokenObject = this.tokenToObject(accessToken);\n          return tokenObject[`${VerdocsStateService.TOKEN_NAMESPACE}/roles`];\n        } catch (err) {\n          console.error(err);\n        }\n      } else {\n        return null;\n      }\n    }\n  }\n\n  public getPlans() {\n    if (isPlatformBrowser(this.platform)) {\n      const cookie = this.cookieService.getObject(VerdocsStateService.RACCOUNT_COOKIE_NAME);\n      if (!!cookie) {\n        try {\n          const accessToken = cookie[VerdocsStateService.ACCESS_TOKEN_NAME];\n          const tokenObject = this.tokenToObject(accessToken);\n          return tokenObject[`${VerdocsStateService.TOKEN_NAMESPACE}/plans`];\n        } catch (err) {\n          console.error(err);\n        }\n      } else {\n        return null;\n      }\n    }\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\n\nimport { VerdocsStateService } from '../services/state.service';\n\n@Injectable()\nexport class VerdocsRequestInterceptor implements HttpInterceptor {\n  private stateService: VerdocsStateService;\n  constructor(\n    private injector: Injector\n  ) { }\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\n    this.stateService = this.injector.get(VerdocsStateService);\n    const accessToken = this.stateService.getAccessToken();\n    const idToken = this.stateService.getIDToken();\n    const signerToken = this.stateService.getOtherCookieObject('signer_token');\n    const setHeaders = {\n      Pragma: 'no-cache',\n      'Cache-Control': 'no-cache',\n      Expires: 'Sat, 01 Jan 2000 00:00:00 GMT',\n      'If-Modified-Since': '0'\n    };\n\n    if (request.url.startsWith('assets/')) {\n      return next.handle(request);\n    }\n\n    if (!request.headers.get('Authorization') && accessToken) {\n      setHeaders['Authorization'] = `Bearer ${accessToken}`;\n    }\n    if (idToken) {\n      setHeaders['Authentication'] = `Bearer ${idToken}`;\n    }\n    if (signerToken) {\n      setHeaders['Signer'] = `Bearer ${signerToken}`;\n    }\n    request = request.clone({ setHeaders });\n\n    return next.handle(request)\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\n\nimport { VerdocsStateService } from './state.service';\n\nconst helper = new JwtHelperService();\n@Injectable()\nexport class VerdocsAuthService {\n\n  constructor(\n    private stateService: VerdocsStateService\n  ) {}\n  \n  public isAuthenticated() {\n    const token = this.stateService.getIDToken();\n    if (token) {\n      const isTokenExpired = helper.isTokenExpired(token);\n      return !isTokenExpired;\n    }\n    return false;\n  }\n}\n","import { Injectable, Inject, forwardRef } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\nimport { VerdocsAuthService } from './auth.service';\nimport { VerdocsStateService } from './state.service';\n\n@Injectable()\nexport class VerdocsAuthGuardService {\n  private signOutRequestSubmitted = false;\n\n  // handle redirects based on authentication state\n  constructor(\n    @Inject(forwardRef(() => VerdocsAuthService)) private authService: VerdocsAuthService,\n    @Inject(forwardRef(() => VerdocsStateService)) private stateService: VerdocsStateService,\n    private route: ActivatedRoute,\n  ) {\n    const snapshot = <ActivatedRouteSnapshot>this.route.snapshot\n  }\n\n  checkLogin() {\n    if (!this.authService.isAuthenticated) {\n      if (this.stateService.getLoginURL()) {\n        this.signOut();\n      }\n    }\n    this.stateService.watchAuthentication();\n  }\n\n  checkAuthentication() {\n    const authenticated = this.authService.isAuthenticated();\n    if (!authenticated) {\n      this.signOut();\n    }\n  }\n\n  signOut(redirectUrl?: string) {\n    if (!this.signOutRequestSubmitted) {\n      this.signOutRequestSubmitted = true;\n      if (!this.authService.isAuthenticated()) {\n        redirectUrl = window.location.href\n      }\n      this.stateService.removeRCookies();\n      this.stateService.removeIntercomCookie();\n      const redirectUrlParam = (this.stateService.getLoginURL() && this.stateService.getLoginURL().includes('?') ? '&' : '?') + 'redirect_url';\n      window.location.href = this.stateService.getLoginURL() + (redirectUrl ? `${redirectUrlParam}=${redirectUrl}` : '');\n    }\n  }\n}\n","import { Injectable, Injector, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common'\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpInterceptor,\n  HttpErrorResponse\n} from '@angular/common/http';\nimport { catchError } from 'rxjs/operators';\n\nimport { VerdocsAuthGuardService } from '../services/authguard.service';\nimport { VerdocsStateService } from '../services/state.service';\nimport { throwError } from 'rxjs';\n\n\n@Injectable()\nexport class VerdocsErrorInterceptor implements HttpInterceptor {\n  private authGuardService: VerdocsAuthGuardService;\n  private stateService: VerdocsStateService;\n  constructor(\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platform\n  ) { }\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\n    return next.handle(request).pipe(\n      catchError(err => {\n        if (err instanceof HttpErrorResponse) {\n          if (err['status'] === 403) {\n            this.stateService = this.injector.get(VerdocsStateService);\n            let redirectUrl;\n            if (isPlatformBrowser(this.platform) && err['error'] && err['error']['reason'] === 'expired') {\n              redirectUrl = window.location.href\n            }\n            this.authGuardService = this.injector.get(VerdocsAuthGuardService);\n            this.authGuardService.signOut(redirectUrl);\n          }\n          return throwError(err);\n        }\n      })\n    );\n  }\n}","import { Injectable, Injector } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpInterceptor,\n  HttpResponse\n} from '@angular/common/http';\nimport { map } from 'rxjs/operators';\n\nimport { VerdocsStateService } from '../services/state.service';\n\n\n@Injectable()\nexport class VerdocsResponseInterceptor implements HttpInterceptor {\n  private stateService: VerdocsStateService;\n  constructor(\n    private injector: Injector\n  ) {}\n  intercept(request: HttpRequest<any>, next: HttpHandler) {\n    this.stateService = this.injector.get(VerdocsStateService);\n    return next.handle(request).pipe(\n      map((event: HttpResponse<any>) => {\n        if (!!event.headers) {\n          const accessToken = event.headers.get('x-access-token');\n          const idToken = event.headers.get('x-id-token');\n          if (accessToken) {\n            this.stateService.updateCookie('accessToken', accessToken);\n          }\n          if (idToken) {\n            this.stateService.updateCookie('idToken', idToken);\n          }\n        }\n        return event;\n      })\n    )\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { VerdocsStateService } from './state.service';\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class VerdocsTokenObjectService {\n  private static TOKEN_NAMESPACE = 'https://verdocs.com';\n  constructor(\n    private stateService: VerdocsStateService,\n  ) { }\n\n  getAccessToken() {\n    return this.tokenToObject(this.stateService.getAccessToken());\n  }\n  getIDToken() {\n    return this.tokenToObject(this.stateService.getIDToken());\n  }\n\n  getAccountAccessToken() {\n    return this.tokenToObject(this.stateService.getAccountAccessToken());\n  }\n\n  getVerdocsAccessToken() {\n    return this.tokenToObject(this.stateService.getVerdocsAccessToken());\n  }\n\n  getProfile() {\n    return this.getIDToken() ? this.getIDToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/profile`] : null;\n  }\n\n  getPermissions() {\n    return this.getAccessToken() ? this.getAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/permissions`] : null;\n  }\n\n  getAccountPermissions() {\n    return this.getAccountAccessToken() ? this.getAccountAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/permissions`] : null;\n  }\n  \n  getVerdocsPermissions() {\n    return this.getVerdocsAccessToken() ? this.getVerdocsAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/permissions`] : null;\n  }\n\n  getPlans() {\n    return this.getAccessToken() ? this.getAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/plans`] : this.getAccountPlans() ? this.getAccountPlans() : this.getVerdocsPlans() ? this.getVerdocsPlans() : null;\n  }\n\n  getOrganizationID() {\n    return this.getAccountAccessToken() ? this.getAccountAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/organization_id`] : null;\n  }\n\n  getAccountPlans() {\n    return this.getAccountAccessToken() ? this.getAccountAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/plans`] : null;\n  }\n\n  getVerdocsPlans() {\n    return this.getVerdocsAccessToken() ? this.getVerdocsAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/plans`] : null;\n  }\n\n  getRoles() {\n    return this.getAccessToken() ? this.getAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/roles`] : this.getAccountRoles() ? this.getAccountRoles() : this.getVerdocsRoles() ? this.getVerdocsRoles() : null;\n  }\n\n  getAccountRoles() {\n    return this.getAccountAccessToken() ? this.getAccountAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/roles`] : null;\n  }\n\n  getVerdocsRoles() {\n    return this.getVerdocsAccessToken() ? this.getVerdocsAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/roles`] : null;\n  }\n\n  getProfileID() {\n    return this.getAccessToken() ? this.getAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/profile_id`] : this.getAccountAccessToken() ? this.getAccountAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/profile_id`] : this.getVerdocsAccessToken() ? this.getVerdocsAccessToken()[`${VerdocsTokenObjectService.TOKEN_NAMESPACE}/profile_id`] : null;\n  }\n\n  getUserID() {\n    const sub = this.getAccessToken()['sub'] || this.getAccountAccessToken()['sub'];\n    const idStart = sub.indexOf('|') + 1;\n    return this.getAccessToken()['sub'].slice(idStart);\n  }\n\n  tokenToObject(token) {\n    if (token) {\n      const base64Url = token.split('.')[1];\n      var base64 = base64Url.replace('-', '+').replace('_', '/');\n      return JSON.parse(window.atob(base64));\n    }\n    return null;\n  }\n\n}\n","import { Component, Inject, OnInit, forwardRef } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\nimport { VerdocsAuthGuardService } from '../services/authguard.service';\nimport { VerdocsStateService } from '../services/state.service';\nimport { EmailVerificationData } from '../models/email-verification-data.model';\n\n@Component({\n  selector: 'verdocs-verify-email-dialog.component',\n  templateUrl: 'verify-email-dialog.component.html',\n  styleUrls: ['verify-email-dialog.component.scss']\n})\n\nexport class VerifyEmailDialogComponent implements OnInit {\n  constructor(\n    private dialogRef: MatDialogRef<VerifyEmailDialogComponent>,\n    @Inject(forwardRef(() => VerdocsAuthGuardService)) private vTokenAuthGuard: VerdocsAuthGuardService,\n    @Inject(forwardRef(() => VerdocsStateService)) private vTokenStateService: VerdocsStateService,\n    @Inject(MAT_DIALOG_DATA) public data: EmailVerificationData\n  ) { }\n\n  ngOnInit() {\n    setInterval(() => {\n      if (this.vTokenStateService.getEmailVerification()) {\n        this.closeDialog();\n      }\n    }, 10000);\n  }\n\n  signOut() {\n    this.vTokenAuthGuard.signOut(window.location.href);\n  }\n\n  resendEmailVerification() {\n    this.data.resendEmailVerification();\n  }\n\n  closeDialog() {\n    this.dialogRef.close();\n  }\n}\n","import { Directive, Output, Input, OnInit, EventEmitter, Inject, forwardRef, OnDestroy, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { MatDialog } from '@angular/material';\nimport { Subscription } from 'rxjs';\nimport { VerifyEmailDialogComponent } from '../dialogs/verify-email-dialog.component';\nimport { VerdocsAuthGuardService } from '../services/authguard.service';\nimport { VerdocsStateService } from '../services/state.service';\nimport { VerdocsAuthService } from '../services/auth.service';\nimport { EmailVerificationData } from '../models/email-verification-data.model';\n\n@Directive({\n  selector: '[verdocs-guard]'\n})\nexport class VerdocsTokenGuardDirective implements OnInit, OnDestroy {\n  private verifyEmailDialogIsOpen = false;\n  private emailAddress: string;\n  private idTokenSubscription = new Subscription();\n\n  @Output() private resendEmailVerificationEvent = new EventEmitter();\n  @Input() private enforceAuthentication;\n\n  constructor(\n    private dialog: MatDialog,\n    @Inject(forwardRef(() => VerdocsAuthGuardService)) private verdocsAuthGuard: VerdocsAuthGuardService,\n    @Inject(forwardRef(() => VerdocsStateService)) private verdocsStateService: VerdocsStateService,\n    @Inject(forwardRef(() => VerdocsAuthService)) private verdocsAuthService: VerdocsAuthService,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n  }\n\n  ngOnInit() {\n    this.idTokenSubscription = this.verdocsStateService.decodedIdTokenSubject.subscribe(decodedIdToken => {\n      this.emailAddress = decodedIdToken.email;\n    });\n    setInterval(() => {\n      if (this.enforceAuthentication) {\n        this.verdocsAuthGuard.checkAuthentication();\n      }\n      if (this.verdocsAuthService.isAuthenticated()) {\n        this.checkEmailVerification();\n      }\n    }, 5000);\n  }\n\n  ngOnDestroy() {\n    this.idTokenSubscription.unsubscribe();\n  }\n\n  private checkEmailVerification() {\n    const emailVerified = this.verdocsStateService.getEmailVerification()\n    if (!emailVerified && !this.verifyEmailDialogIsOpen && isPlatformBrowser(this.platform)) {\n      this.verifyEmailDialogIsOpen = true;\n      const email_data: EmailVerificationData = {\n        resendEmailVerification: () => this.resendEmailVerification(),\n        emailAddress: this.emailAddress\n      }\n      const verifyEmailDialog = this.dialog.open(VerifyEmailDialogComponent, {\n        data: email_data,\n        disableClose: true\n      });\n      verifyEmailDialog.afterClosed().subscribe(() => {\n        this.verifyEmailDialogIsOpen = false;\n        location.reload();\n      });\n    }\n  }\n\n  resendEmailVerification() {\n    this.resendEmailVerificationEvent.emit();\n  }\n}\n","import { NgModule, InjectionToken } from '@angular/core';\n\nimport { VerdocsRequestInterceptor } from './interceptors/request.interceptor';\nimport { VerdocsErrorInterceptor } from './interceptors/error.interceptor';\nimport { VerdocsResponseInterceptor } from './interceptors/response.interceptor';\n\nimport { CookieModule } from 'ngx-cookie';\nimport { VerdocsAuthService } from './services/auth.service';\nimport { VerdocsAuthGuardService } from './services/authguard.service';\nimport { VerdocsStateService } from './services/state.service';\nimport { VerdocsTokenObjectService } from './services/token.service';\n\nimport { VerdocsTokenGuardDirective } from './directives/realster-guard.directive';\nimport { VerifyEmailDialogComponent } from './dialogs/verify-email-dialog.component';\nimport { MatButtonModule, MatDialogModule } from '@angular/material';\n\nexport interface VTokenConfig {\n  production: boolean;\n  domain: string;\n  cookieName: string;\n  loginURL: string;\n  verdocs_name?: string;\n  account_name?: string;\n  origin?: 'rAccount' | 'rForm';\n}\n\nexport const VTokenConfigToken = new InjectionToken<VTokenConfig>('VTokenConfig');\n\n@NgModule({\n  imports: [\n    CookieModule.forRoot(),\n    MatButtonModule,\n    MatDialogModule,\n  ],\n  declarations: [\n    VerdocsTokenGuardDirective,\n    VerifyEmailDialogComponent\n  ],\n  providers: [\n    VerdocsResponseInterceptor,\n    VerdocsRequestInterceptor,\n    VerdocsErrorInterceptor,\n    VerdocsAuthService,\n    VerdocsAuthGuardService,\n    VerdocsStateService,\n    VerdocsTokenObjectService\n  ],\n  entryComponents: [\n    VerifyEmailDialogComponent\n  ],\n  exports: [\n    VerdocsTokenGuardDirective,\n    VerifyEmailDialogComponent\n  ]\n})\nexport class TokensModule {\n  static initInterceptor(config: VTokenConfig) {\n    return {\n      ngModule: TokensModule,\n      providers: [\n        {\n          provide: VTokenConfigToken,\n          useValue: config\n        }\n      ]\n    }\n  }\n}\n"],"names":["helper"],"mappings":"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"}