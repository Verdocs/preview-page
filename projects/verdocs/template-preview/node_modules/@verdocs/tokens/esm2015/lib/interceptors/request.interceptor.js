/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, Injector } from '@angular/core';
import { VerdocsStateService } from '../services/state.service';
export class VerdocsRequestInterceptor {
    /**
     * @param {?} injector
     */
    constructor(injector) {
        this.injector = injector;
    }
    /**
     * @param {?} request
     * @param {?} next
     * @return {?}
     */
    intercept(request, next) {
        this.stateService = this.injector.get(VerdocsStateService);
        /** @type {?} */
        const accessToken = this.stateService.getAccessToken();
        /** @type {?} */
        const idToken = this.stateService.getIDToken();
        /** @type {?} */
        const signerToken = this.stateService.getOtherCookieObject('signer_token');
        /** @type {?} */
        const setHeaders = {
            Pragma: 'no-cache',
            'Cache-Control': 'no-cache',
            Expires: 'Sat, 01 Jan 2000 00:00:00 GMT',
            'If-Modified-Since': '0'
        };
        if (request.url.startsWith('assets/')) {
            return next.handle(request);
        }
        if (!request.headers.get('Authorization') && accessToken) {
            setHeaders['Authorization'] = `Bearer ${accessToken}`;
        }
        if (idToken) {
            setHeaders['Authentication'] = `Bearer ${idToken}`;
        }
        if (signerToken) {
            setHeaders['Signer'] = `Bearer ${signerToken}`;
        }
        request = request.clone({ setHeaders });
        return next.handle(request);
    }
}
VerdocsRequestInterceptor.decorators = [
    { type: Injectable }
];
/** @nocollapse */
VerdocsRequestInterceptor.ctorParameters = () => [
    { type: Injector }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    VerdocsRequestInterceptor.prototype.stateService;
    /**
     * @type {?}
     * @private
     */
    VerdocsRequestInterceptor.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5pbnRlcmNlcHRvci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B2ZXJkb2NzL3Rva2Vucy8iLCJzb3VyY2VzIjpbImxpYi9pbnRlcmNlcHRvcnMvcmVxdWVzdC5pbnRlcmNlcHRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFRckQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFHaEUsTUFBTSxPQUFPLHlCQUF5Qjs7OztJQUVwQyxZQUNVLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7SUFDeEIsQ0FBQzs7Ozs7O0lBQ0wsU0FBUyxDQUFDLE9BQXlCLEVBQUUsSUFBaUI7UUFDcEQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztjQUNyRCxXQUFXLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUU7O2NBQ2hELE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRTs7Y0FDeEMsV0FBVyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDOztjQUNwRSxVQUFVLEdBQUc7WUFDakIsTUFBTSxFQUFFLFVBQVU7WUFDbEIsZUFBZSxFQUFFLFVBQVU7WUFDM0IsT0FBTyxFQUFFLCtCQUErQjtZQUN4QyxtQkFBbUIsRUFBRSxHQUFHO1NBQ3pCO1FBRUQsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNyQyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDN0I7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksV0FBVyxFQUFFO1lBQ3hELFVBQVUsQ0FBQyxlQUFlLENBQUMsR0FBRyxVQUFVLFdBQVcsRUFBRSxDQUFDO1NBQ3ZEO1FBQ0QsSUFBSSxPQUFPLEVBQUU7WUFDWCxVQUFVLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxVQUFVLE9BQU8sRUFBRSxDQUFDO1NBQ3BEO1FBQ0QsSUFBSSxXQUFXLEVBQUU7WUFDZixVQUFVLENBQUMsUUFBUSxDQUFDLEdBQUcsVUFBVSxXQUFXLEVBQUUsQ0FBQztTQUNoRDtRQUNELE9BQU8sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUV4QyxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDN0IsQ0FBQzs7O1lBbENGLFVBQVU7Ozs7WUFWVSxRQUFROzs7Ozs7O0lBWTNCLGlEQUEwQzs7Ozs7SUFFeEMsNkNBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIEh0dHBSZXF1ZXN0LFxuICBIdHRwSGFuZGxlcixcbiAgSHR0cEV2ZW50LFxuICBIdHRwSW50ZXJjZXB0b3Jcbn0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5pbXBvcnQgeyBWZXJkb2NzU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvc3RhdGUuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBWZXJkb2NzUmVxdWVzdEludGVyY2VwdG9yIGltcGxlbWVudHMgSHR0cEludGVyY2VwdG9yIHtcbiAgcHJpdmF0ZSBzdGF0ZVNlcnZpY2U6IFZlcmRvY3NTdGF0ZVNlcnZpY2U7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yXG4gICkgeyB9XG4gIGludGVyY2VwdChyZXF1ZXN0OiBIdHRwUmVxdWVzdDxhbnk+LCBuZXh0OiBIdHRwSGFuZGxlcikge1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQoVmVyZG9jc1N0YXRlU2VydmljZSk7XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLnN0YXRlU2VydmljZS5nZXRBY2Nlc3NUb2tlbigpO1xuICAgIGNvbnN0IGlkVG9rZW4gPSB0aGlzLnN0YXRlU2VydmljZS5nZXRJRFRva2VuKCk7XG4gICAgY29uc3Qgc2lnbmVyVG9rZW4gPSB0aGlzLnN0YXRlU2VydmljZS5nZXRPdGhlckNvb2tpZU9iamVjdCgnc2lnbmVyX3Rva2VuJyk7XG4gICAgY29uc3Qgc2V0SGVhZGVycyA9IHtcbiAgICAgIFByYWdtYTogJ25vLWNhY2hlJyxcbiAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcbiAgICAgIEV4cGlyZXM6ICdTYXQsIDAxIEphbiAyMDAwIDAwOjAwOjAwIEdNVCcsXG4gICAgICAnSWYtTW9kaWZpZWQtU2luY2UnOiAnMCdcbiAgICB9O1xuXG4gICAgaWYgKHJlcXVlc3QudXJsLnN0YXJ0c1dpdGgoJ2Fzc2V0cy8nKSkge1xuICAgICAgcmV0dXJuIG5leHQuaGFuZGxlKHJlcXVlc3QpO1xuICAgIH1cblxuICAgIGlmICghcmVxdWVzdC5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpICYmIGFjY2Vzc1Rva2VuKSB7XG4gICAgICBzZXRIZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7YWNjZXNzVG9rZW59YDtcbiAgICB9XG4gICAgaWYgKGlkVG9rZW4pIHtcbiAgICAgIHNldEhlYWRlcnNbJ0F1dGhlbnRpY2F0aW9uJ10gPSBgQmVhcmVyICR7aWRUb2tlbn1gO1xuICAgIH1cbiAgICBpZiAoc2lnbmVyVG9rZW4pIHtcbiAgICAgIHNldEhlYWRlcnNbJ1NpZ25lciddID0gYEJlYXJlciAke3NpZ25lclRva2VufWA7XG4gICAgfVxuICAgIHJlcXVlc3QgPSByZXF1ZXN0LmNsb25lKHsgc2V0SGVhZGVycyB9KTtcblxuICAgIHJldHVybiBuZXh0LmhhbmRsZShyZXF1ZXN0KVxuICB9XG59XG4iXX0=