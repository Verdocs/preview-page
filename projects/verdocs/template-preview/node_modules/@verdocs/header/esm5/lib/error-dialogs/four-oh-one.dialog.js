/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector } from '@angular/core';
import { VerdocsTokenObjectService } from '@verdocs/tokens';
import { Router } from '@angular/router';
import { connectionConfigToken } from '../header.module';
var FourOhOneDialog = /** @class */ (function () {
    function FourOhOneDialog(router, verdocsTokenObjectService, injector) {
        this.router = router;
        this.verdocsTokenObjectService = verdocsTokenObjectService;
        this.injector = injector;
        this.error = null;
        this.currentProfile = null;
        this.error_code = null;
        this.error_title = null;
        this.error_message = null;
        this.tokenConfig = this.injector.get(connectionConfigToken);
        this.rSecureUrl = this.tokenConfig.rSecure_frontend_url;
        this.rFormUrl = this.tokenConfig.rForm_frontend_url;
    }
    /**
     * @return {?}
     */
    FourOhOneDialog.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.currentProfile = this.verdocsTokenObjectService.getProfile();
        if (this.error && this.error.hasOwnProperty('error')) {
            this.error_code = this.error.error.code || null;
            if (this.error_code) {
                this.prepareErroContent();
            }
        }
    };
    /**
     * @return {?}
     */
    FourOhOneDialog.prototype.prepareErroContent = /**
     * @return {?}
     */
    function () {
        switch (this.error_code) {
            case 'AUTH0002':
            case 'T000001':
                this.error_title = 'This document is not accessible';
                this.error_message = (this.currentProfile ? 'Try using a different organization/account, ' : 'Try signing in, signing up, ') + 'or requesting access from the owner of this document.';
                break;
            case 'AUTH0003':
                this.error_title = 'Cannot complete your request';
                this.error_message = 'Try after ' + (this.currentProfile ? 'signing in again.' : 'signing in or signing up.');
                break;
            default:
                this.error_title = 'Your request has been denied.';
                this.error_message = null;
                break;
        }
    };
    /**
     * @return {?}
     */
    FourOhOneDialog.prototype.goToDashboard = /**
     * @return {?}
     */
    function () {
        this.router.navigate(['/dashboard']);
    };
    /**
     * @return {?}
     */
    FourOhOneDialog.prototype.signIn = /**
     * @return {?}
     */
    function () {
        if (window) {
            window.location.href = this.rSecureUrl + "/login?redirect_url=" + (this.rFormUrl + this.router.url);
        }
    };
    /**
     * @return {?}
     */
    FourOhOneDialog.prototype.signUp = /**
     * @return {?}
     */
    function () {
        if (window) {
            window.location.href = this.rSecureUrl + "/signup?redirect_url=" + (this.rFormUrl + this.router.url);
        }
    };
    FourOhOneDialog.decorators = [
        { type: Component, args: [{
                    selector: 'four-oh-one-dialog',
                    template: "<div class=\"error__container\">\n  <div class=\"error__title\">\n    {{error_title}}\n  </div>\n  <div class=\"error__body\" *ngIf=\"error_message\">\n    {{error_message}}\n  </div>\n  <div class=\"error__action\">\n    <button class=\"error__action-button left\" mat-button *ngIf=\"currentProfile\" (click)=\"goToDashboard()\">go to dashboard</button>\n    <button class=\"error__action-button left\" mat-button *ngIf=\"!currentProfile\" (click)=\"signUp()\">sign up</button>\n    <button class=\"error__action-button\" mat-button (click)=\"signIn()\">sign in</button>\n  </div>\n</div>",
                    styles: [".error__container{padding-top:8px;padding-left:8px;padding-right:8px;max-width:640px}.error__title{padding:16px 16px 8px;font-size:20px;line-height:24px;font-weight:500;color:rgba(0,0,0,.87)}.error__body{padding:16px 16px 8px;font-size:16px;line-height:24px;color:rgba(0,0,0,.54)}.error__action{padding:8px;text-align:right}.error__action-button{color:#37474f;text-transform:uppercase}.error__action-button.left{margin-right:8px}"]
                }] }
    ];
    /** @nocollapse */
    FourOhOneDialog.ctorParameters = function () { return [
        { type: Router },
        { type: VerdocsTokenObjectService },
        { type: Injector }
    ]; };
    return FourOhOneDialog;
}());
export { FourOhOneDialog };
if (false) {
    /** @type {?} */
    FourOhOneDialog.prototype.error;
    /** @type {?} */
    FourOhOneDialog.prototype.tokenConfig;
    /** @type {?} */
    FourOhOneDialog.prototype.currentProfile;
    /** @type {?} */
    FourOhOneDialog.prototype.error_code;
    /** @type {?} */
    FourOhOneDialog.prototype.error_title;
    /** @type {?} */
    FourOhOneDialog.prototype.error_message;
    /** @type {?} */
    FourOhOneDialog.prototype.rSecureUrl;
    /** @type {?} */
    FourOhOneDialog.prototype.rFormUrl;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.router;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.verdocsTokenObjectService;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm91ci1vaC1vbmUuZGlhbG9nLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHZlcmRvY3MvaGVhZGVyLyIsInNvdXJjZXMiOlsibGliL2Vycm9yLWRpYWxvZ3MvZm91ci1vaC1vbmUuZGlhbG9nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM1RCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFekMsT0FBTyxFQUFvQixxQkFBcUIsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRTNFO0lBZUUseUJBQ1UsTUFBYyxFQUNkLHlCQUFvRCxFQUNwRCxRQUFrQjtRQUZsQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUEyQjtRQUNwRCxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBWnJCLFVBQUssR0FBUSxJQUFJLENBQUM7UUFFbEIsbUJBQWMsR0FBUSxJQUFJLENBQUM7UUFDM0IsZUFBVSxHQUFXLElBQUksQ0FBQztRQUMxQixnQkFBVyxHQUFXLElBQUksQ0FBQztRQUMzQixrQkFBYSxHQUFXLElBQUksQ0FBQztRQVNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDNUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLG9CQUFvQixDQUFDO1FBQ3hELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQztJQUN0RCxDQUFDOzs7O0lBRUQsa0NBQVE7OztJQUFSO1FBQ0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEUsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3BELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQztZQUNoRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2FBQzNCO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsNENBQWtCOzs7SUFBbEI7UUFDRSxRQUFPLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDdEIsS0FBSyxVQUFVLENBQUM7WUFDaEIsS0FBSyxTQUFTO2dCQUNkLElBQUksQ0FBQyxXQUFXLEdBQUcsaUNBQWlDLENBQUM7Z0JBQ3JELElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDLENBQUMsOEJBQThCLENBQUMsR0FBRyx1REFBdUQsQ0FBQztnQkFDdkwsTUFBTTtZQUNOLEtBQUssVUFBVTtnQkFDZixJQUFJLENBQUMsV0FBVyxHQUFHLDhCQUE4QixDQUFDO2dCQUNsRCxJQUFJLENBQUMsYUFBYSxHQUFHLFlBQVksR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO2dCQUM5RyxNQUFNO1lBQ047Z0JBQ0EsSUFBSSxDQUFDLFdBQVcsR0FBRywrQkFBK0IsQ0FBQztnQkFDbkQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7Z0JBQzFCLE1BQU07U0FDUDtJQUNILENBQUM7Ozs7SUFFRCx1Q0FBYTs7O0lBQWI7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQzs7OztJQUVELGdDQUFNOzs7SUFBTjtRQUNFLElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQU0sSUFBSSxDQUFDLFVBQVUsNkJBQXVCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUUsQ0FBQztTQUNuRztJQUNILENBQUM7Ozs7SUFFRCxnQ0FBTTs7O0lBQU47UUFDRSxJQUFJLE1BQU0sRUFBRTtZQUNWLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFNLElBQUksQ0FBQyxVQUFVLDhCQUF3QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFFLENBQUM7U0FDcEc7SUFDSCxDQUFDOztnQkFuRUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxvQkFBb0I7b0JBQzlCLHlsQkFBd0M7O2lCQUV6Qzs7OztnQkFSUSxNQUFNO2dCQUROLHlCQUF5QjtnQkFETixRQUFROztJQTBFcEMsc0JBQUM7Q0FBQSxBQXBFRCxJQW9FQztTQS9EWSxlQUFlOzs7SUFDMUIsZ0NBQXlCOztJQUN6QixzQ0FBb0M7O0lBQ3BDLHlDQUFrQzs7SUFDbEMscUNBQWlDOztJQUNqQyxzQ0FBa0M7O0lBQ2xDLHdDQUFvQzs7SUFDcEMscUNBQTBCOztJQUMxQixtQ0FBd0I7Ozs7O0lBR3RCLGlDQUFzQjs7Ozs7SUFDdEIsb0RBQTREOzs7OztJQUM1RCxtQ0FBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2UgfSBmcm9tICdAdmVyZG9jcy90b2tlbnMnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgY29ubmVjdGlvbkNvbmZpZywgY29ubmVjdGlvbkNvbmZpZ1Rva2VuIH0gZnJvbSAnLi4vaGVhZGVyLm1vZHVsZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2ZvdXItb2gtb25lLWRpYWxvZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9mb3VyLW9oLW9uZS5kaWFsb2cuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2ZvdXItb2gtb25lLmRpYWxvZy5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRm91ck9oT25lRGlhbG9nIGltcGxlbWVudHMgT25Jbml0IHtcbiAgcHVibGljIGVycm9yOiBhbnkgPSBudWxsO1xuICBwdWJsaWMgdG9rZW5Db25maWc6IGNvbm5lY3Rpb25Db25maWdcbiAgcHVibGljIGN1cnJlbnRQcm9maWxlOiBhbnkgPSBudWxsO1xuICBwdWJsaWMgZXJyb3JfY29kZTogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIGVycm9yX3RpdGxlOiBzdHJpbmcgPSBudWxsO1xuICBwdWJsaWMgZXJyb3JfbWVzc2FnZTogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIHJTZWN1cmVVcmw6IHN0cmluZztcbiAgcHVibGljIHJGb3JtVXJsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIHZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2U6IFZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3JcbiAgKSB7XG4gICAgdGhpcy50b2tlbkNvbmZpZyA9IHRoaXMuaW5qZWN0b3IuZ2V0KGNvbm5lY3Rpb25Db25maWdUb2tlbik7XG4gICAgdGhpcy5yU2VjdXJlVXJsID0gdGhpcy50b2tlbkNvbmZpZy5yU2VjdXJlX2Zyb250ZW5kX3VybDtcbiAgICB0aGlzLnJGb3JtVXJsID0gdGhpcy50b2tlbkNvbmZpZy5yRm9ybV9mcm9udGVuZF91cmw7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmN1cnJlbnRQcm9maWxlID0gdGhpcy52ZXJkb2NzVG9rZW5PYmplY3RTZXJ2aWNlLmdldFByb2ZpbGUoKTtcbiAgICBpZiAodGhpcy5lcnJvciAmJiB0aGlzLmVycm9yLmhhc093blByb3BlcnR5KCdlcnJvcicpKSB7XG4gICAgICB0aGlzLmVycm9yX2NvZGUgPSB0aGlzLmVycm9yLmVycm9yLmNvZGUgfHwgbnVsbDtcbiAgICAgIGlmICh0aGlzLmVycm9yX2NvZGUpIHtcbiAgICAgICAgdGhpcy5wcmVwYXJlRXJyb0NvbnRlbnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcmVwYXJlRXJyb0NvbnRlbnQoKSB7XG4gICAgc3dpdGNoKHRoaXMuZXJyb3JfY29kZSkge1xuICAgICAgY2FzZSAnQVVUSDAwMDInOlxuICAgICAgY2FzZSAnVDAwMDAwMSc6XG4gICAgICB0aGlzLmVycm9yX3RpdGxlID0gJ1RoaXMgZG9jdW1lbnQgaXMgbm90IGFjY2Vzc2libGUnO1xuICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gKHRoaXMuY3VycmVudFByb2ZpbGUgPyAnVHJ5IHVzaW5nIGEgZGlmZmVyZW50IG9yZ2FuaXphdGlvbi9hY2NvdW50LCAnIDogJ1RyeSBzaWduaW5nIGluLCBzaWduaW5nIHVwLCAnKSArICdvciByZXF1ZXN0aW5nIGFjY2VzcyBmcm9tIHRoZSBvd25lciBvZiB0aGlzIGRvY3VtZW50Lic7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0FVVEgwMDAzJzpcbiAgICAgIHRoaXMuZXJyb3JfdGl0bGUgPSAnQ2Fubm90IGNvbXBsZXRlIHlvdXIgcmVxdWVzdCc7XG4gICAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSAnVHJ5IGFmdGVyICcgKyAodGhpcy5jdXJyZW50UHJvZmlsZSA/ICdzaWduaW5nIGluIGFnYWluLicgOiAnc2lnbmluZyBpbiBvciBzaWduaW5nIHVwLicpO1xuICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgdGhpcy5lcnJvcl90aXRsZSA9ICdZb3VyIHJlcXVlc3QgaGFzIGJlZW4gZGVuaWVkLic7XG4gICAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSBudWxsO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZ29Ub0Rhc2hib2FyZCgpIHtcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9kYXNoYm9hcmQnXSk7XG4gIH1cblxuICBzaWduSW4oKSB7XG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnJTZWN1cmVVcmx9L2xvZ2luP3JlZGlyZWN0X3VybD0ke3RoaXMuckZvcm1VcmwgKyB0aGlzLnJvdXRlci51cmx9YDtcbiAgICB9XG4gIH1cblxuICBzaWduVXAoKSB7XG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnJTZWN1cmVVcmx9L3NpZ251cD9yZWRpcmVjdF91cmw9JHt0aGlzLnJGb3JtVXJsICsgdGhpcy5yb3V0ZXIudXJsfWA7XG4gICAgfVxuICB9XG59XG4iXX0=