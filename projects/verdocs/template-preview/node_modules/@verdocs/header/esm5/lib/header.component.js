/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, ElementRef, Compiler, Input, ChangeDetectorRef, Injector, Inject, PLATFORM_ID } from '@angular/core';
import { Router, NavigationEnd, NavigationStart } from '@angular/router';
import { isPlatformBrowser } from '@angular/common';
import { HttpResponse } from '@angular/common/http';
import { VerdocsStateService, VerdocsAuthService, VerdocsTokenObjectService } from '@verdocs/tokens';
import { Subscription, fromEvent } from 'rxjs';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';
import { findIndex } from 'lodash';
import { VerdocsHeaderService } from './services/header.service';
import { TemplatesGuardService } from './services/templates.guard';
import { TemplateActions } from './models/verdocs.model';
import { connectionConfigToken } from './header.module';
var HeaderComponent = /** @class */ (function () {
    function HeaderComponent(verdocsHeaderService, vTokenStateService, vTokenObjectService, vAuthService, templateGuard, router, cdr, compiler, injector, platform) {
        this.verdocsHeaderService = verdocsHeaderService;
        this.vTokenStateService = vTokenStateService;
        this.vTokenObjectService = vTokenObjectService;
        this.vAuthService = vAuthService;
        this.templateGuard = templateGuard;
        this.router = router;
        this.cdr = cdr;
        this.compiler = compiler;
        this.injector = injector;
        this.platform = platform;
        this.pageLoading = true;
        this.isAuthenticated = false;
        this.headerTitle = 'Envelope';
        this.mode = '';
        this.searchActive = false;
        this.templateName = '';
        this.newTemplateName = null;
        this.saveStatus = '';
        this.notifications = [];
        this.loading = false;
        this.csvBlob = null;
        this.templateDetailsExpanded = true;
        this.template = null;
        this.isSearching = false;
        this.currentProfile = null;
        this.inputFocused = false;
        this.isLiveView = false;
        this.app_version = '';
        this.currentAt = '';
        this._canStar = null;
        this._canCreate = null;
        this._canEdit = null;
        this._userStarred = null;
        this.metaDataSubscription = new Subscription();
        this.titleSubscription = new Subscription();
        this.titleInputSubscription = new Subscription();
        this.titleKeyDownSubscription = new Subscription();
        this.templateNameSubscription = new Subscription();
        this.templateSubscription = new Subscription();
        this.saveStatusSubscription = new Subscription();
        this.profileLoadingSubscription = new Subscription();
        this.userDataSubscription = new Subscription();
        this.modeSubscription = new Subscription();
        this.previewInputSubscription = new Subscription();
        this.generalInputSubscription = new Subscription();
        this.navigationEventSubscription = new Subscription();
        this.csvBlobSubscription = new Subscription();
        this.connections = this.injector.get(connectionConfigToken);
        this.myAccountUrl = this.connections.rAccount_frontend_url + '/rAccount';
        this.termsUrl = this.connections.rSecure_frontend_url + '/terms';
        this.privacyUrl = this.connections.rSecure_frontend_url + '/privacy';
        this.organizationImgSrc = this.connections.rAccount_frontend_url + "/assets/organization/select-profile.png";
        this.verdocs_url = this.connections.rForm_frontend_url;
        this.manageLink = this.verdocs_url + "/manage";
        this.templatesLink = this.verdocs_url + "/templates";
        this.rSecureFrontEnd = this.connections.rSecure_frontend_url;
        this.rFormFrontEnd = this.connections.rForm_frontend_url;
        this.currentOrigin = this.connections.origin;
        this.currentAt = this.currentOrigin;
    }
    /**
     * @return {?}
     */
    HeaderComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.templateSubscription = this.verdocsHeaderService.templateSubject.subscribe((/**
         * @param {?} template
         * @return {?}
         */
        function (template) {
            _this.template = template;
            _this.updateStar();
        }));
        if (isPlatformBrowser(this.platform)) {
            if (window && window.location || this.connections.app_version) {
                this.origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
            }
            if (this.origin && this.origin.includes('/stage.') || this.origin.includes('/localhost')) {
                this.app_version = this.connections.app_version;
            }
            else {
                this.app_version = '';
            }
        }
        this.isAuthenticated = this.vAuthService.isAuthenticated();
        this.emailVerified = this.vTokenStateService.getEmailVerification();
        this.navigationEventSubscription = this.router.events.subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (event instanceof NavigationEnd) {
                _this.isAuthenticated = _this.vAuthService.isAuthenticated();
                if (event && event.url && ((event.url.includes('document/') && !event.url.includes('envelopes/document')) || event.url.includes('view/live/'))) {
                    _this.isAtOriginalOrigin = _this.verdocsHeaderService.getAtOrigin(_this.currentOrigin);
                    _this.currentAt = _this.currentOrigin;
                    _this.mode = 'preview';
                    if (event.url.includes('view/live/')) {
                        _this.isLiveView = true;
                        _this.templateDetailsExpanded = false;
                    }
                    else {
                        _this.isLiveView = false;
                    }
                }
                else {
                    _this.mode = 'not-preview';
                    _this.isLiveView = false;
                }
                if (_this.mode !== 'preview') {
                    _this.image_url = _this.connections.rForm_frontend_url + "/assets/white-logo.svg";
                }
                else {
                    _this.image_url = _this.connections.rForm_frontend_url + "/assets/break-black-logo.svg";
                }
                _this.getProfile();
                _this.updateStar();
                _this.checkCanStar();
                _this._canEdit = undefined;
                _this._canCreate = undefined;
                _this.pageLoading = false;
            }
            else if (event instanceof NavigationStart) {
                _this.pageLoading = true;
            }
        }));
        this.titleSubscription = this.verdocsHeaderService.titleSubject.subscribe((/**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            if (title) {
                _this.title = title;
            }
            else {
                _this.title = null;
            }
        }));
        this.csvBlobSubscription = this.verdocsHeaderService.csvBlobSubject.subscribe((/**
         * @param {?} blob
         * @return {?}
         */
        function (blob) {
            if (blob) {
                _this.csvBlob = blob;
            }
            else {
                _this.csvBlob = null;
            }
        }));
        this.saveStatusSubscription = this.verdocsHeaderService.saveStatusSubject.subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            _this.saveStatus = status;
        }));
        this.profileLoadingSubscription = this.verdocsHeaderService.profileLoadingSubject.subscribe((/**
         * @param {?} status
         * @return {?}
         */
        function (status) {
            _this.loading = status;
        }));
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        this.cdr.detectChanges();
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.metaDataSubscription.unsubscribe();
        this.titleSubscription.unsubscribe();
        this.titleInputSubscription.unsubscribe();
        this.titleKeyDownSubscription.unsubscribe();
        this.templateNameSubscription.unsubscribe();
        this.templateSubscription.unsubscribe();
        this.saveStatusSubscription.unsubscribe();
        this.profileLoadingSubscription.unsubscribe();
        this.userDataSubscription.unsubscribe();
        this.modeSubscription.unsubscribe();
        if (!!this.generalInputSubscription) {
            this.generalInputSubscription.unsubscribe();
        }
        if (!!this.previewInputSubscription) {
            this.previewInputSubscription.unsubscribe();
        }
        this.navigationEventSubscription.unsubscribe();
        this.csvBlobSubscription.unsubscribe();
        this.compiler.clearCache();
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.init = /**
     * @return {?}
     */
    function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.vAuthService.isAuthenticated() && this.mode !== 'view')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.verdocsHeaderService.initNotificationService()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(HeaderComponent.prototype, "home_url", {
        get: /**
         * @return {?}
         */
        function () {
            return this.vTokenStateService.getIDToken() ? this.connections.rForm_frontend_url + '/dashboard' : this.connections.rForm_frontend_url;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} event
     * @return {?}
     */
    HeaderComponent.prototype.previewInputEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        clearTimeout(this.inputTimer);
        this.inputTimer = setTimeout((/**
         * @return {?}
         */
        function () {
            _this.getSearchResults(_this.previewInput.nativeElement.value);
            clearTimeout(_this.inputTimer);
        }), 500);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    HeaderComponent.prototype.generalInputEvent = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        var _this = this;
        clearTimeout(this.inputTimer);
        this.inputTimer = setTimeout((/**
         * @return {?}
         */
        function () {
            _this.getSearchResults(_this.generalInput.nativeElement.value);
            clearTimeout(_this.inputTimer);
        }), 500);
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.prepareSearchInput = /**
     * @return {?}
     */
    function () {
        if (this.mode === 'preview') {
            this.listenForPreviewInput();
        }
        else {
            this.listenForGeneralInput();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.listenForPreviewInput = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.generalInputSubscription) {
            this.generalInputSubscription.unsubscribe();
        }
        if (this.previewInput) {
            if (!this.previewInputSubscription) {
                this.previewInputSubscription = fromEvent(this.previewInput.nativeElement, 'keyup')
                    .pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
                 * @param {?} event
                 * @return {?}
                 */
                function (event) {
                    /** @type {?} */
                    var keyName = event['code'] || event['key'];
                    if (keyName) {
                        if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {
                            _this.getSearchResults(_this.previewInput.nativeElement.value);
                        }
                    }
                    else {
                        _this.getSearchResults(_this.previewInput.nativeElement.value);
                    }
                }));
            }
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.listenForGeneralInput = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.previewInputSubscription) {
            this.previewInputSubscription.unsubscribe();
        }
        if (this.generalInput) {
            if (!this.generalInputSubscription) {
                this.generalInputSubscription = fromEvent(this.generalInput.nativeElement, 'keyup')
                    .pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
                 * @param {?} event
                 * @return {?}
                 */
                function (event) {
                    /** @type {?} */
                    var keyName = event['code'] || event['key'];
                    if (keyName) {
                        if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {
                            _this.getSearchResults(_this.generalInput.nativeElement.value);
                        }
                    }
                    else {
                        _this.getSearchResults(_this.generalInput.nativeElement.value);
                    }
                }));
            }
        }
    };
    Object.defineProperty(HeaderComponent.prototype, "canStar", {
        get: /**
         * @return {?}
         */
        function () {
            return this._canStar;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HeaderComponent.prototype, "userStarred", {
        get: /**
         * @return {?}
         */
        function () {
            return this._userStarred;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HeaderComponent.prototype, "canEdit", {
        get: /**
         * @return {?}
         */
        function () {
            if (typeof (this._canEdit) !== 'boolean' && this.templateGuard && this.isAuthenticated && this.template) {
                /** @type {?} */
                var response = this.templateGuard.canPerformAction(TemplateActions.WRITE, this.template);
                this._canEdit = response['canPerform'];
            }
            if (!this.isAuthenticated && this.template) {
                this._canEdit = false;
            }
            return this._canEdit;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(HeaderComponent.prototype, "canCreate", {
        get: /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.isAuthenticated) {
                if (typeof (this._canCreate) !== 'boolean') {
                    /** @type {?} */
                    var permissions = this.vTokenObjectService.getVerdocsPermissions();
                    this._canCreate = false;
                    if (permissions && permissions.length > 0) {
                        permissions.forEach((/**
                         * @param {?} permission
                         * @return {?}
                         */
                        function (permission) {
                            if (permission.includes('creator:create')) {
                                return _this._canCreate = true;
                            }
                        }));
                    }
                }
                return this._canCreate;
            }
            else {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    HeaderComponent.prototype.getProfile = /**
     * @return {?}
     */
    function () {
        if (this.isAuthenticated) {
            this.currentProfile = this.vTokenObjectService.getProfile();
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    HeaderComponent.prototype.selected = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if ((this.generalInput && this.generalInput.nativeElement.value) || (this.previewInput && this.previewInput.nativeElement.value)) {
            event.option._element.nativeElement.click();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.checkCanStar = /**
     * @return {?}
     */
    function () {
        this._canStar = this.isAuthenticated;
    };
    /**
     * @param {?} search_string
     * @return {?}
     */
    HeaderComponent.prototype.getSearchResults = /**
     * @param {?} search_string
     * @return {?}
     */
    function (search_string) {
        var _this = this;
        this.isSearching = true;
        if (this.isAuthenticated) {
            this.verdocsHeaderService.searchEnvelopes({ envelope_name: search_string, row: 3 }).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result instanceof HttpResponse) {
                    _this.envelopeResult = (/** @type {?} */ (result.body['result']));
                    _this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe((/**
                     * @param {?} result
                     * @return {?}
                     */
                    function (result) {
                        if (result instanceof HttpResponse) {
                            _this.templateResult = (/** @type {?} */ (result.body['result']));
                            _this.isSearching = false;
                        }
                    }));
                }
            }));
        }
        else {
            this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result instanceof HttpResponse) {
                    _this.templateResult = (/** @type {?} */ (result.body['result']));
                    _this.isSearching = false;
                }
            }));
        }
    };
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    HeaderComponent.prototype.recipientTracking = /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    function (index, item) {
        return index;
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.toggleMenu = /**
     * @return {?}
     */
    function () {
        this.verdocsHeaderService.toggleSidenav(!this.sidenavOpen);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    HeaderComponent.prototype.setInputFocused = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        this.inputFocused = value;
    };
    /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    HeaderComponent.prototype.hasProp = /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    function (obj, key) {
        return obj.hasOwnProperty(key);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HeaderComponent.prototype.roleColor = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        return this.verdocsHeaderService.getRoleColor(name);
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.toggleSidenav = /**
     * @return {?}
     */
    function () {
        this.verdocsHeaderService.toggleBuilderSideNav();
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.toggleTemplateDetails = /**
     * @return {?}
     */
    function () {
        this.templateDetailsExpanded = !this.templateDetailsExpanded;
        if (this.templateDetailsExpanded) {
            this.verdocsHeaderService.templateDetailToggleSubject.next(true);
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.reset = /**
     * @return {?}
     */
    function () {
        this.templateName = 'Unititled';
        // this.verdocsHeaderService.templateNameSubject.next('Untitled');
    };
    /**
     * @param {?} roles
     * @return {?}
     */
    HeaderComponent.prototype.getRoleNames = /**
     * @param {?} roles
     * @return {?}
     */
    function (roles) {
        if (roles && roles.length > 0) {
            /** @type {?} */
            var last_index = roles.length - 1;
            /** @type {?} */
            var names_string = '';
            for (var x = 0; x < roles.length; x++) {
                if (x < last_index) {
                    names_string += (/** @type {?} */ (roles[x]['full_name'] + ', '));
                }
                else {
                    names_string += (/** @type {?} */ (roles[x]['full_name']));
                }
            }
            return names_string;
        }
    };
    /**
     * @param {?} template
     * @return {?}
     */
    HeaderComponent.prototype.getTemplateStats = /**
     * @param {?} template
     * @return {?}
     */
    function (template) {
        return this.getTemplatePages(template) + "  " + this.getTemplateSequence(template) + "  " + this.getTemplateRecipients(template);
    };
    /**
     * @param {?} template
     * @return {?}
     */
    HeaderComponent.prototype.getTemplatePages = /**
     * @param {?} template
     * @return {?}
     */
    function (template) {
        if (template && template.pages) {
            return "" + (template.pages.length >= 2 ? template.pages.length + ' Pages' : '1 Page');
        }
        else {
            return '0 Page';
        }
    };
    /**
     * @param {?} template
     * @return {?}
     */
    HeaderComponent.prototype.getTemplateSequence = /**
     * @param {?} template
     * @return {?}
     */
    function (template) {
        if (template && template.roles) {
            /** @type {?} */
            var hasPreparer = false;
            /** @type {?} */
            var maxSequence = -1;
            for (var x = 0; x < template.roles.length; x++) {
                if (template.roles[x].sequence > maxSequence) {
                    maxSequence = template.roles[x].sequence;
                }
                if (template.roles[x].sequence === 0) {
                    hasPreparer = true;
                }
            }
            /** @type {?} */
            var totalSequence = hasPreparer ? maxSequence + 1 : maxSequence;
            return totalSequence > 1 ? totalSequence + ' Sequences' : '1 Sequence';
        }
        else {
            return '0 Sequence';
        }
    };
    /**
     * @param {?} template
     * @return {?}
     */
    HeaderComponent.prototype.getTemplateRecipients = /**
     * @param {?} template
     * @return {?}
     */
    function (template) {
        if (template && template.roles) {
            /** @type {?} */
            var totalRecipients = template.roles.length;
            return totalRecipients > 1 ? totalRecipients + ' Recipients' : '1 Recipient';
        }
        else {
            return '0 Recipient';
        }
    };
    /**
     * @param {?} envelope_id
     * @return {?}
     */
    HeaderComponent.prototype.goToEnvelope = /**
     * @param {?} envelope_id
     * @return {?}
     */
    function (envelope_id) {
        if (this.currentOrigin === 'rForm' && this.isAtOriginalOrigin) {
            this.router.navigate(["/envelope/" + envelope_id]);
        }
        else {
            location.href = this.connections.rForm_frontend_url + "/envelope/" + envelope_id;
        }
        this.clearSearchInputs();
    };
    /**
     * @param {?} template
     * @return {?}
     */
    HeaderComponent.prototype.goToTemplate = /**
     * @param {?} template
     * @return {?}
     */
    function (template) {
        this.verdocsHeaderService.openTemplate(template);
        this.clearSearchInputs();
    };
    /**
     * @param {?} keyword
     * @return {?}
     */
    HeaderComponent.prototype.goToTemplates = /**
     * @param {?} keyword
     * @return {?}
     */
    function (keyword) {
        this.verdocsHeaderService.openTemplates(keyword);
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.searchEnvelopes = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate(["/manage"], { queryParams: { envelope_name: keyword } });
            this.clearSearchInputs();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.searchRecipients = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate(["/manage"], { queryParams: { recipient_name: keyword } });
            this.clearSearchInputs();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.searchTemplates = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate(["/templates"], { queryParams: { name: keyword } });
            this.clearSearchInputs();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.getSearchKeyword = /**
     * @return {?}
     */
    function () {
        if (this.previewInput && this.previewInput.nativeElement.value) {
            return this.previewInput.nativeElement.value;
        }
        else if (this.generalInput && this.generalInput.nativeElement.value) {
            return this.generalInput.nativeElement.value;
        }
        return '';
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.clearSearchInputs = /**
     * @return {?}
     */
    function () {
        if (this.previewInput) {
            this.previewInput.nativeElement.value = '';
        }
        if (this.generalInput) {
            this.generalInput.nativeElement.value = '';
        }
        this.envelopeResult = [];
        this.templateResult = [];
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.updateStar = /**
     * @return {?}
     */
    function () {
        if (this.template && this.currentProfile && this.template.template_stars) {
            /** @type {?} */
            var existingStarIndex = findIndex(this.template.template_stars, { profile_id: this.currentProfile.id, template_id: this.template.id });
            this._userStarred = existingStarIndex > -1;
        }
        else {
            return false;
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.starTemplate = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.canStar) {
            this.verdocsHeaderService.starTemplate(this.template.id).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                _this.template.template_stars.push(res);
                _this.updateStar();
            }));
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.unstarTemplate = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.canStar) {
            this.verdocsHeaderService.unstarTemplate(this.template.id).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                /** @type {?} */
                var removedStarIndex = findIndex(_this.template.template_stars, { profile_id: _this.currentProfile.id, template_id: _this.template.id });
                if (removedStarIndex > -1) {
                    _this.template.template_stars.splice(removedStarIndex, 1);
                    _this.updateStar();
                }
            }));
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.editTemplate = /**
     * @return {?}
     */
    function () {
        if (this.canEdit) {
            this.router.navigate(["/builder/" + this.template.id + "/fields"]);
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    };
    /**
     * @return {?}
     */
    HeaderComponent.prototype.createTemplate = /**
     * @return {?}
     */
    function () {
        this.verdocsHeaderService.toggleCreate();
    };
    HeaderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'verdocs-header',
                    template: "<div class=\"header__placeholder\" *ngIf=\"pageLoading\"></div>\n<div *ngIf=\"!pageLoading\">\n  <header #headerContainer>\n    <div class=\"header-row\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\"\n      [ngClass]=\"{authenticated: isAuthenticated, preview: mode === 'preview'}\">\n      <div class=\"header-util-wrapper collapsed\" fxLayout=\"row\">\n        <button mat-icon-button (click)=\"toggleMenu()\">\n          <mat-icon>menu</mat-icon>\n        </button>\n      </div>\n      <div class=\"header__dynamic-section\"\n        [ngClass]=\"{preview: mode === 'preview', expanded: templateDetailsExpanded, 'live-view': isLiveView}\">\n        <div class=\"header__logo-wrapper preview\" *ngIf=\"mode === 'preview'\"\n          [ngClass]=\"{authenticated: isAuthenticated, expanded: templateDetailsExpanded}\" matAutocompleteOrigin\n          #previewOrigin=\"matAutocompleteOrigin\">\n          <div class=\"header__dynamic-mobile-menu collapsed\">\n            <button mat-icon-button (click)=\"toggleMenu()\">\n              <mat-icon>menu</mat-icon>\n            </button>\n          </div>\n          <a class=\"header__title preview\" href=\"{{home_url}}\" [ngClass]=\"{authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin !== 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <a class=\"header__title preview\" [routerLink]=\"(isAuthenticated?'/dashboard': '/')\" [ngClass]=\"{authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin === 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <div class=\"header__general-search preview\">\n            <input class=\"header__general-search-input\" #previewInput type=\"text\"\n              [ngClass]=\"{preview: mode === 'preview', stretch: previewInput.value !== ''}\"\n              placeholder=\"Search or jump to...\" [matAutocompleteConnectedTo]=\"previewOrigin\"\n              [matAutocomplete]=\"autocomplete\" (focus)=\"setInputFocused(true)\" (blur)=\"setInputFocused(false)\"\n              (input)=\"previewInputEvent($event)\">\n            <button class=\"header__search-button preview\" mat-icon-button *ngIf=\"!isSearching\"\n              (click)=\"previewInput.focus()\">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class=\"header__general-search-spinner\" *ngIf=\"isSearching\">\n              <mat-spinner [diameter]=\"24\"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class=\"header__search-autocomplete\" #autocomplete=\"matAutocomplete\"\n            (optionSelected)=\"selected($event)\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let envelope of envelopeResult\"\n              [value]=\"envelope['name']\" (keydown.enter)=\"goToEnvelope(envelope.id)\" (click)=\"goToEnvelope(envelope.id)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{envelope['name']}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"envelopeResult && envelopeResult.length > 0\"\n              [value]=\"previewInput.value\" (keydown.enter)=\"searchEnvelopes()\" (click)=\"searchEnvelopes()\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"envelopeResult && envelopeResult.length > 0\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let template of templateResult\"\n              [value]=\"template.name\" (keydown.enter)=\"goToTemplate(template)\" (click)=\"goToTemplate(template)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    <div class=\"header__search-autocomplete-header\">\n                      {{template.name}}\n                    </div>\n                    <div class=\"header__search-autocomplete-subheader\">\n                      {{getTemplateStats(template)}}\n                    </div>\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"templateResult && templateResult.length > 0\"\n              [value]=\"previewInput.value\" (keydown.enter)=\"goToTemplates(previewInput.value)\" (click)=\"goToTemplates(previewInput.value)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"templateResult && templateResult.length > 0 && isAuthenticated\">\n            <mat-option class=\"header__search-autocomplete-option\" [value]=\"previewInput.value\"\n              (keydown.enter)=\"searchRecipients()\" (click)=\"searchRecipients()\"\n              *ngIf=\"isAuthenticated && previewInput.value !== ''\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Search Recipients with \"{{previewInput.value}}\"\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class=\"header__logo-wrapper\" *ngIf=\"mode !== 'preview'\"\n          [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated, expanded: templateDetailsExpanded}\">\n          <a class=\"header__title\" href=\"{{home_url}}\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin !== 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <a class=\"header__title\" [routerLink]=\"(isAuthenticated?'/dashboard': '/')\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin === 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <div class=\"header__general-search\"\n            [ngClass]=\"{preview: mode === 'preview', extend: inputFocused || generalInput.value != '', unauthenticated: !isAuthenticated, landing: currentAt === 'rSecure'}\"\n            matAutocompleteOrigin #generalOrigin=\"matAutocompleteOrigin\">\n            <input class=\"header__general-search-input\" #generalInput type=\"text\"\n              [ngClass]=\"{preview: mode === 'preview', stretch: generalInput.value !== '', unauthenticated: !isAuthenticated}\"\n              placeholder=\"Search or jump to...\" [matAutocompleteConnectedTo]=\"generalOrigin\"\n              [matAutocomplete]=\"autocomplete\" (focus)=\"setInputFocused(true)\" (blur)=\"setInputFocused(false)\"\n              (input)=\"generalInputEvent($event)\">\n            <button class=\"header__search-button\" mat-icon-button [ngClass]=\"{preview: mode === 'preview'}\"\n              *ngIf=\"!isSearching\" (click)=\"generalInput.focus()\">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class=\"header__general-search-spinner\" *ngIf=\"isSearching\">\n              <mat-spinner [diameter]=\"24\"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class=\"header__search-autocomplete\" #autocomplete=\"matAutocomplete\"\n            (optionSelected)=\"selected($event)\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let envelope of envelopeResult\"\n              [value]=\"envelope.name\" (keydown.enter)=\"goToEnvelope(envelope.id)\" (click)=\"goToEnvelope(envelope.id)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{envelope.name}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"envelopeResult && envelopeResult.length > 0\"\n              [value]=\"generalInput.value\" (keydown.enter)=\"searchEnvelopes()\" (click)=\"searchEnvelopes()\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"envelopeResult && envelopeResult.length > 0\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let template of templateResult\"\n              (keydown.enter)=\"goToTemplate(template)\" (click)=\"goToTemplate(template)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{template?.name}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getTemplateStats(template)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"templateResult && templateResult.length > 0\"\n              [value]=\"generalInput.value\" (keydown.enter)=\"goToTemplates(generalInput.value)\" (click)=\"goToTemplates(generalInput.value)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"templateResult && templateResult.length > 0 && isAuthenticated\">\n            <mat-option class=\"header__search-autocomplete-option\" [value]=\"generalInput.value\"\n              (keydown.enter)=\"searchRecipients()\" (click)=\"searchRecipients()\"\n              *ngIf=\"isAuthenticated && generalInput.value !== ''\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Search Recipients with \"{{generalInput.value}}\"\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class=\"header__template-details\"\n          [ngClass]=\"{show: mode === 'preview' && !isLiveView, expanded: templateDetailsExpanded}\">\n          <div class=\"header__template-detail-container\" [ngClass]=\"{show: templateDetailsExpanded}\">\n            <div class=\"header__template-detail-wrapper\">\n              <div class=\"header__template-detail-header no-top-border\">\n                <div class=\"header__template-detail-title bold\">\n                  <h1>{{template?.name}}</h1>\n                </div>\n                <div class=\"header__template-detail-button-container\"></div>\n              </div>\n              <div class=\"header__template-detail-body\" *ngIf=\"template && template.description\">\n                <div class=\"header__template-detail-body-text\">\n                  {{template?.description}}\n                </div>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Tags</div>\n                <div class=\"header__template-detail-button-container\"></div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <div class=\"header__template-detail-tags\">\n                  <div class=\"header__template-detail-tag\" *ngFor=\"let tag of template.tags\">\n                    {{tag.tag_name}}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Visibility</div>\n              </div>\n              <div class=\"header__template-detail-button-container\">\n                <app-preview-visibility [template]=\"template\"\n                  [visibility]=\"{is_personal: template?.is_personal, is_public: template?.is_public}\">\n                </app-preview-visibility>\n              </div>\n              <div class=\"header__template-detail-body\"></div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Source documents</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <app-template-source [template]=\"template\"></app-template-source>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Workflow</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <app-recipient-editor [template]=\"template\"></app-recipient-editor>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Metrics</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <div class=\"header__template-detail-stats\">\n                  <div class=\"header__counter-stars\">\n                    <mat-icon class=\"header__counter-icon\">star</mat-icon>\n                    <span class=\"header__counter-number\">\n                      {{template.template_stars ? template.template_stars.length : 0}}\n                    </span>\n                  </div>\n                  <div class=\"header__counter-envelopes\">\n                    <mat-icon class=\"header__counter-icon\">mail</mat-icon>\n                    <span class=\"header__counter-number\">\n                      {{template.counter}}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"header__template-detail-options\" [ngClass]=\"{show: templateDetailsExpanded}\">\n            <div class=\"header__template-detail-option-button-wrapper\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" *ngIf=\"!userStarred\"\n                (click)=\"starTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">star</mat-icon>\n                <span class=\"header__template-detail-option-text\">Star</span>\n              </button>\n              <button mat-raised-button class=\"header__template-detail-option-button\" *ngIf=\"userStarred\"\n                (click)=\"unstarTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">star_outline</mat-icon>\n                <span class=\"header__template-detail-option-text\">Unstar</span>\n              </button>\n            </div>\n            <div class=\"header__template-detail-option-button-wrapper\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" (click)=\"createTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">drafts</mat-icon>\n                <span class=\"header__template-detail-option-text\">Create</span>\n              </button>\n            </div>\n            <div class=\"header__template-detail-option-button-wrapper\" matTooltip=\"Edit privileges required.\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" (click)=\"editTemplate()\" [disabled]=\"!canEdit && isAuthenticated\">\n                <mat-icon class=\"header__template-detail-option-icon\">build</mat-icon>\n                <span class=\"header__template-detail-option-text\">Edit</span>\n              </button>\n            </div>\n          </div>\n          <div class=\"header__template-details-expansion\" (click)=\"toggleTemplateDetails()\"\n            [ngClass]=\"{expanded: templateDetailsExpanded}\">\n            <button class=\"header__template-details-button\" mat-icon-button>\n              <mat-icon class=\"header__template-details-arrow\" [ngClass]=\"{expanded: templateDetailsExpanded}\">\n                keyboard_arrow_down</mat-icon>\n            </button>\n            <div class=\"header__template-details-text\" *ngIf=\"!templateDetailsExpanded\">Show details</div>\n            <div class=\"header__template-details-text\" *ngIf=\"templateDetailsExpanded\">Hide</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"header__nav\" fxFlex [ngClass]=\"{preview: mode === 'preview', ua: !isAuthenticated}\">\n        <div class=\"header__nav-authenticated\" *ngIf=\"isAuthenticated && currentOrigin === 'rForm'\">\n          <a class=\"header__link\" [routerLink]=\"'/manage'\">Manage</a>\n          <a class=\"header__link\" [routerLink]=\"'/documents'\">Documents</a>\n        </div>\n        <div class=\"header__nav-authenticated\" *ngIf=\"isAuthenticated && currentOrigin !== 'rForm' && currentOrigin !== 'rSecure'\">\n          <a class=\"header__link\" [href]=\"rFormFrontEnd + '/manage'\">Manage</a>\n          <a class=\"header__link\" [href]=\"rFormFrontEnd + '/documents'\">Documents</a>\n        </div>\n        <div class=\"header__nav-unauthenticated\" *ngIf=\"(!isAuthenticated && currentOrigin !== 'rSecure') || currentOrigin === 'rSecure'\">\n          <div class=\"header__link-wrapper realster\">\n            <div class=\"header__link realster\">Why Verdocs <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class=\"header__sub-link realster\" *ngIf=\"currentOrigin !== 'rSecure'\">\n              <a [href]=\"rSecureFrontEnd + '/features'\" class=\"header__sub-link-nav main\">Features</a>\n              <a [href]=\"rSecureFrontEnd + '/features/builder'\" class=\"header__sub-link-nav\">Builder</a>\n              <a [href]=\"rSecureFrontEnd + '/features/documents'\" class=\"header__sub-link-nav\">Documents</a>\n              <a [href]=\"rSecureFrontEnd + '/features/attachments'\" class=\"header__sub-link-nav\">Collect Attachments</a>\n              <a [href]=\"rSecureFrontEnd + '/features/payments'\" class=\"header__sub-link-nav\">Collect Payments</a>\n              <a [href]=\"rSecureFrontEnd + '/features/export'\" class=\"header__sub-link-nav\">Export</a>\n              <a [href]=\"rSecureFrontEnd + '/features/audit-trail'\" class=\"header__sub-link-nav\">Tamper-Proof Audit\n                Trail</a>\n              <a [href]=\"rSecureFrontEnd + '/features/reminders'\" class=\"header__sub-link-nav\">Reminders</a>\n              <a [href]=\"rSecureFrontEnd + '/features/flexible-workflows'\" class=\"header__sub-link-nav\">Flexible\n                Workflows</a>\n              <a [href]=\"rSecureFrontEnd + '/features/team-management'\" class=\"header__sub-link-nav\">Team Management</a>\n              <hr class=\"header__navigation-divider realster\">\n              <a [href]=\"rSecureFrontEnd + '/security'\" class=\"header__sub-link-nav main\">Security</a>\n              <a href=\"https://verdocs.com/resources/category/customer-stories\"\n                class=\"header__sub-link-nav main\">Customer\n                Stories</a>\n            </div>\n            <div class=\"header__sub-link realster local\" *ngIf=\"currentOrigin === 'rSecure'\">\n              <a [routerLink]=\"'/features'\" class=\"header__sub-link-nav main\">Features</a>\n              <a [routerLink]=\"'/features/builder'\" class=\"header__sub-link-nav\">Builder</a>\n              <a [routerLink]=\"'/features/documents'\" class=\"header__sub-link-nav\">Documents</a>\n              <a [routerLink]=\"'/features/attachments'\" class=\"header__sub-link-nav\">Collect Attachments</a>\n              <a [routerLink]=\"'/features/payments'\" class=\"header__sub-link-nav\">Collect Payments</a>\n              <a [routerLink]=\"'/features/export'\" class=\"header__sub-link-nav\">Export</a>\n              <a [routerLink]=\"'/features/audit-trail'\" class=\"header__sub-link-nav\">Tamper-Proof Audit Trail</a>\n              <a [routerLink]=\"'/features/reminders'\" class=\"header__sub-link-nav\">Reminders</a>\n              <a [routerLink]=\"'/features/flexible-workflows'\" class=\"header__sub-link-nav\">Flexible Workflows</a>\n              <a [routerLink]=\"'/features/team-management'\" class=\"header__sub-link-nav\">Team Management</a>\n              <hr class=\"header__navigation-divider realster\">\n              <a [routerLink]=\"'/security'\" class=\"header__sub-link-nav main\">Security</a>\n              <a href=\"https://verdocs.com/resources/category/customer-stories\"\n                class=\"header__sub-link-nav main\">Customer\n                Stories</a>\n            </div>\n          </div>\n          <div class=\"header__link-wrapper pricing\">\n            <div class=\"header__link pricing\">Pricing <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class=\"header__sub-link pricing\" *ngIf=\"currentOrigin !== 'rSecure'\">\n              <a [href]=\"rSecureFrontEnd + '/pricing'\" class=\"header__sub-link-nav main\">Plans</a>\n              <a [href]=\"rSecureFrontEnd + '/pricing/contact-sales'\" class=\"header__sub-link-nav\">Contact Sales</a>\n              <hr class=\"nav-header__navigation-divider pricing\">\n              <!-- <a [href]=\"rSecureFrontEnd + '/pricing/real-estate'\" class=\"nav-header__navigation-link\">Real Estate</a> -->\n              <a [href]=\"rSecureFrontEnd + '/pricing/nonprofit'\" class=\"header__sub-link-nav\">Nonprofit</a>\n            </div>\n            <div class=\"header__sub-link pricing local\" *ngIf=\"currentOrigin === 'rSecure'\">\n              <a [routerLink]=\"'/pricing'\" class=\"header__sub-link-nav main\">Plans</a>\n              <a [routerLink]=\"'/pricing/contact-sales'\" class=\"header__sub-link-nav\">Contact Sales</a>\n              <hr class=\"nav-header__navigation-divider pricing\">\n              <!-- <a [routerLink]=\"'/pricing/real-estate'\" class=\"nav-header__navigation-link\">Real Estate</a> -->\n              <a [routerLink]=\"'/pricing/nonprofit'\" class=\"header__sub-link-nav\">Nonprofit</a>\n            </div>\n          </div>\n          <a class=\"header__link\" href=\"https://verdocs.com/resources\">Resources</a>\n        </div>\n      </div>\n      <div class=\"header-util-mg\" fxFlex>\n        <verdocs-header-tools [mode]=\"mode\"></verdocs-header-tools>\n      </div>\n    </div>\n    <svg class=\"ghost\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"linear\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stop-color=\"#50BD80\" />\n          <stop offset=\"100%\" stop-color=\"#4856CA\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  </header>\n</div>",
                    styles: ["app-header{position:fixed;top:0;left:0;width:100%}header{position:relative;z-index:99}.header__placeholder{background-color:#f6f8fa;height:56px}.header__nav{margin-left:8px;display:flex;align-items:center;height:64px;flex:1 1 0%;box-sizing:border-box}.header__nav .header__link,.header__nav .header__link:visited{display:flex;align-items:center;padding-left:8px;padding-right:8px;color:#fff;text-decoration:none;height:64px}.header__nav.preview .header__link,.header__nav.preview .header__link:visited{color:rgba(0,0,0,.87)}.header__nav.preview{position:absolute;top:0;left:378px}@media only screen and (max-width:854px){.header__nav{display:none}.header__app-version.preview{padding-left:6px}}@media only screen and (max-width:600px){.header__nav{height:56px}}.header__nav-authenticated,.header__nav-unauthenticated{position:relative;display:flex;align-items:center}.header__app-version{position:absolute;top:20px;font-size:10px;padding-left:12px}.header__app-version.preview{color:rgba(0,0,0,.54);padding-left:6px}@media only screen and (max-width:768px){.header__app-version.preview{padding-left:6px}.header__app-version{padding-left:0}}.header__link-wrapper{position:relative;overflow:visible}.header__link-wrapper:hover{cursor:pointer}.header__link-wrapper.realster{width:143.64px;max-width:143.64px}.header__link-wrapper.realster:hover .header__sub-link.realster{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__link-wrapper.realster:hover .header__sub-link.realster:after,.header__link-wrapper.realster:hover .header__sub-link.realster:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.realster:hover .header__sub-link.realster:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.realster:hover .header__sub-link.realster:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.realster:hover .header__sub-link.realster .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__link-wrapper.pricing{width:92.52px;max-width:92.52px}.header__link-wrapper.pricing:hover .header__sub-link.pricing{visibility:visible;opacity:1;height:120px;width:160px;background-color:#fff}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after,.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after{content:'';width:92.52px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.pricing:hover .header__sub-link.pricing .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__sub-link{position:absolute;padding-top:8px;top:60px;left:0;visibility:hidden;opacity:0;height:0;transition:height .3s cubic-bezier(.17,.04,.03,.94);border-bottom-left-radius:2px;border-bottom-right-radius:2px}.header__sub-link:hover{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__sub-link:hover:after,.header__sub-link:hover:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__sub-link:hover:before{height:100%;width:100%;left:0;top:0}.header__sub-link:hover:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}@media only screen and (max-width:600px){.header__sub-link{top:56px}}.header__sub-link-nav{padding:8px 16px;display:block;text-decoration:none;color:rgba(0,0,0,.87);visibility:none;opacity:0;transition:250ms cubic-bezier(.17,.04,.03,.94);transition-delay:50ms;height:0}.header__sub-link-nav.main{font-weight:600}.header__sub-link-nav:visited{color:rgba(0,0,0,.87)}.header-row{position:relative;height:56px;display:flex;align-items:center;place-content:center space-between;background-color:#33354c;color:#fff}.header-row.authenticated{background-color:#33354c;color:#fff}.header-row.preview,.header-row.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}@media only screen and (min-width:601px){.header-row{height:64px}}.header-util-wrapper{margin-left:12px;visibility:visible;opacity:1;transform:translateX(0);transition:.2s ease-out}.header-util-wrapper button:hover{background-color:rgba(0,0,0,.12)}@media only screen and (max-width:415px){.header-util-wrapper.search-active{visibility:hidden;opacity:0;width:0;transform:translateX(-200%)}}@media only screen and (min-width:855px){.header-util-wrapper{visibility:0;opacity:0;display:none!important}}.header__dynamic-mobile-menu{display:none}.header__dynamic-section.preview{position:absolute;top:8px;left:0;height:96px;max-width:370.5px;margin-left:8px;background-color:#f3f3f3;border-radius:2px;box-shadow:0 3px 14px 2px rgba(0,0,0,.12),0 8px 10px 1px rgba(0,0,0,.14),0 5px 5px -3px rgba(0,0,0,.2);transition:height .3s cubic-bezier(.17,.04,.03,.94)}.header__dynamic-section.preview.live-view{height:0}.header__dynamic-section.preview.expanded{max-width:386.5px;margin-left:0;top:0;height:100vh;height:calc(var(--vh,1vh) * 100)}.header__general-search{display:flex;align-items:center;height:48px;background-color:rgba(0,0,0,.15);border-radius:2px}.header__general-search.preview{background-color:transparent}@media only screen and (max-width:854px){.header__dynamic-mobile-menu{display:flex;padding-left:4px}.header__dynamic-section.preview{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__dynamic-section.preview.expanded{width:100%;max-width:100%}.header__general-search.extend{background-color:rgba(0,0,0,.15);width:calc(100vw - 16px);margin-left:-150px}.header__general-search{background-color:transparent}}.header__general-search-field{height:48px}.header__general-search-input{padding-left:8px;border:none;height:48px;font-size:16px;line-height:48px;outline:0;border-radius:2px;background-color:transparent;color:#fff;width:203px;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__general-search-input.stretch,.header__general-search-input:focus{width:340px}.header__general-search-input.landing{width:130px}.header__general-search-input.landing.stretch{width:340px}.header__general-search-input.preview,.header__general-search-input.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}.header__general-search-input.preview.authenticated::-webkit-input-placeholder,.header__general-search-input.preview::-webkit-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-moz-placeholder,.header__general-search-input.preview::-moz-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-ms-input-placeholder,.header__general-search-input.preview::-ms-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::placeholder,.header__general-search-input.preview::placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated.stretch,.header__general-search-input.preview.authenticated:focus,.header__general-search-input.preview.stretch,.header__general-search-input.preview:focus{width:203px}.header__general-search-input::-webkit-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-moz-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-ms-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::placeholder{color:rgba(255,255,255,.54)}@media only screen and (max-width:854px){.header__general-search-input{width:0;border:none}.header__general-search-input.stretch,.header__general-search-input:focus{width:calc(100vw - 72px)!important;background-color:#292d3c;z-index:100}.header__general-search-input.stretch.preview,.header__general-search-input:focus.preview{margin-left:-152px;background-color:#fff}}.header__general-search-spinner{margin-left:8px;display:flex;align-items:center;justify-content:center;height:40px;width:40px}.header__template-details{position:absolute;top:-120px;height:0;visibility:hidden;opacity:0;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details.show{position:relative;top:0;visibility:visible;opacity:1;height:48px}.header__template-details.show.expanded{height:calc(100% - 64px)}.header__template-details-expansion{position:absolute;bottom:0;left:0;padding-left:8px;padding-right:8px;display:flex;height:48px;align-items:center;width:100%}.header__template-details-expansion.expanded{padding-left:16px;border-top:2px solid rgba(0,0,0,.12)}.header__template-details-expansion:hover{cursor:pointer}.header__template-details-arrow{transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details-arrow.expanded{transform:rotate(-180deg)}.header__template-details-text{font-size:12px;color:rgba(0,0,0,.54)}.header__template-detail-container{background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.12),0 0 2px 0 rgba(0,0,0,.14);visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-container.show{margin:8px 8px 0;padding:8px;visibility:visible;opacity:1;height:auto;max-height:calc(100% - 128px);overflow-y:auto}.header__template-detail-options{visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-options.show{display:flex;padding:8px;visibility:visible;opacity:1;width:100%;height:auto}.header__template-detail-option-button{width:100%}.header__template-detail-option-button-wrapper{width:calc(41% - 32px);margin-right:8px}.header__template-detail-option-button-wrapper:last-child{margin-right:0}.header__template-detail-option-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__template-detail-option-text{text-transform:uppercase;color:rgba(0,0,0,.87)}.header__template-detail-wrapper{padding-left:8px;padding-right:8px}.header__template-detail-header{padding-top:8px;padding-bottom:8px;border-top:1px solid #d1d5da}.header__template-detail-header.no-top-border{border-top:none}.header__template-detail-title{font-size:12px;color:rgba(0,0,0,.87)}.header__template-detail-title.bold{padding-bottom:8px;font-weight:800;font-size:20px}.header__template-detail-title.bold h1{color:rgba(0,0,0,.87);padding-bottom:8px;font-weight:800;font-size:20px;margin:0}.header__template-detail-body{padding-bottom:8px}.header__template-detail-tags{display:flex;padding-top:2px;align-items:center}.header__template-detail-tag{margin-left:8px;padding-left:8px;padding-right:8px;height:20px;line-height:20px;background-color:rgba(55,71,79,.34);border-radius:2px;font-size:10px;color:#000}.header__template-detail-tag:first-child{margin-left:0}.header__template-detail-stats{display:flex;align-items:center;padding-top:8px;line-height:24px}.header__logo{display:inline-block;height:20px;width:77.5px;margin-right:16px;background-size:contain;background-position:center;background-repeat:no-repeat}@media only screen and (max-width:854px){.header__logo{margin:0}}.header__logo-wrapper{display:flex;height:48px;align-items:center}.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{border-radius:2px;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 1px -1px rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.14);max-width:370.5px}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{margin-top:8px;margin-left:8px;margin-right:8px;max-width:370.5px}.header__logo-wrapper.preview .header__logo,.header__logo-wrapper.preview.authenticated .header__logo{margin-left:6px}@media screen and (max-width:854px){.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{width:100%;max-width:100%}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__logo-wrapper{justify-content:space-between;width:calc(100vw - 64px)}}@media screen and (min-width:855px){.header__logo{margin-left:12px}}.header__search-button{font-size:24px;margin-left:8px}.header__search-button.preview{color:rgba(0,0,0,.54)}.header__search-button.preview:hover{color:rgba(0,0,0,.87)}.header__search-verdocs-image{margin-left:2px;width:20px}.header__search-autocomplete{position:relative;padding-top:8px;max-height:515px}.header__search-autocomplete-option{display:flex;align-items:center;height:60px;line-height:60px}.header__search-autocomplete-wrapper{display:flex;align-items:center}.header__search-autocomplete-right{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__search-autocomplete-middle{max-width:calc(100% - 80px)}.header__search-autocomplete-header{font-size:16px;color:rgba(0,0,0,.87);height:20px;line-height:20px}.header__search-autocomplete-subheader{font-size:14px;color:rgba(0,0,0,.54);height:20px;line-height:20px}.header__search-autocomplete-left{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__title{position:relative;visibility:visible;opacity:1;padding-left:12px;margin-right:8px;width:calc(100% - 120px);text-align:left;font-size:20px;font-weight:500;text-overflow:ellipsis;text-decoration:none;white-space:nowrap;overflow:visible;color:#fff;transition:.2s ease-out}@media only screen and (max-width:415px){.header__title.search-active{visibility:hidden;width:0;opacity:0;transform:translateX(-200%)}}@media only screen and (max-width:854px){.header__title{margin:0 auto;width:auto;padding-left:0;padding-right:0;transform:translateX(8px)}}.header__title-input{border:none;outline:0;max-width:500px;width:100%;font-size:20px;font-weight:500;background:0 0;color:#fff}.header__title-input:not(:focus){text-overflow:ellipsis}.header__counter-envelopes,.header__counter-stars{margin-right:8px;display:flex;align-items:center}.header__counter-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__counter-number{margin-right:6px;font-size:16px;line-height:24px;height:24px;color:rgba(0,0,0,.87)}.header-util-mg{margin-right:12px;font-size:1.125rem;font-weight:300;height:64px;flex:1 1 0%}.header-util-mg button{min-width:48px;min-height:48px;background-color:transparent}@media screen and (max-width:768px){.header-util-mg{flex:none!important}}@media only screen and (max-width:600px){.header-util-mg{margin-right:0}.header-user__button{display:none}}.header__app{float:left;width:48px;height:48px;padding-top:5px}.header__notification{float:left;width:48px;height:48px;margin-top:-8px;margin-right:8px}.header-user__button{float:left;height:48px;width:48px;border:none;padding-top:5px;border-radius:50%}.header-user__button:hover{cursor:pointer}.header__nav-back,.header__nav-settings{line-height:40px!important;vertical-align:middle}.header-nav-route{padding-top:10px;padding-bottom:10px;color:#fff;text-align:center;text-transform:uppercase;font-size:1.125em;font-weight:400}.header-nav-filter{margin-right:30px}.header-nav-menu{margin-left:30px}.header__recipients{text-align:right}.header__template-status{position:absolute;bottom:4px;left:56px;font-size:12px;margin-left:8px;color:#fff}@media only screen and (max-width:675px){.header__title{padding-left:0}.header__recipients{max-width:195px!important;min-width:150px!important}.header__template-status{left:45px}}@media only screen and (max-width:360px){.header__template-status{display:none}}"]
                }] }
    ];
    /** @nocollapse */
    HeaderComponent.ctorParameters = function () { return [
        { type: VerdocsHeaderService },
        { type: VerdocsStateService },
        { type: VerdocsTokenObjectService },
        { type: VerdocsAuthService },
        { type: TemplatesGuardService },
        { type: Router },
        { type: ChangeDetectorRef },
        { type: Compiler },
        { type: Injector },
        { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
    ]; };
    HeaderComponent.propDecorators = {
        currentOrigin: [{ type: Input }],
        header: [{ type: ViewChild, args: ['headerContainer', { static: false },] }],
        searchBar: [{ type: ViewChild, args: ['search', { static: false },] }],
        templateTitleInput: [{ type: ViewChild, args: ['templateTitle', { static: false },] }],
        previewInput: [{ type: ViewChild, args: ['previewInput', { static: false },] }],
        generalInput: [{ type: ViewChild, args: ['generalInput', { static: false },] }]
    };
    return HeaderComponent;
}());
export { HeaderComponent };
if (false) {
    /** @type {?} */
    HeaderComponent.prototype.pageLoading;
    /** @type {?} */
    HeaderComponent.prototype.connections;
    /** @type {?} */
    HeaderComponent.prototype.title;
    /** @type {?} */
    HeaderComponent.prototype.isAuthenticated;
    /** @type {?} */
    HeaderComponent.prototype.headerTitle;
    /** @type {?} */
    HeaderComponent.prototype.mode;
    /** @type {?} */
    HeaderComponent.prototype.searchActive;
    /** @type {?} */
    HeaderComponent.prototype.templateName;
    /** @type {?} */
    HeaderComponent.prototype.newTemplateName;
    /** @type {?} */
    HeaderComponent.prototype.saveStatus;
    /** @type {?} */
    HeaderComponent.prototype.notifications;
    /** @type {?} */
    HeaderComponent.prototype.loading;
    /** @type {?} */
    HeaderComponent.prototype.myAccountUrl;
    /** @type {?} */
    HeaderComponent.prototype.termsUrl;
    /** @type {?} */
    HeaderComponent.prototype.privacyUrl;
    /** @type {?} */
    HeaderComponent.prototype.newProfile;
    /** @type {?} */
    HeaderComponent.prototype.organization_id;
    /** @type {?} */
    HeaderComponent.prototype.emailVerified;
    /** @type {?} */
    HeaderComponent.prototype.organizationImgSrc;
    /** @type {?} */
    HeaderComponent.prototype.csvBlob;
    /** @type {?} */
    HeaderComponent.prototype.templateDetailsExpanded;
    /** @type {?} */
    HeaderComponent.prototype.template;
    /** @type {?} */
    HeaderComponent.prototype.isSearching;
    /** @type {?} */
    HeaderComponent.prototype.envelopeResult;
    /** @type {?} */
    HeaderComponent.prototype.templateResult;
    /** @type {?} */
    HeaderComponent.prototype.currentProfile;
    /** @type {?} */
    HeaderComponent.prototype.inputFocused;
    /** @type {?} */
    HeaderComponent.prototype.manageLink;
    /** @type {?} */
    HeaderComponent.prototype.templatesLink;
    /** @type {?} */
    HeaderComponent.prototype.rSecureFrontEnd;
    /** @type {?} */
    HeaderComponent.prototype.rFormFrontEnd;
    /** @type {?} */
    HeaderComponent.prototype.isLiveView;
    /** @type {?} */
    HeaderComponent.prototype.verdocs_url;
    /** @type {?} */
    HeaderComponent.prototype.image_url;
    /** @type {?} */
    HeaderComponent.prototype.isAtOriginalOrigin;
    /** @type {?} */
    HeaderComponent.prototype.app_version;
    /** @type {?} */
    HeaderComponent.prototype.currentAt;
    /** @type {?} */
    HeaderComponent.prototype.currentOrigin;
    /** @type {?} */
    HeaderComponent.prototype.header;
    /** @type {?} */
    HeaderComponent.prototype.searchBar;
    /** @type {?} */
    HeaderComponent.prototype.templateTitleInput;
    /** @type {?} */
    HeaderComponent.prototype.previewInput;
    /** @type {?} */
    HeaderComponent.prototype.generalInput;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.sidenavOpen;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canStar;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canCreate;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canEdit;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._userStarred;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.metaDataSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleKeyDownSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateNameSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.saveStatusSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.profileLoadingSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.userDataSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.modeSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.previewInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.generalInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.navigationEventSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.csvBlobSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.inputTimer;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.origin;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.verdocsHeaderService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vTokenStateService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vTokenObjectService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vAuthService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateGuard;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.compiler;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.platform;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B2ZXJkb2NzL2hlYWRlci8iLCJzb3VyY2VzIjpbImxpYi9oZWFkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFJVCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFFBQVEsRUFDUixLQUFLLEVBQ0wsaUJBQWlCLEVBQ2pCLFFBQVEsRUFDUixNQUFNLEVBQ04sV0FBVyxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLGVBQWUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNyRyxPQUFPLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQyxPQUFPLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUVuQyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNqRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNuRSxPQUFPLEVBQXVCLGVBQWUsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzlFLE9BQU8sRUFBb0IscUJBQXFCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUxRTtJQTBFRSx5QkFDVSxvQkFBMEMsRUFDMUMsa0JBQXVDLEVBQ3ZDLG1CQUE4QyxFQUM5QyxZQUFnQyxFQUNoQyxhQUFvQyxFQUNwQyxNQUFj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Qyx5Q0FBbUM7O0lBQ25DLHlDQUFrQzs7SUFDbEMsdUNBQXFDOztJQUNyQyxxQ0FBMEI7O0lBQzFCLHdDQUE2Qjs7SUFDN0IsMENBQStCOztJQUMvQix3Q0FBNkI7O0lBQzdCLHFDQUEwQjs7SUFDMUIsc0NBQTJCOztJQUMzQixvQ0FBeUI7O0lBQ3pCLDZDQUFtQzs7SUFDbkMsc0NBQWdDOztJQUNoQyxvQ0FBNkI7O0lBRTdCLHdDQUF5RDs7SUFFekQsaUNBQW9FOztJQUNwRSxvQ0FBOEQ7O0lBQzlELDZDQUE4RTs7SUFDOUUsdUNBQXVFOztJQUN2RSx1Q0FBdUU7Ozs7O0lBRXZFLHNDQUE2Qjs7Ozs7SUFDN0IsbUNBQWlDOzs7OztJQUNqQyxxQ0FBbUM7Ozs7O0lBQ25DLG1DQUFpQzs7Ozs7SUFDakMsdUNBQXFDOzs7OztJQUNyQywrQ0FBa0Q7Ozs7O0lBQ2xELDRDQUErQzs7Ozs7SUFDL0MsaURBQW9EOzs7OztJQUNwRCxtREFBc0Q7Ozs7O0lBQ3RELG1EQUFzRDs7Ozs7SUFDdEQsK0NBQWtEOzs7OztJQUNsRCxpREFBb0Q7Ozs7O0lBQ3BELHFEQUF3RDs7Ozs7SUFDeEQsK0NBQWtEOzs7OztJQUNsRCwyQ0FBOEM7Ozs7O0lBQzlDLG1EQUFzRDs7Ozs7SUFDdEQsbURBQXNEOzs7OztJQUN0RCxzREFBeUQ7Ozs7O0lBQ3pELDhDQUFpRDs7Ozs7SUFDakQscUNBQW1DOzs7OztJQUNuQyxpQ0FBdUI7Ozs7O0lBR3JCLCtDQUFrRDs7Ozs7SUFDbEQsNkNBQStDOzs7OztJQUMvQyw4Q0FBc0Q7Ozs7O0lBQ3RELHVDQUF3Qzs7Ozs7SUFDeEMsd0NBQTRDOzs7OztJQUM1QyxpQ0FBc0I7Ozs7O0lBQ3RCLDhCQUE4Qjs7Ozs7SUFDOUIsbUNBQTBCOzs7OztJQUMxQixtQ0FBMEI7Ozs7O0lBQzFCLG1DQUFxQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgT25Jbml0LFxuICBPbkRlc3Ryb3ksXG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIFZpZXdDaGlsZCxcbiAgRWxlbWVudFJlZixcbiAgQ29tcGlsZXIsXG4gIElucHV0LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgSW5qZWN0b3IsXG4gIEluamVjdCxcbiAgUExBVEZPUk1fSURcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIsIE5hdmlnYXRpb25FbmQsIE5hdmlnYXRpb25TdGFydCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBIdHRwUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBWZXJkb2NzU3RhdGVTZXJ2aWNlLCBWZXJkb2NzQXV0aFNlcnZpY2UsIFZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2UgfSBmcm9tICdAdmVyZG9jcy90b2tlbnMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBmcm9tRXZlbnQgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgZGlzdGluY3RVbnRpbENoYW5nZWQgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBmaW5kSW5kZXggfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBWZXJkb2NzSGVhZGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaGVhZGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGVtcGxhdGVzR3VhcmRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy90ZW1wbGF0ZXMuZ3VhcmQnO1xuaW1wb3J0IHsgSVRlbXBsYXRlLCBFbnZlbG9wZSwgVGVtcGxhdGVBY3Rpb25zIH0gZnJvbSAnLi9tb2RlbHMvdmVyZG9jcy5tb2RlbCc7XG5pbXBvcnQgeyBjb25uZWN0aW9uQ29uZmlnLCBjb25uZWN0aW9uQ29uZmlnVG9rZW4gfSBmcm9tICcuL2hlYWRlci5tb2R1bGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2ZXJkb2NzLWhlYWRlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9oZWFkZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9oZWFkZXIuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBIZWFkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG4gIHB1YmxpYyBwYWdlTG9hZGluZyA9IHRydWU7XG4gIHB1YmxpYyBjb25uZWN0aW9uczogY29ubmVjdGlvbkNvbmZpZztcbiAgcHVibGljIHRpdGxlOiBzdHJpbmc7XG4gIHB1YmxpYyBpc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcbiAgcHVibGljIGhlYWRlclRpdGxlID0gJ0VudmVsb3BlJztcbiAgcHVibGljIG1vZGUgPSAnJztcbiAgcHVibGljIHNlYXJjaEFjdGl2ZSA9IGZhbHNlO1xuICBwdWJsaWMgdGVtcGxhdGVOYW1lID0gJyc7XG4gIHB1YmxpYyBuZXdUZW1wbGF0ZU5hbWUgPSBudWxsO1xuICBwdWJsaWMgc2F2ZVN0YXR1cyA9ICcnO1xuICBwdWJsaWMgbm90aWZpY2F0aW9uczogTm90aWZpY2F0aW9uW10gPSBbXTtcbiAgcHVibGljIGxvYWRpbmcgPSBmYWxzZTtcbiAgcHVibGljIG15QWNjb3VudFVybDogc3RyaW5nO1xuICBwdWJsaWMgdGVybXNVcmw6IHN0cmluZztcbiAgcHVibGljIHByaXZhY3lVcmw6IHN0cmluZztcbiAgcHVibGljIG5ld1Byb2ZpbGU6IGFueTtcbiAgcHVibGljIG9yZ2FuaXphdGlvbl9pZDogc3RyaW5nO1xuICBwdWJsaWMgZW1haWxWZXJpZmllZDogYm9vbGVhbjtcbiAgcHVibGljIG9yZ2FuaXphdGlvbkltZ1NyYzogc3RyaW5nO1xuICBwdWJsaWMgY3N2QmxvYjogQmxvYiA9IG51bGw7XG4gIHB1YmxpYyB0ZW1wbGF0ZURldGFpbHNFeHBhbmRlZCA9IHRydWU7XG4gIHB1YmxpYyB0ZW1wbGF0ZTogSVRlbXBsYXRlID0gbnVsbDtcbiAgcHVibGljIGlzU2VhcmNoaW5nID0gZmFsc2U7XG4gIHB1YmxpYyBlbnZlbG9wZVJlc3VsdDogRW52ZWxvcGVbXTtcbiAgcHVibGljIHRlbXBsYXRlUmVzdWx0OiBJVGVtcGxhdGVbXTtcbiAgcHVibGljIGN1cnJlbnRQcm9maWxlOiBhbnkgPSBudWxsO1xuICBwdWJsaWMgaW5wdXRGb2N1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtYW5hZ2VMaW5rOiBzdHJpbmc7XG4gIHB1YmxpYyB0ZW1wbGF0ZXNMaW5rOiBzdHJpbmc7XG4gIHB1YmxpYyByU2VjdXJlRnJvbnRFbmQ6IHN0cmluZztcbiAgcHVibGljIHJGb3JtRnJvbnRFbmQ6IHN0cmluZztcbiAgcHVibGljIGlzTGl2ZVZpZXcgPSBmYWxzZTtcbiAgcHVibGljIHZlcmRvY3NfdXJsOiBzdHJpbmc7XG4gIHB1YmxpYyBpbWFnZV91cmw6IHN0cmluZztcbiAgcHVibGljIGlzQXRPcmlnaW5hbE9yaWdpbjogYm9vbGVhbjtcbiAgcHVibGljIGFwcF92ZXJzaW9uOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIGN1cnJlbnRBdDogc3RyaW5nID0gJydcblxuICBASW5wdXQoKSBjdXJyZW50T3JpZ2luOiAnckZvcm0nIHwgJ3JBY2NvdW50JyB8ICdyU2VjdXJlJztcblxuICBAVmlld0NoaWxkKCdoZWFkZXJDb250YWluZXInLCB7IHN0YXRpYzogZmFsc2UgfSkgaGVhZGVyOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdzZWFyY2gnLCB7IHN0YXRpYzogZmFsc2UgfSkgc2VhcmNoQmFyOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCd0ZW1wbGF0ZVRpdGxlJywgeyBzdGF0aWM6IGZhbHNlIH0pIHRlbXBsYXRlVGl0bGVJbnB1dDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgncHJldmlld0lucHV0JywgeyBzdGF0aWM6IGZhbHNlIH0pIHByZXZpZXdJbnB1dDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnZ2VuZXJhbElucHV0JywgeyBzdGF0aWM6IGZhbHNlIH0pIGdlbmVyYWxJbnB1dDogRWxlbWVudFJlZjtcblxuICBwcml2YXRlIHNpZGVuYXZPcGVuOiBib29sZWFuO1xuICBwcml2YXRlIF9jYW5TdGFyOiBib29sZWFuID0gbnVsbDtcbiAgcHJpdmF0ZSBfY2FuQ3JlYXRlOiBib29sZWFuID0gbnVsbDtcbiAgcHJpdmF0ZSBfY2FuRWRpdDogYm9vbGVhbiA9IG51bGw7XG4gIHByaXZhdGUgX3VzZXJTdGFycmVkOiBib29sZWFuID0gbnVsbDtcbiAgcHJpdmF0ZSBtZXRhRGF0YVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSB0aXRsZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSB0aXRsZUlucHV0U3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIHRpdGxlS2V5RG93blN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSB0ZW1wbGF0ZU5hbWVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgdGVtcGxhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgc2F2ZVN0YXR1c1N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSBwcm9maWxlTG9hZGluZ1N1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSB1c2VyRGF0YVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSBtb2RlU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIHByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSBnZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgbmF2aWdhdGlvbkV2ZW50U3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIGNzdkJsb2JTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgaW5wdXRUaW1lcjogTm9kZUpTLlRpbWVvdXQ7XG4gIHByaXZhdGUgb3JpZ2luOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB2ZXJkb2NzSGVhZGVyU2VydmljZTogVmVyZG9jc0hlYWRlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSB2VG9rZW5TdGF0ZVNlcnZpY2U6IFZlcmRvY3NTdGF0ZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSB2VG9rZW5PYmplY3RTZXJ2aWNlOiBWZXJkb2NzVG9rZW5PYmplY3RTZXJ2aWNlLFxuICAgIHByaXZhdGUgdkF1dGhTZXJ2aWNlOiBWZXJkb2NzQXV0aFNlcnZpY2UsXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUd1YXJkOiBUZW1wbGF0ZXNHdWFyZFNlcnZpY2UsXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICBwcml2YXRlIGNkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBjb21waWxlcjogQ29tcGlsZXIsXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybVxuICApIHtcbiAgICB0aGlzLmNvbm5lY3Rpb25zID0gdGhpcy5pbmplY3Rvci5nZXQoY29ubmVjdGlvbkNvbmZpZ1Rva2VuKTtcbiAgICB0aGlzLm15QWNjb3VudFVybCA9IHRoaXMuY29ubmVjdGlvbnMuckFjY291bnRfZnJvbnRlbmRfdXJsICsgJy9yQWNjb3VudCc7XG4gICAgdGhpcy50ZXJtc1VybCA9IHRoaXMuY29ubmVjdGlvbnMuclNlY3VyZV9mcm9udGVuZF91cmwgKyAnL3Rlcm1zJztcbiAgICB0aGlzLnByaXZhY3lVcmwgPSB0aGlzLmNvbm5lY3Rpb25zLnJTZWN1cmVfZnJvbnRlbmRfdXJsICsgJy9wcml2YWN5JztcbiAgICB0aGlzLm9yZ2FuaXphdGlvbkltZ1NyYyA9IGAke3RoaXMuY29ubmVjdGlvbnMuckFjY291bnRfZnJvbnRlbmRfdXJsfS9hc3NldHMvb3JnYW5pemF0aW9uL3NlbGVjdC1wcm9maWxlLnBuZ2A7XG4gICAgdGhpcy52ZXJkb2NzX3VybCA9IHRoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsO1xuICAgIHRoaXMubWFuYWdlTGluayA9IGAke3RoaXMudmVyZG9jc191cmx9L21hbmFnZWA7XG4gICAgdGhpcy50ZW1wbGF0ZXNMaW5rID0gYCR7dGhpcy52ZXJkb2NzX3VybH0vdGVtcGxhdGVzYDtcbiAgICB0aGlzLnJTZWN1cmVGcm9udEVuZCA9IHRoaXMuY29ubmVjdGlvbnMuclNlY3VyZV9mcm9udGVuZF91cmw7XG4gICAgdGhpcy5yRm9ybUZyb250RW5kID0gdGhpcy5jb25uZWN0aW9ucy5yRm9ybV9mcm9udGVuZF91cmw7XG4gICAgdGhpcy5jdXJyZW50T3JpZ2luID0gdGhpcy5jb25uZWN0aW9ucy5vcmlnaW47XG4gICAgdGhpcy5jdXJyZW50QXQgPSB0aGlzLmN1cnJlbnRPcmlnaW47XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnRlbXBsYXRlU3Vic2NyaXB0aW9uID0gdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50ZW1wbGF0ZVN1YmplY3Quc3Vic2NyaWJlKCh0ZW1wbGF0ZTogSVRlbXBsYXRlKSA9PiB7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXIoKTtcbiAgICB9KTtcbiAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybSkpIHtcbiAgICAgIGlmICh3aW5kb3cgJiYgd2luZG93LmxvY2F0aW9uIHx8IHRoaXMuY29ubmVjdGlvbnMuYXBwX3ZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5vcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAod2luZG93LmxvY2F0aW9uLnBvcnQgPyAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydDogJycpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3JpZ2luICYmIHRoaXMub3JpZ2luLmluY2x1ZGVzKCcvc3RhZ2UuJykgfHwgdGhpcy5vcmlnaW4uaW5jbHVkZXMoJy9sb2NhbGhvc3QnKSkge1xuICAgICAgICB0aGlzLmFwcF92ZXJzaW9uID0gdGhpcy5jb25uZWN0aW9ucy5hcHBfdmVyc2lvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXBwX3ZlcnNpb24gPSAnJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0aGlzLnZBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB0aGlzLnZUb2tlblN0YXRlU2VydmljZS5nZXRFbWFpbFZlcmlmaWNhdGlvbigpO1xuICAgIHRoaXMubmF2aWdhdGlvbkV2ZW50U3Vic2NyaXB0aW9uID0gdGhpcy5yb3V0ZXIuZXZlbnRzLnN1YnNjcmliZShldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKSB7XG4gICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdGhpcy52QXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC51cmwgJiYgKChldmVudC51cmwuaW5jbHVkZXMoJ2RvY3VtZW50LycpICYmICFldmVudC51cmwuaW5jbHVkZXMoJ2VudmVsb3Blcy9kb2N1bWVudCcpKSB8fCBldmVudC51cmwuaW5jbHVkZXMoJ3ZpZXcvbGl2ZS8nKSkpIHtcbiAgICAgICAgICB0aGlzLmlzQXRPcmlnaW5hbE9yaWdpbiA9IHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UuZ2V0QXRPcmlnaW4odGhpcy5jdXJyZW50T3JpZ2luKTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRBdCA9IHRoaXMuY3VycmVudE9yaWdpbjtcbiAgICAgICAgICB0aGlzLm1vZGUgPSAncHJldmlldyc7XG4gICAgICAgICAgaWYgKGV2ZW50LnVybC5pbmNsdWRlcygndmlldy9saXZlLycpKSB7XG4gICAgICAgICAgICB0aGlzLmlzTGl2ZVZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZURldGFpbHNFeHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzTGl2ZVZpZXcgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tb2RlID0gJ25vdC1wcmV2aWV3JztcbiAgICAgICAgICB0aGlzLmlzTGl2ZVZpZXcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAncHJldmlldycpIHtcbiAgICAgICAgICB0aGlzLmltYWdlX3VybCA9IGAke3RoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsfS9hc3NldHMvd2hpdGUtbG9nby5zdmdgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaW1hZ2VfdXJsID0gYCR7dGhpcy5jb25uZWN0aW9ucy5yRm9ybV9mcm9udGVuZF91cmx9L2Fzc2V0cy9icmVhay1ibGFjay1sb2dvLnN2Z2A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXRQcm9maWxlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhcigpO1xuICAgICAgICB0aGlzLmNoZWNrQ2FuU3RhcigpO1xuICAgICAgICB0aGlzLl9jYW5FZGl0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jYW5DcmVhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucGFnZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uU3RhcnQpIHtcbiAgICAgICAgdGhpcy5wYWdlTG9hZGluZyA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy50aXRsZVN1YnNjcmlwdGlvbiA9IHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UudGl0bGVTdWJqZWN0LnN1YnNjcmliZSh0aXRsZSA9PiB7XG4gICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5jc3ZCbG9iU3Vic2NyaXB0aW9uID0gdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5jc3ZCbG9iU3ViamVjdC5zdWJzY3JpYmUoYmxvYiA9PiB7XG4gICAgICBpZiAoYmxvYikge1xuICAgICAgICB0aGlzLmNzdkJsb2IgPSBibG9iO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jc3ZCbG9iID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNhdmVTdGF0dXNTdWJzY3JpcHRpb24gPSB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnNhdmVTdGF0dXNTdWJqZWN0LnN1YnNjcmliZShzdGF0dXMgPT4ge1xuICAgICAgdGhpcy5zYXZlU3RhdHVzID0gc3RhdHVzO1xuICAgIH0pO1xuICAgIHRoaXMucHJvZmlsZUxvYWRpbmdTdWJzY3JpcHRpb24gPSB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnByb2ZpbGVMb2FkaW5nU3ViamVjdC5zdWJzY3JpYmUoc3RhdHVzID0+IHtcbiAgICAgIHRoaXMubG9hZGluZyA9IHN0YXR1cztcbiAgICB9KTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLm1ldGFEYXRhU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy50aXRsZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMudGl0bGVJbnB1dFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMudGl0bGVLZXlEb3duU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy50ZW1wbGF0ZU5hbWVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnRlbXBsYXRlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5zYXZlU3RhdHVzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5wcm9maWxlTG9hZGluZ1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMudXNlckRhdGFTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLm1vZGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICBpZiAoISF0aGlzLmdlbmVyYWxJbnB1dFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5nZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgaWYgKCEhdGhpcy5wcmV2aWV3SW5wdXRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMucHJldmlld0lucHV0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHRoaXMubmF2aWdhdGlvbkV2ZW50U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5jc3ZCbG9iU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5jb21waWxlci5jbGVhckNhY2hlKCk7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuICAgIGlmICh0aGlzLnZBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiB0aGlzLm1vZGUgIT09ICd2aWV3Jykge1xuICAgICAgYXdhaXQgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5pbml0Tm90aWZpY2F0aW9uU2VydmljZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBob21lX3VybCgpIHtcbiAgICByZXR1cm4gdGhpcy52VG9rZW5TdGF0ZVNlcnZpY2UuZ2V0SURUb2tlbigpID8gdGhpcy5jb25uZWN0aW9ucy5yRm9ybV9mcm9udGVuZF91cmwgKyAnL2Rhc2hib2FyZCcgOiB0aGlzLmNvbm5lY3Rpb25zLnJGb3JtX2Zyb250ZW5kX3VybDtcbiAgfVxuXG4gIHByZXZpZXdJbnB1dEV2ZW50KGV2ZW50KSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaW5wdXRUaW1lcik7XG4gICAgdGhpcy5pbnB1dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHModGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgZ2VuZXJhbElucHV0RXZlbnQoZXZlbnQpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTtcbiAgICB0aGlzLmlucHV0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0cyh0aGlzLmdlbmVyYWxJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlucHV0VGltZXIpO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICBwcmVwYXJlU2VhcmNoSW5wdXQoKSB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3ByZXZpZXcnKSB7XG4gICAgICB0aGlzLmxpc3RlbkZvclByZXZpZXdJbnB1dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxpc3RlbkZvckdlbmVyYWxJbnB1dCgpO1xuICAgIH1cbiAgfVxuXG4gIGxpc3RlbkZvclByZXZpZXdJbnB1dCgpIHtcbiAgICBpZiAodGhpcy5nZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByZXZpZXdJbnB1dCkge1xuICAgICAgaWYgKCF0aGlzLnByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLnByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbiA9IGZyb21FdmVudCh0aGlzLnByZXZpZXdJbnB1dC5uYXRpdmVFbGVtZW50LCAna2V5dXAnKVxuICAgICAgICAgIC5waXBlKFxuICAgICAgICAgICAgZGVib3VuY2VUaW1lKDUwMCksXG4gICAgICAgICAgICBkaXN0aW5jdFVudGlsQ2hhbmdlZCgpXG4gICAgICAgICAgKS5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlOYW1lID0gZXZlbnRbJ2NvZGUnXSB8fCBldmVudFsna2V5J107XG4gICAgICAgICAgICBpZiAoa2V5TmFtZSkge1xuICAgICAgICAgICAgICBpZiAoa2V5TmFtZSAhPT0gJ0VudGVyJyAmJiBrZXlOYW1lICE9PSAnQXJyb3dEb3duJyAmJiBrZXlOYW1lICE9PSAnQXJyb3dVcCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHModGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0cyh0aGlzLnByZXZpZXdJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsaXN0ZW5Gb3JHZW5lcmFsSW5wdXQoKSB7XG4gICAgaWYgKHRoaXMucHJldmlld0lucHV0U3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZW5lcmFsSW5wdXQpIHtcbiAgICAgIGlmICghdGhpcy5nZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5nZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24gPSBmcm9tRXZlbnQodGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudCwgJ2tleXVwJylcbiAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgIGRlYm91bmNlVGltZSg1MDApLFxuICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKVxuICAgICAgICAgICkuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5TmFtZSA9IGV2ZW50Wydjb2RlJ10gfHwgZXZlbnRbJ2tleSddO1xuICAgICAgICAgICAgaWYgKGtleU5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKGtleU5hbWUgIT09ICdFbnRlcicgJiYga2V5TmFtZSAhPT0gJ0Fycm93RG93bicgJiYga2V5TmFtZSAhPT0gJ0Fycm93VXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHRzKHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHModGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNhblN0YXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhblN0YXI7XG4gIH1cblxuICBnZXQgdXNlclN0YXJyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJTdGFycmVkO1xuICB9XG5cbiAgZ2V0IGNhbkVkaXQoKSB7XG4gICAgaWYgKHR5cGVvZiAodGhpcy5fY2FuRWRpdCkgIT09ICdib29sZWFuJyAmJiB0aGlzLnRlbXBsYXRlR3VhcmQgJiYgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgJiYgdGhpcy50ZW1wbGF0ZSkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnRlbXBsYXRlR3VhcmQuY2FuUGVyZm9ybUFjdGlvbihUZW1wbGF0ZUFjdGlvbnMuV1JJVEUsIHRoaXMudGVtcGxhdGUpO1xuICAgICAgdGhpcy5fY2FuRWRpdCA9IHJlc3BvbnNlWydjYW5QZXJmb3JtJ11cbiAgICB9XG4gICAgaWYgKCF0aGlzLmlzQXV0aGVudGljYXRlZCAmJiB0aGlzLnRlbXBsYXRlKSB7XG4gICAgICB0aGlzLl9jYW5FZGl0ID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYW5FZGl0XG4gIH1cblxuICBnZXQgY2FuQ3JlYXRlKCkge1xuICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgaWYgKHR5cGVvZiAodGhpcy5fY2FuQ3JlYXRlKSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdGhpcy52VG9rZW5PYmplY3RTZXJ2aWNlLmdldFZlcmRvY3NQZXJtaXNzaW9ucygpO1xuICAgICAgICB0aGlzLl9jYW5DcmVhdGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHBlcm1pc3Npb25zICYmIHBlcm1pc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBwZXJtaXNzaW9ucy5mb3JFYWNoKHBlcm1pc3Npb24gPT4ge1xuICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24uaW5jbHVkZXMoJ2NyZWF0b3I6Y3JlYXRlJykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhbkNyZWF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9jYW5DcmVhdGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBnZXRQcm9maWxlKCkge1xuICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdGhpcy5jdXJyZW50UHJvZmlsZSA9IHRoaXMudlRva2VuT2JqZWN0U2VydmljZS5nZXRQcm9maWxlKCk7XG4gICAgfVxuICB9XG5cbiAgc2VsZWN0ZWQoZXZlbnQpIHtcbiAgICBpZiAoKHRoaXMuZ2VuZXJhbElucHV0ICYmIHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpIHx8ICh0aGlzLnByZXZpZXdJbnB1dCAmJiB0aGlzLnByZXZpZXdJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKSkge1xuICAgICAgZXZlbnQub3B0aW9uLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICBjaGVja0NhblN0YXIoKSB7XG4gICAgdGhpcy5fY2FuU3RhciA9IHRoaXMuaXNBdXRoZW50aWNhdGVkO1xuICB9XG5cbiAgZ2V0U2VhcmNoUmVzdWx0cyhzZWFyY2hfc3RyaW5nOiBzdHJpbmcpIHtcbiAgICB0aGlzLmlzU2VhcmNoaW5nID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2Uuc2VhcmNoRW52ZWxvcGVzKHsgZW52ZWxvcGVfbmFtZTogc2VhcmNoX3N0cmluZywgcm93OiAzIH0pLnN1YnNjcmliZShyZXN1bHQgPT4ge1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgSHR0cFJlc3BvbnNlKSB7XG4gICAgICAgICAgdGhpcy5lbnZlbG9wZVJlc3VsdCA9IHJlc3VsdC5ib2R5WydyZXN1bHQnXSBhcyBFbnZlbG9wZVtdO1xuICAgICAgICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2Uuc2VhcmNoVGVtcGxhdGVzKHsgbmFtZTogc2VhcmNoX3N0cmluZywgcm93OiAzIH0pLnN1YnNjcmliZShyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEh0dHBSZXNwb25zZSkge1xuICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlUmVzdWx0ID0gcmVzdWx0LmJvZHlbJ3Jlc3VsdCddIGFzIElUZW1wbGF0ZVtdO1xuICAgICAgICAgICAgICB0aGlzLmlzU2VhcmNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnNlYXJjaFRlbXBsYXRlcyh7IG5hbWU6IHNlYXJjaF9zdHJpbmcsIHJvdzogMyB9KS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEh0dHBSZXNwb25zZSkge1xuICAgICAgICAgIHRoaXMudGVtcGxhdGVSZXN1bHQgPSByZXN1bHQuYm9keVsncmVzdWx0J10gYXMgSVRlbXBsYXRlW107XG4gICAgICAgICAgdGhpcy5pc1NlYXJjaGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZWNpcGllbnRUcmFja2luZyhpbmRleCwgaXRlbSkge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIHRvZ2dsZU1lbnUoKSB7XG4gICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50b2dnbGVTaWRlbmF2KCF0aGlzLnNpZGVuYXZPcGVuKTtcbiAgfVxuXG4gIHNldElucHV0Rm9jdXNlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuaW5wdXRGb2N1c2VkID0gdmFsdWU7XG4gIH1cblxuICBoYXNQcm9wKG9iajogYW55LCBrZXk6IHN0cmluZykge1xuICAgIHJldHVybiBvYmouaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgfVxuXG4gIHJvbGVDb2xvcihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UuZ2V0Um9sZUNvbG9yKG5hbWUpO1xuICB9XG5cbiAgdG9nZ2xlU2lkZW5hdigpIHtcbiAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnRvZ2dsZUJ1aWxkZXJTaWRlTmF2KCk7XG4gIH1cblxuICB0b2dnbGVUZW1wbGF0ZURldGFpbHMoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZURldGFpbHNFeHBhbmRlZCA9ICF0aGlzLnRlbXBsYXRlRGV0YWlsc0V4cGFuZGVkO1xuICAgIGlmICh0aGlzLnRlbXBsYXRlRGV0YWlsc0V4cGFuZGVkKSB7XG4gICAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnRlbXBsYXRlRGV0YWlsVG9nZ2xlU3ViamVjdC5uZXh0KHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMudGVtcGxhdGVOYW1lID0gJ1VuaXRpdGxlZCc7XG4gICAgLy8gdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50ZW1wbGF0ZU5hbWVTdWJqZWN0Lm5leHQoJ1VudGl0bGVkJyk7XG4gIH1cblxuICBnZXRSb2xlTmFtZXMocm9sZXMpIHtcbiAgICBpZiAocm9sZXMgJiYgcm9sZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGFzdF9pbmRleCA9IHJvbGVzLmxlbmd0aCAtIDE7XG4gICAgICBsZXQgbmFtZXNfc3RyaW5nID0gJyc7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHJvbGVzLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgIGlmICh4IDwgbGFzdF9pbmRleCkge1xuICAgICAgICAgIG5hbWVzX3N0cmluZyArPSByb2xlc1t4XVsnZnVsbF9uYW1lJ10gKyAnLCAnIGFzIHN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYW1lc19zdHJpbmcgKz0gcm9sZXNbeF1bJ2Z1bGxfbmFtZSddIGFzIHN0cmluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5hbWVzX3N0cmluZztcbiAgICB9XG4gIH1cblxuICBnZXRUZW1wbGF0ZVN0YXRzKHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5nZXRUZW1wbGF0ZVBhZ2VzKHRlbXBsYXRlKX0gICR7dGhpcy5nZXRUZW1wbGF0ZVNlcXVlbmNlKHRlbXBsYXRlKX0gICR7dGhpcy5nZXRUZW1wbGF0ZVJlY2lwaWVudHModGVtcGxhdGUpfWA7XG4gIH1cblxuICBnZXRUZW1wbGF0ZVBhZ2VzKHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucGFnZXMpIHtcbiAgICAgIHJldHVybiBgJHt0ZW1wbGF0ZS5wYWdlcy5sZW5ndGggPj0gMiA/IHRlbXBsYXRlLnBhZ2VzLmxlbmd0aCArICcgUGFnZXMnIDogJzEgUGFnZSd9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcwIFBhZ2UnO1xuICAgIH1cbiAgfVxuXG4gIGdldFRlbXBsYXRlU2VxdWVuY2UodGVtcGxhdGU6IElUZW1wbGF0ZSkge1xuICAgIGlmICh0ZW1wbGF0ZSAmJiB0ZW1wbGF0ZS5yb2xlcykge1xuICAgICAgbGV0IGhhc1ByZXBhcmVyID0gZmFsc2U7XG4gICAgICBsZXQgbWF4U2VxdWVuY2UgPSAtMTtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGVtcGxhdGUucm9sZXMubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgaWYgKHRlbXBsYXRlLnJvbGVzW3hdLnNlcXVlbmNlID4gbWF4U2VxdWVuY2UpIHtcbiAgICAgICAgICBtYXhTZXF1ZW5jZSA9IHRlbXBsYXRlLnJvbGVzW3hdLnNlcXVlbmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZW1wbGF0ZS5yb2xlc1t4XS5zZXF1ZW5jZSA9PT0gMCkge1xuICAgICAgICAgIGhhc1ByZXBhcmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b3RhbFNlcXVlbmNlID0gaGFzUHJlcGFyZXIgPyBtYXhTZXF1ZW5jZSArIDEgOiBtYXhTZXF1ZW5jZTtcbiAgICAgIHJldHVybiB0b3RhbFNlcXVlbmNlID4gMSA/IHRvdGFsU2VxdWVuY2UgKyAnIFNlcXVlbmNlcycgOiAnMSBTZXF1ZW5jZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnMCBTZXF1ZW5jZSc7XG4gICAgfVxuICB9XG5cbiAgZ2V0VGVtcGxhdGVSZWNpcGllbnRzKHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucm9sZXMpIHtcbiAgICAgIGNvbnN0IHRvdGFsUmVjaXBpZW50cyA9IHRlbXBsYXRlLnJvbGVzLmxlbmd0aDtcbiAgICAgIHJldHVybiB0b3RhbFJlY2lwaWVudHMgPiAxID8gdG90YWxSZWNpcGllbnRzICsgJyBSZWNpcGllbnRzJyA6ICcxIFJlY2lwaWVudCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnMCBSZWNpcGllbnQnXG4gICAgfVxuICB9XG5cbiAgZ29Ub0VudmVsb3BlKGVudmVsb3BlX2lkOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50T3JpZ2luID09PSAnckZvcm0nICYmIHRoaXMuaXNBdE9yaWdpbmFsT3JpZ2luKSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9lbnZlbG9wZS8ke2VudmVsb3BlX2lkfWBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYXRpb24uaHJlZiA9IGAke3RoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsfS9lbnZlbG9wZS8ke2VudmVsb3BlX2lkfWA7XG4gICAgfVxuICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dHMoKTtcbiAgfVxuXG4gIGdvVG9UZW1wbGF0ZSh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5vcGVuVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dHMoKTtcbiAgfVxuXG4gIGdvVG9UZW1wbGF0ZXMoa2V5d29yZCkge1xuICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2Uub3BlblRlbXBsYXRlcyhrZXl3b3JkKTtcbiAgfVxuXG4gIHNlYXJjaEVudmVsb3BlcygpIHtcbiAgICBjb25zdCBrZXl3b3JkID0gdGhpcy5nZXRTZWFyY2hLZXl3b3JkKCk7XG4gICAgaWYgKGtleXdvcmQgIT09ICcnKSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9tYW5hZ2VgXSwgeyBxdWVyeVBhcmFtczogeyBlbnZlbG9wZV9uYW1lOiBrZXl3b3JkIH0gfSk7XG4gICAgICB0aGlzLmNsZWFyU2VhcmNoSW5wdXRzKCk7XG4gICAgfVxuICB9XG5cbiAgc2VhcmNoUmVjaXBpZW50cygpIHtcbiAgICBjb25zdCBrZXl3b3JkID0gdGhpcy5nZXRTZWFyY2hLZXl3b3JkKCk7XG4gICAgaWYgKGtleXdvcmQgIT09ICcnKSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9tYW5hZ2VgXSwgeyBxdWVyeVBhcmFtczogeyByZWNpcGllbnRfbmFtZToga2V5d29yZCB9IH0pO1xuICAgICAgdGhpcy5jbGVhclNlYXJjaElucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHNlYXJjaFRlbXBsYXRlcygpIHtcbiAgICBjb25zdCBrZXl3b3JkID0gdGhpcy5nZXRTZWFyY2hLZXl3b3JkKCk7XG4gICAgaWYgKGtleXdvcmQgIT09ICcnKSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC90ZW1wbGF0ZXNgXSwgeyBxdWVyeVBhcmFtczogeyBuYW1lOiBrZXl3b3JkIH0gfSk7XG4gICAgICB0aGlzLmNsZWFyU2VhcmNoSW5wdXRzKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U2VhcmNoS2V5d29yZCgpIHtcbiAgICBpZiAodGhpcy5wcmV2aWV3SW5wdXQgJiYgdGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJldmlld0lucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmdlbmVyYWxJbnB1dCAmJiB0aGlzLmdlbmVyYWxJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgY2xlYXJTZWFyY2hJbnB1dHMoKSB7XG4gICAgaWYgKHRoaXMucHJldmlld0lucHV0KSB7XG4gICAgICB0aGlzLnByZXZpZXdJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgfVxuICAgIGlmICh0aGlzLmdlbmVyYWxJbnB1dCkge1xuICAgICAgdGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICB0aGlzLmVudmVsb3BlUmVzdWx0ID0gW107XG4gICAgdGhpcy50ZW1wbGF0ZVJlc3VsdCA9IFtdO1xuICB9XG5cbiAgdXBkYXRlU3RhcigpIHtcbiAgICBpZiAodGhpcy50ZW1wbGF0ZSAmJiB0aGlzLmN1cnJlbnRQcm9maWxlICYmIHRoaXMudGVtcGxhdGUudGVtcGxhdGVfc3RhcnMpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nU3RhckluZGV4ID0gZmluZEluZGV4KHRoaXMudGVtcGxhdGUudGVtcGxhdGVfc3RhcnMsIHsgcHJvZmlsZV9pZDogdGhpcy5jdXJyZW50UHJvZmlsZS5pZCwgdGVtcGxhdGVfaWQ6IHRoaXMudGVtcGxhdGUuaWQgfSk7XG4gICAgICB0aGlzLl91c2VyU3RhcnJlZCA9IGV4aXN0aW5nU3RhckluZGV4ID4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGFyVGVtcGxhdGUoKSB7XG4gICAgaWYgKHRoaXMuY2FuU3Rhcikge1xuICAgICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5zdGFyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZS5pZCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgIHRoaXMudGVtcGxhdGUudGVtcGxhdGVfc3RhcnMucHVzaChyZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXIoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB0aGlzLmNyZWF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgdW5zdGFyVGVtcGxhdGUoKSB7XG4gICAgaWYgKHRoaXMuY2FuU3Rhcikge1xuICAgICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS51bnN0YXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLmlkKS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgICAgY29uc3QgcmVtb3ZlZFN0YXJJbmRleCA9IGZpbmRJbmRleCh0aGlzLnRlbXBsYXRlLnRlbXBsYXRlX3N0YXJzLCB7IHByb2ZpbGVfaWQ6IHRoaXMuY3VycmVudFByb2ZpbGUuaWQsIHRlbXBsYXRlX2lkOiB0aGlzLnRlbXBsYXRlLmlkIH0pO1xuICAgICAgICBpZiAocmVtb3ZlZFN0YXJJbmRleCA+IC0xKSB7XG4gICAgICAgICAgdGhpcy50ZW1wbGF0ZS50ZW1wbGF0ZV9zdGFycy5zcGxpY2UocmVtb3ZlZFN0YXJJbmRleCwgMSk7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdGFyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB0aGlzLmNyZWF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZWRpdFRlbXBsYXRlKCkge1xuICAgIGlmICh0aGlzLmNhbkVkaXQpIHtcbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgL2J1aWxkZXIvJHt0aGlzLnRlbXBsYXRlLmlkfS9maWVsZHNgXSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHRoaXMuY3JlYXRlVGVtcGxhdGUoKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVUZW1wbGF0ZSgpIHtcbiAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnRvZ2dsZUNyZWF0ZSgpO1xuICB9XG5cbn1cbiJdfQ==