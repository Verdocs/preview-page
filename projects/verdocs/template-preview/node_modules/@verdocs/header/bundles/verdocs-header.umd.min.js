!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@angular/forms"),require("@angular/router"),require("@angular/material/autocomplete"),require("@angular/material/button"),require("@angular/material/chips"),require("@angular/material/dialog"),require("@angular/material/icon"),require("@angular/material/radio"),require("@angular/material/select"),require("@angular/material/snack-bar"),require("@angular/material/progress-spinner"),require("@angular/material/tooltip"),require("@verdocs/notifications"),require("@verdocs/tokens"),require("@verdocs/profiles"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("file-saver")):"function"==typeof define&&define.amd?define("@verdocs/header",["exports","@angular/core","@angular/common","@angular/common/http","@angular/forms","@angular/router","@angular/material/autocomplete","@angular/material/button","@angular/material/chips","@angular/material/dialog","@angular/material/icon","@angular/material/radio","@angular/material/select","@angular/material/snack-bar","@angular/material/progress-spinner","@angular/material/tooltip","@verdocs/notifications","@verdocs/tokens","@verdocs/profiles","rxjs","rxjs/operators","lodash","file-saver"],t):t(((e=e||self).verdocs=e.verdocs||{},e.verdocs.header={}),e.ng.core,e.ng.common,e.ng.common.http,e.ng.forms,e.ng.router,e.ng.material.autocomplete,e.ng.material.button,e.ng.material.chips,e.ng.material.dialog,e.ng.material.icon,e.ng.material.radio,e.ng.material.select,e.ng.material["snack-bar"],e.ng.material["progress-spinner"],e.ng.material.tooltip,e.notifications,e.tokens,e.profiles,e.rxjs,e.rxjs.operators,e.lodash,e.fileSaver)}(this,function(e,t,i,n,r,a,o,s,l,c,p,d,h,u,_,m,v,g,f,b,x,w,y){"use strict";function S(e,t,i,n){return new(i||(i=Promise))(function(r,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(o,s)}l((n=n.apply(e,t||[])).next())})}function k(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function E(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}var T={CREATOR:"creator",ORGANIZATION_MEMBER:"organization_member",ORGANIZATION_MEMBER_AS_CREATOR:"organization_member_as_creator",EVERYONE:"everyone",EVERYONE_AS_CREATOR:"everyone_as_creator"},I={TEMPLATE_CREATOR_CREATE_PUBLIC:"template:creator:create:public",TEMPLATE_CREATOR_CREATE_ORG:"template:creator:create:org",TEMPLATE_CREATOR_CREATE_PERSONAL:"template:creator:create:personal",TEMPLATE_CREATOR_DELETE:"template:creator:delete",TEMPLATE_CREATOR_VISIBILITY:"template:creator:visibility",TEMPLATE_MEMBER_READ:"template:member:read",TEMPLATE_MEMBER_WRITE:"template:member:write",TEMPLATE_MEMBER_DELETE:"template:member:delete",TEMPLATE_MEMBER_VISIBILITY:"template:member:visibility"},A={CREATE_PERSONAL:"create_personal",CREATE_ORG:"create_org",CREATE_PUBLIC:"create_public",READ:"read",WRITE:"write",DELETE:"delete",CHANGE_VISIBILITY_PERSONAL:"change_visibility_personal",CHANGE_VISIBILITY_ORG:"change_visibility_org",CHANGE_VISIBILITY_PUBLIC:"change_visibility_public"};var P=function(){function e(e){this.vTokenObjectService=e}return e.prototype.canPerformAction=function(e,t){try{var i=!1,n=null,r=[];if(!t&&e&&!e.includes("create"))throw{error:"You need to provide template object"};var a=this.vTokenObjectService.getProfile(),o=!!a&&(t&&t.profile_id===a.id),s=!!a&&(t&&t.organization_id===a.organization_id),l=t?t.is_personal:null,c=t?t.is_public:null;switch(e){case A.CREATE_PERSONAL:r.push(I.TEMPLATE_CREATOR_CREATE_PERSONAL);break;case A.CREATE_ORG:r.push(I.TEMPLATE_CREATOR_CREATE_ORG);break;case A.CREATE_PUBLIC:r.push(I.TEMPLATE_CREATOR_CREATE_PUBLIC);break;case A.READ:o||(!l&&s||!c)&&r.push(I.TEMPLATE_MEMBER_READ);break;case A.WRITE:o||(r.push(I.TEMPLATE_MEMBER_READ),r.push(I.TEMPLATE_MEMBER_WRITE));break;case A.CHANGE_VISIBILITY_PERSONAL:o?r.push(I.TEMPLATE_CREATOR_CREATE_PERSONAL):r.push(I.TEMPLATE_MEMBER_VISIBILITY);break;case A.CHANGE_VISIBILITY_ORG:o?r.push(I.TEMPLATE_CREATOR_CREATE_ORG):r.push(I.TEMPLATE_MEMBER_VISIBILITY);break;case A.CHANGE_VISIBILITY_PUBLIC:o?(r.push(I.TEMPLATE_CREATOR_CREATE_PUBLIC),r.push(I.TEMPLATE_CREATOR_VISIBILITY)):r.push(I.TEMPLATE_MEMBER_VISIBILITY);break;case A.DELETE:o?r.push(I.TEMPLATE_CREATOR_DELETE):r.push(I.TEMPLATE_MEMBER_DELETE);break;default:throw{error:"Action is not defined"}}return this.hasPermissions(r)?i=!0:n="Insufficient access to perform '"+e+"'. Needed permissions: "+r.toString(),{canPerform:i,message:n}}catch(t){console.error({message:"Failed to check whether action ("+e+") can be done, in TemplateGuardService",err:t})}},e.prototype.hasPermissions=function(e){var t=this.vTokenObjectService.getPermissions();return w.intersection(t,e).length===e.length},e.prototype.canBeSender=function(e){var t=this.vTokenObjectService.getProfile();if(!t)return!1;switch(e.sender){case T.CREATOR:return t.id===e.profile_id;case T.ORGANIZATION_MEMBER:case T.ORGANIZATION_MEMBER_AS_CREATOR:return t.id===e.profile_id||e.organization_id===t.organization_id;default:return!0}},e.prototype.canUserCreateTemplate=function(){return this.canPerformAction(A.CREATE_PERSONAL,null).canPerform||this.canPerformAction(A.CREATE_ORG,null).canPerform||this.canPerformAction(A.CREATE_PUBLIC,null).canPerform},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:g.VerdocsTokenObjectService}]},e}();var R=function(){function e(e,t,i){this.router=e,this.verdocsTokenObjectService=t,this.injector=i,this.error=null,this.currentProfile=null,this.error_code=null,this.error_title=null,this.error_message=null,this.tokenConfig=this.injector.get(V),this.rSecureUrl=this.tokenConfig.rSecure_frontend_url,this.rFormUrl=this.tokenConfig.rForm_frontend_url}return e.prototype.ngOnInit=function(){this.currentProfile=this.verdocsTokenObjectService.getProfile(),this.error&&this.error.hasOwnProperty("error")&&(this.error_code=this.error.error.code||null,this.error_code&&this.prepareErroContent())},e.prototype.prepareErroContent=function(){switch(this.error_code){case"AUTH0002":case"T000001":this.error_title="This document is not accessible",this.error_message=(this.currentProfile?"Try using a different organization/account, ":"Try signing in, signing up, ")+"or requesting access from the owner of this document.";break;case"AUTH0003":this.error_title="Cannot complete your request",this.error_message="Try after "+(this.currentProfile?"signing in again.":"signing in or signing up.");break;default:this.error_title="Your request has been denied.",this.error_message=null}},e.prototype.goToDashboard=function(){this.router.navigate(["/dashboard"])},e.prototype.signIn=function(){window&&(window.location.href=this.rSecureUrl+"/login?redirect_url="+(this.rFormUrl+this.router.url))},e.prototype.signUp=function(){window&&(window.location.href=this.rSecureUrl+"/signup?redirect_url="+(this.rFormUrl+this.router.url))},e.decorators=[{type:t.Component,args:[{selector:"four-oh-one-dialog",template:'<div class="error__container">\n  <div class="error__title">\n    {{error_title}}\n  </div>\n  <div class="error__body" *ngIf="error_message">\n    {{error_message}}\n  </div>\n  <div class="error__action">\n    <button class="error__action-button left" mat-button *ngIf="currentProfile" (click)="goToDashboard()">go to dashboard</button>\n    <button class="error__action-button left" mat-button *ngIf="!currentProfile" (click)="signUp()">sign up</button>\n    <button class="error__action-button" mat-button (click)="signIn()">sign in</button>\n  </div>\n</div>',styles:[".error__container{padding-top:8px;padding-left:8px;padding-right:8px;max-width:640px}.error__title{padding:16px 16px 8px;font-size:20px;line-height:24px;font-weight:500;color:rgba(0,0,0,.87)}.error__body{padding:16px 16px 8px;font-size:16px;line-height:24px;color:rgba(0,0,0,.54)}.error__action{padding:8px;text-align:right}.error__action-button{color:#37474f;text-transform:uppercase}.error__action-button.left{margin-right:8px}"]}]}],e.ctorParameters=function(){return[{type:a.Router},{type:g.VerdocsTokenObjectService},{type:t.Injector}]},e}();var C=function(){function e(e,t,i,n,r,a,o,s,l){this.injector=e,this.http=t,this.router=i,this.snackbar=n,this.dialog=r,this.templateGuard=a,this.vTokenStateService=o,this.vTokenObjectService=s,this.platform=l,this.titleSubject=new b.ReplaySubject,this.csvBlobSubject=new b.ReplaySubject,this.templates=new b.Subject,this.saveStatusSubject=new b.ReplaySubject,this.templateDetailToggleSubject=new b.Subject,this.profileLoadingSubject=new b.ReplaySubject,this.templateSubject=new b.Subject,this.allEnvelopes=new b.BehaviorSubject([]),this.sideNavStateSubject=new b.ReplaySubject,this.initiateBuilderAutofocus=new b.ReplaySubject,this.createToggleSubscription=new b.Subject,this._toggleSidenavSource=new b.BehaviorSubject(!1),this._title=new b.BehaviorSubject(""),this._selected=new b.BehaviorSubject(!1),this._pdfUrl=new b.BehaviorSubject(""),this._env=new b.BehaviorSubject({id:"",template_id:"",status:"",user_id:"",envelope_document_id:""}),this._envDoc=new b.BehaviorSubject({id:"",url:"",name:"",page_numbers:0,mime:""}),this.userFullname="",this.userInitial="",this.userEmail="",this.userPhone="",this.userData={name:this.userFullname,initial:null,email:this.userEmail,phone:this.userPhone},this.isAtOrigin=!1,this.currentOrganizationId=null,this.sidenavOpened=!1,this.toggleSidenav$=this._toggleSidenavSource.asObservable(),this.selectStatus$=this._selected.asObservable(),this.env$=this._env.asObservable(),this.titleValue$=this._title.asObservable(),this.pdfUrl$=this._pdfUrl.asObservable(),this.envDoc$=this._envDoc.asObservable(),this.userDataSubject=new b.ReplaySubject,this.userProfileSubject=new b.ReplaySubject,this.currentProfileSubject=new b.ReplaySubject,this.personalAccountSubject=new b.ReplaySubject,this.profilesSubject=new b.ReplaySubject,this.tokenConfig=this.injector.get(V),this.envUrl=this.tokenConfig.rForm_backend_url+"/envelopes",this.rForm_url=this.tokenConfig.rForm_frontend_url,this.rAccount_url=this.tokenConfig.rAccount_frontend_url,this.rSecure_url=this.tokenConfig.rSecure_frontend_url}return e.prototype.getAtOrigin=function(e){return this.isAtOrigin=e&&this.tokenConfig.origin&&e===this.tokenConfig.origin,this.isAtOrigin},e.prototype.toggleSidenav=function(e){this.updateToggleStatus(e),this._toggleSidenavSource.next(this.sidenavOpened)},e.prototype.updateToggleStatus=function(e){this.sidenavOpened=e},e.prototype.updateTitle=function(e){this._title.next(e)},e.prototype.updateSelectStatus=function(e){this._selected.next(e)},e.prototype.updatePdfUrl=function(e){this._pdfUrl.next(e)},e.prototype.updateEnv=function(e){this._env.next(e)},e.prototype.updateEnvDoc=function(e){this._envDoc.next(e)},e.prototype.initNotificationService=function(){},e.prototype.updateEnvelopes=function(e){this.allEnvelopes.next(e)},e.prototype.toggleCreate=function(){this.createToggleSubscription.next(!0)},e.prototype.searchEnvelopes=function(e){var t=this;for(var i in e)e.hasOwnProperty(i)&&null===e[i]&&delete e[i];return this.http.request(new n.HttpRequest("POST",this.envUrl+"/search",e,{reportProgress:!0,responseType:"json"})).pipe(x.map(function(e){return e instanceof n.HttpResponse&&t.updateEnvelopes(e.body),e}))},e.prototype.searchTemplates=function(e){for(var t in e)e.hasOwnProperty(t)&&null===e[t]&&delete e[t];return this.http.request(new n.HttpRequest("POST",this.tokenConfig.rForm_backend_url+"/templates/search",e,{reportProgress:!0,responseType:"json"})).pipe(x.map(function(e){return e}))},e.prototype.downloadTemplateDocument=function(e){var t=this;this.getTemplateDocument(e.id,e.template_documents[0]).then(function(n){if(i.isPlatformBrowser(t.platform)&&window&&window.URL){var r=URL.createObjectURL(n);y.saveAs(r,e.template_documents[0].name+".pdf")}})},e.prototype.getTemplateDocument=function(e,t){return this.http.get(this.tokenConfig.rForm_backend_url+"/templates/"+e+"/documents/"+t.id+"?file=true",{responseType:"blob"}).toPromise()},e.prototype.updateTemplates=function(e){this.templates.next(e)},e.prototype.toggleBuilderSideNav=function(){this.builderSideNavState=!this.builderSideNavState,this.sideNavStateSubject.next(this.builderSideNavState),!1===this.builderSideNavState&&this.initiateBuilderAutofocus.next(!1)},e.prototype.canUserEdit=function(e){return this.templateGuard.canPerformAction(A.WRITE,e).canPerform},e.prototype.updateTemplate=function(e,t){return this.http.put(this.tokenConfig.rForm_backend_url+"/templates/"+e,t).toPromise().then(function(e){return e})},e.prototype.openTemplate=function(e){this.canUserPreview(e)?location.href=this.tokenConfig.rForm_frontend_url+"/document/"+e.id:this.canUserEdit(e)?location.href=this.tokenConfig.rForm_frontend_url+"/builder/"+e.id+"/fields":this.snackbar.open("Template is in build mode, and not ready for use.  Please check back soon.")},e.prototype.openTemplates=function(e){"rForm"===this.tokenConfig.origin?""!==e.trim()?this.router.navigate(["documents"],{queryParams:{name:e}}):this.router.navigate(["documents"]):""!==e.trim()?location.href=this.tokenConfig.rForm_frontend_url+"/documents?name="+e:location.href=this.tokenConfig.rForm_frontend_url+"/documents"},e.prototype.getTemplateOwnerInfo=function(e){return this.http.get(this.tokenConfig.rForm_backend_url+"/templates/"+e+"?owner_info=true").toPromise().then(function(e){return e})},e.prototype.canUserPreview=function(e){var t,i,n,r=this.templateGuard.canPerformAction(A.READ,e).canPerform,a=e.roles,o=w.filter(a,{type:"signer"});n=o&&o.length>0;try{for(var s=E(o),l=s.next();!l.done;l=s.next()){var c=l.value;n=c.fields&&c.fields.length>0}}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return r&&n},e.prototype.starTemplate=function(e){var t=this;return this.http.post(this.tokenConfig.rForm_backend_url+"/templates/"+e+"/stars",{}).pipe(x.catchError(function(e){e&&401===e.status&&(t.dialog.open(R,{panelClass:"error__dialog",disableClose:!0}).componentInstance.error=e);return b.EMPTY}),x.map(function(e){return e}))},e.prototype.unstarTemplate=function(e){var t=this;return this.http.delete(this.tokenConfig.rForm_backend_url+"/templates/"+e+"/stars").pipe(x.catchError(function(e){e&&401===e.status&&(t.dialog.open(R,{panelClass:"error__dialog",disableClose:!0}).componentInstance.error=e);return b.EMPTY}),x.map(function(e){return e}))},e.prototype.updateTokens=function(e){return S(this,void 0,void 0,function(){var t=this;return k(this,function(i){return[2,new Promise(function(i,n){t.vTokenStateService.updateTokens(t.tokenConfig.rSecure_backend_url).subscribe(function(n){return n&&n.length>0&&e&&(t.snackbar.dismiss(),t.snackbar.open("Status updated")),t.getAccountData(),i()})})]})})},e.prototype.getAccountData=function(){this.vTokenObjectService.getProfile()&&this.getProfiles()},e.prototype.getProfiles=function(){var e=this;return this.http.get(this.tokenConfig.rAccount_backend_url+"/profiles").toPromise().then(function(t){var i=t.splice(w.findIndex(t,function(e){return"realster"===e.organization.name}),1);e.personalAccountSubject.next(i[0]),e.profileData=t.sort(function(e,t){return e.organization.name<t.organization.name?-1:e.organization.name>t.organization.name?1:0}),e.profileData.unshift(i[0]);var n=w.findIndex(e.profileData,{current:!0});e.profileData[n].first_name?(e.userFullname=e.profileData[n].first_name+" "+e.profileData[n].last_name,e.userInitial=e.profileData[n].first_name.charAt(0)+e.profileData[n].last_name.charAt(0)):e.userFullname="",e.profileData[n].phone?e.userPhone=e.profileData[n].phone:e.userPhone="",e.profileData[n].email&&(e.userEmail=e.profileData[n].email),e.userData={name:e.userFullname,initial:e.userInitial,email:e.userEmail,phone:e.userPhone},e.userProfileSubject.next(e.profileData);var r=e.profileData[n];return e.currentProfileSubject.next(r),e.currentOrganizationId=r.organization_id,e.userDataSubject.next(e.userData),e.userData})},e.prototype.getProfileCollection=function(e){var t=[];return e.forEach(function(e){t.push(new f.ProfileModel(e))}),new f.ProfileCollection(t)},e.prototype.switchProfile=function(e){var t=this;return this.profileLoadingSubject.next(!0),this.http.post(this.tokenConfig.rAccount_backend_url+"/profiles/"+e+"/switch",null).toPromise().then(function(e){return S(t,void 0,void 0,function(){return k(this,function(t){return this.vTokenStateService.setTokens(e.tokens),this.profileLoadingSubject.next(!1),[2,Promise.resolve(e)]})})})},e.prototype.resendEmailVerification=function(){var e=this;this.http.post(this.tokenConfig.rSecure_backend_url+"/user/email_verification",null).toPromise().then(function(){e.snackbar.open("Verification email sent")})},e.prototype.getNameValidity=function(e){return this.http.get(this.tokenConfig.rAccount_backend_url+"/organizations/is_valid?name="+e,this.getOptions()).toPromise().then(function(e){return Promise.resolve(e)})},e.prototype.createOrganization=function(e){return this.http.post(this.tokenConfig.rAccount_backend_url+"/organizations",e,this.getOptions()).toPromise().then(function(e){return Promise.resolve(e)})},e.prototype.getOptions=function(){if(!i.isPlatformServer(this.platform)){var e="Bearer "+this.vTokenStateService.getOtherCookieObject("rAccount_Verdocs").accessToken;return{headers:new n.HttpHeaders({"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"Sat, 01 Jan 2000 00:00:00 GMT","If-Modified-Since":"0","Content-Type":"application/json",Authorization:e,Accept:"application/json"})}}},e.prototype.getRoleColor=function(e,t){return t?this.getRGBA(t):this.template&&this.template.roles&&this.template.roles.length>0&&(t=w.findIndex(this.template.roles,{name:e}))>=0?this.template.roles[t].rgba?this.template.roles[t].rgba:this.getRGBA(t):this.nameToRGBA(e)},e.prototype.getRGB=function(e){var t=e.replace("rgba(","").replace(")","").split(","),i=t[0],n=t[1],r=t[2],a=t[3],o=1-a,s=Math.round(255*(a*(i/255)+o)),l=Math.round(255*(a*(n/255)+o)),c=Math.round(255*(a*(r/255)+o));return"#"+this.rgbToHex(s)+this.rgbToHex(l)+this.rgbToHex(c)},e.prototype.rgbToHex=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},e.prototype.getRGBA=function(e){switch(e%10){case 0:return 0===e?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}},e.prototype.nameToRGBA=function(e){if(e){var t=parseInt(e.slice(-1),10);isNaN(t)||(e+=(99*t).toString());for(var i=0,n=0;n<e.length;n++)i=e.charCodeAt(n)+((i<<5)-i);var r=(16776968&(i=Math.round(i/1.3))).toString(16).toUpperCase(),a="#"+"00000".substring(0,6-r.length)+r,o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),s={r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)};return"rgba("+s.r+", "+s.g+", "+s.b+", 0.2)"}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.Injector},{type:n.HttpClient},{type:a.Router},{type:u.MatSnackBar},{type:c.MatDialog},{type:P},{type:g.VerdocsStateService},{type:g.VerdocsTokenObjectService},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.INJECTOR),t.ɵɵinject(n.HttpClient),t.ɵɵinject(a.Router),t.ɵɵinject(u.MatSnackBar),t.ɵɵinject(c.MatDialog),t.ɵɵinject(P),t.ɵɵinject(g.VerdocsStateService),t.ɵɵinject(g.VerdocsTokenObjectService),t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e}();var O=function(){function e(e,t){this.verdocsHeaderService=e,this.vTokenObjectService=t,this.roles=[],this.sender="creator",this.sender_name=""}return e.prototype.ngOnChanges=function(){this.prepareSender(),this.prepareExistingRoles()},e.prototype.prepareSender=function(){return S(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return this.sender=this.template.sender||"creator",[4,this.updateSenderName()];case 1:return e.sent(),[2]}})})},e.prototype.updateSenderName=function(){return S(this,void 0,void 0,function(){var e,t;return k(this,function(i){switch(i.label){case 0:return e=this.vTokenObjectService.getProfile(),[4,this.verdocsHeaderService.getTemplateOwnerInfo(this.template.id)];case 1:switch(t=i.sent(),this.sender){case T.ORGANIZATION_MEMBER:this.sender_name="Anyone at "+(e?e.organization.name:"organization");break;case T.EVERYONE:this.sender_name="Anyone";break;case T.EVERYONE_AS_CREATOR:case T.CREATOR:case T.ORGANIZATION_MEMBER_AS_CREATOR:e&&this.template.profile_id===e.id?this.sender_name=e.first_name+" "+e.last_name+" (me)":this.sender_name=t.name+" (creator)"}return[2]}})})},e.prototype.prepareExistingRoles=function(e){var t=[];t=e&&e.length>0?e:this.template.roles.sort(function(e,t){return e.sequence-t.sequence}).slice(),t=this.setStyles(t),this.roles=[];for(var i=0;i<t.length;i++)if(t[i]){var n=t[i].sequence-1;t[i].status||(t[i].status=null),t[i].old_name||(t[i].old_name=t[i].name),void 0===this.roles[n]?this.roles[n]=[t[i]]:this.roles[n].push(t[i])}this.roles&&0===this.roles.length&&!this.roles[0]&&(this.roles=[],this.roles[0]=[])},e.prototype.setStyles=function(e){var t=this;return e.forEach(function(e,i){e&&(e.full_name&&e.email?e.style={border:"1px solid "+t.verdocsHeaderService.getRGBA(i),"background-color":"transparent"}:e.style={background:t.verdocsHeaderService.getRGBA(i),border:"1px solid getRGBA(index)"})}),e},e.decorators=[{type:t.Component,args:[{selector:"app-recipient-editor",template:'<div class="template-recipients__container" *ngIf="template">\n  <div class="template-recipients__wrapper">\n    <div class="template-recipients__body">\n      <div class="template-recipients__sender">\n        <div class="template-recipients__icon">\n          <mat-icon class="template-recipients__icon-icon" matTooltip="Sender" [matTooltipPosition]="\'below\'">trip_origin</mat-icon>\n        </div>\n        <div class="template-recipients__dots"></div>\n        <div class="template-recipients__chips sender">\n          <mat-chip class="template-recipients__chip-sender">\n            <span>\n              {{sender_name}}\n            </span>\n          </mat-chip>\n        </div>\n      </div>\n      <div class="template-recipients__roles" *ngIf="roles && roles.length > 0">\n        <div class="template-recipients__role" *ngFor="let sequence of roles; let sequenceIndex = index;">\n          <div class="template-recipients__icon">\n            <mat-icon class="template-recipients__icon-icon" matTooltip="Sequence" [matTooltipPosition]="\'below\'">place</mat-icon>\n          </div>\n          <div class="template-recipients__dots"></div>\n          <div class="template-recipients__chips">\n            <div class="template-recipients__field">\n              <mat-chip-list class="template-recipients__chip-list" #roleChipList aria-label="roles">\n                <div class="template-recipients__chip-wrapper">\n                  <mat-chip class="template-recipients__chip-recipient" *ngFor="let role of sequence"\n                    [ngStyle]="role.style" [removable]="false" [ngClass]="{hidden: role.status === \'delete\'}">\n                    {{role.full_name && role.email ? role.full_name : role.name}}\n                  </mat-chip>\n                </div>\n              </mat-chip-list>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="template-recipients__sender">\n        <div class="template-recipients__icon">\n          <mat-icon class="template-recipients__icon-icon" matTooltip="Verdco complete" [matTooltipPosition]="\'below\'">done_all</mat-icon>\n        </div>\n        <div class="template-recipients__chips sender">\n          <mat-chip class="template-recipients__chip-sender no-border">\n            <span>\n              Complete\n            </span>\n          </mat-chip>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>',styles:['.template-recipients__wrapper{position:relative;margin:0 auto;width:100%;max-width:600px}.template-recipients__body{position:relative}.template-recipients__sender{position:relative;min-height:48px}.template-recipients__sender:after{content:"";display:table;clear:both}.template-recipients__sender-text{margin-top:8px;margin-bottom:8px;font-size:12px;line-height:12px;color:rgba(0,0,0,.54)}.template-recipients__sender-radio{display:flex;align-items:center;height:40px}.template-recipients__roles{position:relative;min-height:48px}.template-recipients__roles:after{content:"";display:table;clear:both}.template-recipients__role{position:relative;min-height:48px}.template-recipients__role:after{content:"";display:table;clear:both}.template-recipients__icon{position:absolute;top:12px;left:16px;display:inline-block;width:24px;height:24px;z-index:10;background-color:#fff;border-radius:100%}.template-recipients__icon-icon{color:rgba(0,0,0,.54)}.template-recipients__dots{position:absolute;top:24px;left:25.7px;height:100%;border-left:4px dotted #9b9b9b;z-index:1}.template-recipients__chips{position:relative;min-height:48px;margin-left:64px;display:flex;align-items:center;border-bottom:1px solid #d1d5da}.template-recipients__chips.sender,.template-recipients__chips.sequence{display:flex;align-items:center}.template-recipients__chip-list{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.template-recipients__chip-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;width:100%;min-height:40px}.template-recipients__chip-recipient.no-border,.template-recipients__chip-sender.no-border{padding-left:0;border:none;pointer-events:none}.template-recipients__chip-recipient.hidden,.template-recipients__chip-sender.hidden{display:none}.template-recipients__chip-recipient.icon-right,.template-recipients__chip-sender.icon-right{padding-right:8px}.template-recipients__chip-recipient:hover,.template-recipients__chip-sender:hover{cursor:pointer}.template-recipients__chip-recipient.cdk-drag-placeholder{background:#ccc;border:3px dotted #999;border-radius:16px;opacity:1;height:32px;transition:transform 250ms cubic-bezier(0,0,.2,1)}.template-recipients__chip-sender{background-color:transparent;border:1px solid rgba(98,113,123,.2)}.template-recipients__chip-add{border:1px dashed #979797;background-color:transparent}.template-recipients__chip-add.icon-left{padding-left:8px}.template-recipients__chip-add:hover{cursor:pointer}.template-recipients__chip-edit{width:18px;height:18px;color:rgba(0,0,0,.87);font-size:18px;margin-left:8px}.template-recipients__chip-icon--left{width:18px;height:18px;color:rgba(0,0,0,.87);font-size:18px;margin-right:8px}']}]}],e.ctorParameters=function(){return[{type:C},{type:g.VerdocsTokenObjectService}]},e.propDecorators={template:[{type:t.Input}]},e}();var j=function(){function e(e){this.templatesService=e}return e.prototype.ngOnChanges=function(e){e.template},e.prototype.downloadTemplateDocument=function(){this.templatesService.downloadTemplateDocument(this.template)},e.decorators=[{type:t.Component,args:[{selector:"app-template-source",template:'<div class="template-source__container" *ngIf="template">\n  <div class="template-source__download" (click)="downloadTemplateDocument()">\n    <mat-icon class="template-source__download-icon">cloud_download</mat-icon>\n    <div class="template-source__download-text">{{template.template_documents[0].name}}</div>\n  </div>\n</div>',styles:[".template-source__download{display:flex;align-items:center}.template-source__download:hover{cursor:pointer}.template-source__download-icon{margin-right:4px;color:rgba(0,0,0,.54)}.template-source__download-text{color:rgba(0,0,0,.87)}"]}]}],e.ctorParameters=function(){return[{type:C}]},e.propDecorators={template:[{type:t.Input}]},e}();var M=function(){function e(e,t){this.templateGuard=e,this.verdocsHeaderService=t,this.updateVisibility=!1,this.isSaving=!1,this.isEditMode=!1,this._canShareWithOrg=null,this._canMakeItPrivate=null,this._canShareWithPublic=null}return e.prototype.ngOnInit=function(){this.template_visibility=this.getTemplateVisibility()},e.prototype.ngOnChanges=function(){this.template_visibility=this.getTemplateVisibility()},e.prototype.ngOnDestroy=function(){this.template_visibility=void 0},e.prototype.getTemplateVisibility=function(){if(this.visibility)return this.visibility.is_personal?this.visibility.is_public?"personal & public":"personal":this.visibility.is_public?"public & org":"org"},e.prototype.setUpdateVisibility=function(){var e=this.getTemplateVisibility();this.updateVisibility=e!==this.template_visibility},e.prototype.saveChanges=function(){return S(this,void 0,void 0,function(){var e;return k(this,function(t){switch(t.label){case 0:if(this.isSaving=!0,e={},this.updateVisibility&&this.template)switch(this.template_visibility){case"personal":e.is_personal=!0,e.is_public=!1;break;case"org":e.is_personal=!1,e.is_public=!1;break;case"public & org":e.is_personal=!1,e.is_public=!0;break;case"personal & public":e.is_personal=!0,e.is_public=!0}return[4,this.verdocsHeaderService.updateTemplate(this.template.id,e)];case 1:return t.sent(),this.updateVisibility=!1,this.isSaving=!1,[2]}})})},Object.defineProperty(e.prototype,"canShareWithPublic",{get:function(){return this.template&&"boolean"!=typeof this._canShareWithPublic&&(this._canShareWithPublic=this.templateGuard.canPerformAction(A.CHANGE_VISIBILITY_PUBLIC,this.template).canPerform),this._canShareWithPublic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canChangeVisibility",{get:function(){return this.canMakeItPrivate||this.canShareWithOrg||this.canShareWithPublic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canShareWithOrg",{get:function(){return this.template&&"boolean"!=typeof this._canShareWithOrg&&(this._canShareWithOrg=this.templateGuard.canPerformAction(A.CHANGE_VISIBILITY_ORG,this.template).canPerform),this._canShareWithOrg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canMakeItPrivate",{get:function(){return this.template&&"boolean"!=typeof this._canMakeItPrivate&&(this._canMakeItPrivate=this.templateGuard.canPerformAction(A.CHANGE_VISIBILITY_PERSONAL,this.template).canPerform),this._canMakeItPrivate},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Component,args:[{selector:"app-preview-visibility",template:'<div class="template-visiblity__container" *ngIf="visibility">\n  <ng-template #readView>\n    <div class="template-visibility__read">\n      <div class="template-visibility__type" *ngIf="visibility.is_personal && !visibility.is_public">\n        <mat-icon class="template-visibility__type-icon">lock</mat-icon>\n        <div class="template-visibility__type-text">Personal</div>\n      </div>\n      <div class="template-visibility__type" *ngIf="visibility.is_public">\n        <mat-icon class="template-visibility__type-icon">public</mat-icon>\n        <div class="template-visibility__type-text">Public</div>\n      </div>\n      <div class="template-visibility__type" *ngIf="!visibility.is_personal">\n        <mat-icon class="template-visibility__type-icon">group</mat-icon>\n        <div class="template-visibility__type-text">Shared</div>\n      </div>\n    </div>\n  </ng-template>\n  <ng-template #editView>\n    <div class="template-visibility__edit">\n      <mat-radio-group [(ngModel)]="template_visibility" [disabled]="!canChangeVisibility"\n        matTooltip="{{ !canChangeVisibility? \'You don\\\'t have the permission to change the visibility of this document\':\'\'}}">\n        <mat-radio-button class="template-visibility__radio-button" [value]="\'personal\'" (click)="setUpdateVisibility()"\n          [disabled]="!canMakeItPrivate"\n          matTooltip="{{ !canMakeItPrivate? \'You don\\\'t have the permission to select this option\':\'\'}}">\n          <div class="template-visibility__radio-text">\n            Private\n          </div>\n          <div class="template-visibility__radio-description">\n            Only you can see this document.\n          </div>\n        </mat-radio-button>\n        <mat-radio-button class="template-visibility__radio-button" [value]="\'org\'" (click)="setUpdateVisibility()"\n          [disabled]="!canShareWithOrg"\n          matTooltip="{{ !canShareWithOrg? \'You don\\\'t have the permission to select this option\':\'\'}}">\n          <div class="template-visibility__radio-text">\n            Shared to your organization\n          </div>\n          <div class="template-visibility__radio-description">\n            Give access to your organization to share this document.\n          </div>\n        </mat-radio-button>\n        <mat-radio-button class="template-visibility__radio-button" [value]="\'public & org\'" (click)="setUpdateVisibility()"\n          [disabled]="!canShareWithOrg || !canShareWithPublic"\n          matTooltip="{{ !canShareWithOrg || !canShareWithPublic ? \'You don\\\'t have the permission to select this option\':\'\'}}">\n          <div class="template-visibility__radio-text">\n            Shared to your organization, and public on the web\n          </div>\n          <div class="template-visibility__radio-description">\n            Give access to your organization to share, and anyone on the web can find and access this document.\n          </div>\n        </mat-radio-button>\n        <mat-radio-button class="template-visibility__radio-button" [value]="\'personal & public\'"\n          [disabled]="!canShareWithPublic" (click)="setUpdateVisibility()"\n          matTooltip="{{ !canShareWithPublic? \'You don\\\'t have the permission to select this option\':\'\'}}">\n          <div class="template-visibility__radio-text">\n            Public on the web\n          </div>\n          <div class="template-visibility__radio-description">\n            Anyone on the web can find and access this document.\n          </div>\n        </mat-radio-button>\n      </mat-radio-group>\n    </div>\n  </ng-template>\n  <ng-container *ngTemplateOutlet="isEditMode ? editView : readView"></ng-container>\n</div>',styles:[".template-visibility__read,.template-visibility__type{display:flex;align-items:center}.template-visibility__type-icon{margin-right:4px;color:rgba(0,0,0,.54)}.template-visibility__type-text{color:rgba(0,0,0,.87);margin-right:8px}"]}]}],e.ctorParameters=function(){return[{type:P},{type:C}]},e.propDecorators={visibility:[{type:t.Input}],isEditMode:[{type:t.Input}],template:[{type:t.Input}]},e}();var L=function(){function e(e,t,i,n,r,a,o,s,l,c){this.verdocsHeaderService=e,this.vTokenStateService=t,this.vTokenObjectService=i,this.vAuthService=n,this.templateGuard=r,this.router=a,this.cdr=o,this.compiler=s,this.injector=l,this.platform=c,this.pageLoading=!0,this.isAuthenticated=!1,this.headerTitle="Envelope",this.mode="",this.searchActive=!1,this.templateName="",this.newTemplateName=null,this.saveStatus="",this.notifications=[],this.loading=!1,this.csvBlob=null,this.templateDetailsExpanded=!0,this.template=null,this.isSearching=!1,this.currentProfile=null,this.inputFocused=!1,this.isLiveView=!1,this.app_version="",this.currentAt="",this._canStar=null,this._canCreate=null,this._canEdit=null,this._userStarred=null,this.metaDataSubscription=new b.Subscription,this.titleSubscription=new b.Subscription,this.titleInputSubscription=new b.Subscription,this.titleKeyDownSubscription=new b.Subscription,this.templateNameSubscription=new b.Subscription,this.templateSubscription=new b.Subscription,this.saveStatusSubscription=new b.Subscription,this.profileLoadingSubscription=new b.Subscription,this.userDataSubscription=new b.Subscription,this.modeSubscription=new b.Subscription,this.previewInputSubscription=new b.Subscription,this.generalInputSubscription=new b.Subscription,this.navigationEventSubscription=new b.Subscription,this.csvBlobSubscription=new b.Subscription,this.connections=this.injector.get(V),this.myAccountUrl=this.connections.rAccount_frontend_url+"/rAccount",this.termsUrl=this.connections.rSecure_frontend_url+"/terms",this.privacyUrl=this.connections.rSecure_frontend_url+"/privacy",this.organizationImgSrc=this.connections.rAccount_frontend_url+"/assets/organization/select-profile.png",this.verdocs_url=this.connections.rForm_frontend_url,this.manageLink=this.verdocs_url+"/manage",this.templatesLink=this.verdocs_url+"/templates",this.rSecureFrontEnd=this.connections.rSecure_frontend_url,this.rFormFrontEnd=this.connections.rForm_frontend_url,this.currentOrigin=this.connections.origin,this.currentAt=this.currentOrigin}return e.prototype.ngOnInit=function(){var e=this;this.templateSubscription=this.verdocsHeaderService.templateSubject.subscribe(function(t){e.template=t,e.updateStar()}),i.isPlatformBrowser(this.platform)&&((window&&window.location||this.connections.app_version)&&(this.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.origin&&this.origin.includes("/stage.")||this.origin.includes("/localhost")?this.app_version=this.connections.app_version:this.app_version=""),this.isAuthenticated=this.vAuthService.isAuthenticated(),this.emailVerified=this.vTokenStateService.getEmailVerification(),this.navigationEventSubscription=this.router.events.subscribe(function(t){t instanceof a.NavigationEnd?(e.isAuthenticated=e.vAuthService.isAuthenticated(),t&&t.url&&(t.url.includes("document/")&&!t.url.includes("envelopes/document")||t.url.includes("view/live/"))?(e.isAtOriginalOrigin=e.verdocsHeaderService.getAtOrigin(e.currentOrigin),e.currentAt=e.currentOrigin,e.mode="preview",t.url.includes("view/live/")?(e.isLiveView=!0,e.templateDetailsExpanded=!1):e.isLiveView=!1):(e.mode="not-preview",e.isLiveView=!1),"preview"!==e.mode?e.image_url=e.connections.rForm_frontend_url+"/assets/white-logo.svg":e.image_url=e.connections.rForm_frontend_url+"/assets/break-black-logo.svg",e.getProfile(),e.updateStar(),e.checkCanStar(),e._canEdit=void 0,e._canCreate=void 0,e.pageLoading=!1):t instanceof a.NavigationStart&&(e.pageLoading=!0)}),this.titleSubscription=this.verdocsHeaderService.titleSubject.subscribe(function(t){e.title=t||null}),this.csvBlobSubscription=this.verdocsHeaderService.csvBlobSubject.subscribe(function(t){e.csvBlob=t||null}),this.saveStatusSubscription=this.verdocsHeaderService.saveStatusSubject.subscribe(function(t){e.saveStatus=t}),this.profileLoadingSubscription=this.verdocsHeaderService.profileLoadingSubject.subscribe(function(t){e.loading=t})},e.prototype.ngAfterViewChecked=function(){this.cdr.detectChanges()},e.prototype.ngOnDestroy=function(){this.metaDataSubscription.unsubscribe(),this.titleSubscription.unsubscribe(),this.titleInputSubscription.unsubscribe(),this.titleKeyDownSubscription.unsubscribe(),this.templateNameSubscription.unsubscribe(),this.templateSubscription.unsubscribe(),this.saveStatusSubscription.unsubscribe(),this.profileLoadingSubscription.unsubscribe(),this.userDataSubscription.unsubscribe(),this.modeSubscription.unsubscribe(),this.generalInputSubscription&&this.generalInputSubscription.unsubscribe(),this.previewInputSubscription&&this.previewInputSubscription.unsubscribe(),this.navigationEventSubscription.unsubscribe(),this.csvBlobSubscription.unsubscribe(),this.compiler.clearCache()},e.prototype.init=function(){return S(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return this.vAuthService.isAuthenticated()&&"view"!==this.mode?[4,this.verdocsHeaderService.initNotificationService()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Object.defineProperty(e.prototype,"home_url",{get:function(){return this.vTokenStateService.getIDToken()?this.connections.rForm_frontend_url+"/dashboard":this.connections.rForm_frontend_url},enumerable:!0,configurable:!0}),e.prototype.previewInputEvent=function(e){var t=this;clearTimeout(this.inputTimer),this.inputTimer=setTimeout(function(){t.getSearchResults(t.previewInput.nativeElement.value),clearTimeout(t.inputTimer)},500)},e.prototype.generalInputEvent=function(e){var t=this;clearTimeout(this.inputTimer),this.inputTimer=setTimeout(function(){t.getSearchResults(t.generalInput.nativeElement.value),clearTimeout(t.inputTimer)},500)},e.prototype.prepareSearchInput=function(){"preview"===this.mode?this.listenForPreviewInput():this.listenForGeneralInput()},e.prototype.listenForPreviewInput=function(){var e=this;this.generalInputSubscription&&this.generalInputSubscription.unsubscribe(),this.previewInput&&(this.previewInputSubscription||(this.previewInputSubscription=b.fromEvent(this.previewInput.nativeElement,"keyup").pipe(x.debounceTime(500),x.distinctUntilChanged()).subscribe(function(t){var i=t.code||t.key;i?"Enter"!==i&&"ArrowDown"!==i&&"ArrowUp"!==i&&e.getSearchResults(e.previewInput.nativeElement.value):e.getSearchResults(e.previewInput.nativeElement.value)})))},e.prototype.listenForGeneralInput=function(){var e=this;this.previewInputSubscription&&this.previewInputSubscription.unsubscribe(),this.generalInput&&(this.generalInputSubscription||(this.generalInputSubscription=b.fromEvent(this.generalInput.nativeElement,"keyup").pipe(x.debounceTime(500),x.distinctUntilChanged()).subscribe(function(t){var i=t.code||t.key;i?"Enter"!==i&&"ArrowDown"!==i&&"ArrowUp"!==i&&e.getSearchResults(e.generalInput.nativeElement.value):e.getSearchResults(e.generalInput.nativeElement.value)})))},Object.defineProperty(e.prototype,"canStar",{get:function(){return this._canStar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userStarred",{get:function(){return this._userStarred},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canEdit",{get:function(){if("boolean"!=typeof this._canEdit&&this.templateGuard&&this.isAuthenticated&&this.template){var e=this.templateGuard.canPerformAction(A.WRITE,this.template);this._canEdit=e.canPerform}return!this.isAuthenticated&&this.template&&(this._canEdit=!1),this._canEdit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canCreate",{get:function(){var e=this;if(this.isAuthenticated){if("boolean"!=typeof this._canCreate){var t=this.vTokenObjectService.getVerdocsPermissions();this._canCreate=!1,t&&t.length>0&&t.forEach(function(t){if(t.includes("creator:create"))return e._canCreate=!0})}return this._canCreate}return!1},enumerable:!0,configurable:!0}),e.prototype.getProfile=function(){this.isAuthenticated&&(this.currentProfile=this.vTokenObjectService.getProfile())},e.prototype.selected=function(e){(this.generalInput&&this.generalInput.nativeElement.value||this.previewInput&&this.previewInput.nativeElement.value)&&e.option._element.nativeElement.click()},e.prototype.checkCanStar=function(){this._canStar=this.isAuthenticated},e.prototype.getSearchResults=function(e){var t=this;this.isSearching=!0,this.isAuthenticated?this.verdocsHeaderService.searchEnvelopes({envelope_name:e,row:3}).subscribe(function(i){i instanceof n.HttpResponse&&(t.envelopeResult=i.body.result,t.verdocsHeaderService.searchTemplates({name:e,row:3}).subscribe(function(e){e instanceof n.HttpResponse&&(t.templateResult=e.body.result,t.isSearching=!1)}))}):this.verdocsHeaderService.searchTemplates({name:e,row:3}).subscribe(function(e){e instanceof n.HttpResponse&&(t.templateResult=e.body.result,t.isSearching=!1)})},e.prototype.recipientTracking=function(e,t){return e},e.prototype.toggleMenu=function(){this.verdocsHeaderService.toggleSidenav(!this.sidenavOpen)},e.prototype.setInputFocused=function(e){this.inputFocused=e},e.prototype.hasProp=function(e,t){return e.hasOwnProperty(t)},e.prototype.roleColor=function(e){return this.verdocsHeaderService.getRoleColor(e)},e.prototype.toggleSidenav=function(){this.verdocsHeaderService.toggleBuilderSideNav()},e.prototype.toggleTemplateDetails=function(){this.templateDetailsExpanded=!this.templateDetailsExpanded,this.templateDetailsExpanded&&this.verdocsHeaderService.templateDetailToggleSubject.next(!0)},e.prototype.reset=function(){this.templateName="Unititled"},e.prototype.getRoleNames=function(e){if(e&&e.length>0){for(var t=e.length-1,i="",n=0;n<e.length;n++)i+=n<t?e[n].full_name+", ":e[n].full_name;return i}},e.prototype.getTemplateStats=function(e){return this.getTemplatePages(e)+"  "+this.getTemplateSequence(e)+"  "+this.getTemplateRecipients(e)},e.prototype.getTemplatePages=function(e){return e&&e.pages?e.pages.length>=2?e.pages.length+" Pages":"1 Page":"0 Page"},e.prototype.getTemplateSequence=function(e){if(e&&e.roles){for(var t=!1,i=-1,n=0;n<e.roles.length;n++)e.roles[n].sequence>i&&(i=e.roles[n].sequence),0===e.roles[n].sequence&&(t=!0);var r=t?i+1:i;return r>1?r+" Sequences":"1 Sequence"}return"0 Sequence"},e.prototype.getTemplateRecipients=function(e){if(e&&e.roles){var t=e.roles.length;return t>1?t+" Recipients":"1 Recipient"}return"0 Recipient"},e.prototype.goToEnvelope=function(e){"rForm"===this.currentOrigin&&this.isAtOriginalOrigin?this.router.navigate(["/envelope/"+e]):location.href=this.connections.rForm_frontend_url+"/envelope/"+e,this.clearSearchInputs()},e.prototype.goToTemplate=function(e){this.verdocsHeaderService.openTemplate(e),this.clearSearchInputs()},e.prototype.goToTemplates=function(e){this.verdocsHeaderService.openTemplates(e)},e.prototype.searchEnvelopes=function(){var e=this.getSearchKeyword();""!==e&&(this.router.navigate(["/manage"],{queryParams:{envelope_name:e}}),this.clearSearchInputs())},e.prototype.searchRecipients=function(){var e=this.getSearchKeyword();""!==e&&(this.router.navigate(["/manage"],{queryParams:{recipient_name:e}}),this.clearSearchInputs())},e.prototype.searchTemplates=function(){var e=this.getSearchKeyword();""!==e&&(this.router.navigate(["/templates"],{queryParams:{name:e}}),this.clearSearchInputs())},e.prototype.getSearchKeyword=function(){return this.previewInput&&this.previewInput.nativeElement.value?this.previewInput.nativeElement.value:this.generalInput&&this.generalInput.nativeElement.value?this.generalInput.nativeElement.value:""},e.prototype.clearSearchInputs=function(){this.previewInput&&(this.previewInput.nativeElement.value=""),this.generalInput&&(this.generalInput.nativeElement.value=""),this.envelopeResult=[],this.templateResult=[]},e.prototype.updateStar=function(){if(!(this.template&&this.currentProfile&&this.template.template_stars))return!1;var e=w.findIndex(this.template.template_stars,{profile_id:this.currentProfile.id,template_id:this.template.id});this._userStarred=e>-1},e.prototype.starTemplate=function(){var e=this;this.canStar?this.verdocsHeaderService.starTemplate(this.template.id).subscribe(function(t){e.template.template_stars.push(t),e.updateStar()}):this.isAuthenticated||this.createTemplate()},e.prototype.unstarTemplate=function(){var e=this;this.canStar?this.verdocsHeaderService.unstarTemplate(this.template.id).subscribe(function(t){var i=w.findIndex(e.template.template_stars,{profile_id:e.currentProfile.id,template_id:e.template.id});i>-1&&(e.template.template_stars.splice(i,1),e.updateStar())}):this.isAuthenticated||this.createTemplate()},e.prototype.editTemplate=function(){this.canEdit?this.router.navigate(["/builder/"+this.template.id+"/fields"]):this.isAuthenticated||this.createTemplate()},e.prototype.createTemplate=function(){this.verdocsHeaderService.toggleCreate()},e.decorators=[{type:t.Component,args:[{selector:"verdocs-header",template:'<div class="header__placeholder" *ngIf="pageLoading"></div>\n<div *ngIf="!pageLoading">\n  <header #headerContainer>\n    <div class="header-row" fxLayout="row" fxLayoutAlign="space-between center"\n      [ngClass]="{authenticated: isAuthenticated, preview: mode === \'preview\'}">\n      <div class="header-util-wrapper collapsed" fxLayout="row">\n        <button mat-icon-button (click)="toggleMenu()">\n          <mat-icon>menu</mat-icon>\n        </button>\n      </div>\n      <div class="header__dynamic-section"\n        [ngClass]="{preview: mode === \'preview\', expanded: templateDetailsExpanded, \'live-view\': isLiveView}">\n        <div class="header__logo-wrapper preview" *ngIf="mode === \'preview\'"\n          [ngClass]="{authenticated: isAuthenticated, expanded: templateDetailsExpanded}" matAutocompleteOrigin\n          #previewOrigin="matAutocompleteOrigin">\n          <div class="header__dynamic-mobile-menu collapsed">\n            <button mat-icon-button (click)="toggleMenu()">\n              <mat-icon>menu</mat-icon>\n            </button>\n          </div>\n          <a class="header__title preview" href="{{home_url}}" [ngClass]="{authenticated: isAuthenticated}"\n            *ngIf="currentOrigin !== \'rForm\'">\n            <img class="header__logo" [src]="image_url"\n              [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}" />\n              <div class="header__app-version" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}">{{app_version}}</div>\n          </a>\n          <a class="header__title preview" [routerLink]="(isAuthenticated?\'/dashboard\': \'/\')" [ngClass]="{authenticated: isAuthenticated}"\n            *ngIf="currentOrigin === \'rForm\'">\n            <img class="header__logo" [src]="image_url"\n              [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}" />\n              <div class="header__app-version" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}">{{app_version}}</div>\n          </a>\n          <div class="header__general-search preview">\n            <input class="header__general-search-input" #previewInput type="text"\n              [ngClass]="{preview: mode === \'preview\', stretch: previewInput.value !== \'\'}"\n              placeholder="Search or jump to..." [matAutocompleteConnectedTo]="previewOrigin"\n              [matAutocomplete]="autocomplete" (focus)="setInputFocused(true)" (blur)="setInputFocused(false)"\n              (input)="previewInputEvent($event)">\n            <button class="header__search-button preview" mat-icon-button *ngIf="!isSearching"\n              (click)="previewInput.focus()">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class="header__general-search-spinner" *ngIf="isSearching">\n              <mat-spinner [diameter]="24"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class="header__search-autocomplete" #autocomplete="matAutocomplete"\n            (optionSelected)="selected($event)">\n            <mat-option class="header__search-autocomplete-option" *ngFor="let envelope of envelopeResult"\n              [value]="envelope[\'name\']" (keydown.enter)="goToEnvelope(envelope.id)" (click)="goToEnvelope(envelope.id)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    {{envelope[\'name\']}}\n                  </div>\n                  <div class="header__search-autocomplete-subheader">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <mat-option class="header__search-autocomplete-option" *ngIf="envelopeResult && envelopeResult.length > 0"\n              [value]="previewInput.value" (keydown.enter)="searchEnvelopes()" (click)="searchEnvelopes()">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <img class="header__search-verdocs-image" src="{{verdocs_url}}/assets/v-blue-logo.svg" />\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf="envelopeResult && envelopeResult.length > 0">\n            <mat-option class="header__search-autocomplete-option" *ngFor="let template of templateResult"\n              [value]="template.name" (keydown.enter)="goToTemplate(template)" (click)="goToTemplate(template)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    <div class="header__search-autocomplete-header">\n                      {{template.name}}\n                    </div>\n                    <div class="header__search-autocomplete-subheader">\n                      {{getTemplateStats(template)}}\n                    </div>\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <mat-option class="header__search-autocomplete-option" *ngIf="templateResult && templateResult.length > 0"\n              [value]="previewInput.value" (keydown.enter)="goToTemplates(previewInput.value)" (click)="goToTemplates(previewInput.value)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <img class="header__search-verdocs-image" src="{{verdocs_url}}/assets/v-blue-logo.svg" />\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf="templateResult && templateResult.length > 0 && isAuthenticated">\n            <mat-option class="header__search-autocomplete-option" [value]="previewInput.value"\n              (keydown.enter)="searchRecipients()" (click)="searchRecipients()"\n              *ngIf="isAuthenticated && previewInput.value !== \'\'">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Search Recipients with "{{previewInput.value}}"\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class="header__logo-wrapper" *ngIf="mode !== \'preview\'"\n          [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated, expanded: templateDetailsExpanded}">\n          <a class="header__title" href="{{home_url}}" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}"\n            *ngIf="currentOrigin !== \'rForm\'">\n            <img class="header__logo" [src]="image_url"\n              [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}" />\n              <div class="header__app-version" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}">{{app_version}}</div>\n          </a>\n          <a class="header__title" [routerLink]="(isAuthenticated?\'/dashboard\': \'/\')" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}"\n            *ngIf="currentOrigin === \'rForm\'">\n            <img class="header__logo" [src]="image_url"\n              [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}" />\n              <div class="header__app-version" [ngClass]="{preview: mode === \'preview\', authenticated: isAuthenticated}">{{app_version}}</div>\n          </a>\n          <div class="header__general-search"\n            [ngClass]="{preview: mode === \'preview\', extend: inputFocused || generalInput.value != \'\', unauthenticated: !isAuthenticated, landing: currentAt === \'rSecure\'}"\n            matAutocompleteOrigin #generalOrigin="matAutocompleteOrigin">\n            <input class="header__general-search-input" #generalInput type="text"\n              [ngClass]="{preview: mode === \'preview\', stretch: generalInput.value !== \'\', unauthenticated: !isAuthenticated}"\n              placeholder="Search or jump to..." [matAutocompleteConnectedTo]="generalOrigin"\n              [matAutocomplete]="autocomplete" (focus)="setInputFocused(true)" (blur)="setInputFocused(false)"\n              (input)="generalInputEvent($event)">\n            <button class="header__search-button" mat-icon-button [ngClass]="{preview: mode === \'preview\'}"\n              *ngIf="!isSearching" (click)="generalInput.focus()">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class="header__general-search-spinner" *ngIf="isSearching">\n              <mat-spinner [diameter]="24"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class="header__search-autocomplete" #autocomplete="matAutocomplete"\n            (optionSelected)="selected($event)">\n            <mat-option class="header__search-autocomplete-option" *ngFor="let envelope of envelopeResult"\n              [value]="envelope.name" (keydown.enter)="goToEnvelope(envelope.id)" (click)="goToEnvelope(envelope.id)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    {{envelope.name}}\n                  </div>\n                  <div class="header__search-autocomplete-subheader">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <mat-option class="header__search-autocomplete-option" *ngIf="envelopeResult && envelopeResult.length > 0"\n              [value]="generalInput.value" (keydown.enter)="searchEnvelopes()" (click)="searchEnvelopes()">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <img class="header__search-verdocs-image" src="{{verdocs_url}}/assets/v-blue-logo.svg" />\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf="envelopeResult && envelopeResult.length > 0">\n            <mat-option class="header__search-autocomplete-option" *ngFor="let template of templateResult"\n              (keydown.enter)="goToTemplate(template)" (click)="goToTemplate(template)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    {{template?.name}}\n                  </div>\n                  <div class="header__search-autocomplete-subheader">\n                    {{getTemplateStats(template)}}\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <mat-option class="header__search-autocomplete-option" *ngIf="templateResult && templateResult.length > 0"\n              [value]="generalInput.value" (keydown.enter)="goToTemplates(generalInput.value)" (click)="goToTemplates(generalInput.value)">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <img class="header__search-verdocs-image" src="{{verdocs_url}}/assets/v-blue-logo.svg" />\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf="templateResult && templateResult.length > 0 && isAuthenticated">\n            <mat-option class="header__search-autocomplete-option" [value]="generalInput.value"\n              (keydown.enter)="searchRecipients()" (click)="searchRecipients()"\n              *ngIf="isAuthenticated && generalInput.value !== \'\'">\n              <div class="header__search-autocomplete-wrapper">\n                <div class="header__search-autocomplete-left">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class="header__search-autocomplete-middle">\n                  <div class="header__search-autocomplete-header">\n                    Search Recipients with "{{generalInput.value}}"\n                  </div>\n                </div>\n                <div class="header__search-autocomplete-right"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class="header__template-details"\n          [ngClass]="{show: mode === \'preview\' && !isLiveView, expanded: templateDetailsExpanded}">\n          <div class="header__template-detail-container" [ngClass]="{show: templateDetailsExpanded}">\n            <div class="header__template-detail-wrapper">\n              <div class="header__template-detail-header no-top-border">\n                <div class="header__template-detail-title bold">\n                  <h1>{{template?.name}}</h1>\n                </div>\n                <div class="header__template-detail-button-container"></div>\n              </div>\n              <div class="header__template-detail-body" *ngIf="template && template.description">\n                <div class="header__template-detail-body-text">\n                  {{template?.description}}\n                </div>\n              </div>\n            </div>\n            <div class="header__template-detail-wrapper" *ngIf="template">\n              <div class="header__template-detail-header">\n                <div class="header__template-detail-title">Tags</div>\n                <div class="header__template-detail-button-container"></div>\n              </div>\n              <div class="header__template-detail-body">\n                <div class="header__template-detail-tags">\n                  <div class="header__template-detail-tag" *ngFor="let tag of template.tags">\n                    {{tag.tag_name}}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="header__template-detail-wrapper" *ngIf="template">\n              <div class="header__template-detail-header">\n                <div class="header__template-detail-title">Visibility</div>\n              </div>\n              <div class="header__template-detail-button-container">\n                <app-preview-visibility [template]="template"\n                  [visibility]="{is_personal: template?.is_personal, is_public: template?.is_public}">\n                </app-preview-visibility>\n              </div>\n              <div class="header__template-detail-body"></div>\n            </div>\n            <div class="header__template-detail-wrapper" *ngIf="template">\n              <div class="header__template-detail-header">\n                <div class="header__template-detail-title">Source documents</div>\n              </div>\n              <div class="header__template-detail-body">\n                <app-template-source [template]="template"></app-template-source>\n              </div>\n            </div>\n            <div class="header__template-detail-wrapper" *ngIf="template">\n              <div class="header__template-detail-header">\n                <div class="header__template-detail-title">Workflow</div>\n              </div>\n              <div class="header__template-detail-body">\n                <app-recipient-editor [template]="template"></app-recipient-editor>\n              </div>\n            </div>\n            <div class="header__template-detail-wrapper" *ngIf="template">\n              <div class="header__template-detail-header">\n                <div class="header__template-detail-title">Metrics</div>\n              </div>\n              <div class="header__template-detail-body">\n                <div class="header__template-detail-stats">\n                  <div class="header__counter-stars">\n                    <mat-icon class="header__counter-icon">star</mat-icon>\n                    <span class="header__counter-number">\n                      {{template.template_stars ? template.template_stars.length : 0}}\n                    </span>\n                  </div>\n                  <div class="header__counter-envelopes">\n                    <mat-icon class="header__counter-icon">mail</mat-icon>\n                    <span class="header__counter-number">\n                      {{template.counter}}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="header__template-detail-options" [ngClass]="{show: templateDetailsExpanded}">\n            <div class="header__template-detail-option-button-wrapper">\n              <button mat-raised-button class="header__template-detail-option-button" *ngIf="!userStarred"\n                (click)="starTemplate()">\n                <mat-icon class="header__template-detail-option-icon">star</mat-icon>\n                <span class="header__template-detail-option-text">Star</span>\n              </button>\n              <button mat-raised-button class="header__template-detail-option-button" *ngIf="userStarred"\n                (click)="unstarTemplate()">\n                <mat-icon class="header__template-detail-option-icon">star_outline</mat-icon>\n                <span class="header__template-detail-option-text">Unstar</span>\n              </button>\n            </div>\n            <div class="header__template-detail-option-button-wrapper">\n              <button mat-raised-button class="header__template-detail-option-button" (click)="createTemplate()">\n                <mat-icon class="header__template-detail-option-icon">drafts</mat-icon>\n                <span class="header__template-detail-option-text">Create</span>\n              </button>\n            </div>\n            <div class="header__template-detail-option-button-wrapper" matTooltip="Edit privileges required.">\n              <button mat-raised-button class="header__template-detail-option-button" (click)="editTemplate()" [disabled]="!canEdit && isAuthenticated">\n                <mat-icon class="header__template-detail-option-icon">build</mat-icon>\n                <span class="header__template-detail-option-text">Edit</span>\n              </button>\n            </div>\n          </div>\n          <div class="header__template-details-expansion" (click)="toggleTemplateDetails()"\n            [ngClass]="{expanded: templateDetailsExpanded}">\n            <button class="header__template-details-button" mat-icon-button>\n              <mat-icon class="header__template-details-arrow" [ngClass]="{expanded: templateDetailsExpanded}">\n                keyboard_arrow_down</mat-icon>\n            </button>\n            <div class="header__template-details-text" *ngIf="!templateDetailsExpanded">Show details</div>\n            <div class="header__template-details-text" *ngIf="templateDetailsExpanded">Hide</div>\n          </div>\n        </div>\n      </div>\n      <div class="header__nav" fxFlex [ngClass]="{preview: mode === \'preview\', ua: !isAuthenticated}">\n        <div class="header__nav-authenticated" *ngIf="isAuthenticated && currentOrigin === \'rForm\'">\n          <a class="header__link" [routerLink]="\'/manage\'">Manage</a>\n          <a class="header__link" [routerLink]="\'/documents\'">Documents</a>\n        </div>\n        <div class="header__nav-authenticated" *ngIf="isAuthenticated && currentOrigin !== \'rForm\' && currentOrigin !== \'rSecure\'">\n          <a class="header__link" [href]="rFormFrontEnd + \'/manage\'">Manage</a>\n          <a class="header__link" [href]="rFormFrontEnd + \'/documents\'">Documents</a>\n        </div>\n        <div class="header__nav-unauthenticated" *ngIf="(!isAuthenticated && currentOrigin !== \'rSecure\') || currentOrigin === \'rSecure\'">\n          <div class="header__link-wrapper realster">\n            <div class="header__link realster">Why Verdocs <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class="header__sub-link realster" *ngIf="currentOrigin !== \'rSecure\'">\n              <a [href]="rSecureFrontEnd + \'/features\'" class="header__sub-link-nav main">Features</a>\n              <a [href]="rSecureFrontEnd + \'/features/builder\'" class="header__sub-link-nav">Builder</a>\n              <a [href]="rSecureFrontEnd + \'/features/documents\'" class="header__sub-link-nav">Documents</a>\n              <a [href]="rSecureFrontEnd + \'/features/attachments\'" class="header__sub-link-nav">Collect Attachments</a>\n              <a [href]="rSecureFrontEnd + \'/features/payments\'" class="header__sub-link-nav">Collect Payments</a>\n              <a [href]="rSecureFrontEnd + \'/features/export\'" class="header__sub-link-nav">Export</a>\n              <a [href]="rSecureFrontEnd + \'/features/audit-trail\'" class="header__sub-link-nav">Tamper-Proof Audit\n                Trail</a>\n              <a [href]="rSecureFrontEnd + \'/features/reminders\'" class="header__sub-link-nav">Reminders</a>\n              <a [href]="rSecureFrontEnd + \'/features/flexible-workflows\'" class="header__sub-link-nav">Flexible\n                Workflows</a>\n              <a [href]="rSecureFrontEnd + \'/features/team-management\'" class="header__sub-link-nav">Team Management</a>\n              <hr class="header__navigation-divider realster">\n              <a [href]="rSecureFrontEnd + \'/security\'" class="header__sub-link-nav main">Security</a>\n              <a href="https://verdocs.com/resources/category/customer-stories"\n                class="header__sub-link-nav main">Customer\n                Stories</a>\n            </div>\n            <div class="header__sub-link realster local" *ngIf="currentOrigin === \'rSecure\'">\n              <a [routerLink]="\'/features\'" class="header__sub-link-nav main">Features</a>\n              <a [routerLink]="\'/features/builder\'" class="header__sub-link-nav">Builder</a>\n              <a [routerLink]="\'/features/documents\'" class="header__sub-link-nav">Documents</a>\n              <a [routerLink]="\'/features/attachments\'" class="header__sub-link-nav">Collect Attachments</a>\n              <a [routerLink]="\'/features/payments\'" class="header__sub-link-nav">Collect Payments</a>\n              <a [routerLink]="\'/features/export\'" class="header__sub-link-nav">Export</a>\n              <a [routerLink]="\'/features/audit-trail\'" class="header__sub-link-nav">Tamper-Proof Audit Trail</a>\n              <a [routerLink]="\'/features/reminders\'" class="header__sub-link-nav">Reminders</a>\n              <a [routerLink]="\'/features/flexible-workflows\'" class="header__sub-link-nav">Flexible Workflows</a>\n              <a [routerLink]="\'/features/team-management\'" class="header__sub-link-nav">Team Management</a>\n              <hr class="header__navigation-divider realster">\n              <a [routerLink]="\'/security\'" class="header__sub-link-nav main">Security</a>\n              <a href="https://verdocs.com/resources/category/customer-stories"\n                class="header__sub-link-nav main">Customer\n                Stories</a>\n            </div>\n          </div>\n          <div class="header__link-wrapper pricing">\n            <div class="header__link pricing">Pricing <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class="header__sub-link pricing" *ngIf="currentOrigin !== \'rSecure\'">\n              <a [href]="rSecureFrontEnd + \'/pricing\'" class="header__sub-link-nav main">Plans</a>\n              <a [href]="rSecureFrontEnd + \'/pricing/contact-sales\'" class="header__sub-link-nav">Contact Sales</a>\n              <hr class="nav-header__navigation-divider pricing">\n              \x3c!-- <a [href]="rSecureFrontEnd + \'/pricing/real-estate\'" class="nav-header__navigation-link">Real Estate</a> --\x3e\n              <a [href]="rSecureFrontEnd + \'/pricing/nonprofit\'" class="header__sub-link-nav">Nonprofit</a>\n            </div>\n            <div class="header__sub-link pricing local" *ngIf="currentOrigin === \'rSecure\'">\n              <a [routerLink]="\'/pricing\'" class="header__sub-link-nav main">Plans</a>\n              <a [routerLink]="\'/pricing/contact-sales\'" class="header__sub-link-nav">Contact Sales</a>\n              <hr class="nav-header__navigation-divider pricing">\n              \x3c!-- <a [routerLink]="\'/pricing/real-estate\'" class="nav-header__navigation-link">Real Estate</a> --\x3e\n              <a [routerLink]="\'/pricing/nonprofit\'" class="header__sub-link-nav">Nonprofit</a>\n            </div>\n          </div>\n          <a class="header__link" href="https://verdocs.com/resources">Resources</a>\n        </div>\n      </div>\n      <div class="header-util-mg" fxFlex>\n        <verdocs-header-tools [mode]="mode"></verdocs-header-tools>\n      </div>\n    </div>\n    <svg class="ghost" version="1.1" xmlns="http://www.w3.org/2000/svg">\n      <defs>\n        <linearGradient id="linear" x1="0%" y1="0%" x2="100%" y2="0%">\n          <stop offset="0%" stop-color="#50BD80" />\n          <stop offset="100%" stop-color="#4856CA" />\n        </linearGradient>\n      </defs>\n    </svg>\n  </header>\n</div>',styles:["app-header{position:fixed;top:0;left:0;width:100%}header{position:relative;z-index:99}.header__placeholder{background-color:#f6f8fa;height:56px}.header__nav{margin-left:8px;display:flex;align-items:center;height:64px;flex:1 1 0%;box-sizing:border-box}.header__nav .header__link,.header__nav .header__link:visited{display:flex;align-items:center;padding-left:8px;padding-right:8px;color:#fff;text-decoration:none;height:64px}.header__nav.preview .header__link,.header__nav.preview .header__link:visited{color:rgba(0,0,0,.87)}.header__nav.preview{position:absolute;top:0;left:378px}@media only screen and (max-width:854px){.header__nav{display:none}.header__app-version.preview{padding-left:6px}}@media only screen and (max-width:600px){.header__nav{height:56px}}.header__nav-authenticated,.header__nav-unauthenticated{position:relative;display:flex;align-items:center}.header__app-version{position:absolute;top:20px;font-size:10px;padding-left:12px}.header__app-version.preview{color:rgba(0,0,0,.54);padding-left:6px}@media only screen and (max-width:768px){.header__app-version.preview{padding-left:6px}.header__app-version{padding-left:0}}.header__link-wrapper{position:relative;overflow:visible}.header__link-wrapper:hover{cursor:pointer}.header__link-wrapper.realster{width:143.64px;max-width:143.64px}.header__link-wrapper.realster:hover .header__sub-link.realster{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__link-wrapper.realster:hover .header__sub-link.realster:after,.header__link-wrapper.realster:hover .header__sub-link.realster:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.realster:hover .header__sub-link.realster:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.realster:hover .header__sub-link.realster:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.realster:hover .header__sub-link.realster .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__link-wrapper.pricing{width:92.52px;max-width:92.52px}.header__link-wrapper.pricing:hover .header__sub-link.pricing{visibility:visible;opacity:1;height:120px;width:160px;background-color:#fff}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after,.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after{content:'';width:92.52px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.pricing:hover .header__sub-link.pricing .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__sub-link{position:absolute;padding-top:8px;top:60px;left:0;visibility:hidden;opacity:0;height:0;transition:height .3s cubic-bezier(.17,.04,.03,.94);border-bottom-left-radius:2px;border-bottom-right-radius:2px}.header__sub-link:hover{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__sub-link:hover:after,.header__sub-link:hover:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__sub-link:hover:before{height:100%;width:100%;left:0;top:0}.header__sub-link:hover:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}@media only screen and (max-width:600px){.header__sub-link{top:56px}}.header__sub-link-nav{padding:8px 16px;display:block;text-decoration:none;color:rgba(0,0,0,.87);visibility:none;opacity:0;transition:250ms cubic-bezier(.17,.04,.03,.94);transition-delay:50ms;height:0}.header__sub-link-nav.main{font-weight:600}.header__sub-link-nav:visited{color:rgba(0,0,0,.87)}.header-row{position:relative;height:56px;display:flex;align-items:center;place-content:center space-between;background-color:#33354c;color:#fff}.header-row.authenticated{background-color:#33354c;color:#fff}.header-row.preview,.header-row.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}@media only screen and (min-width:601px){.header-row{height:64px}}.header-util-wrapper{margin-left:12px;visibility:visible;opacity:1;transform:translateX(0);transition:.2s ease-out}.header-util-wrapper button:hover{background-color:rgba(0,0,0,.12)}@media only screen and (max-width:415px){.header-util-wrapper.search-active{visibility:hidden;opacity:0;width:0;transform:translateX(-200%)}}@media only screen and (min-width:855px){.header-util-wrapper{visibility:0;opacity:0;display:none!important}}.header__dynamic-mobile-menu{display:none}.header__dynamic-section.preview{position:absolute;top:8px;left:0;height:96px;max-width:370.5px;margin-left:8px;background-color:#f3f3f3;border-radius:2px;box-shadow:0 3px 14px 2px rgba(0,0,0,.12),0 8px 10px 1px rgba(0,0,0,.14),0 5px 5px -3px rgba(0,0,0,.2);transition:height .3s cubic-bezier(.17,.04,.03,.94)}.header__dynamic-section.preview.live-view{height:0}.header__dynamic-section.preview.expanded{max-width:386.5px;margin-left:0;top:0;height:100vh;height:calc(var(--vh,1vh) * 100)}.header__general-search{display:flex;align-items:center;height:48px;background-color:rgba(0,0,0,.15);border-radius:2px}.header__general-search.preview{background-color:transparent}@media only screen and (max-width:854px){.header__dynamic-mobile-menu{display:flex;padding-left:4px}.header__dynamic-section.preview{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__dynamic-section.preview.expanded{width:100%;max-width:100%}.header__general-search.extend{background-color:rgba(0,0,0,.15);width:calc(100vw - 16px);margin-left:-150px}.header__general-search{background-color:transparent}}.header__general-search-field{height:48px}.header__general-search-input{padding-left:8px;border:none;height:48px;font-size:16px;line-height:48px;outline:0;border-radius:2px;background-color:transparent;color:#fff;width:203px;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__general-search-input.stretch,.header__general-search-input:focus{width:340px}.header__general-search-input.landing{width:130px}.header__general-search-input.landing.stretch{width:340px}.header__general-search-input.preview,.header__general-search-input.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}.header__general-search-input.preview.authenticated::-webkit-input-placeholder,.header__general-search-input.preview::-webkit-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-moz-placeholder,.header__general-search-input.preview::-moz-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-ms-input-placeholder,.header__general-search-input.preview::-ms-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::placeholder,.header__general-search-input.preview::placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated.stretch,.header__general-search-input.preview.authenticated:focus,.header__general-search-input.preview.stretch,.header__general-search-input.preview:focus{width:203px}.header__general-search-input::-webkit-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-moz-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-ms-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::placeholder{color:rgba(255,255,255,.54)}@media only screen and (max-width:854px){.header__general-search-input{width:0;border:none}.header__general-search-input.stretch,.header__general-search-input:focus{width:calc(100vw - 72px)!important;background-color:#292d3c;z-index:100}.header__general-search-input.stretch.preview,.header__general-search-input:focus.preview{margin-left:-152px;background-color:#fff}}.header__general-search-spinner{margin-left:8px;display:flex;align-items:center;justify-content:center;height:40px;width:40px}.header__template-details{position:absolute;top:-120px;height:0;visibility:hidden;opacity:0;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details.show{position:relative;top:0;visibility:visible;opacity:1;height:48px}.header__template-details.show.expanded{height:calc(100% - 64px)}.header__template-details-expansion{position:absolute;bottom:0;left:0;padding-left:8px;padding-right:8px;display:flex;height:48px;align-items:center;width:100%}.header__template-details-expansion.expanded{padding-left:16px;border-top:2px solid rgba(0,0,0,.12)}.header__template-details-expansion:hover{cursor:pointer}.header__template-details-arrow{transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details-arrow.expanded{transform:rotate(-180deg)}.header__template-details-text{font-size:12px;color:rgba(0,0,0,.54)}.header__template-detail-container{background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.12),0 0 2px 0 rgba(0,0,0,.14);visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-container.show{margin:8px 8px 0;padding:8px;visibility:visible;opacity:1;height:auto;max-height:calc(100% - 128px);overflow-y:auto}.header__template-detail-options{visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-options.show{display:flex;padding:8px;visibility:visible;opacity:1;width:100%;height:auto}.header__template-detail-option-button{width:100%}.header__template-detail-option-button-wrapper{width:calc(41% - 32px);margin-right:8px}.header__template-detail-option-button-wrapper:last-child{margin-right:0}.header__template-detail-option-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__template-detail-option-text{text-transform:uppercase;color:rgba(0,0,0,.87)}.header__template-detail-wrapper{padding-left:8px;padding-right:8px}.header__template-detail-header{padding-top:8px;padding-bottom:8px;border-top:1px solid #d1d5da}.header__template-detail-header.no-top-border{border-top:none}.header__template-detail-title{font-size:12px;color:rgba(0,0,0,.87)}.header__template-detail-title.bold{padding-bottom:8px;font-weight:800;font-size:20px}.header__template-detail-title.bold h1{color:rgba(0,0,0,.87);padding-bottom:8px;font-weight:800;font-size:20px;margin:0}.header__template-detail-body{padding-bottom:8px}.header__template-detail-tags{display:flex;padding-top:2px;align-items:center}.header__template-detail-tag{margin-left:8px;padding-left:8px;padding-right:8px;height:20px;line-height:20px;background-color:rgba(55,71,79,.34);border-radius:2px;font-size:10px;color:#000}.header__template-detail-tag:first-child{margin-left:0}.header__template-detail-stats{display:flex;align-items:center;padding-top:8px;line-height:24px}.header__logo{display:inline-block;height:20px;width:77.5px;margin-right:16px;background-size:contain;background-position:center;background-repeat:no-repeat}@media only screen and (max-width:854px){.header__logo{margin:0}}.header__logo-wrapper{display:flex;height:48px;align-items:center}.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{border-radius:2px;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 1px -1px rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.14);max-width:370.5px}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{margin-top:8px;margin-left:8px;margin-right:8px;max-width:370.5px}.header__logo-wrapper.preview .header__logo,.header__logo-wrapper.preview.authenticated .header__logo{margin-left:6px}@media screen and (max-width:854px){.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{width:100%;max-width:100%}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__logo-wrapper{justify-content:space-between;width:calc(100vw - 64px)}}@media screen and (min-width:855px){.header__logo{margin-left:12px}}.header__search-button{font-size:24px;margin-left:8px}.header__search-button.preview{color:rgba(0,0,0,.54)}.header__search-button.preview:hover{color:rgba(0,0,0,.87)}.header__search-verdocs-image{margin-left:2px;width:20px}.header__search-autocomplete{position:relative;padding-top:8px;max-height:515px}.header__search-autocomplete-option{display:flex;align-items:center;height:60px;line-height:60px}.header__search-autocomplete-wrapper{display:flex;align-items:center}.header__search-autocomplete-right{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__search-autocomplete-middle{max-width:calc(100% - 80px)}.header__search-autocomplete-header{font-size:16px;color:rgba(0,0,0,.87);height:20px;line-height:20px}.header__search-autocomplete-subheader{font-size:14px;color:rgba(0,0,0,.54);height:20px;line-height:20px}.header__search-autocomplete-left{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__title{position:relative;visibility:visible;opacity:1;padding-left:12px;margin-right:8px;width:calc(100% - 120px);text-align:left;font-size:20px;font-weight:500;text-overflow:ellipsis;text-decoration:none;white-space:nowrap;overflow:visible;color:#fff;transition:.2s ease-out}@media only screen and (max-width:415px){.header__title.search-active{visibility:hidden;width:0;opacity:0;transform:translateX(-200%)}}@media only screen and (max-width:854px){.header__title{margin:0 auto;width:auto;padding-left:0;padding-right:0;transform:translateX(8px)}}.header__title-input{border:none;outline:0;max-width:500px;width:100%;font-size:20px;font-weight:500;background:0 0;color:#fff}.header__title-input:not(:focus){text-overflow:ellipsis}.header__counter-envelopes,.header__counter-stars{margin-right:8px;display:flex;align-items:center}.header__counter-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__counter-number{margin-right:6px;font-size:16px;line-height:24px;height:24px;color:rgba(0,0,0,.87)}.header-util-mg{margin-right:12px;font-size:1.125rem;font-weight:300;height:64px;flex:1 1 0%}.header-util-mg button{min-width:48px;min-height:48px;background-color:transparent}@media screen and (max-width:768px){.header-util-mg{flex:none!important}}@media only screen and (max-width:600px){.header-util-mg{margin-right:0}.header-user__button{display:none}}.header__app{float:left;width:48px;height:48px;padding-top:5px}.header__notification{float:left;width:48px;height:48px;margin-top:-8px;margin-right:8px}.header-user__button{float:left;height:48px;width:48px;border:none;padding-top:5px;border-radius:50%}.header-user__button:hover{cursor:pointer}.header__nav-back,.header__nav-settings{line-height:40px!important;vertical-align:middle}.header-nav-route{padding-top:10px;padding-bottom:10px;color:#fff;text-align:center;text-transform:uppercase;font-size:1.125em;font-weight:400}.header-nav-filter{margin-right:30px}.header-nav-menu{margin-left:30px}.header__recipients{text-align:right}.header__template-status{position:absolute;bottom:4px;left:56px;font-size:12px;margin-left:8px;color:#fff}@media only screen and (max-width:675px){.header__title{padding-left:0}.header__recipients{max-width:195px!important;min-width:150px!important}.header__template-status{left:45px}}@media only screen and (max-width:360px){.header__template-status{display:none}}"]}]}],e.ctorParameters=function(){return[{type:C},{type:g.VerdocsStateService},{type:g.VerdocsTokenObjectService},{type:g.VerdocsAuthService},{type:P},{type:a.Router},{type:t.ChangeDetectorRef},{type:t.Compiler},{type:t.Injector},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.propDecorators={currentOrigin:[{type:t.Input}],header:[{type:t.ViewChild,args:["headerContainer",{static:!1}]}],searchBar:[{type:t.ViewChild,args:["search",{static:!1}]}],templateTitleInput:[{type:t.ViewChild,args:["templateTitle",{static:!1}]}],previewInput:[{type:t.ViewChild,args:["previewInput",{static:!1}]}],generalInput:[{type:t.ViewChild,args:["generalInput",{static:!1}]}]},e}();var D=function(){function e(e,t,i,n,r,a,o,s,l,c){this.verdocsStateService=e,this.verdocsObjectService=t,this.verdocsAuthGuardService=i,this.organizationDialogService=n,this.notificationsService=r,this.verdocsHeaderService=a,this.snackbar=o,this.injector=s,this.router=l,this.platform=c,this.apps=[],this.notifications=[],this.profileLoading=!1,this.hasProfile=!1,this.profileOverride={top:56,right:20},this.sidenav=!1,this.type="default",this.notificationsSubscription=new b.Subscription,this.profileLoadingSubscription=new b.Subscription,this.tokenConfig=this.injector.get(V),this.myAccountUrl=this.tokenConfig.rAccount_frontend_url,this.rSecureUrl=this.tokenConfig.rSecure_frontend_url,this.rFormUrl=this.tokenConfig.rForm_frontend_url,this.termsUrl=this.tokenConfig.rSecure_frontend_url+"/terms",this.privacyUrl=this.tokenConfig.rSecure_frontend_url+"/privacy",this.loginUrl=this.tokenConfig.rSecure_frontend_url+"/login",this.signupUrl=this.tokenConfig.rSecure_frontend_url+"/signup",this.organizationImgSrc=this.tokenConfig.rAccount_frontend_url+"/assets/organization/select-profile.png",this.verdocs_logo_url=this.rFormUrl+"/assets/blue-logo.svg",this.origin=this.tokenConfig.origin,this.isAtOriginalOrigin=this.verdocsHeaderService.getAtOrigin(this.origin)}return e.prototype.ngOnInit=function(){var e=this;this.checkEmailVerification(),this.hasProfile=this.verdocsObjectService.getProfile(),this.verdocsHeaderService.userProfileSubject.subscribe(function(t){e.profiles=e.verdocsHeaderService.getProfileCollection(t),e.verdocsHeaderService.profilesSubject.next(t);var i=w.findIndex(t,{organization_id:e.organization_id});i>=0&&(e.newProfile=t[i],e.organizationDialogService.setNewProfile(e.newProfile))}),this.notificationsSubscription=this.notificationsService.Notificatations().subscribe(function(t){e.notifications=t}),this.profileLoadingSubscription=this.verdocsHeaderService.profileLoadingSubject.subscribe(function(t){e.profileLoading=t}),!this.profiles&&this.hasProfile&&this.verdocsHeaderService.getProfiles()},e.prototype.ngAfterContentChecked=function(){i.isPlatformBrowser(this.platform)&&"undefined"!=typeof window&&(window.innerWidth>600?this.profileOverride.top=60:this.profileOverride.top=56)},e.prototype.ngOnDestroy=function(){this.notificationsSubscription.unsubscribe(),this.profileLoadingSubscription.unsubscribe()},e.prototype.checkEmailVerification=function(){this.emailVerified=this.verdocsStateService.getEmailVerification(),this.organizationDialogService.setEmailVerified(this.emailVerified)},Object.defineProperty(e.prototype,"admin_url",{get:function(){if(this.hasAccessToAdmin())return this.tokenConfig.rAccount_frontend_url+"/admin"},enumerable:!0,configurable:!0}),e.prototype.removeNotification=function(e){this.notificationsService.dismissNotification(e)},e.prototype.signOut=function(){this.verdocsAuthGuardService.signOut()},e.prototype.signIn=function(){window&&(window.location.href=this.rSecureUrl+"/login?redirect_url="+(this.rFormUrl+this.router.url))},e.prototype.signUp=function(){window&&(window.location.href=this.rSecureUrl+"/signup?redirect_url="+(this.rFormUrl+this.router.url))},e.prototype.switch=function(e){var t=this;this.verdocsHeaderService.switchProfile(e).then(function(){window.location.href=""+t.tokenConfig.rForm_frontend_url})},e.prototype.switchAndGoToAdmin=function(){var e=this;this.newProfile&&this.verdocsHeaderService.switchProfile(this.newProfile.id).then(function(t){window.location.href=e.myAccountUrl+"/admin/profile/"+e.newProfile.id})},e.prototype.updateTokenStatus=function(e){var t=this;this.createSnackbar("Checking email verification","OK"),this.verdocsHeaderService.updateTokens(e).then(function(){t.emailVerified=t.verdocsStateService.getEmailVerification(),t.organizationDialogService.setEmailVerified(t.emailVerified)})},e.prototype.resendEmailVerification=function(){this.verdocsHeaderService.resendEmailVerification()},e.prototype.checkNameValidity=function(e){var t=this;return this.verdocsHeaderService.getNameValidity(e).then(function(e){t.organizationDialogService.setNameValidation(e)})},e.prototype.createOrganization=function(e){var t=this;this.verdocsHeaderService.createOrganization(e).then(function(e){return S(t,void 0,void 0,function(){return k(this,function(t){switch(t.label){case 0:return this.organization_id=e.id,[4,this.verdocsHeaderService.getAccountData()];case 1:return t.sent(),this.createSnackbar("Organization created",null),[2]}})})})},e.prototype.switchProfile=function(){this.switch(this.newProfile.id)},e.prototype.checkAccess=function(e){return this.verdocsStateService.hasAccessTo(e+"_Realster")},e.prototype.jumpTo=function(e){window.location.href=this.tokenConfig[e+"_frontend_url"]},e.prototype.hasAccessToAdmin=function(){var e=this.verdocsStateService.getRAccountRoles();return w.includes(e,"owner")||w.includes(e,"admin")},e.prototype.createSnackbar=function(e,t){var i;t||(t=null),i=window.innerWidth>=920?{verticalPosition:"bottom",horizontalPosition:"left",duration:5e3}:{verticalPosition:"top",duration:5e3},this.snackbar.open(e,t,i)},e.prototype.lunchElevio=function(){window.lunchElevio()},e.prototype.lunchIntercom=function(){window.lunchIntercom()},e.decorators=[{type:t.Component,args:[{selector:"verdocs-header-tools",template:'<div class="verdocs__wrapper" *ngIf="hasProfile" [ngClass]="{sidenav: sidenav}">\n  <div class="verdocs__chat">\n    <button mat-icon-button *ngIf="!sidenav" (click)="lunchIntercom()" matTooltip="Live Chat">\n      <mat-icon>forum</mat-icon>\n    </button>\n  </div>\n  <div class="verdocs__help">\n    <button mat-icon-button *ngIf="!sidenav" (click)="lunchElevio()" matTooltip="Help Center">\n      <mat-icon>help</mat-icon>\n    </button>\n  </div>\n  <div class="verdocs__notification" *ngIf="!sidenav" matTooltip="Notifications">\n    <verdocs-notifications [notifications]="notifications" (removeNotification)="removeNotification($event)"\n      [verdocs_logo_url]="verdocs_logo_url"></verdocs-notifications>\n  </div>\n  <div class="verdocs__account" *ngIf="profiles"\n    [ngClass]="{header: !sidenav, sidenav: sidenav, default: type === \'default\'}" matTooltip="My Account">\n    <verdocs-profiles [currentProfile]="profiles.currentProfile()" [override]="profileOverride" [admin_url]="admin_url">\n      <verdocs-account-dialog [profiles]="profiles" [termsUrl]="termsUrl" [privacyUrl]="privacyUrl"\n        [accountUrl]="myAccountUrl" (signOutEvent)="signOut()" [admin_url]="admin_url">\n        <verdocs-account-profile [profiles]="profiles" [loading]="profileLoading"\n          [organizationImgSrc]="organizationImgSrc" (switchEvent)="switch($event)"\n          (switchAndRedirectEvent)="switchAndGoToAdmin()" (getEmailVerificationEvent)="updateTokenStatus()"\n          (resendEmailVerificationEvent)="resendEmailVerification()" (getNameValidityEvent)="checkNameValidity($event)"\n          (createOrganizationEvent)="createOrganization($event)" (switchProfileEvent)="switchProfile()">\n        </verdocs-account-profile>\n      </verdocs-account-dialog>\n    </verdocs-profiles>\n  </div>\n</div>\n<div class="verdocs__wrapper" *ngIf="!hasProfile">\n  <a class="verdocs__signin-button" mat-button [routerLink]="\'/login\'"\n    *ngIf="origin === \'rSecure\' && isAtOriginalOrigin" [ngClass]="{preview: mode === \'preview\'}">Sign in</a>\n  <a class="verdocs__signup-button" mat-button [routerLink]="\'/signup\'"\n    *ngIf="origin === \'rSecure\' && isAtOriginalOrigin" [ngClass]="{preview: mode === \'preview\'}">Sign up</a>\n  <button class="verdocs__signin-button" mat-button *ngIf="origin !== \'rSecure\'"\n    [ngClass]="{preview: mode === \'preview\'}" (click)="signIn()">Sign in</button>\n  <button class="verdocs__signup-button" mat-button *ngIf="origin !== \'rSecure\'"\n    [ngClass]="{preview: mode === \'preview\'}" (click)="signUp()">Sign up</button>\n</div>',styles:[".verdocs__wrapper{height:64px;flex-direction:row;box-sizing:border-box;display:flex;justify-content:flex-end;align-items:center}.verdocs__notification{margin-top:0;line-height:64px}@media only screen and (max-width:600px){.verdocs__wrapper{height:56px}.verdocs__notification{line-height:56px}}.verdocs__chat{line-height:64px;margin-right:7px}.verdocs__chat button{height:40px;min-width:40px}.verdocs__help{line-height:64px;margin-right:7px}.verdocs__help button{height:40px;min-width:40px}.verdocs__app{line-height:64px}.verdocs__app-button{padding:0;height:48px;min-width:48px;border-radius:24px}.verdocs__app.sidenav{margin-right:4px}@media only screen and (max-width:600px){.verdocs__app{line-height:56px}}.verdocs__account{line-height:64px}.verdocs__account-button{background-color:#9b9b9b;color:#fff}@media only screen and (max-width:854px){.verdocs__wrapper{display:none}.verdocs__wrapper.sidenav{display:flex}.verdocs__account.header.default,.verdocs__app.header.default,.verdocs__chat,.verdocs__help,.verdocs__notification{display:none}}@media only screen and (min-width:855px){.verdocs__account.sidenav,.verdocs__app.sidenav{display:none}}@media only screen and (max-width:600px){.verdocs__account{line-height:56px}}.verdocs__account,.verdocs__app,.verdocs__chat,.verdocs__notification{float:left}.verdocs__signin-button,.verdocs__signup-button{padding-left:8px;padding-right:8px;border-radius:2px;height:36px;background-color:#33354c;color:#fff;min-width:60px}.verdocs__signin-button.preview,.verdocs__signup-button.preview{background-color:transparent;color:rgba(0,0,0,.87)}.verdocs__signup-button{margin-left:8px;border:.5px solid #fff}.verdocs__signup-button.preview{border:.5px solid rgba(0,0,0,.87)}.menu__container{width:320px;height:248px}.menu__container .mat-menu-content{padding:0}.menu__container.mat-menu-panel{padding:8px}.menu__item{padding:0!important;margin-bottom:8px!important;border:none;min-width:64px!important;border-radius:50%!important}.menu__item-wrapper{padding:12px;float:left;text-align:center}.menu__item-wrapper.my-account{padding-left:6.5px;padding-right:6.5px}.menu__item img{vertical-align:middle}.menu__icon{width:40px}.menu__icon.rForm{width:30px}.menu__background{background-color:#495057;width:64px;height:64px;line-height:64px;border-radius:50%}.menu__title{font-size:14px;text-align:center;line-height:20px}.menu__account-container{width:270px;height:228px}"]}]}],e.ctorParameters=function(){return[{type:g.VerdocsStateService},{type:g.VerdocsTokenObjectService},{type:g.VerdocsAuthGuardService},{type:f.OrganizationDialogService},{type:v.NotificationService},{type:C},{type:u.MatSnackBar},{type:t.Injector},{type:a.Router},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.propDecorators={profileOverride:[{type:t.Input}],sidenav:[{type:t.Input}],type:[{type:t.Input}],mode:[{type:t.Input}]},e}();var V=new t.InjectionToken("connectionConfig"),F=function(){function e(){}return e.initVerdocsHeader=function(t){return{ngModule:e,providers:[{provide:V,useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{declarations:[L,O,j,M,D,R],entryComponents:[R],imports:[i.CommonModule,r.FormsModule,n.HttpClientModule,a.RouterModule,r.ReactiveFormsModule,u.MatSnackBarModule,p.MatIconModule,o.MatAutocompleteModule,s.MatButtonModule,h.MatSelectModule,c.MatDialogModule,l.MatChipsModule,_.MatProgressSpinnerModule,d.MatRadioModule,m.MatTooltipModule,v.NotificationsModule,f.ProfilesModule,g.TokensModule],providers:[P,C],exports:[L,O,j,M,D,R]}]}],e}();e.FourOhOneDialog=R,e.HeaderComponent=L,e.HeaderModule=F,e.HeaderToolsComponent=D,e.RecipientEditorComponent=O,e.SortOptions={created_at:"created_at",updated_at:"updated_at",envelope_name:"envelope_name",canceled_at:"canceled_at",envelope_status:"envelope_status"},e.TemplateActions=A,e.TemplatePermissions=I,e.TemplateSenderTypes=T,e.TemplateSortOptions={CREATED_AT:"created_at",UPDATED_AT:"updated_at",NAME:"name",LAST_USED_AT:"last_used_at",COUNTER:"counter",STAR_COUNTER:"star_counter"},e.TemplateSourceComponent=j,e.TemplatesGuardService=P,e.VerdocsHeaderService=C,e.VisibilityEditorComponent=M,e.connectionConfigToken=V,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=verdocs-header.umd.min.js.map