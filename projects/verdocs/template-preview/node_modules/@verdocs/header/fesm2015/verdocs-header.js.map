{"version":3,"file":"verdocs-header.js","sources":["ng://@verdocs/header/lib/models/notification.interface.ts","ng://@verdocs/header/lib/models/verdocs.model.ts","ng://@verdocs/header/lib/services/templates.guard.ts","ng://@verdocs/header/lib/error-dialogs/four-oh-one.dialog.ts","ng://@verdocs/header/lib/services/header.service.ts","ng://@verdocs/header/lib/template/recipients/recipients-editor.component.ts","ng://@verdocs/header/lib/template/source-file/source-file.component.ts","ng://@verdocs/header/lib/template/visibility/visibility-editor.component.ts","ng://@verdocs/header/lib/header.component.ts","ng://@verdocs/header/lib/components/header-tools.component.ts","ng://@verdocs/header/lib/header.module.ts"],"sourcesContent":["export interface Notification {\n  id?: string;\n  profile_id: string;\n  data: object;\n  read: boolean;\n  deleted: boolean;\n  client_id: string;\n  message: string;\n  time: string;\n  event_id: string;\n}\n","export interface ITemplate {\n  template_documents?: ITemplateDocument[];\n  pages?: IPage[];\n  roles?: IRole[];\n  counter?: number;\n  name: string;\n  id?: string;\n  profile_id?: string;\n  created_at?: Date;\n  updated_at?: Date;\n  token?: string;\n  tags?: any[];\n  description?: string;\n  reminder_id?: string;\n  reminder?: object;\n  template_stars?: any[];\n  organization_id?: string;\n  is_personal?: boolean;\n  is_public?: boolean;\n  sender?: TemplateSenderTypes;\n  last_used?: { at: string }[];\n}\n\nexport interface Envelope {\n  id?: string;\n  template_id: string;\n  status?: string;\n  user_id: string;\n  envelope_document_id: string;\n  created_at?: Date;\n  updated_at?: Date;\n  canceled_at?: Date;\n  recipients?: Recipient[];\n  document?: IEnvelopeDocument;\n  component?: EnvelopeComponent;\n  histories?: IEnvelopeHistory[];\n}\n\nexport enum TemplateSenderTypes {\n  CREATOR = 'creator', // same as legacy\n  ORGANIZATION_MEMBER = 'organization_member',\n  ORGANIZATION_MEMBER_AS_CREATOR = 'organization_member_as_creator',\n  EVERYONE = 'everyone',\n  EVERYONE_AS_CREATOR = 'everyone_as_creator' // Creator would be sender of envelope no matter who creates the envelope\n}\n\nexport enum TemplatePermissions {\n  TEMPLATE_CREATOR_CREATE_PUBLIC = 'template:creator:create:public',\n  TEMPLATE_CREATOR_CREATE_ORG = 'template:creator:create:org',\n  TEMPLATE_CREATOR_CREATE_PERSONAL = 'template:creator:create:personal',\n  TEMPLATE_CREATOR_DELETE = 'template:creator:delete',\n  TEMPLATE_CREATOR_VISIBILITY = 'template:creator:visibility',\n  TEMPLATE_MEMBER_READ = 'template:member:read',\n  TEMPLATE_MEMBER_WRITE = 'template:member:write',\n  TEMPLATE_MEMBER_DELETE = 'template:member:delete',\n  TEMPLATE_MEMBER_VISIBILITY = 'template:member:visibility'\n};\n\nexport enum TemplateActions {\n  CREATE_PERSONAL = 'create_personal',\n  CREATE_ORG = 'create_org',\n  CREATE_PUBLIC = 'create_public',\n  READ = 'read',\n  WRITE = 'write',\n  DELETE = 'delete',\n  CHANGE_VISIBILITY_PERSONAL = 'change_visibility_personal',\n  CHANGE_VISIBILITY_ORG = 'change_visibility_org',\n  CHANGE_VISIBILITY_PUBLIC = 'change_visibility_public'\n}\n\nexport interface IRole {\n  id?: string;\n  template_id: string;\n  name: string;\n  full_name?: string;\n  old_name?: string;\n  email?: string;\n  type: string;\n  sequence: number;\n  fields?: IField[];\n  message?: string;\n  rgba?: string;\n  delegator: boolean;\n}\n\nexport interface IPage {\n  template_id: string;\n  document_id: string;\n  document?: ITemplateDocument;\n  sequence: number;\n  page_number: number;\n  thumbnail_url?: string;\n  thumbnail_safe?: any;\n  fields?: IField[];\n}\n\nexport interface IField {\n  label: string;\n  name: string;\n  role_name: string;\n  template_id: string;\n  type: string;\n  required: boolean;\n  setting: Object;\n  page_sequence: number;\n  validator?: string;\n}\n\nexport interface ITemplateDocument {\n  url: string;\n  name: string;\n  page_numbers: number;\n  id?: string;\n  updated_at?: Date;\n  created_at?: Date;\n  template_id: string;\n  thumbnail_url: string;\n  thumbnail_safe?: any;\n  mime: string;\n}\n\nexport interface IEnvelopeDocument {\n  id?: string;\n  url: string;\n  name: string;\n  created_at?: Date;\n  updated_at?: Date;\n  page_numbers: number;\n  mime: string;\n}\n\nexport interface IEnvelopeHistory {\n  id?: string;\n  envelope_id?: string;\n  role_name?: string;\n  event: string;\n  event_detail?: string;\n  created_at: Date;\n}\n\nexport interface IActivity {\n  date: string;\n  log: string;\n  icon: string;\n}\n\nexport interface Recipient {\n  role_name: string;\n  envelope_id: string;\n  status: string;\n  email: string;\n  full_name: string;\n  sequence: number;\n  type: string;\n  user_id: string;\n  created_at: Date;\n  updated_at: Date;\n  token: string;\n  message: string;\n  signatureUrl?: any,\n  signatures: IEnvelopeSignature[],\n  rgba?: string\n}\n\nexport interface IEnvelopeSignature {\nenvelope_id: string;\nsignature_id: string;\nrole_name: string;\nsigned_at?: Date;\nip_address?: string;\nhash?: string;\n}\n\nexport interface EnvelopeComponent {\n  progress?: number;\n  status_color?: string;\n  selected_format_time?: string;\n  format_time?: string;\n  selected?: boolean;\n  envelope__list__class?: string;\n}\n\nexport interface IEnvelopeSearchParams {\n  envelope_status?: string[];\n  recipient_status?: string[];\n  envelope_name?: string;\n  recipient_name?: string;\n  recipient_email?: string;\n  updated_at?: ITimePeriod;\n  canceled_at?: ITimePeriod;\n  created_at?: ITimePeriod;\n  text_field_value?: string;\n  is_owner?: boolean;\n  is_recipient?: boolean;\n  sort_by?: SortOptions;\n  ascending?: boolean;\n  row?: number;\n  page?: number;\n  template_id?: string;\n  recipient_claimed?: boolean;\n}\n\nexport interface ITimePeriod {\n  start_time: string; // Date\n  end_time: string; // Date\n}\n\nexport enum SortOptions {\n  created_at = 'created_at',\n  updated_at = 'updated_at',\n  envelope_name = 'envelope_name',\n  canceled_at = 'canceled_at',\n  envelope_status = 'envelope_status'\n}\n\nexport interface ITemplateSearchParams {\n  name?: string;\n  sender?: string;\n  description?: string;\n  profile_id?: string;\n  organization_id?: string;\n  updated_at?: ITimePeriod;\n  created_at?: ITimePeriod;\n  last_used_at?: ITimePeriod;\n  is_personal?: boolean;\n  is_public?: boolean;\n  tags?: string[];\n  document_name?: string;\n  sort_by?: TemplateSortOptions;\n  ascending?: boolean;\n  row?: number;\n  page?: number;\n}\n\nexport enum TemplateSortOptions {\n  CREATED_AT = 'created_at',\n  UPDATED_AT = 'updated_at',\n  NAME = 'name',\n  LAST_USED_AT = 'last_used_at',\n  COUNTER = 'counter',\n  STAR_COUNTER = 'star_counter'\n}\n","import { VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { intersection } from 'lodash';\n\nimport { Injectable } from '@angular/core';\nimport { ITemplate, TemplateActions, TemplatePermissions, TemplateSenderTypes } from '../models/verdocs.model';\n\n@Injectable()\nexport class TemplatesGuardService {\n\n\n  constructor(\n    private vTokenObjectService: VerdocsTokenObjectService\n  ) { }\n\n\n  public canPerformAction(action: TemplateActions, template: ITemplate): { canPerform: boolean, message: string } {\n    try {\n      let canPerform = false;\n      let message = null;\n      const neededPermissions = [];\n      if (!template && action && !action.includes('create')) {\n        throw {\n          error:\n            'You need to provide template object'\n        }\n      }\n      const userProfile = this.vTokenObjectService.getProfile();\n      const isCreator = userProfile ? template && template.profile_id === userProfile.id : false;\n      const isSameOrg = userProfile ? template && template.organization_id === userProfile.organization_id : false;\n      const isPersonal = template ? template.is_personal : null;\n      const isPublic = template ? template.is_public : null;\n      switch (action) {\n        case TemplateActions.CREATE_PERSONAL:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL)\n          break;\n        case TemplateActions.CREATE_ORG:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG);\n          break;\n        case TemplateActions.CREATE_PUBLIC:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC)\n          break;\n        case TemplateActions.READ:\n          if (!isCreator) {\n            if ((!isPersonal && isSameOrg) || !isPublic) {\n              neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_READ);\n            }\n          }\n          break;\n        case TemplateActions.WRITE:\n          if (!isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_READ);\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_WRITE);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_PERSONAL:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL);\n            // neededPermission.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_ORG:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG);\n            // neededPermission.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_PUBLIC:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC);\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.DELETE:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_DELETE);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_DELETE);\n          }\n          break;\n        default:\n          throw {\n            error: 'Action is not defined'\n          }\n      }\n      if (this.hasPermissions(neededPermissions)) {\n        canPerform = true;\n      } else {\n        message = `Insufficient access to perform '${action}'. Needed permissions: ${neededPermissions.toString()}`;\n      }\n      return {\n        canPerform,\n        message\n      }\n    } catch (err) {\n      console.error({\n        message: `Failed to check whether action (${action}) can be done, in TemplateGuardService`,\n        err: err\n      });\n    }\n  }\n\n  private hasPermissions(requiredPermissions: string[]) {\n    const userPermissions = this.vTokenObjectService.getPermissions();\n    const hasPermissions = intersection(userPermissions, requiredPermissions).length === requiredPermissions.length;\n    return hasPermissions;\n  }\n\n  public canBeSender(template): boolean {\n    const userProfile = this.vTokenObjectService.getProfile();\n    if (!userProfile) {\n      return false;\n    }\n    switch (template.sender) {\n      case TemplateSenderTypes.CREATOR:\n        return userProfile.id === template.profile_id;\n      case TemplateSenderTypes.ORGANIZATION_MEMBER:\n      case TemplateSenderTypes.ORGANIZATION_MEMBER_AS_CREATOR:\n        return userProfile.id === template.profile_id || template.organization_id === userProfile.organization_id;\n      default:\n        return true;\n    }\n  }\n\n  canUserCreateTemplate() {\n    return this.canPerformAction(TemplateActions.CREATE_PERSONAL, null)['canPerform']\n      || this.canPerformAction(TemplateActions.CREATE_ORG, null)['canPerform']\n      || this.canPerformAction(TemplateActions.CREATE_PUBLIC, null)['canPerform']\n  }\n\n}\n","import { Component, OnInit, Injector } from '@angular/core';\nimport { VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { Router } from '@angular/router';\n\nimport { connectionConfig, connectionConfigToken } from '../header.module';\n\n@Component({\n  selector: 'four-oh-one-dialog',\n  templateUrl: './four-oh-one.dialog.html',\n  styleUrls: ['./four-oh-one.dialog.scss']\n})\nexport class FourOhOneDialog implements OnInit {\n  public error: any = null;\n  public tokenConfig: connectionConfig\n  public currentProfile: any = null;\n  public error_code: string = null;\n  public error_title: string = null;\n  public error_message: string = null;\n  public rSecureUrl: string;\n  public rFormUrl: string;\n\n  constructor(\n    private router: Router,\n    private verdocsTokenObjectService: VerdocsTokenObjectService,\n    private injector: Injector\n  ) {\n    this.tokenConfig = this.injector.get(connectionConfigToken);\n    this.rSecureUrl = this.tokenConfig.rSecure_frontend_url;\n    this.rFormUrl = this.tokenConfig.rForm_frontend_url;\n  }\n\n  ngOnInit() {\n    this.currentProfile = this.verdocsTokenObjectService.getProfile();\n    if (this.error && this.error.hasOwnProperty('error')) {\n      this.error_code = this.error.error.code || null;\n      if (this.error_code) {\n        this.prepareErroContent();\n      }\n    }\n  }\n\n  prepareErroContent() {\n    switch(this.error_code) {\n      case 'AUTH0002':\n      case 'T000001':\n      this.error_title = 'This document is not accessible';\n      this.error_message = (this.currentProfile ? 'Try using a different organization/account, ' : 'Try signing in, signing up, ') + 'or requesting access from the owner of this document.';\n      break;\n      case 'AUTH0003':\n      this.error_title = 'Cannot complete your request';\n      this.error_message = 'Try after ' + (this.currentProfile ? 'signing in again.' : 'signing in or signing up.');\n      break;\n      default:\n      this.error_title = 'Your request has been denied.';\n      this.error_message = null;\n      break;\n    }\n  }\n\n  goToDashboard() {\n    this.router.navigate(['/dashboard']);\n  }\n\n  signIn() {\n    if (window) {\n      window.location.href = `${this.rSecureUrl}/login?redirect_url=${this.rFormUrl + this.router.url}`;\n    }\n  }\n\n  signUp() {\n    if (window) {\n      window.location.href = `${this.rSecureUrl}/signup?redirect_url=${this.rFormUrl + this.router.url}`;\n    }\n  }\n}\n","import { Injectable, Injector, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformServer, isPlatformBrowser } from '@angular/common'\nimport { HttpClient, HttpResponse, HttpRequest, HttpHeaders } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ReplaySubject, Subject, BehaviorSubject, EMPTY, Observable } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport { findIndex, filter } from 'lodash';\nimport { saveAs } from 'file-saver';\nimport { ProfileModel, ProfileCollection } from '@verdocs/profiles';\nimport { VerdocsStateService, VerdocsTokenObjectService } from '@verdocs/tokens';\n\nimport { connectionConfig, connectionConfigToken } from '../header.module';\nimport { TemplatesGuardService } from './templates.guard';\n\nimport { ITemplate, Envelope, IEnvelopeSearchParams, ITemplateSearchParams, IEnvelopeDocument, TemplateActions } from '../models/verdocs.model';\n\nimport { FourOhOneDialog } from '../error-dialogs/four-oh-one.dialog';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VerdocsHeaderService {\n\n  public tokenConfig: connectionConfig;\n  public titleSubject = new ReplaySubject<string>();\n  public csvBlobSubject = new ReplaySubject<Blob>();\n  public templates: Subject<ITemplate[]> = new Subject<ITemplate[]>();\n  public saveStatusSubject: ReplaySubject<string> = new ReplaySubject<string>();\n  public templateDetailToggleSubject: Subject<boolean> = new Subject<boolean>();\n  public profileLoadingSubject = new ReplaySubject<boolean>();\n  public templateSubject: Subject<ITemplate> = new Subject<ITemplate>();\n  public template: ITemplate;\n  public allEnvelopes = new BehaviorSubject<Envelope[]>([]);\n  public sideNavStateSubject: ReplaySubject<boolean> = new ReplaySubject();\n  public initiateBuilderAutofocus: ReplaySubject<boolean> = new ReplaySubject();\n  public createToggleSubscription: Subject<boolean> = new Subject<boolean>();\n  public rAccount_url: string;\n  public rSecure_url: string;\n  public rForm_url: string;\n\n  private envUrl: string;\n  private _toggleSidenavSource = new BehaviorSubject<boolean>(false);\n  private _title = new BehaviorSubject<string>('');\n  private _selected = new BehaviorSubject<boolean>(false);\n  private _pdfUrl = new BehaviorSubject<string>('');\n  private _env = new BehaviorSubject<Envelope>({\n    id: '',\n    template_id: '',\n    status: '',\n    user_id: '',\n    envelope_document_id: ''\n  });\n  private _envDoc = new BehaviorSubject<IEnvelopeDocument>({\n    id: '',\n    url: '',\n    name: '',\n    page_numbers: 0,\n    mime: '',\n  });\n  private builderSideNavState: boolean;\n  private userFullname = '';\n  private userInitial = '';\n  private userEmail = '';\n  private userPhone = '';\n  private userData = {\n    name: this.userFullname,\n    initial: null,\n    email: this.userEmail,\n    phone: this.userPhone\n  };\n  private profileData: any;\n  private isAtOrigin: boolean = false;\n  private currentOrigin: 'rAccount' | 'rForm' | 'rSecure' | null;\n  private currentOrganizationId: string = null;\n  public sidenavOpened = false;\n\n  toggleSidenav$ = this._toggleSidenavSource.asObservable();\n  selectStatus$ = this._selected.asObservable();\n  env$ = this._env.asObservable();\n  titleValue$ = this._title.asObservable();\n  pdfUrl$ = this._pdfUrl.asObservable();\n  envDoc$ = this._envDoc.asObservable();\n  public userDataSubject = new ReplaySubject<any>();\n  public userProfileSubject = new ReplaySubject<any>();\n  public currentProfileSubject = new ReplaySubject<any>();\n  public personalAccountSubject = new ReplaySubject<any>();\n  public profilesSubject = new ReplaySubject<any>();\n\n  constructor(\n    private injector: Injector,\n    private http: HttpClient,\n    private router: Router,\n    private snackbar: MatSnackBar,\n    private dialog: MatDialog,\n    private templateGuard: TemplatesGuardService,\n    private vTokenStateService: VerdocsStateService,\n    private vTokenObjectService: VerdocsTokenObjectService,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n    this.tokenConfig = this.injector.get(connectionConfigToken);\n    this.envUrl = this.tokenConfig.rForm_backend_url + '/envelopes';\n    this.rForm_url = this.tokenConfig.rForm_frontend_url;\n    this.rAccount_url = this.tokenConfig.rAccount_frontend_url;\n    this.rSecure_url = this.tokenConfig.rSecure_frontend_url;\n  }\n\n  public getAtOrigin(originType) {\n    this.isAtOrigin = originType && this.tokenConfig.origin && originType === this.tokenConfig.origin;\n    return this.isAtOrigin;\n  }\n\n  public toggleSidenav(bool) {\n    this.updateToggleStatus(bool);\n    this._toggleSidenavSource.next(this.sidenavOpened);\n  }\n\n  public updateToggleStatus(bool) {\n    this.sidenavOpened = bool;\n  }\n\n  public updateTitle(string) {\n    this._title.next(string);\n  }\n\n  public updateSelectStatus(bool) {\n    this._selected.next(bool);\n  }\n\n  public updatePdfUrl(string) {\n    this._pdfUrl.next(string);\n  }\n\n  public updateEnv(string) {\n    this._env.next(string);\n  }\n\n  public updateEnvDoc(IEnvelopeDocument) {\n    this._envDoc.next(IEnvelopeDocument);\n  }\n\n  initNotificationService() { }\n\n  public updateEnvelopes(envelopes) {\n    this.allEnvelopes.next(envelopes);\n  }\n\n  public toggleCreate() {\n    this.createToggleSubscription.next(true);\n  }\n\n  searchEnvelopes(searchParams: IEnvelopeSearchParams) {\n    for (const key in searchParams) {\n      if (searchParams.hasOwnProperty(key)) {\n        if (searchParams[key] === null) {\n          delete searchParams[key];\n        }\n      }\n    }\n    return this.http.request(new HttpRequest(\n      'POST',\n      this.envUrl + '/search',\n      searchParams,\n      {\n        reportProgress: true,\n        responseType: 'json'\n      }\n    )).pipe(\n      map(event => {\n        if (event instanceof HttpResponse) {\n          this.updateEnvelopes(event.body);\n        }\n        return event;\n      })\n    );\n  }\n\n  searchTemplates(searchParams: ITemplateSearchParams) {\n    for (const key in searchParams) {\n      if (searchParams.hasOwnProperty(key)) {\n        if (searchParams[key] === null) {\n          delete searchParams[key];\n        }\n      }\n    }\n    return this.http.request(new HttpRequest(\n      'POST',\n      this.tokenConfig.rForm_backend_url + '/templates/search',\n      searchParams,\n      {\n        reportProgress: true,\n        responseType: 'json'\n      }\n    )).pipe(\n      map(event => {\n        return event;\n      })\n    );\n  }\n\n  downloadTemplateDocument(template: ITemplate) {\n    this.getTemplateDocument(template.id, template.template_documents[0]).then(template_file => {\n      if (isPlatformBrowser(this.platform)) {\n        if (window && window.URL) {\n          const fileUrl = URL.createObjectURL(template_file);\n          saveAs(fileUrl, template.template_documents[0].name + '.pdf');\n        }\n      }\n    });\n  }\n\n  getTemplateDocument(templateId, templateDocument) {\n    return this.http.get(this.tokenConfig.rForm_backend_url + '/templates/' + templateId + '/documents/' +\n      templateDocument.id + '?file=true', { responseType: 'blob' }).toPromise();\n  }\n\n  updateTemplates(templates) {\n    this.templates.next(templates);\n  }\n\n  toggleBuilderSideNav() {\n    this.builderSideNavState = !this.builderSideNavState;\n    this.sideNavStateSubject.next(this.builderSideNavState);\n    if (this.builderSideNavState === false) {\n      this.initiateBuilderAutofocus.next(false);\n    }\n  }\n\n  canUserEdit(template: ITemplate) {\n    const response = this.templateGuard.canPerformAction(TemplateActions.WRITE, template);\n    return response['canPerform']\n  }\n\n  updateTemplate(templateId: string, body): Promise<ITemplate> {\n    return this.http\n      .put<ITemplate>(this.tokenConfig.rForm_backend_url + '/templates/' + templateId, body)\n      .toPromise().then(template => template);\n  }\n\n  openTemplate(template: ITemplate) {\n    if (this.canUserPreview(template)) {\n      location.href = `${this.tokenConfig.rForm_frontend_url}/document/${template.id}`;\n    } else if (this.canUserEdit(template)) {\n      location.href = `${this.tokenConfig.rForm_frontend_url}/builder/${template.id}/fields`;\n    } else {\n      this.snackbar.open(`Template is in build mode, and not ready for use.  Please check back soon.`)\n    }\n  }\n\n  openTemplates(searchKeyword?: string) {\n    if (this.tokenConfig.origin === 'rForm') {\n      if (searchKeyword.trim() !== '') {\n        this.router.navigate(['documents'], { queryParams: { name: searchKeyword } });\n      } else {\n        this.router.navigate(['documents']);\n      }\n    } else {\n      if (searchKeyword.trim() !== '') {\n        location.href = `${this.tokenConfig.rForm_frontend_url}/documents?name=${searchKeyword}`;\n      } else {\n        location.href = `${this.tokenConfig.rForm_frontend_url}/documents`;\n      }\n    }\n  }\n\n  getTemplateOwnerInfo(id: string): Promise<{ profile_id: string, email: string, name: string }> {\n    return this.http.get<{ profile_id: string, email: string, name: string }>(`${this.tokenConfig.rForm_backend_url}/templates/${id}?owner_info=true`)\n      .toPromise().then(res => {\n        return res;\n      });\n  }\n\n  canUserPreview(template: ITemplate) {\n    const hasPermission = (this.templateGuard.canPerformAction(TemplateActions.READ, template)).canPerform;\n    let canPreview;\n    const roles = template.roles;\n    const signers = filter(roles, { type: 'signer' });\n    canPreview = signers && signers.length > 0;\n    for (const signer of signers) {\n      canPreview = signer['fields'] && signer['fields'].length > 0;\n    }\n    return hasPermission && canPreview;\n  }\n\n  starTemplate(id): Observable<any> {\n    return this.http.post(this.tokenConfig.rForm_backend_url + `/templates/${id}/stars`, {}).pipe(\n      catchError(err => {\n        if (err && err.status === 401) {\n          const errorDialog = this.dialog.open(FourOhOneDialog, {\n            panelClass: 'error__dialog',\n            disableClose: true\n          })\n          errorDialog.componentInstance.error = err;\n        }\n        return EMPTY\n      }),\n      map(res => res)\n    );\n  }\n\n  unstarTemplate(id): Observable<any> {\n    return this.http.delete(this.tokenConfig.rForm_backend_url + `/templates/${id}/stars`).pipe(\n      catchError(err => {\n        if (err && err.status === 401) {\n          const errorDialog = this.dialog.open(FourOhOneDialog, {\n            panelClass: 'error__dialog',\n            disableClose: true\n          })\n          errorDialog.componentInstance.error = err;\n        }\n        return EMPTY\n      }),\n      map(res => res)\n    );\n  }\n\n  //Account Services\n  async updateTokens(sendMessage?: boolean) {\n    return new Promise((resolve, reject) => {\n      this.vTokenStateService.updateTokens(this.tokenConfig.rSecure_backend_url).subscribe(tokens => {\n        if (tokens && tokens.length > 0) {\n          if (sendMessage) {\n            this.snackbar.dismiss();\n            this.snackbar.open('Status updated');\n          }\n        }\n        this.getAccountData();\n        return resolve();\n      })\n    });\n  }\n\n  getAccountData() {\n    // might need if header needs to show condition\n    const profile = this.vTokenObjectService.getProfile();\n    if (profile) {\n      this.getProfiles();\n    }\n  }\n\n  getProfiles() {\n    return this.http.get(this.tokenConfig.rAccount_backend_url + '/profiles').toPromise().then((res: any[]) => {\n      const personal = res.splice(findIndex(res, p => p.organization.name === 'realster'), 1);\n      this.personalAccountSubject.next(personal[0]);\n      this.profileData = res.sort((a, b) => {\n        if (a.organization.name < b.organization.name) {\n          return -1;\n        }\n        if (a.organization.name > b.organization.name) {\n          return 1;\n        }\n        return 0;\n      });\n      this.profileData.unshift(personal[0]);\n      const currentIndex = findIndex(this.profileData, { current: true });\n      if (this.profileData[currentIndex]['first_name']) {\n        this.userFullname = this.profileData[currentIndex]['first_name'] + ' ' + this.profileData[currentIndex]['last_name'];\n        this.userInitial = this.profileData[currentIndex]['first_name'].charAt(0) +\n          this.profileData[currentIndex]['last_name'].charAt(0);\n      } else {\n        this.userFullname = '';\n      }\n      if (this.profileData[currentIndex]['phone']) {\n        this.userPhone = this.profileData[currentIndex]['phone'];\n      } else {\n        this.userPhone = '';\n      }\n      if (this.profileData[currentIndex]['email']) {\n        this.userEmail = this.profileData[currentIndex]['email'];\n      }\n      this.userData = {\n        name: this.userFullname,\n        initial: this.userInitial,\n        email: this.userEmail,\n        phone: this.userPhone\n      };\n      this.userProfileSubject.next(this.profileData);\n      const currentProfile = this.profileData[currentIndex];\n      this.currentProfileSubject.next(currentProfile);\n      this.currentOrganizationId = currentProfile.organization_id;\n      this.userDataSubject.next(this.userData);\n      return this.userData;\n    });\n  }\n\n  getProfileCollection(profiles) {\n    const profileModels: ProfileModel[] = [];\n    profiles.forEach(profile => {\n      profileModels.push(new ProfileModel(profile));\n    });\n    const profileCollection = new ProfileCollection(profileModels);\n    return profileCollection;\n  }\n\n  switchProfile(profile_id) {\n    this.profileLoadingSubject.next(true);\n    return this.http.post(this.tokenConfig.rAccount_backend_url + '/profiles/' + profile_id + '/switch', null).toPromise().then(async (res: any) => {\n      this.vTokenStateService.setTokens(res.tokens);\n      this.profileLoadingSubject.next(false);\n      return Promise.resolve(res);\n    });\n  }\n\n  resendEmailVerification() {\n    this.http.post(this.tokenConfig.rSecure_backend_url + '/user/email_verification', null).toPromise().then(() => {\n      this.snackbar.open('Verification email sent');\n    });\n  }\n\n  getNameValidity(name) {\n    return this.http.get(this.tokenConfig.rAccount_backend_url + '/organizations/is_valid?name=' + name, this.getOptions())\n      .toPromise()\n      .then(res => {\n        return Promise.resolve(res);\n      });\n  }\n\n  createOrganization(body) {\n    return this.http.post(this.tokenConfig.rAccount_backend_url + '/organizations', body, this.getOptions())\n      .toPromise()\n      .then(res => {\n        return Promise.resolve(res);\n      });\n  }\n\n  private getOptions(): any {\n    if (isPlatformServer(this.platform)) {\n      return;\n    }\n    const vTokenCookie = this.vTokenStateService.getOtherCookieObject('rAccount_Verdocs');\n    const authValue = 'Bearer ' + vTokenCookie['accessToken'];\n    const headers = new HttpHeaders({\n      'Cache-Control': 'no-cache',\n      'Pragma': 'no-cache',\n      'Expires': 'Sat, 01 Jan 2000 00:00:00 GMT',\n      'If-Modified-Since': '0',\n      'Content-Type': 'application/json',\n      'Authorization': authValue,\n      'Accept': 'application/json'\n    });\n    return { headers };\n  }\n\n  // End of Account Services\n\n  getRoleColor(name, index?) {\n    if (index) {\n      return this.getRGBA(index);\n    } else if (this.template && this.template.roles && this.template.roles.length > 0) {\n      index = findIndex(this.template.roles, { name: name });\n      if (index >= 0) {\n        return this.template.roles[index].rgba ? this.template.roles[index].rgba : this.getRGBA(index);\n      } else {\n        return this.nameToRGBA(name);\n      }\n    } else {\n      return this.nameToRGBA(name);\n    }\n  }\n\n  getRGB(rgba) {\n    const rgbNumbers = rgba.replace('rgba(', '').replace(')', '').split(',');\n    const rgbObject = {\n      red: rgbNumbers[0],\n      green: rgbNumbers[1],\n      blue: rgbNumbers[2],\n      alpha: rgbNumbers[3]\n    };\n    const alpha = 1 - rgbObject.alpha;\n    const red = Math.round((rgbObject.alpha * (rgbObject.red / 255) + alpha) * 255);\n    const green = Math.round((rgbObject.alpha * (rgbObject.green / 255) + alpha) * 255);\n    const blue = Math.round((rgbObject.alpha * (rgbObject.blue / 255) + alpha) * 255);\n    return ('#' + this.rgbToHex(red) + this.rgbToHex(green) + this.rgbToHex(blue));\n  }\n\n  rgbToHex(rgb: number) {\n    const hex = rgb.toString(16);\n    if (hex.length < 2) {\n      return '0' + hex;\n    }\n    return hex;\n  }\n\n  getRGBA(index) {\n    switch (index % 10) {\n      case 0:\n        return index === 0 ? 'rgba(255, 193, 7, 0.4)' : 'rgba(134, 134, 134, 0.3)'; //#FFE69C\n      case 1:\n        return 'rgba(156, 39, 176, .4)'; //'#E3C3E9'\n      case 2:\n        return 'rgba(33, 150, 243, .4)'; //'#C1E1FB'\n      case 3:\n        return 'rgba(220, 231, 117, 0.3)';\n      case 4:\n        return 'rgba(121, 134, 203, 0.3)';\n      case 5:\n        return 'rgba(77, 182, 172, 0.3)';\n      case 6:\n        return 'rgba(255, 202, 165, 0.3)';\n      case 7:\n        return 'rgba(2, 247, 190, 0.3)';\n      case 8:\n        return 'rgba(255, 138, 101, 0.3)';\n      case 9:\n        return 'rgba(82, 255, 79, 0.3)';\n      default:\n        return 'rgba(229, 115, 155, 0.3)';\n    }\n  }\n\n  nameToRGBA(str) {\n    if (!!str) {\n      const validNum = parseInt(str.slice(-1), 10);\n      if (!isNaN(validNum)) {\n        str += (validNum * 99).toString();\n      }\n      let hash = 0;\n      for (let i = 0; i < str.length; i++) {\n        hash = str.charCodeAt(i) + ((hash << 5) - hash);\n      }\n      hash = Math.round(hash / 1.3);\n      const c = (hash & 0x00FFFF08)\n        .toString(16)\n        .toUpperCase();\n      const hex = '#' + '00000'.substring(0, 6 - c.length) + c;\n      const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      const color = {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      };\n      return `rgba(${color.r}, ${color.g}, ${color.b}, 0.2)`;\n    }\n  }\n}\n","import { Component, Input, OnChanges } from '@angular/core';\nimport { VerdocsTokenObjectService } from '@verdocs/tokens';\n\nimport { VerdocsHeaderService } from '../../services/header.service';\nimport { ITemplate, TemplateSenderTypes } from '../../models/verdocs.model';\n\n@Component({\n  selector: 'app-recipient-editor',\n  templateUrl: './recipients-editor.component.html',\n  styleUrls: ['./recipients-editor.component.scss']\n})\nexport class RecipientEditorComponent implements OnChanges{\n  public roles = [];\n  public sender = 'creator';\n  public sender_name = '';\n\n  @Input() template: ITemplate;\n\n  constructor(\n    private verdocsHeaderService: VerdocsHeaderService,\n    private vTokenObjectService: VerdocsTokenObjectService\n  ) {}\n\n  ngOnChanges() {\n    this.prepareSender();\n    this.prepareExistingRoles();\n  }\n\n  async prepareSender() {\n    this.sender = this.template.sender || 'creator';\n    await this.updateSenderName();\n  }\n\n  async updateSenderName() {\n    const profile = this.vTokenObjectService.getProfile();\n    const ownerInfo = await this.verdocsHeaderService.getTemplateOwnerInfo(this.template.id);\n    switch (this.sender) {\n      case TemplateSenderTypes.ORGANIZATION_MEMBER:\n        this.sender_name = 'Anyone at ' + (profile ? profile.organization.name : 'organization');\n        break;\n      case TemplateSenderTypes.EVERYONE:\n        this.sender_name = 'Anyone';\n        break;\n      case TemplateSenderTypes.EVERYONE_AS_CREATOR:\n      case TemplateSenderTypes.CREATOR:\n      case TemplateSenderTypes.ORGANIZATION_MEMBER_AS_CREATOR:\n        if (profile && this.template.profile_id === profile.id) {\n          this.sender_name = profile.first_name + ' ' + profile.last_name + ' (me)';\n        } else {\n          this.sender_name = ownerInfo.name + ' (creator)';\n        }\n        break;\n    }\n  }\n\n  prepareExistingRoles(recipients?) {\n    let roles = []\n    if (recipients && recipients.length > 0) {\n      roles = recipients;\n    } else {\n      roles = this.template.roles.sort((a, b) => {\n        return a.sequence - b.sequence;\n      }).slice();\n    }\n\n    roles = this.setStyles(roles);\n    this.roles = [];\n    for (let roleIndex = 0; roleIndex < roles.length; roleIndex++) {\n      if (roles[roleIndex]) {\n        const sequenceIndex = roles[roleIndex].sequence - 1;\n        if (!roles[roleIndex]['status']) {\n          roles[roleIndex]['status'] = null;\n        }\n        if (!roles[roleIndex]['old_name']) {\n          roles[roleIndex]['old_name'] = roles[roleIndex].name;\n        }\n        if (this.roles[sequenceIndex] === undefined) {\n          this.roles[sequenceIndex] = [roles[roleIndex]];\n        } else {\n          this.roles[sequenceIndex].push(roles[roleIndex]);\n        }\n      }\n    }\n    if (this.roles && this.roles.length === 0 && !this.roles[0]) {\n      this.roles = []\n      this.roles[0] = []\n    }\n  }\n\n  setStyles(roles) {\n    roles.forEach((role, index) => {\n      if (role) {\n        if (role.full_name && role.email) {\n          role['style'] = {\n            'border': '1px solid ' + this.verdocsHeaderService.getRGBA(index),\n            'background-color': 'transparent'\n          }\n        } else {\n          role['style'] = {\n            'background': this.verdocsHeaderService.getRGBA(index),\n            'border': '1px solid getRGBA(index)'\n          }\n        }\n      }\n    });\n    return roles;\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { VerdocsHeaderService } from '../../services/header.service';\nimport { ITemplate } from '../../models/verdocs.model';\n\n@Component({\n  selector: 'app-template-source',\n  templateUrl: './source-file.component.html',\n  styleUrls: ['./source-file.component.scss']\n})\n\nexport class TemplateSourceComponent implements OnChanges{\n  \n  @Input() template: ITemplate;\n\n  constructor(\n    private templatesService: VerdocsHeaderService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['template']) {\n\n    }\n  }\n\n  downloadTemplateDocument() {\n    this.templatesService.downloadTemplateDocument(this.template);\n  }\n\n}\n","import { Component, Input, OnInit, OnChanges, OnDestroy } from '@angular/core';\n\nimport { VerdocsHeaderService } from '../../services/header.service';\nimport { TemplatesGuardService } from '../../services/templates.guard';\nimport { ITemplate, TemplateActions } from '../../models/verdocs.model';\n\n@Component({\n  selector: 'app-preview-visibility',\n  templateUrl: 'visibility-editor.component.html',\n  styleUrls: ['./visibility-editor.component.scss']\n})\nexport class VisibilityEditorComponent implements OnInit, OnChanges, OnDestroy {\n  public template_visibility;\n  public updateVisibility = false;\n  public isSaving = false;\n\n  @Input() visibility;\n  @Input() isEditMode = false;\n  @Input() template;\n\n  private _canShareWithOrg = null;\n  private _canMakeItPrivate = null;\n  private _canShareWithPublic = null;\n\n  constructor(\n    private templateGuard: TemplatesGuardService,\n    private verdocsHeaderService: VerdocsHeaderService\n  ) { }\n\n  ngOnInit() {\n    this.template_visibility = this.getTemplateVisibility();\n  }\n  ngOnChanges() {\n    this.template_visibility = this.getTemplateVisibility();\n  }\n  ngOnDestroy() {\n    this.template_visibility = undefined;\n  }\n\n  getTemplateVisibility() {\n    if (this.visibility) {\n      if (this.visibility.is_personal) {\n        if (this.visibility.is_public) {\n          return 'personal & public'\n        } else {\n          return 'personal';\n        }\n      } else {\n        if (this.visibility.is_public) {\n          return 'public & org';\n        } else {\n          return 'org';\n        }\n      }\n    }\n    return undefined;\n  }\n\n  setUpdateVisibility() {\n    const original_visibility = this.getTemplateVisibility();\n    this.updateVisibility = original_visibility !== this.template_visibility;\n  }\n\n  async saveChanges() {\n    this.isSaving = true;\n    const body = {};\n      if (this.updateVisibility && this.template) {\n        switch (this.template_visibility) {\n          case 'personal':\n            body['is_personal'] = true;\n            body['is_public'] = false;\n            break;\n          case 'org':\n            body['is_personal'] = false;\n            body['is_public'] = false;\n            break;\n          case 'public & org':\n            body['is_personal'] = false;\n            body['is_public'] = true;\n            break;\n          case 'personal & public':\n            body['is_personal'] = true;\n            body['is_public'] = true;\n          default:\n            break;\n        }\n      }\n      const template: ITemplate = await this.verdocsHeaderService.updateTemplate(this.template.id, body);\n      this.updateVisibility = false;\n      this.isSaving = false;\n  }\n\n  get canShareWithPublic() {\n    if (this.template && typeof (this._canShareWithPublic) !== 'boolean') {\n      this._canShareWithPublic = (this.templateGuard.canPerformAction(TemplateActions.CHANGE_VISIBILITY_PUBLIC, this.template))['canPerform'];\n    }\n    return this._canShareWithPublic\n  }\n\n  get canChangeVisibility() {\n    return this.canMakeItPrivate || this.canShareWithOrg || this.canShareWithPublic\n  }\n\n  get canShareWithOrg() {\n    if (this.template && typeof (this._canShareWithOrg) !== 'boolean') {\n      this._canShareWithOrg = (this.templateGuard.canPerformAction(TemplateActions.CHANGE_VISIBILITY_ORG, this.template))['canPerform'];\n    }\n    return this._canShareWithOrg\n  }\n\n  get canMakeItPrivate() {\n    if (this.template && typeof (this._canMakeItPrivate) !== 'boolean') {\n      this._canMakeItPrivate =\n        (this.templateGuard.canPerformAction(TemplateActions.CHANGE_VISIBILITY_PERSONAL, this.template))['canPerform'];\n    }\n    return this._canMakeItPrivate\n  }\n\n}\n","import {\n  Component,\n  OnInit,\n  OnDestroy,\n  AfterViewChecked,\n  ViewChild,\n  ElementRef,\n  Compiler,\n  Input,\n  ChangeDetectorRef,\n  Injector,\n  Inject,\n  PLATFORM_ID\n} from '@angular/core';\nimport { Router, NavigationEnd, NavigationStart } from '@angular/router';\nimport { isPlatformBrowser } from '@angular/common';\nimport { HttpResponse } from '@angular/common/http';\nimport { VerdocsStateService, VerdocsAuthService, VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { findIndex } from 'lodash';\n\nimport { VerdocsHeaderService } from './services/header.service';\nimport { TemplatesGuardService } from './services/templates.guard';\nimport { ITemplate, Envelope, TemplateActions } from './models/verdocs.model';\nimport { connectionConfig, connectionConfigToken } from './header.module';\n\n@Component({\n  selector: 'verdocs-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent implements OnInit, AfterViewChecked, OnDestroy {\n  public pageLoading = true;\n  public connections: connectionConfig;\n  public title: string;\n  public isAuthenticated = false;\n  public headerTitle = 'Envelope';\n  public mode = '';\n  public searchActive = false;\n  public templateName = '';\n  public newTemplateName = null;\n  public saveStatus = '';\n  public notifications: Notification[] = [];\n  public loading = false;\n  public myAccountUrl: string;\n  public termsUrl: string;\n  public privacyUrl: string;\n  public newProfile: any;\n  public organization_id: string;\n  public emailVerified: boolean;\n  public organizationImgSrc: string;\n  public csvBlob: Blob = null;\n  public templateDetailsExpanded = true;\n  public template: ITemplate = null;\n  public isSearching = false;\n  public envelopeResult: Envelope[];\n  public templateResult: ITemplate[];\n  public currentProfile: any = null;\n  public inputFocused: boolean = false;\n  public manageLink: string;\n  public templatesLink: string;\n  public rSecureFrontEnd: string;\n  public rFormFrontEnd: string;\n  public isLiveView = false;\n  public verdocs_url: string;\n  public image_url: string;\n  public isAtOriginalOrigin: boolean;\n  public app_version: string = '';\n  public currentAt: string = ''\n\n  @Input() currentOrigin: 'rForm' | 'rAccount' | 'rSecure';\n\n  @ViewChild('headerContainer', { static: false }) header: ElementRef;\n  @ViewChild('search', { static: false }) searchBar: ElementRef;\n  @ViewChild('templateTitle', { static: false }) templateTitleInput: ElementRef;\n  @ViewChild('previewInput', { static: false }) previewInput: ElementRef;\n  @ViewChild('generalInput', { static: false }) generalInput: ElementRef;\n\n  private sidenavOpen: boolean;\n  private _canStar: boolean = null;\n  private _canCreate: boolean = null;\n  private _canEdit: boolean = null;\n  private _userStarred: boolean = null;\n  private metaDataSubscription = new Subscription();\n  private titleSubscription = new Subscription();\n  private titleInputSubscription = new Subscription();\n  private titleKeyDownSubscription = new Subscription();\n  private templateNameSubscription = new Subscription();\n  private templateSubscription = new Subscription();\n  private saveStatusSubscription = new Subscription();\n  private profileLoadingSubscription = new Subscription();\n  private userDataSubscription = new Subscription();\n  private modeSubscription = new Subscription();\n  private previewInputSubscription = new Subscription();\n  private generalInputSubscription = new Subscription();\n  private navigationEventSubscription = new Subscription();\n  private csvBlobSubscription = new Subscription();\n  private inputTimer: NodeJS.Timeout;\n  private origin: string;\n\n  constructor(\n    private verdocsHeaderService: VerdocsHeaderService,\n    private vTokenStateService: VerdocsStateService,\n    private vTokenObjectService: VerdocsTokenObjectService,\n    private vAuthService: VerdocsAuthService,\n    private templateGuard: TemplatesGuardService,\n    private router: Router,\n    private cdr: ChangeDetectorRef,\n    private compiler: Compiler,\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n    this.connections = this.injector.get(connectionConfigToken);\n    this.myAccountUrl = this.connections.rAccount_frontend_url + '/rAccount';\n    this.termsUrl = this.connections.rSecure_frontend_url + '/terms';\n    this.privacyUrl = this.connections.rSecure_frontend_url + '/privacy';\n    this.organizationImgSrc = `${this.connections.rAccount_frontend_url}/assets/organization/select-profile.png`;\n    this.verdocs_url = this.connections.rForm_frontend_url;\n    this.manageLink = `${this.verdocs_url}/manage`;\n    this.templatesLink = `${this.verdocs_url}/templates`;\n    this.rSecureFrontEnd = this.connections.rSecure_frontend_url;\n    this.rFormFrontEnd = this.connections.rForm_frontend_url;\n    this.currentOrigin = this.connections.origin;\n    this.currentAt = this.currentOrigin;\n  }\n\n  ngOnInit() {\n    this.templateSubscription = this.verdocsHeaderService.templateSubject.subscribe((template: ITemplate) => {\n      this.template = template;\n      this.updateStar();\n    });\n    if (isPlatformBrowser(this.platform)) {\n      if (window && window.location || this.connections.app_version) {\n        this.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n      }\n      if (this.origin && this.origin.includes('/stage.') || this.origin.includes('/localhost')) {\n        this.app_version = this.connections.app_version;\n      } else {\n        this.app_version = '';\n      }\n    }\n    this.isAuthenticated = this.vAuthService.isAuthenticated();\n    this.emailVerified = this.vTokenStateService.getEmailVerification();\n    this.navigationEventSubscription = this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.isAuthenticated = this.vAuthService.isAuthenticated();\n        if (event && event.url && ((event.url.includes('document/') && !event.url.includes('envelopes/document')) || event.url.includes('view/live/'))) {\n          this.isAtOriginalOrigin = this.verdocsHeaderService.getAtOrigin(this.currentOrigin);\n          this.currentAt = this.currentOrigin;\n          this.mode = 'preview';\n          if (event.url.includes('view/live/')) {\n            this.isLiveView = true;\n            this.templateDetailsExpanded = false;\n          } else {\n            this.isLiveView = false;\n          }\n        } else {\n          this.mode = 'not-preview';\n          this.isLiveView = false;\n        }\n        if (this.mode !== 'preview') {\n          this.image_url = `${this.connections.rForm_frontend_url}/assets/white-logo.svg`;\n        } else {\n          this.image_url = `${this.connections.rForm_frontend_url}/assets/break-black-logo.svg`;\n        }\n        this.getProfile();\n        this.updateStar();\n        this.checkCanStar();\n        this._canEdit = undefined;\n        this._canCreate = undefined;\n        this.pageLoading = false;\n      } else if (event instanceof NavigationStart) {\n        this.pageLoading = true;\n      }\n    });\n    this.titleSubscription = this.verdocsHeaderService.titleSubject.subscribe(title => {\n      if (title) {\n        this.title = title;\n      } else {\n        this.title = null;\n      }\n    });\n    this.csvBlobSubscription = this.verdocsHeaderService.csvBlobSubject.subscribe(blob => {\n      if (blob) {\n        this.csvBlob = blob;\n      } else {\n        this.csvBlob = null;\n      }\n    });\n    this.saveStatusSubscription = this.verdocsHeaderService.saveStatusSubject.subscribe(status => {\n      this.saveStatus = status;\n    });\n    this.profileLoadingSubscription = this.verdocsHeaderService.profileLoadingSubject.subscribe(status => {\n      this.loading = status;\n    });\n  }\n\n  ngAfterViewChecked() {\n    this.cdr.detectChanges();\n  }\n\n  ngOnDestroy() {\n    this.metaDataSubscription.unsubscribe();\n    this.titleSubscription.unsubscribe();\n    this.titleInputSubscription.unsubscribe();\n    this.titleKeyDownSubscription.unsubscribe();\n    this.templateNameSubscription.unsubscribe();\n    this.templateSubscription.unsubscribe();\n    this.saveStatusSubscription.unsubscribe();\n    this.profileLoadingSubscription.unsubscribe();\n    this.userDataSubscription.unsubscribe();\n    this.modeSubscription.unsubscribe();\n    if (!!this.generalInputSubscription) {\n      this.generalInputSubscription.unsubscribe();\n    }\n    if (!!this.previewInputSubscription) {\n      this.previewInputSubscription.unsubscribe();\n    }\n    this.navigationEventSubscription.unsubscribe();\n    this.csvBlobSubscription.unsubscribe();\n    this.compiler.clearCache();\n  }\n\n  async init() {\n    if (this.vAuthService.isAuthenticated() && this.mode !== 'view') {\n      await this.verdocsHeaderService.initNotificationService();\n    }\n  }\n\n  get home_url() {\n    return this.vTokenStateService.getIDToken() ? this.connections.rForm_frontend_url + '/dashboard' : this.connections.rForm_frontend_url;\n  }\n\n  previewInputEvent(event) {\n    clearTimeout(this.inputTimer);\n    this.inputTimer = setTimeout(() => {\n      this.getSearchResults(this.previewInput.nativeElement.value);\n      clearTimeout(this.inputTimer);\n    }, 500);\n  }\n\n  generalInputEvent(event) {\n    clearTimeout(this.inputTimer);\n    this.inputTimer = setTimeout(() => {\n      this.getSearchResults(this.generalInput.nativeElement.value);\n      clearTimeout(this.inputTimer);\n    }, 500);\n  }\n\n  prepareSearchInput() {\n    if (this.mode === 'preview') {\n      this.listenForPreviewInput();\n    } else {\n      this.listenForGeneralInput();\n    }\n  }\n\n  listenForPreviewInput() {\n    if (this.generalInputSubscription) {\n      this.generalInputSubscription.unsubscribe();\n    }\n    if (this.previewInput) {\n      if (!this.previewInputSubscription) {\n        this.previewInputSubscription = fromEvent(this.previewInput.nativeElement, 'keyup')\n          .pipe(\n            debounceTime(500),\n            distinctUntilChanged()\n          ).subscribe((event) => {\n            const keyName = event['code'] || event['key'];\n            if (keyName) {\n              if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {\n                this.getSearchResults(this.previewInput.nativeElement.value);\n              }\n            } else {\n              this.getSearchResults(this.previewInput.nativeElement.value);\n            }\n          });\n      }\n    }\n  }\n\n  listenForGeneralInput() {\n    if (this.previewInputSubscription) {\n      this.previewInputSubscription.unsubscribe();\n    }\n    if (this.generalInput) {\n      if (!this.generalInputSubscription) {\n        this.generalInputSubscription = fromEvent(this.generalInput.nativeElement, 'keyup')\n          .pipe(\n            debounceTime(500),\n            distinctUntilChanged()\n          ).subscribe((event) => {\n            const keyName = event['code'] || event['key'];\n            if (keyName) {\n              if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {\n                this.getSearchResults(this.generalInput.nativeElement.value);\n              }\n            } else {\n              this.getSearchResults(this.generalInput.nativeElement.value);\n            }\n          });\n      }\n    }\n  }\n\n  get canStar() {\n    return this._canStar;\n  }\n\n  get userStarred() {\n    return this._userStarred;\n  }\n\n  get canEdit() {\n    if (typeof (this._canEdit) !== 'boolean' && this.templateGuard && this.isAuthenticated && this.template) {\n      const response = this.templateGuard.canPerformAction(TemplateActions.WRITE, this.template);\n      this._canEdit = response['canPerform']\n    }\n    if (!this.isAuthenticated && this.template) {\n      this._canEdit = false;\n    }\n    return this._canEdit\n  }\n\n  get canCreate() {\n    if (this.isAuthenticated) {\n      if (typeof (this._canCreate) !== 'boolean') {\n        const permissions = this.vTokenObjectService.getVerdocsPermissions();\n        this._canCreate = false;\n        if (permissions && permissions.length > 0) {\n          permissions.forEach(permission => {\n            if (permission.includes('creator:create')) {\n              return this._canCreate = true;\n            }\n          });\n        }\n      }\n      return this._canCreate;\n    } else {\n      return false;\n    }\n  }\n\n  getProfile() {\n    if (this.isAuthenticated) {\n      this.currentProfile = this.vTokenObjectService.getProfile();\n    }\n  }\n\n  selected(event) {\n    if ((this.generalInput && this.generalInput.nativeElement.value) || (this.previewInput && this.previewInput.nativeElement.value)) {\n      event.option._element.nativeElement.click();\n    }\n  }\n\n  checkCanStar() {\n    this._canStar = this.isAuthenticated;\n  }\n\n  getSearchResults(search_string: string) {\n    this.isSearching = true;\n    if (this.isAuthenticated) {\n      this.verdocsHeaderService.searchEnvelopes({ envelope_name: search_string, row: 3 }).subscribe(result => {\n        if (result instanceof HttpResponse) {\n          this.envelopeResult = result.body['result'] as Envelope[];\n          this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe(result => {\n            if (result instanceof HttpResponse) {\n              this.templateResult = result.body['result'] as ITemplate[];\n              this.isSearching = false;\n            }\n          });\n        }\n      });\n    } else {\n      this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe(result => {\n        if (result instanceof HttpResponse) {\n          this.templateResult = result.body['result'] as ITemplate[];\n          this.isSearching = false;\n        }\n      });\n    }\n  }\n\n  recipientTracking(index, item) {\n    return index;\n  }\n\n  toggleMenu() {\n    this.verdocsHeaderService.toggleSidenav(!this.sidenavOpen);\n  }\n\n  setInputFocused(value: boolean) {\n    this.inputFocused = value;\n  }\n\n  hasProp(obj: any, key: string) {\n    return obj.hasOwnProperty(key);\n  }\n\n  roleColor(name) {\n    return this.verdocsHeaderService.getRoleColor(name);\n  }\n\n  toggleSidenav() {\n    this.verdocsHeaderService.toggleBuilderSideNav();\n  }\n\n  toggleTemplateDetails() {\n    this.templateDetailsExpanded = !this.templateDetailsExpanded;\n    if (this.templateDetailsExpanded) {\n      this.verdocsHeaderService.templateDetailToggleSubject.next(true);\n    }\n  }\n\n  reset() {\n    this.templateName = 'Unititled';\n    // this.verdocsHeaderService.templateNameSubject.next('Untitled');\n  }\n\n  getRoleNames(roles) {\n    if (roles && roles.length > 0) {\n      const last_index = roles.length - 1;\n      let names_string = '';\n      for (let x = 0; x < roles.length; x++) {\n        if (x < last_index) {\n          names_string += roles[x]['full_name'] + ', ' as string;\n        } else {\n          names_string += roles[x]['full_name'] as string;\n        }\n      }\n      return names_string;\n    }\n  }\n\n  getTemplateStats(template: ITemplate) {\n    return `${this.getTemplatePages(template)}  ${this.getTemplateSequence(template)}  ${this.getTemplateRecipients(template)}`;\n  }\n\n  getTemplatePages(template: ITemplate) {\n    if (template && template.pages) {\n      return `${template.pages.length >= 2 ? template.pages.length + ' Pages' : '1 Page'}`;\n    } else {\n      return '0 Page';\n    }\n  }\n\n  getTemplateSequence(template: ITemplate) {\n    if (template && template.roles) {\n      let hasPreparer = false;\n      let maxSequence = -1;\n      for (let x = 0; x < template.roles.length; x++) {\n        if (template.roles[x].sequence > maxSequence) {\n          maxSequence = template.roles[x].sequence;\n        }\n        if (template.roles[x].sequence === 0) {\n          hasPreparer = true;\n        }\n      }\n\n      const totalSequence = hasPreparer ? maxSequence + 1 : maxSequence;\n      return totalSequence > 1 ? totalSequence + ' Sequences' : '1 Sequence';\n    } else {\n      return '0 Sequence';\n    }\n  }\n\n  getTemplateRecipients(template: ITemplate) {\n    if (template && template.roles) {\n      const totalRecipients = template.roles.length;\n      return totalRecipients > 1 ? totalRecipients + ' Recipients' : '1 Recipient';\n    } else {\n      return '0 Recipient'\n    }\n  }\n\n  goToEnvelope(envelope_id: string) {\n    if (this.currentOrigin === 'rForm' && this.isAtOriginalOrigin) {\n      this.router.navigate([`/envelope/${envelope_id}`]);\n    } else {\n      location.href = `${this.connections.rForm_frontend_url}/envelope/${envelope_id}`;\n    }\n    this.clearSearchInputs();\n  }\n\n  goToTemplate(template: ITemplate) {\n    this.verdocsHeaderService.openTemplate(template);\n    this.clearSearchInputs();\n  }\n\n  goToTemplates(keyword) {\n    this.verdocsHeaderService.openTemplates(keyword);\n  }\n\n  searchEnvelopes() {\n    const keyword = this.getSearchKeyword();\n    if (keyword !== '') {\n      this.router.navigate([`/manage`], { queryParams: { envelope_name: keyword } });\n      this.clearSearchInputs();\n    }\n  }\n\n  searchRecipients() {\n    const keyword = this.getSearchKeyword();\n    if (keyword !== '') {\n      this.router.navigate([`/manage`], { queryParams: { recipient_name: keyword } });\n      this.clearSearchInputs();\n    }\n  }\n\n  searchTemplates() {\n    const keyword = this.getSearchKeyword();\n    if (keyword !== '') {\n      this.router.navigate([`/templates`], { queryParams: { name: keyword } });\n      this.clearSearchInputs();\n    }\n  }\n\n  getSearchKeyword() {\n    if (this.previewInput && this.previewInput.nativeElement.value) {\n      return this.previewInput.nativeElement.value;\n    } else if (this.generalInput && this.generalInput.nativeElement.value) {\n      return this.generalInput.nativeElement.value;\n    }\n    return '';\n  }\n\n  clearSearchInputs() {\n    if (this.previewInput) {\n      this.previewInput.nativeElement.value = '';\n    }\n    if (this.generalInput) {\n      this.generalInput.nativeElement.value = '';\n    }\n    this.envelopeResult = [];\n    this.templateResult = [];\n  }\n\n  updateStar() {\n    if (this.template && this.currentProfile && this.template.template_stars) {\n      const existingStarIndex = findIndex(this.template.template_stars, { profile_id: this.currentProfile.id, template_id: this.template.id });\n      this._userStarred = existingStarIndex > -1;\n    } else {\n      return false;\n    }\n  }\n\n  starTemplate() {\n    if (this.canStar) {\n      this.verdocsHeaderService.starTemplate(this.template.id).subscribe(res => {\n        this.template.template_stars.push(res);\n        this.updateStar();\n      });\n    } else if (!this.isAuthenticated) {\n      this.createTemplate();\n    }\n  }\n\n  unstarTemplate() {\n    if (this.canStar) {\n      this.verdocsHeaderService.unstarTemplate(this.template.id).subscribe(res => {\n        const removedStarIndex = findIndex(this.template.template_stars, { profile_id: this.currentProfile.id, template_id: this.template.id });\n        if (removedStarIndex > -1) {\n          this.template.template_stars.splice(removedStarIndex, 1);\n          this.updateStar();\n        }\n      });\n    } else if (!this.isAuthenticated) {\n      this.createTemplate();\n    }\n  }\n\n  editTemplate() {\n    if (this.canEdit) {\n      this.router.navigate([`/builder/${this.template.id}/fields`]);\n    } else if (!this.isAuthenticated) {\n      this.createTemplate();\n    }\n  }\n\n  createTemplate() {\n    this.verdocsHeaderService.toggleCreate();\n  }\n\n}\n","import { Component, OnInit, OnDestroy, Input, Injector, AfterContentChecked, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Router } from '@angular/router';\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { NotificationService, Notification } from '@verdocs/notifications';\nimport { ProfileCollection, OrganizationDialogService, Override as ProfileOverride } from '@verdocs/profiles';\nimport { VerdocsStateService, VerdocsAuthGuardService, VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { Subscription } from 'rxjs';\nimport { findIndex, includes } from 'lodash';\n\nimport { connectionConfig, connectionConfigToken } from '../header.module';\nimport { VerdocsHeaderService } from '../services/header.service';\n\n@Component({\n  selector: 'verdocs-header-tools',\n  templateUrl: './header-tools.component.html',\n  styleUrls: ['./header-tools.component.scss']\n})\nexport class HeaderToolsComponent implements OnInit, AfterContentChecked, OnDestroy {\n  public tokenConfig: connectionConfig;\n  public apps = [];\n  public emailVerified: boolean;\n  public notifications: Notification[] = [];\n  public profiles: ProfileCollection;\n  public newProfile: any;\n  public organization_id: string;\n  public myAccountUrl: string;\n  public rSecureUrl: string;\n  public rFormUrl: string;\n  public termsUrl: string;\n  public privacyUrl: string;\n  public loginUrl: string;\n  public signupUrl: string;\n  public organizationImgSrc: string;\n  public profileLoading = false;\n  public hasProfile = false;\n  public origin: 'rForm' | 'rSecure' | 'rAccount' | null;\n  public isAtOriginalOrigin: boolean;\n  public verdocs_logo_url: string;\n  @Input() public profileOverride: ProfileOverride = {\n    top:56,\n    right: 20\n  };\n  @Input() public sidenav = false;\n  @Input() public type = 'default';\n  @Input() public mode: string;\n  private notificationsSubscription = new Subscription();\n  private profileLoadingSubscription = new Subscription();\n\n  constructor(\n    private verdocsStateService: VerdocsStateService,\n    private verdocsObjectService: VerdocsTokenObjectService,\n    private verdocsAuthGuardService: VerdocsAuthGuardService,\n    private organizationDialogService: OrganizationDialogService,\n    private notificationsService: NotificationService,\n    private verdocsHeaderService: VerdocsHeaderService,\n    private snackbar: MatSnackBar,\n    private injector: Injector,\n    private router: Router,\n    @Inject(PLATFORM_ID) private platform\n  ) { \n    this.tokenConfig = this.injector.get(connectionConfigToken);\n    this.myAccountUrl = this.tokenConfig.rAccount_frontend_url;\n    this.rSecureUrl = this.tokenConfig.rSecure_frontend_url;\n    this.rFormUrl = this.tokenConfig.rForm_frontend_url;\n    this.termsUrl = this.tokenConfig.rSecure_frontend_url + '/terms';\n    this.privacyUrl = this.tokenConfig.rSecure_frontend_url + '/privacy';\n    this.loginUrl = this.tokenConfig.rSecure_frontend_url + '/login';\n    this.signupUrl = this.tokenConfig.rSecure_frontend_url + '/signup';\n    this.organizationImgSrc = `${this.tokenConfig.rAccount_frontend_url}/assets/organization/select-profile.png`;\n    this.verdocs_logo_url = `${this.rFormUrl}/assets/blue-logo.svg`;\n    this.origin = this.tokenConfig.origin;\n    this.isAtOriginalOrigin = this.verdocsHeaderService.getAtOrigin(this.origin);\n  }\n\n  ngOnInit() {\n    this.checkEmailVerification();\n    this.hasProfile = this.verdocsObjectService.getProfile();\n    this.verdocsHeaderService.userProfileSubject.subscribe(profiles => {\n      this.profiles = this.verdocsHeaderService.getProfileCollection(profiles);\n      this.verdocsHeaderService.profilesSubject.next(profiles);\n      const index = findIndex(profiles, { organization_id: this.organization_id });\n      if (index >= 0) {\n        this.newProfile = profiles[index];\n        this.organizationDialogService.setNewProfile(this.newProfile);\n      }\n    });\n    this.notificationsSubscription = this.notificationsService.Notificatations().subscribe(notifications => {\n      this.notifications = notifications;\n    });\n    this.profileLoadingSubscription = this.verdocsHeaderService.profileLoadingSubject.subscribe(status => {\n      this.profileLoading = status;\n    });\n\n    if (!this.profiles && this.hasProfile) {\n      this.verdocsHeaderService.getProfiles();\n    }\n  }\n\n  ngAfterContentChecked() {\n    if (isPlatformBrowser(this.platform)) {\n      if (typeof window !== 'undefined') {\n        if (window.innerWidth > 600) {\n          this.profileOverride.top = 60;\n        } else {\n          this.profileOverride.top = 56;\n        }\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.notificationsSubscription.unsubscribe();\n    this.profileLoadingSubscription.unsubscribe();\n  }\n\n  private checkEmailVerification(): void {\n    this.emailVerified = this.verdocsStateService.getEmailVerification();\n    this.organizationDialogService.setEmailVerified(this.emailVerified);\n  }\n\n  public get admin_url() {\n    if (this.hasAccessToAdmin()) {\n      return `${this.tokenConfig.rAccount_frontend_url}/admin`;\n    }\n    return undefined;\n  }\n\n  removeNotification(notification: Notification) {\n    this.notificationsService.dismissNotification(notification);\n  }\n\n  signOut() {\n    this.verdocsAuthGuardService.signOut();\n  }\n\n  signIn() {\n    if (window) {\n      window.location.href = `${this.rSecureUrl}/login?redirect_url=${this.rFormUrl + this.router.url}`;\n    }\n  }\n\n  signUp() {\n    if (window) {\n      window.location.href = `${this.rSecureUrl}/signup?redirect_url=${this.rFormUrl + this.router.url}`;\n    }\n  }\n\n  switch(profile_id: string) {\n    this.verdocsHeaderService.switchProfile(profile_id).then(() => {\n      window.location.href = `${this.tokenConfig.rForm_frontend_url}`;\n    });\n  }\n\n  switchAndGoToAdmin() {\n    if (this.newProfile) {\n      this.verdocsHeaderService.switchProfile(this.newProfile.id).then(profile => {\n        window.location.href = `${this.myAccountUrl}/admin/profile/${this.newProfile.id}`;\n      });\n    }\n  }\n\n  updateTokenStatus(sendMessage?: boolean) {\n    this.createSnackbar('Checking email verification', 'OK');\n    this.verdocsHeaderService.updateTokens(sendMessage).then(() => {\n      this.emailVerified = this.verdocsStateService.getEmailVerification();\n      this.organizationDialogService.setEmailVerified(this.emailVerified);\n    });\n  }\n\n  resendEmailVerification() {\n    this.verdocsHeaderService.resendEmailVerification();\n  }\n\n  checkNameValidity(name: string) {\n    return this.verdocsHeaderService.getNameValidity(name)\n      .then(result => {\n        this.organizationDialogService.setNameValidation(result);\n      });\n  }\n\n  createOrganization(organizationGroup) {\n    this.verdocsHeaderService.createOrganization(organizationGroup)\n      .then(async organization => {\n        this.organization_id = organization['id'];\n        await this.verdocsHeaderService.getAccountData();\n        this.createSnackbar('Organization created', null);\n      });\n  }\n\n  switchProfile() {\n    this.switch(this.newProfile.id);\n  }\n\n  checkAccess(clientName) {\n    return this.verdocsStateService.hasAccessTo(clientName + '_Realster');\n  }\n\n  jumpTo(clientName) {\n    window.location.href = this.tokenConfig[clientName + '_frontend_url'];\n  }\n\n  private hasAccessToAdmin() {\n    const roles = this.verdocsStateService.getRAccountRoles();\n    return includes(roles, 'owner') || includes(roles, 'admin');\n  }\n\n  createSnackbar(message: string, buttonTitle?: string) {\n    if (!buttonTitle) {\n      buttonTitle = null;\n    }\n    let snackbarConfig: MatSnackBarConfig\n    if (window.innerWidth >= 920) {\n      snackbarConfig = {\n        verticalPosition: 'bottom',\n        horizontalPosition: 'left',\n        duration: 5000\n      }\n    } else {\n      snackbarConfig = {\n        verticalPosition: 'top',\n        duration: 5000\n      }\n    }\n    this.snackbar.open(message, buttonTitle, snackbarConfig);\n  }\n\n  lunchElevio() {\n    window['lunchElevio']();\n  }\n\n  lunchIntercom() {\n    window['lunchIntercom']()\n  }\n}\n","import { NgModule, InjectionToken } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport {\n  NotificationsModule\n} from '@verdocs/notifications'\nimport { TokensModule } from '@verdocs/tokens';\nimport { ProfilesModule } from '@verdocs/profiles';\nimport { RecipientEditorComponent } from './template/recipients/recipients-editor.component'\nimport { TemplateSourceComponent } from './template/source-file/source-file.component'\nimport { VisibilityEditorComponent } from './template/visibility/visibility-editor.component'\nimport { HeaderComponent } from './header.component';\nimport { VerdocsHeaderService } from './services/header.service';\nimport { TemplatesGuardService } from './services/templates.guard';\nimport { HeaderToolsComponent } from './components/header-tools.component';\nimport { FourOhOneDialog } from './error-dialogs/four-oh-one.dialog';\n\nexport interface connectionConfig {\n  rForm_backend_url: string;\n  rForm_frontend_url: string;\n  rSecure_frontend_url: string;\n  rSecure_backend_url: string;\n  rAccount_frontend_url: string;\n  rAccount_backend_url: string;\n  rNotification_backend_url: string;\n  origin?: 'rForm' | 'rAccount' | 'rSecure';\n  app_version?: string;\n}\n\nexport const connectionConfigToken = new InjectionToken<connectionConfig>('connectionConfig');\n\n@NgModule({\n  declarations: [\n    HeaderComponent,\n    RecipientEditorComponent,\n    TemplateSourceComponent,\n    VisibilityEditorComponent,\n    HeaderToolsComponent,\n    FourOhOneDialog\n  ],\n  entryComponents: [\n    FourOhOneDialog\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    RouterModule,\n    ReactiveFormsModule,\n    MatSnackBarModule,\n    MatIconModule,\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatSelectModule,\n    MatDialogModule,\n    MatChipsModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatTooltipModule,\n    NotificationsModule,\n    ProfilesModule,\n    TokensModule\n  ],\n  providers: [\n    TemplatesGuardService,\n    VerdocsHeaderService\n  ],\n  exports: [\n    HeaderComponent,\n    RecipientEditorComponent,\n    TemplateSourceComponent,\n    VisibilityEditorComponent,\n    HeaderToolsComponent,\n    FourOhOneDialog\n  ]\n})\nexport class HeaderModule {\n  static initVerdocsHeader(config: connectionConfig) {\n    return {\n      ngModule: HeaderModule,\n      providers: [\n        {\n          provide: connectionConfigToken,\n          useValue: config\n        }\n      ]\n    }\n  }\n}\n"],"names":[],"mappings":"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"}