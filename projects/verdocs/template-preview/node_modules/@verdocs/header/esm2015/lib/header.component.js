/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild, ElementRef, Compiler, Input, ChangeDetectorRef, Injector, Inject, PLATFORM_ID } from '@angular/core';
import { Router, NavigationEnd, NavigationStart } from '@angular/router';
import { isPlatformBrowser } from '@angular/common';
import { HttpResponse } from '@angular/common/http';
import { VerdocsStateService, VerdocsAuthService, VerdocsTokenObjectService } from '@verdocs/tokens';
import { Subscription, fromEvent } from 'rxjs';
import { debounceTime, distinctUntilChanged } from 'rxjs/operators';
import { findIndex } from 'lodash';
import { VerdocsHeaderService } from './services/header.service';
import { TemplatesGuardService } from './services/templates.guard';
import { TemplateActions } from './models/verdocs.model';
import { connectionConfigToken } from './header.module';
export class HeaderComponent {
    /**
     * @param {?} verdocsHeaderService
     * @param {?} vTokenStateService
     * @param {?} vTokenObjectService
     * @param {?} vAuthService
     * @param {?} templateGuard
     * @param {?} router
     * @param {?} cdr
     * @param {?} compiler
     * @param {?} injector
     * @param {?} platform
     */
    constructor(verdocsHeaderService, vTokenStateService, vTokenObjectService, vAuthService, templateGuard, router, cdr, compiler, injector, platform) {
        this.verdocsHeaderService = verdocsHeaderService;
        this.vTokenStateService = vTokenStateService;
        this.vTokenObjectService = vTokenObjectService;
        this.vAuthService = vAuthService;
        this.templateGuard = templateGuard;
        this.router = router;
        this.cdr = cdr;
        this.compiler = compiler;
        this.injector = injector;
        this.platform = platform;
        this.pageLoading = true;
        this.isAuthenticated = false;
        this.headerTitle = 'Envelope';
        this.mode = '';
        this.searchActive = false;
        this.templateName = '';
        this.newTemplateName = null;
        this.saveStatus = '';
        this.notifications = [];
        this.loading = false;
        this.csvBlob = null;
        this.templateDetailsExpanded = true;
        this.template = null;
        this.isSearching = false;
        this.currentProfile = null;
        this.inputFocused = false;
        this.isLiveView = false;
        this.app_version = '';
        this.currentAt = '';
        this._canStar = null;
        this._canCreate = null;
        this._canEdit = null;
        this._userStarred = null;
        this.metaDataSubscription = new Subscription();
        this.titleSubscription = new Subscription();
        this.titleInputSubscription = new Subscription();
        this.titleKeyDownSubscription = new Subscription();
        this.templateNameSubscription = new Subscription();
        this.templateSubscription = new Subscription();
        this.saveStatusSubscription = new Subscription();
        this.profileLoadingSubscription = new Subscription();
        this.userDataSubscription = new Subscription();
        this.modeSubscription = new Subscription();
        this.previewInputSubscription = new Subscription();
        this.generalInputSubscription = new Subscription();
        this.navigationEventSubscription = new Subscription();
        this.csvBlobSubscription = new Subscription();
        this.connections = this.injector.get(connectionConfigToken);
        this.myAccountUrl = this.connections.rAccount_frontend_url + '/rAccount';
        this.termsUrl = this.connections.rSecure_frontend_url + '/terms';
        this.privacyUrl = this.connections.rSecure_frontend_url + '/privacy';
        this.organizationImgSrc = `${this.connections.rAccount_frontend_url}/assets/organization/select-profile.png`;
        this.verdocs_url = this.connections.rForm_frontend_url;
        this.manageLink = `${this.verdocs_url}/manage`;
        this.templatesLink = `${this.verdocs_url}/templates`;
        this.rSecureFrontEnd = this.connections.rSecure_frontend_url;
        this.rFormFrontEnd = this.connections.rForm_frontend_url;
        this.currentOrigin = this.connections.origin;
        this.currentAt = this.currentOrigin;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.templateSubscription = this.verdocsHeaderService.templateSubject.subscribe((/**
         * @param {?} template
         * @return {?}
         */
        (template) => {
            this.template = template;
            this.updateStar();
        }));
        if (isPlatformBrowser(this.platform)) {
            if (window && window.location || this.connections.app_version) {
                this.origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
            }
            if (this.origin && this.origin.includes('/stage.') || this.origin.includes('/localhost')) {
                this.app_version = this.connections.app_version;
            }
            else {
                this.app_version = '';
            }
        }
        this.isAuthenticated = this.vAuthService.isAuthenticated();
        this.emailVerified = this.vTokenStateService.getEmailVerification();
        this.navigationEventSubscription = this.router.events.subscribe((/**
         * @param {?} event
         * @return {?}
         */
        event => {
            if (event instanceof NavigationEnd) {
                this.isAuthenticated = this.vAuthService.isAuthenticated();
                if (event && event.url && ((event.url.includes('document/') && !event.url.includes('envelopes/document')) || event.url.includes('view/live/'))) {
                    this.isAtOriginalOrigin = this.verdocsHeaderService.getAtOrigin(this.currentOrigin);
                    this.currentAt = this.currentOrigin;
                    this.mode = 'preview';
                    if (event.url.includes('view/live/')) {
                        this.isLiveView = true;
                        this.templateDetailsExpanded = false;
                    }
                    else {
                        this.isLiveView = false;
                    }
                }
                else {
                    this.mode = 'not-preview';
                    this.isLiveView = false;
                }
                if (this.mode !== 'preview') {
                    this.image_url = `${this.connections.rForm_frontend_url}/assets/white-logo.svg`;
                }
                else {
                    this.image_url = `${this.connections.rForm_frontend_url}/assets/break-black-logo.svg`;
                }
                this.getProfile();
                this.updateStar();
                this.checkCanStar();
                this._canEdit = undefined;
                this._canCreate = undefined;
                this.pageLoading = false;
            }
            else if (event instanceof NavigationStart) {
                this.pageLoading = true;
            }
        }));
        this.titleSubscription = this.verdocsHeaderService.titleSubject.subscribe((/**
         * @param {?} title
         * @return {?}
         */
        title => {
            if (title) {
                this.title = title;
            }
            else {
                this.title = null;
            }
        }));
        this.csvBlobSubscription = this.verdocsHeaderService.csvBlobSubject.subscribe((/**
         * @param {?} blob
         * @return {?}
         */
        blob => {
            if (blob) {
                this.csvBlob = blob;
            }
            else {
                this.csvBlob = null;
            }
        }));
        this.saveStatusSubscription = this.verdocsHeaderService.saveStatusSubject.subscribe((/**
         * @param {?} status
         * @return {?}
         */
        status => {
            this.saveStatus = status;
        }));
        this.profileLoadingSubscription = this.verdocsHeaderService.profileLoadingSubject.subscribe((/**
         * @param {?} status
         * @return {?}
         */
        status => {
            this.loading = status;
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        this.cdr.detectChanges();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.metaDataSubscription.unsubscribe();
        this.titleSubscription.unsubscribe();
        this.titleInputSubscription.unsubscribe();
        this.titleKeyDownSubscription.unsubscribe();
        this.templateNameSubscription.unsubscribe();
        this.templateSubscription.unsubscribe();
        this.saveStatusSubscription.unsubscribe();
        this.profileLoadingSubscription.unsubscribe();
        this.userDataSubscription.unsubscribe();
        this.modeSubscription.unsubscribe();
        if (!!this.generalInputSubscription) {
            this.generalInputSubscription.unsubscribe();
        }
        if (!!this.previewInputSubscription) {
            this.previewInputSubscription.unsubscribe();
        }
        this.navigationEventSubscription.unsubscribe();
        this.csvBlobSubscription.unsubscribe();
        this.compiler.clearCache();
    }
    /**
     * @return {?}
     */
    init() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (this.vAuthService.isAuthenticated() && this.mode !== 'view') {
                yield this.verdocsHeaderService.initNotificationService();
            }
        });
    }
    /**
     * @return {?}
     */
    get home_url() {
        return this.vTokenStateService.getIDToken() ? this.connections.rForm_frontend_url + '/dashboard' : this.connections.rForm_frontend_url;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    previewInputEvent(event) {
        clearTimeout(this.inputTimer);
        this.inputTimer = setTimeout((/**
         * @return {?}
         */
        () => {
            this.getSearchResults(this.previewInput.nativeElement.value);
            clearTimeout(this.inputTimer);
        }), 500);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    generalInputEvent(event) {
        clearTimeout(this.inputTimer);
        this.inputTimer = setTimeout((/**
         * @return {?}
         */
        () => {
            this.getSearchResults(this.generalInput.nativeElement.value);
            clearTimeout(this.inputTimer);
        }), 500);
    }
    /**
     * @return {?}
     */
    prepareSearchInput() {
        if (this.mode === 'preview') {
            this.listenForPreviewInput();
        }
        else {
            this.listenForGeneralInput();
        }
    }
    /**
     * @return {?}
     */
    listenForPreviewInput() {
        if (this.generalInputSubscription) {
            this.generalInputSubscription.unsubscribe();
        }
        if (this.previewInput) {
            if (!this.previewInputSubscription) {
                this.previewInputSubscription = fromEvent(this.previewInput.nativeElement, 'keyup')
                    .pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
                 * @param {?} event
                 * @return {?}
                 */
                (event) => {
                    /** @type {?} */
                    const keyName = event['code'] || event['key'];
                    if (keyName) {
                        if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {
                            this.getSearchResults(this.previewInput.nativeElement.value);
                        }
                    }
                    else {
                        this.getSearchResults(this.previewInput.nativeElement.value);
                    }
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    listenForGeneralInput() {
        if (this.previewInputSubscription) {
            this.previewInputSubscription.unsubscribe();
        }
        if (this.generalInput) {
            if (!this.generalInputSubscription) {
                this.generalInputSubscription = fromEvent(this.generalInput.nativeElement, 'keyup')
                    .pipe(debounceTime(500), distinctUntilChanged()).subscribe((/**
                 * @param {?} event
                 * @return {?}
                 */
                (event) => {
                    /** @type {?} */
                    const keyName = event['code'] || event['key'];
                    if (keyName) {
                        if (keyName !== 'Enter' && keyName !== 'ArrowDown' && keyName !== 'ArrowUp') {
                            this.getSearchResults(this.generalInput.nativeElement.value);
                        }
                    }
                    else {
                        this.getSearchResults(this.generalInput.nativeElement.value);
                    }
                }));
            }
        }
    }
    /**
     * @return {?}
     */
    get canStar() {
        return this._canStar;
    }
    /**
     * @return {?}
     */
    get userStarred() {
        return this._userStarred;
    }
    /**
     * @return {?}
     */
    get canEdit() {
        if (typeof (this._canEdit) !== 'boolean' && this.templateGuard && this.isAuthenticated && this.template) {
            /** @type {?} */
            const response = this.templateGuard.canPerformAction(TemplateActions.WRITE, this.template);
            this._canEdit = response['canPerform'];
        }
        if (!this.isAuthenticated && this.template) {
            this._canEdit = false;
        }
        return this._canEdit;
    }
    /**
     * @return {?}
     */
    get canCreate() {
        if (this.isAuthenticated) {
            if (typeof (this._canCreate) !== 'boolean') {
                /** @type {?} */
                const permissions = this.vTokenObjectService.getVerdocsPermissions();
                this._canCreate = false;
                if (permissions && permissions.length > 0) {
                    permissions.forEach((/**
                     * @param {?} permission
                     * @return {?}
                     */
                    permission => {
                        if (permission.includes('creator:create')) {
                            return this._canCreate = true;
                        }
                    }));
                }
            }
            return this._canCreate;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    getProfile() {
        if (this.isAuthenticated) {
            this.currentProfile = this.vTokenObjectService.getProfile();
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    selected(event) {
        if ((this.generalInput && this.generalInput.nativeElement.value) || (this.previewInput && this.previewInput.nativeElement.value)) {
            event.option._element.nativeElement.click();
        }
    }
    /**
     * @return {?}
     */
    checkCanStar() {
        this._canStar = this.isAuthenticated;
    }
    /**
     * @param {?} search_string
     * @return {?}
     */
    getSearchResults(search_string) {
        this.isSearching = true;
        if (this.isAuthenticated) {
            this.verdocsHeaderService.searchEnvelopes({ envelope_name: search_string, row: 3 }).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                if (result instanceof HttpResponse) {
                    this.envelopeResult = (/** @type {?} */ (result.body['result']));
                    this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe((/**
                     * @param {?} result
                     * @return {?}
                     */
                    result => {
                        if (result instanceof HttpResponse) {
                            this.templateResult = (/** @type {?} */ (result.body['result']));
                            this.isSearching = false;
                        }
                    }));
                }
            }));
        }
        else {
            this.verdocsHeaderService.searchTemplates({ name: search_string, row: 3 }).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                if (result instanceof HttpResponse) {
                    this.templateResult = (/** @type {?} */ (result.body['result']));
                    this.isSearching = false;
                }
            }));
        }
    }
    /**
     * @param {?} index
     * @param {?} item
     * @return {?}
     */
    recipientTracking(index, item) {
        return index;
    }
    /**
     * @return {?}
     */
    toggleMenu() {
        this.verdocsHeaderService.toggleSidenav(!this.sidenavOpen);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setInputFocused(value) {
        this.inputFocused = value;
    }
    /**
     * @param {?} obj
     * @param {?} key
     * @return {?}
     */
    hasProp(obj, key) {
        return obj.hasOwnProperty(key);
    }
    /**
     * @param {?} name
     * @return {?}
     */
    roleColor(name) {
        return this.verdocsHeaderService.getRoleColor(name);
    }
    /**
     * @return {?}
     */
    toggleSidenav() {
        this.verdocsHeaderService.toggleBuilderSideNav();
    }
    /**
     * @return {?}
     */
    toggleTemplateDetails() {
        this.templateDetailsExpanded = !this.templateDetailsExpanded;
        if (this.templateDetailsExpanded) {
            this.verdocsHeaderService.templateDetailToggleSubject.next(true);
        }
    }
    /**
     * @return {?}
     */
    reset() {
        this.templateName = 'Unititled';
        // this.verdocsHeaderService.templateNameSubject.next('Untitled');
    }
    /**
     * @param {?} roles
     * @return {?}
     */
    getRoleNames(roles) {
        if (roles && roles.length > 0) {
            /** @type {?} */
            const last_index = roles.length - 1;
            /** @type {?} */
            let names_string = '';
            for (let x = 0; x < roles.length; x++) {
                if (x < last_index) {
                    names_string += (/** @type {?} */ (roles[x]['full_name'] + ', '));
                }
                else {
                    names_string += (/** @type {?} */ (roles[x]['full_name']));
                }
            }
            return names_string;
        }
    }
    /**
     * @param {?} template
     * @return {?}
     */
    getTemplateStats(template) {
        return `${this.getTemplatePages(template)}  ${this.getTemplateSequence(template)}  ${this.getTemplateRecipients(template)}`;
    }
    /**
     * @param {?} template
     * @return {?}
     */
    getTemplatePages(template) {
        if (template && template.pages) {
            return `${template.pages.length >= 2 ? template.pages.length + ' Pages' : '1 Page'}`;
        }
        else {
            return '0 Page';
        }
    }
    /**
     * @param {?} template
     * @return {?}
     */
    getTemplateSequence(template) {
        if (template && template.roles) {
            /** @type {?} */
            let hasPreparer = false;
            /** @type {?} */
            let maxSequence = -1;
            for (let x = 0; x < template.roles.length; x++) {
                if (template.roles[x].sequence > maxSequence) {
                    maxSequence = template.roles[x].sequence;
                }
                if (template.roles[x].sequence === 0) {
                    hasPreparer = true;
                }
            }
            /** @type {?} */
            const totalSequence = hasPreparer ? maxSequence + 1 : maxSequence;
            return totalSequence > 1 ? totalSequence + ' Sequences' : '1 Sequence';
        }
        else {
            return '0 Sequence';
        }
    }
    /**
     * @param {?} template
     * @return {?}
     */
    getTemplateRecipients(template) {
        if (template && template.roles) {
            /** @type {?} */
            const totalRecipients = template.roles.length;
            return totalRecipients > 1 ? totalRecipients + ' Recipients' : '1 Recipient';
        }
        else {
            return '0 Recipient';
        }
    }
    /**
     * @param {?} envelope_id
     * @return {?}
     */
    goToEnvelope(envelope_id) {
        if (this.currentOrigin === 'rForm' && this.isAtOriginalOrigin) {
            this.router.navigate([`/envelope/${envelope_id}`]);
        }
        else {
            location.href = `${this.connections.rForm_frontend_url}/envelope/${envelope_id}`;
        }
        this.clearSearchInputs();
    }
    /**
     * @param {?} template
     * @return {?}
     */
    goToTemplate(template) {
        this.verdocsHeaderService.openTemplate(template);
        this.clearSearchInputs();
    }
    /**
     * @param {?} keyword
     * @return {?}
     */
    goToTemplates(keyword) {
        this.verdocsHeaderService.openTemplates(keyword);
    }
    /**
     * @return {?}
     */
    searchEnvelopes() {
        /** @type {?} */
        const keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate([`/manage`], { queryParams: { envelope_name: keyword } });
            this.clearSearchInputs();
        }
    }
    /**
     * @return {?}
     */
    searchRecipients() {
        /** @type {?} */
        const keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate([`/manage`], { queryParams: { recipient_name: keyword } });
            this.clearSearchInputs();
        }
    }
    /**
     * @return {?}
     */
    searchTemplates() {
        /** @type {?} */
        const keyword = this.getSearchKeyword();
        if (keyword !== '') {
            this.router.navigate([`/templates`], { queryParams: { name: keyword } });
            this.clearSearchInputs();
        }
    }
    /**
     * @return {?}
     */
    getSearchKeyword() {
        if (this.previewInput && this.previewInput.nativeElement.value) {
            return this.previewInput.nativeElement.value;
        }
        else if (this.generalInput && this.generalInput.nativeElement.value) {
            return this.generalInput.nativeElement.value;
        }
        return '';
    }
    /**
     * @return {?}
     */
    clearSearchInputs() {
        if (this.previewInput) {
            this.previewInput.nativeElement.value = '';
        }
        if (this.generalInput) {
            this.generalInput.nativeElement.value = '';
        }
        this.envelopeResult = [];
        this.templateResult = [];
    }
    /**
     * @return {?}
     */
    updateStar() {
        if (this.template && this.currentProfile && this.template.template_stars) {
            /** @type {?} */
            const existingStarIndex = findIndex(this.template.template_stars, { profile_id: this.currentProfile.id, template_id: this.template.id });
            this._userStarred = existingStarIndex > -1;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    starTemplate() {
        if (this.canStar) {
            this.verdocsHeaderService.starTemplate(this.template.id).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                this.template.template_stars.push(res);
                this.updateStar();
            }));
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    }
    /**
     * @return {?}
     */
    unstarTemplate() {
        if (this.canStar) {
            this.verdocsHeaderService.unstarTemplate(this.template.id).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                /** @type {?} */
                const removedStarIndex = findIndex(this.template.template_stars, { profile_id: this.currentProfile.id, template_id: this.template.id });
                if (removedStarIndex > -1) {
                    this.template.template_stars.splice(removedStarIndex, 1);
                    this.updateStar();
                }
            }));
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    }
    /**
     * @return {?}
     */
    editTemplate() {
        if (this.canEdit) {
            this.router.navigate([`/builder/${this.template.id}/fields`]);
        }
        else if (!this.isAuthenticated) {
            this.createTemplate();
        }
    }
    /**
     * @return {?}
     */
    createTemplate() {
        this.verdocsHeaderService.toggleCreate();
    }
}
HeaderComponent.decorators = [
    { type: Component, args: [{
                selector: 'verdocs-header',
                template: "<div class=\"header__placeholder\" *ngIf=\"pageLoading\"></div>\n<div *ngIf=\"!pageLoading\">\n  <header #headerContainer>\n    <div class=\"header-row\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\"\n      [ngClass]=\"{authenticated: isAuthenticated, preview: mode === 'preview'}\">\n      <div class=\"header-util-wrapper collapsed\" fxLayout=\"row\">\n        <button mat-icon-button (click)=\"toggleMenu()\">\n          <mat-icon>menu</mat-icon>\n        </button>\n      </div>\n      <div class=\"header__dynamic-section\"\n        [ngClass]=\"{preview: mode === 'preview', expanded: templateDetailsExpanded, 'live-view': isLiveView}\">\n        <div class=\"header__logo-wrapper preview\" *ngIf=\"mode === 'preview'\"\n          [ngClass]=\"{authenticated: isAuthenticated, expanded: templateDetailsExpanded}\" matAutocompleteOrigin\n          #previewOrigin=\"matAutocompleteOrigin\">\n          <div class=\"header__dynamic-mobile-menu collapsed\">\n            <button mat-icon-button (click)=\"toggleMenu()\">\n              <mat-icon>menu</mat-icon>\n            </button>\n          </div>\n          <a class=\"header__title preview\" href=\"{{home_url}}\" [ngClass]=\"{authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin !== 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <a class=\"header__title preview\" [routerLink]=\"(isAuthenticated?'/dashboard': '/')\" [ngClass]=\"{authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin === 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <div class=\"header__general-search preview\">\n            <input class=\"header__general-search-input\" #previewInput type=\"text\"\n              [ngClass]=\"{preview: mode === 'preview', stretch: previewInput.value !== ''}\"\n              placeholder=\"Search or jump to...\" [matAutocompleteConnectedTo]=\"previewOrigin\"\n              [matAutocomplete]=\"autocomplete\" (focus)=\"setInputFocused(true)\" (blur)=\"setInputFocused(false)\"\n              (input)=\"previewInputEvent($event)\">\n            <button class=\"header__search-button preview\" mat-icon-button *ngIf=\"!isSearching\"\n              (click)=\"previewInput.focus()\">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class=\"header__general-search-spinner\" *ngIf=\"isSearching\">\n              <mat-spinner [diameter]=\"24\"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class=\"header__search-autocomplete\" #autocomplete=\"matAutocomplete\"\n            (optionSelected)=\"selected($event)\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let envelope of envelopeResult\"\n              [value]=\"envelope['name']\" (keydown.enter)=\"goToEnvelope(envelope.id)\" (click)=\"goToEnvelope(envelope.id)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{envelope['name']}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"envelopeResult && envelopeResult.length > 0\"\n              [value]=\"previewInput.value\" (keydown.enter)=\"searchEnvelopes()\" (click)=\"searchEnvelopes()\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"envelopeResult && envelopeResult.length > 0\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let template of templateResult\"\n              [value]=\"template.name\" (keydown.enter)=\"goToTemplate(template)\" (click)=\"goToTemplate(template)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    <div class=\"header__search-autocomplete-header\">\n                      {{template.name}}\n                    </div>\n                    <div class=\"header__search-autocomplete-subheader\">\n                      {{getTemplateStats(template)}}\n                    </div>\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"templateResult && templateResult.length > 0\"\n              [value]=\"previewInput.value\" (keydown.enter)=\"goToTemplates(previewInput.value)\" (click)=\"goToTemplates(previewInput.value)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"templateResult && templateResult.length > 0 && isAuthenticated\">\n            <mat-option class=\"header__search-autocomplete-option\" [value]=\"previewInput.value\"\n              (keydown.enter)=\"searchRecipients()\" (click)=\"searchRecipients()\"\n              *ngIf=\"isAuthenticated && previewInput.value !== ''\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Search Recipients with \"{{previewInput.value}}\"\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class=\"header__logo-wrapper\" *ngIf=\"mode !== 'preview'\"\n          [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated, expanded: templateDetailsExpanded}\">\n          <a class=\"header__title\" href=\"{{home_url}}\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin !== 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <a class=\"header__title\" [routerLink]=\"(isAuthenticated?'/dashboard': '/')\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\"\n            *ngIf=\"currentOrigin === 'rForm'\">\n            <img class=\"header__logo\" [src]=\"image_url\"\n              [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\" />\n              <div class=\"header__app-version\" [ngClass]=\"{preview: mode === 'preview', authenticated: isAuthenticated}\">{{app_version}}</div>\n          </a>\n          <div class=\"header__general-search\"\n            [ngClass]=\"{preview: mode === 'preview', extend: inputFocused || generalInput.value != '', unauthenticated: !isAuthenticated, landing: currentAt === 'rSecure'}\"\n            matAutocompleteOrigin #generalOrigin=\"matAutocompleteOrigin\">\n            <input class=\"header__general-search-input\" #generalInput type=\"text\"\n              [ngClass]=\"{preview: mode === 'preview', stretch: generalInput.value !== '', unauthenticated: !isAuthenticated}\"\n              placeholder=\"Search or jump to...\" [matAutocompleteConnectedTo]=\"generalOrigin\"\n              [matAutocomplete]=\"autocomplete\" (focus)=\"setInputFocused(true)\" (blur)=\"setInputFocused(false)\"\n              (input)=\"generalInputEvent($event)\">\n            <button class=\"header__search-button\" mat-icon-button [ngClass]=\"{preview: mode === 'preview'}\"\n              *ngIf=\"!isSearching\" (click)=\"generalInput.focus()\">\n              <mat-icon>search</mat-icon>\n            </button>\n            <div class=\"header__general-search-spinner\" *ngIf=\"isSearching\">\n              <mat-spinner [diameter]=\"24\"></mat-spinner>\n            </div>\n          </div>\n          <mat-autocomplete class=\"header__search-autocomplete\" #autocomplete=\"matAutocomplete\"\n            (optionSelected)=\"selected($event)\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let envelope of envelopeResult\"\n              [value]=\"envelope.name\" (keydown.enter)=\"goToEnvelope(envelope.id)\" (click)=\"goToEnvelope(envelope.id)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>mail</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{envelope.name}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getRoleNames(envelope.recipients)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"envelopeResult && envelopeResult.length > 0\"\n              [value]=\"generalInput.value\" (keydown.enter)=\"searchEnvelopes()\" (click)=\"searchEnvelopes()\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Verdocs\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"envelopeResult && envelopeResult.length > 0\">\n            <mat-option class=\"header__search-autocomplete-option\" *ngFor=\"let template of templateResult\"\n              (keydown.enter)=\"goToTemplate(template)\" (click)=\"goToTemplate(template)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>description</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    {{template?.name}}\n                  </div>\n                  <div class=\"header__search-autocomplete-subheader\">\n                    {{getTemplateStats(template)}}\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <mat-option class=\"header__search-autocomplete-option\" *ngIf=\"templateResult && templateResult.length > 0\"\n              [value]=\"generalInput.value\" (keydown.enter)=\"goToTemplates(generalInput.value)\" (click)=\"goToTemplates(generalInput.value)\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <img class=\"header__search-verdocs-image\" src=\"{{verdocs_url}}/assets/v-blue-logo.svg\" />\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Show more Documents\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n            <hr *ngIf=\"templateResult && templateResult.length > 0 && isAuthenticated\">\n            <mat-option class=\"header__search-autocomplete-option\" [value]=\"generalInput.value\"\n              (keydown.enter)=\"searchRecipients()\" (click)=\"searchRecipients()\"\n              *ngIf=\"isAuthenticated && generalInput.value !== ''\">\n              <div class=\"header__search-autocomplete-wrapper\">\n                <div class=\"header__search-autocomplete-left\">\n                  <mat-icon>search</mat-icon>\n                </div>\n                <div class=\"header__search-autocomplete-middle\">\n                  <div class=\"header__search-autocomplete-header\">\n                    Search Recipients with \"{{generalInput.value}}\"\n                  </div>\n                </div>\n                <div class=\"header__search-autocomplete-right\"></div>\n              </div>\n            </mat-option>\n          </mat-autocomplete>\n        </div>\n        <div class=\"header__template-details\"\n          [ngClass]=\"{show: mode === 'preview' && !isLiveView, expanded: templateDetailsExpanded}\">\n          <div class=\"header__template-detail-container\" [ngClass]=\"{show: templateDetailsExpanded}\">\n            <div class=\"header__template-detail-wrapper\">\n              <div class=\"header__template-detail-header no-top-border\">\n                <div class=\"header__template-detail-title bold\">\n                  <h1>{{template?.name}}</h1>\n                </div>\n                <div class=\"header__template-detail-button-container\"></div>\n              </div>\n              <div class=\"header__template-detail-body\" *ngIf=\"template && template.description\">\n                <div class=\"header__template-detail-body-text\">\n                  {{template?.description}}\n                </div>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Tags</div>\n                <div class=\"header__template-detail-button-container\"></div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <div class=\"header__template-detail-tags\">\n                  <div class=\"header__template-detail-tag\" *ngFor=\"let tag of template.tags\">\n                    {{tag.tag_name}}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Visibility</div>\n              </div>\n              <div class=\"header__template-detail-button-container\">\n                <app-preview-visibility [template]=\"template\"\n                  [visibility]=\"{is_personal: template?.is_personal, is_public: template?.is_public}\">\n                </app-preview-visibility>\n              </div>\n              <div class=\"header__template-detail-body\"></div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Source documents</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <app-template-source [template]=\"template\"></app-template-source>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Workflow</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <app-recipient-editor [template]=\"template\"></app-recipient-editor>\n              </div>\n            </div>\n            <div class=\"header__template-detail-wrapper\" *ngIf=\"template\">\n              <div class=\"header__template-detail-header\">\n                <div class=\"header__template-detail-title\">Metrics</div>\n              </div>\n              <div class=\"header__template-detail-body\">\n                <div class=\"header__template-detail-stats\">\n                  <div class=\"header__counter-stars\">\n                    <mat-icon class=\"header__counter-icon\">star</mat-icon>\n                    <span class=\"header__counter-number\">\n                      {{template.template_stars ? template.template_stars.length : 0}}\n                    </span>\n                  </div>\n                  <div class=\"header__counter-envelopes\">\n                    <mat-icon class=\"header__counter-icon\">mail</mat-icon>\n                    <span class=\"header__counter-number\">\n                      {{template.counter}}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"header__template-detail-options\" [ngClass]=\"{show: templateDetailsExpanded}\">\n            <div class=\"header__template-detail-option-button-wrapper\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" *ngIf=\"!userStarred\"\n                (click)=\"starTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">star</mat-icon>\n                <span class=\"header__template-detail-option-text\">Star</span>\n              </button>\n              <button mat-raised-button class=\"header__template-detail-option-button\" *ngIf=\"userStarred\"\n                (click)=\"unstarTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">star_outline</mat-icon>\n                <span class=\"header__template-detail-option-text\">Unstar</span>\n              </button>\n            </div>\n            <div class=\"header__template-detail-option-button-wrapper\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" (click)=\"createTemplate()\">\n                <mat-icon class=\"header__template-detail-option-icon\">drafts</mat-icon>\n                <span class=\"header__template-detail-option-text\">Create</span>\n              </button>\n            </div>\n            <div class=\"header__template-detail-option-button-wrapper\" matTooltip=\"Edit privileges required.\">\n              <button mat-raised-button class=\"header__template-detail-option-button\" (click)=\"editTemplate()\" [disabled]=\"!canEdit && isAuthenticated\">\n                <mat-icon class=\"header__template-detail-option-icon\">build</mat-icon>\n                <span class=\"header__template-detail-option-text\">Edit</span>\n              </button>\n            </div>\n          </div>\n          <div class=\"header__template-details-expansion\" (click)=\"toggleTemplateDetails()\"\n            [ngClass]=\"{expanded: templateDetailsExpanded}\">\n            <button class=\"header__template-details-button\" mat-icon-button>\n              <mat-icon class=\"header__template-details-arrow\" [ngClass]=\"{expanded: templateDetailsExpanded}\">\n                keyboard_arrow_down</mat-icon>\n            </button>\n            <div class=\"header__template-details-text\" *ngIf=\"!templateDetailsExpanded\">Show details</div>\n            <div class=\"header__template-details-text\" *ngIf=\"templateDetailsExpanded\">Hide</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"header__nav\" fxFlex [ngClass]=\"{preview: mode === 'preview', ua: !isAuthenticated}\">\n        <div class=\"header__nav-authenticated\" *ngIf=\"isAuthenticated && currentOrigin === 'rForm'\">\n          <a class=\"header__link\" [routerLink]=\"'/manage'\">Manage</a>\n          <a class=\"header__link\" [routerLink]=\"'/documents'\">Documents</a>\n        </div>\n        <div class=\"header__nav-authenticated\" *ngIf=\"isAuthenticated && currentOrigin !== 'rForm' && currentOrigin !== 'rSecure'\">\n          <a class=\"header__link\" [href]=\"rFormFrontEnd + '/manage'\">Manage</a>\n          <a class=\"header__link\" [href]=\"rFormFrontEnd + '/documents'\">Documents</a>\n        </div>\n        <div class=\"header__nav-unauthenticated\" *ngIf=\"(!isAuthenticated && currentOrigin !== 'rSecure') || currentOrigin === 'rSecure'\">\n          <div class=\"header__link-wrapper realster\">\n            <div class=\"header__link realster\">Why Verdocs <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class=\"header__sub-link realster\" *ngIf=\"currentOrigin !== 'rSecure'\">\n              <a [href]=\"rSecureFrontEnd + '/features'\" class=\"header__sub-link-nav main\">Features</a>\n              <a [href]=\"rSecureFrontEnd + '/features/builder'\" class=\"header__sub-link-nav\">Builder</a>\n              <a [href]=\"rSecureFrontEnd + '/features/documents'\" class=\"header__sub-link-nav\">Documents</a>\n              <a [href]=\"rSecureFrontEnd + '/features/attachments'\" class=\"header__sub-link-nav\">Collect Attachments</a>\n              <a [href]=\"rSecureFrontEnd + '/features/payments'\" class=\"header__sub-link-nav\">Collect Payments</a>\n              <a [href]=\"rSecureFrontEnd + '/features/export'\" class=\"header__sub-link-nav\">Export</a>\n              <a [href]=\"rSecureFrontEnd + '/features/audit-trail'\" class=\"header__sub-link-nav\">Tamper-Proof Audit\n                Trail</a>\n              <a [href]=\"rSecureFrontEnd + '/features/reminders'\" class=\"header__sub-link-nav\">Reminders</a>\n              <a [href]=\"rSecureFrontEnd + '/features/flexible-workflows'\" class=\"header__sub-link-nav\">Flexible\n                Workflows</a>\n              <a [href]=\"rSecureFrontEnd + '/features/team-management'\" class=\"header__sub-link-nav\">Team Management</a>\n              <hr class=\"header__navigation-divider realster\">\n              <a [href]=\"rSecureFrontEnd + '/security'\" class=\"header__sub-link-nav main\">Security</a>\n              <a href=\"https://verdocs.com/resources/category/customer-stories\"\n                class=\"header__sub-link-nav main\">Customer\n                Stories</a>\n            </div>\n            <div class=\"header__sub-link realster local\" *ngIf=\"currentOrigin === 'rSecure'\">\n              <a [routerLink]=\"'/features'\" class=\"header__sub-link-nav main\">Features</a>\n              <a [routerLink]=\"'/features/builder'\" class=\"header__sub-link-nav\">Builder</a>\n              <a [routerLink]=\"'/features/documents'\" class=\"header__sub-link-nav\">Documents</a>\n              <a [routerLink]=\"'/features/attachments'\" class=\"header__sub-link-nav\">Collect Attachments</a>\n              <a [routerLink]=\"'/features/payments'\" class=\"header__sub-link-nav\">Collect Payments</a>\n              <a [routerLink]=\"'/features/export'\" class=\"header__sub-link-nav\">Export</a>\n              <a [routerLink]=\"'/features/audit-trail'\" class=\"header__sub-link-nav\">Tamper-Proof Audit Trail</a>\n              <a [routerLink]=\"'/features/reminders'\" class=\"header__sub-link-nav\">Reminders</a>\n              <a [routerLink]=\"'/features/flexible-workflows'\" class=\"header__sub-link-nav\">Flexible Workflows</a>\n              <a [routerLink]=\"'/features/team-management'\" class=\"header__sub-link-nav\">Team Management</a>\n              <hr class=\"header__navigation-divider realster\">\n              <a [routerLink]=\"'/security'\" class=\"header__sub-link-nav main\">Security</a>\n              <a href=\"https://verdocs.com/resources/category/customer-stories\"\n                class=\"header__sub-link-nav main\">Customer\n                Stories</a>\n            </div>\n          </div>\n          <div class=\"header__link-wrapper pricing\">\n            <div class=\"header__link pricing\">Pricing <mat-icon>expand_more</mat-icon>\n            </div>\n            <div class=\"header__sub-link pricing\" *ngIf=\"currentOrigin !== 'rSecure'\">\n              <a [href]=\"rSecureFrontEnd + '/pricing'\" class=\"header__sub-link-nav main\">Plans</a>\n              <a [href]=\"rSecureFrontEnd + '/pricing/contact-sales'\" class=\"header__sub-link-nav\">Contact Sales</a>\n              <hr class=\"nav-header__navigation-divider pricing\">\n              <!-- <a [href]=\"rSecureFrontEnd + '/pricing/real-estate'\" class=\"nav-header__navigation-link\">Real Estate</a> -->\n              <a [href]=\"rSecureFrontEnd + '/pricing/nonprofit'\" class=\"header__sub-link-nav\">Nonprofit</a>\n            </div>\n            <div class=\"header__sub-link pricing local\" *ngIf=\"currentOrigin === 'rSecure'\">\n              <a [routerLink]=\"'/pricing'\" class=\"header__sub-link-nav main\">Plans</a>\n              <a [routerLink]=\"'/pricing/contact-sales'\" class=\"header__sub-link-nav\">Contact Sales</a>\n              <hr class=\"nav-header__navigation-divider pricing\">\n              <!-- <a [routerLink]=\"'/pricing/real-estate'\" class=\"nav-header__navigation-link\">Real Estate</a> -->\n              <a [routerLink]=\"'/pricing/nonprofit'\" class=\"header__sub-link-nav\">Nonprofit</a>\n            </div>\n          </div>\n          <a class=\"header__link\" href=\"https://verdocs.com/resources\">Resources</a>\n        </div>\n      </div>\n      <div class=\"header-util-mg\" fxFlex>\n        <verdocs-header-tools [mode]=\"mode\"></verdocs-header-tools>\n      </div>\n    </div>\n    <svg class=\"ghost\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <linearGradient id=\"linear\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n          <stop offset=\"0%\" stop-color=\"#50BD80\" />\n          <stop offset=\"100%\" stop-color=\"#4856CA\" />\n        </linearGradient>\n      </defs>\n    </svg>\n  </header>\n</div>",
                styles: ["app-header{position:fixed;top:0;left:0;width:100%}header{position:relative;z-index:99}.header__placeholder{background-color:#f6f8fa;height:56px}.header__nav{margin-left:8px;display:flex;align-items:center;height:64px;flex:1 1 0%;box-sizing:border-box}.header__nav .header__link,.header__nav .header__link:visited{display:flex;align-items:center;padding-left:8px;padding-right:8px;color:#fff;text-decoration:none;height:64px}.header__nav.preview .header__link,.header__nav.preview .header__link:visited{color:rgba(0,0,0,.87)}.header__nav.preview{position:absolute;top:0;left:378px}@media only screen and (max-width:854px){.header__nav{display:none}.header__app-version.preview{padding-left:6px}}@media only screen and (max-width:600px){.header__nav{height:56px}}.header__nav-authenticated,.header__nav-unauthenticated{position:relative;display:flex;align-items:center}.header__app-version{position:absolute;top:20px;font-size:10px;padding-left:12px}.header__app-version.preview{color:rgba(0,0,0,.54);padding-left:6px}@media only screen and (max-width:768px){.header__app-version.preview{padding-left:6px}.header__app-version{padding-left:0}}.header__link-wrapper{position:relative;overflow:visible}.header__link-wrapper:hover{cursor:pointer}.header__link-wrapper.realster{width:143.64px;max-width:143.64px}.header__link-wrapper.realster:hover .header__sub-link.realster{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__link-wrapper.realster:hover .header__sub-link.realster:after,.header__link-wrapper.realster:hover .header__sub-link.realster:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.realster:hover .header__sub-link.realster:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.realster:hover .header__sub-link.realster:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.realster:hover .header__sub-link.realster .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__link-wrapper.pricing{width:92.52px;max-width:92.52px}.header__link-wrapper.pricing:hover .header__sub-link.pricing{visibility:visible;opacity:1;height:120px;width:160px;background-color:#fff}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after,.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__link-wrapper.pricing:hover .header__sub-link.pricing:before{height:100%;width:100%;left:0;top:0}.header__link-wrapper.pricing:hover .header__sub-link.pricing:after{content:'';width:92.52px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}.header__link-wrapper.pricing:hover .header__sub-link.pricing .header__sub-link-nav{visibility:visible;opacity:1;height:38px}.header__sub-link{position:absolute;padding-top:8px;top:60px;left:0;visibility:hidden;opacity:0;height:0;transition:height .3s cubic-bezier(.17,.04,.03,.94);border-bottom-left-radius:2px;border-bottom-right-radius:2px}.header__sub-link:hover{visibility:visible;opacity:1;height:466px;width:240px;background-color:#fff}.header__sub-link:hover:after,.header__sub-link:hover:before{content:'';position:absolute;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14);z-index:-1}.header__sub-link:hover:before{height:100%;width:100%;left:0;top:0}.header__sub-link:hover:after{content:'';width:143.64px;height:54px;top:-52px;left:0;background-color:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 3px -2px rgba(0,0,0,.12),0 3px 4px 0 rgba(0,0,0,.14)}@media only screen and (max-width:600px){.header__sub-link{top:56px}}.header__sub-link-nav{padding:8px 16px;display:block;text-decoration:none;color:rgba(0,0,0,.87);visibility:none;opacity:0;transition:250ms cubic-bezier(.17,.04,.03,.94);transition-delay:50ms;height:0}.header__sub-link-nav.main{font-weight:600}.header__sub-link-nav:visited{color:rgba(0,0,0,.87)}.header-row{position:relative;height:56px;display:flex;align-items:center;place-content:center space-between;background-color:#33354c;color:#fff}.header-row.authenticated{background-color:#33354c;color:#fff}.header-row.preview,.header-row.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}@media only screen and (min-width:601px){.header-row{height:64px}}.header-util-wrapper{margin-left:12px;visibility:visible;opacity:1;transform:translateX(0);transition:.2s ease-out}.header-util-wrapper button:hover{background-color:rgba(0,0,0,.12)}@media only screen and (max-width:415px){.header-util-wrapper.search-active{visibility:hidden;opacity:0;width:0;transform:translateX(-200%)}}@media only screen and (min-width:855px){.header-util-wrapper{visibility:0;opacity:0;display:none!important}}.header__dynamic-mobile-menu{display:none}.header__dynamic-section.preview{position:absolute;top:8px;left:0;height:96px;max-width:370.5px;margin-left:8px;background-color:#f3f3f3;border-radius:2px;box-shadow:0 3px 14px 2px rgba(0,0,0,.12),0 8px 10px 1px rgba(0,0,0,.14),0 5px 5px -3px rgba(0,0,0,.2);transition:height .3s cubic-bezier(.17,.04,.03,.94)}.header__dynamic-section.preview.live-view{height:0}.header__dynamic-section.preview.expanded{max-width:386.5px;margin-left:0;top:0;height:100vh;height:calc(var(--vh,1vh) * 100)}.header__general-search{display:flex;align-items:center;height:48px;background-color:rgba(0,0,0,.15);border-radius:2px}.header__general-search.preview{background-color:transparent}@media only screen and (max-width:854px){.header__dynamic-mobile-menu{display:flex;padding-left:4px}.header__dynamic-section.preview{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__dynamic-section.preview.expanded{width:100%;max-width:100%}.header__general-search.extend{background-color:rgba(0,0,0,.15);width:calc(100vw - 16px);margin-left:-150px}.header__general-search{background-color:transparent}}.header__general-search-field{height:48px}.header__general-search-input{padding-left:8px;border:none;height:48px;font-size:16px;line-height:48px;outline:0;border-radius:2px;background-color:transparent;color:#fff;width:203px;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__general-search-input.stretch,.header__general-search-input:focus{width:340px}.header__general-search-input.landing{width:130px}.header__general-search-input.landing.stretch{width:340px}.header__general-search-input.preview,.header__general-search-input.preview.authenticated{background-color:transparent;color:rgba(0,0,0,.87)}.header__general-search-input.preview.authenticated::-webkit-input-placeholder,.header__general-search-input.preview::-webkit-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-moz-placeholder,.header__general-search-input.preview::-moz-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::-ms-input-placeholder,.header__general-search-input.preview::-ms-input-placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated::placeholder,.header__general-search-input.preview::placeholder{color:rgba(0,0,0,.54)}.header__general-search-input.preview.authenticated.stretch,.header__general-search-input.preview.authenticated:focus,.header__general-search-input.preview.stretch,.header__general-search-input.preview:focus{width:203px}.header__general-search-input::-webkit-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-moz-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::-ms-input-placeholder{color:rgba(255,255,255,.54)}.header__general-search-input::placeholder{color:rgba(255,255,255,.54)}@media only screen and (max-width:854px){.header__general-search-input{width:0;border:none}.header__general-search-input.stretch,.header__general-search-input:focus{width:calc(100vw - 72px)!important;background-color:#292d3c;z-index:100}.header__general-search-input.stretch.preview,.header__general-search-input:focus.preview{margin-left:-152px;background-color:#fff}}.header__general-search-spinner{margin-left:8px;display:flex;align-items:center;justify-content:center;height:40px;width:40px}.header__template-details{position:absolute;top:-120px;height:0;visibility:hidden;opacity:0;transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details.show{position:relative;top:0;visibility:visible;opacity:1;height:48px}.header__template-details.show.expanded{height:calc(100% - 64px)}.header__template-details-expansion{position:absolute;bottom:0;left:0;padding-left:8px;padding-right:8px;display:flex;height:48px;align-items:center;width:100%}.header__template-details-expansion.expanded{padding-left:16px;border-top:2px solid rgba(0,0,0,.12)}.header__template-details-expansion:hover{cursor:pointer}.header__template-details-arrow{transition:.3s cubic-bezier(.17,.04,.03,.94)}.header__template-details-arrow.expanded{transform:rotate(-180deg)}.header__template-details-text{font-size:12px;color:rgba(0,0,0,.54)}.header__template-detail-container{background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.12),0 0 2px 0 rgba(0,0,0,.14);visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-container.show{margin:8px 8px 0;padding:8px;visibility:visible;opacity:1;height:auto;max-height:calc(100% - 128px);overflow-y:auto}.header__template-detail-options{visibility:hidden;opacity:0;height:0;transition:.3s cubic-bezier(.17,.04,.03,.94);transition-delay:25ms}.header__template-detail-options.show{display:flex;padding:8px;visibility:visible;opacity:1;width:100%;height:auto}.header__template-detail-option-button{width:100%}.header__template-detail-option-button-wrapper{width:calc(41% - 32px);margin-right:8px}.header__template-detail-option-button-wrapper:last-child{margin-right:0}.header__template-detail-option-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__template-detail-option-text{text-transform:uppercase;color:rgba(0,0,0,.87)}.header__template-detail-wrapper{padding-left:8px;padding-right:8px}.header__template-detail-header{padding-top:8px;padding-bottom:8px;border-top:1px solid #d1d5da}.header__template-detail-header.no-top-border{border-top:none}.header__template-detail-title{font-size:12px;color:rgba(0,0,0,.87)}.header__template-detail-title.bold{padding-bottom:8px;font-weight:800;font-size:20px}.header__template-detail-title.bold h1{color:rgba(0,0,0,.87);padding-bottom:8px;font-weight:800;font-size:20px;margin:0}.header__template-detail-body{padding-bottom:8px}.header__template-detail-tags{display:flex;padding-top:2px;align-items:center}.header__template-detail-tag{margin-left:8px;padding-left:8px;padding-right:8px;height:20px;line-height:20px;background-color:rgba(55,71,79,.34);border-radius:2px;font-size:10px;color:#000}.header__template-detail-tag:first-child{margin-left:0}.header__template-detail-stats{display:flex;align-items:center;padding-top:8px;line-height:24px}.header__logo{display:inline-block;height:20px;width:77.5px;margin-right:16px;background-size:contain;background-position:center;background-repeat:no-repeat}@media only screen and (max-width:854px){.header__logo{margin:0}}.header__logo-wrapper{display:flex;height:48px;align-items:center}.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{border-radius:2px;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 2px 1px -1px rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.14);max-width:370.5px}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{margin-top:8px;margin-left:8px;margin-right:8px;max-width:370.5px}.header__logo-wrapper.preview .header__logo,.header__logo-wrapper.preview.authenticated .header__logo{margin-left:6px}@media screen and (max-width:854px){.header__logo-wrapper.preview,.header__logo-wrapper.preview.authenticated{width:100%;max-width:100%}.header__logo-wrapper.preview.authenticated.expanded,.header__logo-wrapper.preview.expanded{width:calc(100% - 16px);max-width:calc(100% - 16px)}.header__logo-wrapper{justify-content:space-between;width:calc(100vw - 64px)}}@media screen and (min-width:855px){.header__logo{margin-left:12px}}.header__search-button{font-size:24px;margin-left:8px}.header__search-button.preview{color:rgba(0,0,0,.54)}.header__search-button.preview:hover{color:rgba(0,0,0,.87)}.header__search-verdocs-image{margin-left:2px;width:20px}.header__search-autocomplete{position:relative;padding-top:8px;max-height:515px}.header__search-autocomplete-option{display:flex;align-items:center;height:60px;line-height:60px}.header__search-autocomplete-wrapper{display:flex;align-items:center}.header__search-autocomplete-right{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__search-autocomplete-middle{max-width:calc(100% - 80px)}.header__search-autocomplete-header{font-size:16px;color:rgba(0,0,0,.87);height:20px;line-height:20px}.header__search-autocomplete-subheader{font-size:14px;color:rgba(0,0,0,.54);height:20px;line-height:20px}.header__search-autocomplete-left{display:flex;align-items:center;width:40px;color:rgba(0,0,0,.54)}.header__title{position:relative;visibility:visible;opacity:1;padding-left:12px;margin-right:8px;width:calc(100% - 120px);text-align:left;font-size:20px;font-weight:500;text-overflow:ellipsis;text-decoration:none;white-space:nowrap;overflow:visible;color:#fff;transition:.2s ease-out}@media only screen and (max-width:415px){.header__title.search-active{visibility:hidden;width:0;opacity:0;transform:translateX(-200%)}}@media only screen and (max-width:854px){.header__title{margin:0 auto;width:auto;padding-left:0;padding-right:0;transform:translateX(8px)}}.header__title-input{border:none;outline:0;max-width:500px;width:100%;font-size:20px;font-weight:500;background:0 0;color:#fff}.header__title-input:not(:focus){text-overflow:ellipsis}.header__counter-envelopes,.header__counter-stars{margin-right:8px;display:flex;align-items:center}.header__counter-icon{margin-right:4px;color:rgba(0,0,0,.54)}.header__counter-number{margin-right:6px;font-size:16px;line-height:24px;height:24px;color:rgba(0,0,0,.87)}.header-util-mg{margin-right:12px;font-size:1.125rem;font-weight:300;height:64px;flex:1 1 0%}.header-util-mg button{min-width:48px;min-height:48px;background-color:transparent}@media screen and (max-width:768px){.header-util-mg{flex:none!important}}@media only screen and (max-width:600px){.header-util-mg{margin-right:0}.header-user__button{display:none}}.header__app{float:left;width:48px;height:48px;padding-top:5px}.header__notification{float:left;width:48px;height:48px;margin-top:-8px;margin-right:8px}.header-user__button{float:left;height:48px;width:48px;border:none;padding-top:5px;border-radius:50%}.header-user__button:hover{cursor:pointer}.header__nav-back,.header__nav-settings{line-height:40px!important;vertical-align:middle}.header-nav-route{padding-top:10px;padding-bottom:10px;color:#fff;text-align:center;text-transform:uppercase;font-size:1.125em;font-weight:400}.header-nav-filter{margin-right:30px}.header-nav-menu{margin-left:30px}.header__recipients{text-align:right}.header__template-status{position:absolute;bottom:4px;left:56px;font-size:12px;margin-left:8px;color:#fff}@media only screen and (max-width:675px){.header__title{padding-left:0}.header__recipients{max-width:195px!important;min-width:150px!important}.header__template-status{left:45px}}@media only screen and (max-width:360px){.header__template-status{display:none}}"]
            }] }
];
/** @nocollapse */
HeaderComponent.ctorParameters = () => [
    { type: VerdocsHeaderService },
    { type: VerdocsStateService },
    { type: VerdocsTokenObjectService },
    { type: VerdocsAuthService },
    { type: TemplatesGuardService },
    { type: Router },
    { type: ChangeDetectorRef },
    { type: Compiler },
    { type: Injector },
    { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
];
HeaderComponent.propDecorators = {
    currentOrigin: [{ type: Input }],
    header: [{ type: ViewChild, args: ['headerContainer', { static: false },] }],
    searchBar: [{ type: ViewChild, args: ['search', { static: false },] }],
    templateTitleInput: [{ type: ViewChild, args: ['templateTitle', { static: false },] }],
    previewInput: [{ type: ViewChild, args: ['previewInput', { static: false },] }],
    generalInput: [{ type: ViewChild, args: ['generalInput', { static: false },] }]
};
if (false) {
    /** @type {?} */
    HeaderComponent.prototype.pageLoading;
    /** @type {?} */
    HeaderComponent.prototype.connections;
    /** @type {?} */
    HeaderComponent.prototype.title;
    /** @type {?} */
    HeaderComponent.prototype.isAuthenticated;
    /** @type {?} */
    HeaderComponent.prototype.headerTitle;
    /** @type {?} */
    HeaderComponent.prototype.mode;
    /** @type {?} */
    HeaderComponent.prototype.searchActive;
    /** @type {?} */
    HeaderComponent.prototype.templateName;
    /** @type {?} */
    HeaderComponent.prototype.newTemplateName;
    /** @type {?} */
    HeaderComponent.prototype.saveStatus;
    /** @type {?} */
    HeaderComponent.prototype.notifications;
    /** @type {?} */
    HeaderComponent.prototype.loading;
    /** @type {?} */
    HeaderComponent.prototype.myAccountUrl;
    /** @type {?} */
    HeaderComponent.prototype.termsUrl;
    /** @type {?} */
    HeaderComponent.prototype.privacyUrl;
    /** @type {?} */
    HeaderComponent.prototype.newProfile;
    /** @type {?} */
    HeaderComponent.prototype.organization_id;
    /** @type {?} */
    HeaderComponent.prototype.emailVerified;
    /** @type {?} */
    HeaderComponent.prototype.organizationImgSrc;
    /** @type {?} */
    HeaderComponent.prototype.csvBlob;
    /** @type {?} */
    HeaderComponent.prototype.templateDetailsExpanded;
    /** @type {?} */
    HeaderComponent.prototype.template;
    /** @type {?} */
    HeaderComponent.prototype.isSearching;
    /** @type {?} */
    HeaderComponent.prototype.envelopeResult;
    /** @type {?} */
    HeaderComponent.prototype.templateResult;
    /** @type {?} */
    HeaderComponent.prototype.currentProfile;
    /** @type {?} */
    HeaderComponent.prototype.inputFocused;
    /** @type {?} */
    HeaderComponent.prototype.manageLink;
    /** @type {?} */
    HeaderComponent.prototype.templatesLink;
    /** @type {?} */
    HeaderComponent.prototype.rSecureFrontEnd;
    /** @type {?} */
    HeaderComponent.prototype.rFormFrontEnd;
    /** @type {?} */
    HeaderComponent.prototype.isLiveView;
    /** @type {?} */
    HeaderComponent.prototype.verdocs_url;
    /** @type {?} */
    HeaderComponent.prototype.image_url;
    /** @type {?} */
    HeaderComponent.prototype.isAtOriginalOrigin;
    /** @type {?} */
    HeaderComponent.prototype.app_version;
    /** @type {?} */
    HeaderComponent.prototype.currentAt;
    /** @type {?} */
    HeaderComponent.prototype.currentOrigin;
    /** @type {?} */
    HeaderComponent.prototype.header;
    /** @type {?} */
    HeaderComponent.prototype.searchBar;
    /** @type {?} */
    HeaderComponent.prototype.templateTitleInput;
    /** @type {?} */
    HeaderComponent.prototype.previewInput;
    /** @type {?} */
    HeaderComponent.prototype.generalInput;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.sidenavOpen;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canStar;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canCreate;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._canEdit;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype._userStarred;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.metaDataSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.titleKeyDownSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateNameSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.saveStatusSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.profileLoadingSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.userDataSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.modeSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.previewInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.generalInputSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.navigationEventSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.csvBlobSubscription;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.inputTimer;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.origin;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.verdocsHeaderService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vTokenStateService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vTokenObjectService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.vAuthService;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.templateGuard;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.cdr;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.compiler;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    HeaderComponent.prototype.platform;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B2ZXJkb2NzL2hlYWRlci8iLCJzb3VyY2VzIjpbImxpYi9oZWFkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFJVCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFFBQVEsRUFDUixLQUFLLEVBQ0wsaUJBQWlCLEVBQ2pCLFFBQVEsRUFDUixNQUFNLEVBQ04sV0FBVyxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLGVBQWUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3BELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNyRyxPQUFPLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQyxPQUFPLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUVuQyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNqRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUNuRSxPQUFPLEVBQXVCLGVBQWUsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzlFLE9BQU8sRUFBb0IscUJBQXFCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQU8xRSxNQUFNLE9BQU8sZUFBZTs7Ozs7Ozs7Ozs7OztJQXFFMUIsWUFDVSxvQkFBMEMsRUFDMUMsa0JBQXVDLEVBQ3ZDLG1CQUE4QyxFQUM5QyxZ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QUN0RCxtREFBc0Q7Ozs7O0lBQ3RELCtDQUFrRDs7Ozs7SUFDbEQsaURBQW9EOzs7OztJQUNwRCxxREFBd0Q7Ozs7O0lBQ3hELCtDQUFrRDs7Ozs7SUFDbEQsMkNBQThDOzs7OztJQUM5QyxtREFBc0Q7Ozs7O0lBQ3RELG1EQUFzRDs7Ozs7SUFDdEQsc0RBQXlEOzs7OztJQUN6RCw4Q0FBaUQ7Ozs7O0lBQ2pELHFDQUFtQzs7Ozs7SUFDbkMsaUNBQXVCOzs7OztJQUdyQiwrQ0FBa0Q7Ozs7O0lBQ2xELDZDQUErQzs7Ozs7SUFDL0MsOENBQXNEOzs7OztJQUN0RCx1Q0FBd0M7Ozs7O0lBQ3hDLHdDQUE0Qzs7Ozs7SUFDNUMsaUNBQXNCOzs7OztJQUN0Qiw4QkFBOEI7Ozs7O0lBQzlCLG1DQUEwQjs7Ozs7SUFDMUIsbUNBQTBCOzs7OztJQUMxQixtQ0FBcUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIE9uSW5pdCxcbiAgT25EZXN0cm95LFxuICBBZnRlclZpZXdDaGVja2VkLFxuICBWaWV3Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIENvbXBpbGVyLFxuICBJbnB1dCxcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIEluamVjdG9yLFxuICBJbmplY3QsXG4gIFBMQVRGT1JNX0lEXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyLCBOYXZpZ2F0aW9uRW5kLCBOYXZpZ2F0aW9uU3RhcnQgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgVmVyZG9jc1N0YXRlU2VydmljZSwgVmVyZG9jc0F1dGhTZXJ2aWNlLCBWZXJkb2NzVG9rZW5PYmplY3RTZXJ2aWNlIH0gZnJvbSAnQHZlcmRvY3MvdG9rZW5zJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRpc3RpbmN0VW50aWxDaGFuZ2VkIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgZmluZEluZGV4IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgVmVyZG9jc0hlYWRlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2hlYWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IFRlbXBsYXRlc0d1YXJkU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvdGVtcGxhdGVzLmd1YXJkJztcbmltcG9ydCB7IElUZW1wbGF0ZSwgRW52ZWxvcGUsIFRlbXBsYXRlQWN0aW9ucyB9IGZyb20gJy4vbW9kZWxzL3ZlcmRvY3MubW9kZWwnO1xuaW1wb3J0IHsgY29ubmVjdGlvbkNvbmZpZywgY29ubmVjdGlvbkNvbmZpZ1Rva2VuIH0gZnJvbSAnLi9oZWFkZXIubW9kdWxlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndmVyZG9jcy1oZWFkZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vaGVhZGVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaGVhZGVyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgSGVhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuICBwdWJsaWMgcGFnZUxvYWRpbmcgPSB0cnVlO1xuICBwdWJsaWMgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25Db25maWc7XG4gIHB1YmxpYyB0aXRsZTogc3RyaW5nO1xuICBwdWJsaWMgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG4gIHB1YmxpYyBoZWFkZXJUaXRsZSA9ICdFbnZlbG9wZSc7XG4gIHB1YmxpYyBtb2RlID0gJyc7XG4gIHB1YmxpYyBzZWFyY2hBY3RpdmUgPSBmYWxzZTtcbiAgcHVibGljIHRlbXBsYXRlTmFtZSA9ICcnO1xuICBwdWJsaWMgbmV3VGVtcGxhdGVOYW1lID0gbnVsbDtcbiAgcHVibGljIHNhdmVTdGF0dXMgPSAnJztcbiAgcHVibGljIG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvbltdID0gW107XG4gIHB1YmxpYyBsb2FkaW5nID0gZmFsc2U7XG4gIHB1YmxpYyBteUFjY291bnRVcmw6IHN0cmluZztcbiAgcHVibGljIHRlcm1zVXJsOiBzdHJpbmc7XG4gIHB1YmxpYyBwcml2YWN5VXJsOiBzdHJpbmc7XG4gIHB1YmxpYyBuZXdQcm9maWxlOiBhbnk7XG4gIHB1YmxpYyBvcmdhbml6YXRpb25faWQ6IHN0cmluZztcbiAgcHVibGljIGVtYWlsVmVyaWZpZWQ6IGJvb2xlYW47XG4gIHB1YmxpYyBvcmdhbml6YXRpb25JbWdTcmM6IHN0cmluZztcbiAgcHVibGljIGNzdkJsb2I6IEJsb2IgPSBudWxsO1xuICBwdWJsaWMgdGVtcGxhdGVEZXRhaWxzRXhwYW5kZWQgPSB0cnVlO1xuICBwdWJsaWMgdGVtcGxhdGU6IElUZW1wbGF0ZSA9IG51bGw7XG4gIHB1YmxpYyBpc1NlYXJjaGluZyA9IGZhbHNlO1xuICBwdWJsaWMgZW52ZWxvcGVSZXN1bHQ6IEVudmVsb3BlW107XG4gIHB1YmxpYyB0ZW1wbGF0ZVJlc3VsdDogSVRlbXBsYXRlW107XG4gIHB1YmxpYyBjdXJyZW50UHJvZmlsZTogYW55ID0gbnVsbDtcbiAgcHVibGljIGlucHV0Rm9jdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgbWFuYWdlTGluazogc3RyaW5nO1xuICBwdWJsaWMgdGVtcGxhdGVzTGluazogc3RyaW5nO1xuICBwdWJsaWMgclNlY3VyZUZyb250RW5kOiBzdHJpbmc7XG4gIHB1YmxpYyByRm9ybUZyb250RW5kOiBzdHJpbmc7XG4gIHB1YmxpYyBpc0xpdmVWaWV3ID0gZmFsc2U7XG4gIHB1YmxpYyB2ZXJkb2NzX3VybDogc3RyaW5nO1xuICBwdWJsaWMgaW1hZ2VfdXJsOiBzdHJpbmc7XG4gIHB1YmxpYyBpc0F0T3JpZ2luYWxPcmlnaW46IGJvb2xlYW47XG4gIHB1YmxpYyBhcHBfdmVyc2lvbjogc3RyaW5nID0gJyc7XG4gIHB1YmxpYyBjdXJyZW50QXQ6IHN0cmluZyA9ICcnXG5cbiAgQElucHV0KCkgY3VycmVudE9yaWdpbjogJ3JGb3JtJyB8ICdyQWNjb3VudCcgfCAnclNlY3VyZSc7XG5cbiAgQFZpZXdDaGlsZCgnaGVhZGVyQ29udGFpbmVyJywgeyBzdGF0aWM6IGZhbHNlIH0pIGhlYWRlcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnc2VhcmNoJywgeyBzdGF0aWM6IGZhbHNlIH0pIHNlYXJjaEJhcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgndGVtcGxhdGVUaXRsZScsIHsgc3RhdGljOiBmYWxzZSB9KSB0ZW1wbGF0ZVRpdGxlSW5wdXQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3ByZXZpZXdJbnB1dCcsIHsgc3RhdGljOiBmYWxzZSB9KSBwcmV2aWV3SW5wdXQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2dlbmVyYWxJbnB1dCcsIHsgc3RhdGljOiBmYWxzZSB9KSBnZW5lcmFsSW5wdXQ6IEVsZW1lbnRSZWY7XG5cbiAgcHJpdmF0ZSBzaWRlbmF2T3BlbjogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfY2FuU3RhcjogYm9vbGVhbiA9IG51bGw7XG4gIHByaXZhdGUgX2NhbkNyZWF0ZTogYm9vbGVhbiA9IG51bGw7XG4gIHByaXZhdGUgX2NhbkVkaXQ6IGJvb2xlYW4gPSBudWxsO1xuICBwcml2YXRlIF91c2VyU3RhcnJlZDogYm9vbGVhbiA9IG51bGw7XG4gIHByaXZhdGUgbWV0YURhdGFTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgdGl0bGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgdGl0bGVJbnB1dFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSB0aXRsZUtleURvd25TdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgdGVtcGxhdGVOYW1lU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIHRlbXBsYXRlU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIHNhdmVTdGF0dXNTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgcHJvZmlsZUxvYWRpbmdTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgdXNlckRhdGFTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgbW9kZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSBwcmV2aWV3SW5wdXRTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIHByaXZhdGUgZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIG5hdmlnYXRpb25FdmVudFN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgcHJpdmF0ZSBjc3ZCbG9iU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICBwcml2YXRlIGlucHV0VGltZXI6IE5vZGVKUy5UaW1lb3V0O1xuICBwcml2YXRlIG9yaWdpbjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdmVyZG9jc0hlYWRlclNlcnZpY2U6IFZlcmRvY3NIZWFkZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgdlRva2VuU3RhdGVTZXJ2aWNlOiBWZXJkb2NzU3RhdGVTZXJ2aWNlLFxuICAgIHByaXZhdGUgdlRva2VuT2JqZWN0U2VydmljZTogVmVyZG9jc1Rva2VuT2JqZWN0U2VydmljZSxcbiAgICBwcml2YXRlIHZBdXRoU2VydmljZTogVmVyZG9jc0F1dGhTZXJ2aWNlLFxuICAgIHByaXZhdGUgdGVtcGxhdGVHdWFyZDogVGVtcGxhdGVzR3VhcmRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgY29tcGlsZXI6IENvbXBpbGVyLFxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxuICAgIEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcGxhdGZvcm1cbiAgKSB7XG4gICAgdGhpcy5jb25uZWN0aW9ucyA9IHRoaXMuaW5qZWN0b3IuZ2V0KGNvbm5lY3Rpb25Db25maWdUb2tlbik7XG4gICAgdGhpcy5teUFjY291bnRVcmwgPSB0aGlzLmNvbm5lY3Rpb25zLnJBY2NvdW50X2Zyb250ZW5kX3VybCArICcvckFjY291bnQnO1xuICAgIHRoaXMudGVybXNVcmwgPSB0aGlzLmNvbm5lY3Rpb25zLnJTZWN1cmVfZnJvbnRlbmRfdXJsICsgJy90ZXJtcyc7XG4gICAgdGhpcy5wcml2YWN5VXJsID0gdGhpcy5jb25uZWN0aW9ucy5yU2VjdXJlX2Zyb250ZW5kX3VybCArICcvcHJpdmFjeSc7XG4gICAgdGhpcy5vcmdhbml6YXRpb25JbWdTcmMgPSBgJHt0aGlzLmNvbm5lY3Rpb25zLnJBY2NvdW50X2Zyb250ZW5kX3VybH0vYXNzZXRzL29yZ2FuaXphdGlvbi9zZWxlY3QtcHJvZmlsZS5wbmdgO1xuICAgIHRoaXMudmVyZG9jc191cmwgPSB0aGlzLmNvbm5lY3Rpb25zLnJGb3JtX2Zyb250ZW5kX3VybDtcbiAgICB0aGlzLm1hbmFnZUxpbmsgPSBgJHt0aGlzLnZlcmRvY3NfdXJsfS9tYW5hZ2VgO1xuICAgIHRoaXMudGVtcGxhdGVzTGluayA9IGAke3RoaXMudmVyZG9jc191cmx9L3RlbXBsYXRlc2A7XG4gICAgdGhpcy5yU2VjdXJlRnJvbnRFbmQgPSB0aGlzLmNvbm5lY3Rpb25zLnJTZWN1cmVfZnJvbnRlbmRfdXJsO1xuICAgIHRoaXMuckZvcm1Gcm9udEVuZCA9IHRoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsO1xuICAgIHRoaXMuY3VycmVudE9yaWdpbiA9IHRoaXMuY29ubmVjdGlvbnMub3JpZ2luO1xuICAgIHRoaXMuY3VycmVudEF0ID0gdGhpcy5jdXJyZW50T3JpZ2luO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZVN1YnNjcmlwdGlvbiA9IHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UudGVtcGxhdGVTdWJqZWN0LnN1YnNjcmliZSgodGVtcGxhdGU6IElUZW1wbGF0ZSkgPT4ge1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgdGhpcy51cGRhdGVTdGFyKCk7XG4gICAgfSk7XG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm0pKSB7XG4gICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbiB8fCB0aGlzLmNvbm5lY3Rpb25zLmFwcF92ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMub3JpZ2luID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgKHdpbmRvdy5sb2NhdGlvbi5wb3J0ID8gJzonICsgd2luZG93LmxvY2F0aW9uLnBvcnQ6ICcnKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9yaWdpbiAmJiB0aGlzLm9yaWdpbi5pbmNsdWRlcygnL3N0YWdlLicpIHx8IHRoaXMub3JpZ2luLmluY2x1ZGVzKCcvbG9jYWxob3N0JykpIHtcbiAgICAgICAgdGhpcy5hcHBfdmVyc2lvbiA9IHRoaXMuY29ubmVjdGlvbnMuYXBwX3ZlcnNpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFwcF92ZXJzaW9uID0gJyc7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdGhpcy52QXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gdGhpcy52VG9rZW5TdGF0ZVNlcnZpY2UuZ2V0RW1haWxWZXJpZmljYXRpb24oKTtcbiAgICB0aGlzLm5hdmlnYXRpb25FdmVudFN1YnNjcmlwdGlvbiA9IHRoaXMucm91dGVyLmV2ZW50cy5zdWJzY3JpYmUoZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvbkVuZCkge1xuICAgICAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA9IHRoaXMudkF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xuICAgICAgICBpZiAoZXZlbnQgJiYgZXZlbnQudXJsICYmICgoZXZlbnQudXJsLmluY2x1ZGVzKCdkb2N1bWVudC8nKSAmJiAhZXZlbnQudXJsLmluY2x1ZGVzKCdlbnZlbG9wZXMvZG9jdW1lbnQnKSkgfHwgZXZlbnQudXJsLmluY2x1ZGVzKCd2aWV3L2xpdmUvJykpKSB7XG4gICAgICAgICAgdGhpcy5pc0F0T3JpZ2luYWxPcmlnaW4gPSB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLmdldEF0T3JpZ2luKHRoaXMuY3VycmVudE9yaWdpbik7XG4gICAgICAgICAgdGhpcy5jdXJyZW50QXQgPSB0aGlzLmN1cnJlbnRPcmlnaW47XG4gICAgICAgICAgdGhpcy5tb2RlID0gJ3ByZXZpZXcnO1xuICAgICAgICAgIGlmIChldmVudC51cmwuaW5jbHVkZXMoJ3ZpZXcvbGl2ZS8nKSkge1xuICAgICAgICAgICAgdGhpcy5pc0xpdmVWaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVEZXRhaWxzRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0xpdmVWaWV3ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kZSA9ICdub3QtcHJldmlldyc7XG4gICAgICAgICAgdGhpcy5pc0xpdmVWaWV3ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9kZSAhPT0gJ3ByZXZpZXcnKSB7XG4gICAgICAgICAgdGhpcy5pbWFnZV91cmwgPSBgJHt0aGlzLmNvbm5lY3Rpb25zLnJGb3JtX2Zyb250ZW5kX3VybH0vYXNzZXRzL3doaXRlLWxvZ28uc3ZnYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmltYWdlX3VybCA9IGAke3RoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsfS9hc3NldHMvYnJlYWstYmxhY2stbG9nby5zdmdgO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0UHJvZmlsZSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXIoKTtcbiAgICAgICAgdGhpcy5jaGVja0NhblN0YXIoKTtcbiAgICAgICAgdGhpcy5fY2FuRWRpdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY2FuQ3JlYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBhZ2VMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvblN0YXJ0KSB7XG4gICAgICAgIHRoaXMucGFnZUxvYWRpbmcgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudGl0bGVTdWJzY3JpcHRpb24gPSB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnRpdGxlU3ViamVjdC5zdWJzY3JpYmUodGl0bGUgPT4ge1xuICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuY3N2QmxvYlN1YnNjcmlwdGlvbiA9IHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UuY3N2QmxvYlN1YmplY3Quc3Vic2NyaWJlKGJsb2IgPT4ge1xuICAgICAgaWYgKGJsb2IpIHtcbiAgICAgICAgdGhpcy5jc3ZCbG9iID0gYmxvYjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3N2QmxvYiA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zYXZlU3RhdHVzU3Vic2NyaXB0aW9uID0gdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5zYXZlU3RhdHVzU3ViamVjdC5zdWJzY3JpYmUoc3RhdHVzID0+IHtcbiAgICAgIHRoaXMuc2F2ZVN0YXR1cyA9IHN0YXR1cztcbiAgICB9KTtcbiAgICB0aGlzLnByb2ZpbGVMb2FkaW5nU3Vic2NyaXB0aW9uID0gdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5wcm9maWxlTG9hZGluZ1N1YmplY3Quc3Vic2NyaWJlKHN0YXR1cyA9PiB7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBzdGF0dXM7XG4gICAgfSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XG4gICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5tZXRhRGF0YVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMudGl0bGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnRpdGxlSW5wdXRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnRpdGxlS2V5RG93blN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMudGVtcGxhdGVOYW1lU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy50ZW1wbGF0ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuc2F2ZVN0YXR1c1N1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMucHJvZmlsZUxvYWRpbmdTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB0aGlzLnVzZXJEYXRhU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgdGhpcy5tb2RlU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgaWYgKCEhdGhpcy5nZW5lcmFsSW5wdXRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICghIXRoaXMucHJldmlld0lucHV0U3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLnByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICB0aGlzLm5hdmlnYXRpb25FdmVudFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuY3N2QmxvYlN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuY29tcGlsZXIuY2xlYXJDYWNoZSgpO1xuICB9XG5cbiAgYXN5bmMgaW5pdCgpIHtcbiAgICBpZiAodGhpcy52QXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkgJiYgdGhpcy5tb2RlICE9PSAndmlldycpIHtcbiAgICAgIGF3YWl0IHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UuaW5pdE5vdGlmaWNhdGlvblNlcnZpY2UoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaG9tZV91cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMudlRva2VuU3RhdGVTZXJ2aWNlLmdldElEVG9rZW4oKSA/IHRoaXMuY29ubmVjdGlvbnMuckZvcm1fZnJvbnRlbmRfdXJsICsgJy9kYXNoYm9hcmQnIDogdGhpcy5jb25uZWN0aW9ucy5yRm9ybV9mcm9udGVuZF91cmw7XG4gIH1cblxuICBwcmV2aWV3SW5wdXRFdmVudChldmVudCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLmlucHV0VGltZXIpO1xuICAgIHRoaXMuaW5wdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHRzKHRoaXMucHJldmlld0lucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW5wdXRUaW1lcik7XG4gICAgfSwgNTAwKTtcbiAgfVxuXG4gIGdlbmVyYWxJbnB1dEV2ZW50KGV2ZW50KSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuaW5wdXRUaW1lcik7XG4gICAgdGhpcy5pbnB1dFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHModGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnB1dFRpbWVyKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgcHJlcGFyZVNlYXJjaElucHV0KCkge1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdwcmV2aWV3Jykge1xuICAgICAgdGhpcy5saXN0ZW5Gb3JQcmV2aWV3SW5wdXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXN0ZW5Gb3JHZW5lcmFsSW5wdXQoKTtcbiAgICB9XG4gIH1cblxuICBsaXN0ZW5Gb3JQcmV2aWV3SW5wdXQoKSB7XG4gICAgaWYgKHRoaXMuZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uKSB7XG4gICAgICB0aGlzLmdlbmVyYWxJbnB1dFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcmV2aWV3SW5wdXQpIHtcbiAgICAgIGlmICghdGhpcy5wcmV2aWV3SW5wdXRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5wcmV2aWV3SW5wdXRTdWJzY3JpcHRpb24gPSBmcm9tRXZlbnQodGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudCwgJ2tleXVwJylcbiAgICAgICAgICAucGlwZShcbiAgICAgICAgICAgIGRlYm91bmNlVGltZSg1MDApLFxuICAgICAgICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKVxuICAgICAgICAgICkuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5TmFtZSA9IGV2ZW50Wydjb2RlJ10gfHwgZXZlbnRbJ2tleSddO1xuICAgICAgICAgICAgaWYgKGtleU5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKGtleU5hbWUgIT09ICdFbnRlcicgJiYga2V5TmFtZSAhPT0gJ0Fycm93RG93bicgJiYga2V5TmFtZSAhPT0gJ0Fycm93VXAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHRzKHRoaXMucHJldmlld0lucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHModGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbGlzdGVuRm9yR2VuZXJhbElucHV0KCkge1xuICAgIGlmICh0aGlzLnByZXZpZXdJbnB1dFN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5wcmV2aWV3SW5wdXRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2VuZXJhbElucHV0KSB7XG4gICAgICBpZiAoIXRoaXMuZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhbElucHV0U3Vic2NyaXB0aW9uID0gZnJvbUV2ZW50KHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQsICdrZXl1cCcpXG4gICAgICAgICAgLnBpcGUoXG4gICAgICAgICAgICBkZWJvdW5jZVRpbWUoNTAwKSxcbiAgICAgICAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKClcbiAgICAgICAgICApLnN1YnNjcmliZSgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleU5hbWUgPSBldmVudFsnY29kZSddIHx8IGV2ZW50WydrZXknXTtcbiAgICAgICAgICAgIGlmIChrZXlOYW1lKSB7XG4gICAgICAgICAgICAgIGlmIChrZXlOYW1lICE9PSAnRW50ZXInICYmIGtleU5hbWUgIT09ICdBcnJvd0Rvd24nICYmIGtleU5hbWUgIT09ICdBcnJvd1VwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0cyh0aGlzLmdlbmVyYWxJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHRzKHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBjYW5TdGFyKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW5TdGFyO1xuICB9XG5cbiAgZ2V0IHVzZXJTdGFycmVkKCkge1xuICAgIHJldHVybiB0aGlzLl91c2VyU3RhcnJlZDtcbiAgfVxuXG4gIGdldCBjYW5FZGl0KCkge1xuICAgIGlmICh0eXBlb2YgKHRoaXMuX2NhbkVkaXQpICE9PSAnYm9vbGVhbicgJiYgdGhpcy50ZW1wbGF0ZUd1YXJkICYmIHRoaXMuaXNBdXRoZW50aWNhdGVkICYmIHRoaXMudGVtcGxhdGUpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy50ZW1wbGF0ZUd1YXJkLmNhblBlcmZvcm1BY3Rpb24oVGVtcGxhdGVBY3Rpb25zLldSSVRFLCB0aGlzLnRlbXBsYXRlKTtcbiAgICAgIHRoaXMuX2NhbkVkaXQgPSByZXNwb25zZVsnY2FuUGVyZm9ybSddXG4gICAgfVxuICAgIGlmICghdGhpcy5pc0F1dGhlbnRpY2F0ZWQgJiYgdGhpcy50ZW1wbGF0ZSkge1xuICAgICAgdGhpcy5fY2FuRWRpdCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FuRWRpdFxuICB9XG5cbiAgZ2V0IGNhbkNyZWF0ZSgpIHtcbiAgICBpZiAodGhpcy5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIGlmICh0eXBlb2YgKHRoaXMuX2NhbkNyZWF0ZSkgIT09ICdib29sZWFuJykge1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IHRoaXMudlRva2VuT2JqZWN0U2VydmljZS5nZXRWZXJkb2NzUGVybWlzc2lvbnMoKTtcbiAgICAgICAgdGhpcy5fY2FuQ3JlYXRlID0gZmFsc2U7XG4gICAgICAgIGlmIChwZXJtaXNzaW9ucyAmJiBwZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcGVybWlzc2lvbnMuZm9yRWFjaChwZXJtaXNzaW9uID0+IHtcbiAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uLmluY2x1ZGVzKCdjcmVhdG9yOmNyZWF0ZScpKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYW5DcmVhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fY2FuQ3JlYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJvZmlsZSgpIHtcbiAgICBpZiAodGhpcy5pc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHRoaXMuY3VycmVudFByb2ZpbGUgPSB0aGlzLnZUb2tlbk9iamVjdFNlcnZpY2UuZ2V0UHJvZmlsZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNlbGVjdGVkKGV2ZW50KSB7XG4gICAgaWYgKCh0aGlzLmdlbmVyYWxJbnB1dCAmJiB0aGlzLmdlbmVyYWxJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlKSB8fCAodGhpcy5wcmV2aWV3SW5wdXQgJiYgdGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSkpIHtcbiAgICAgIGV2ZW50Lm9wdGlvbi5fZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuICB9XG5cbiAgY2hlY2tDYW5TdGFyKCkge1xuICAgIHRoaXMuX2NhblN0YXIgPSB0aGlzLmlzQXV0aGVudGljYXRlZDtcbiAgfVxuXG4gIGdldFNlYXJjaFJlc3VsdHMoc2VhcmNoX3N0cmluZzogc3RyaW5nKSB7XG4gICAgdGhpcy5pc1NlYXJjaGluZyA9IHRydWU7XG4gICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnNlYXJjaEVudmVsb3Blcyh7IGVudmVsb3BlX25hbWU6IHNlYXJjaF9zdHJpbmcsIHJvdzogMyB9KS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEh0dHBSZXNwb25zZSkge1xuICAgICAgICAgIHRoaXMuZW52ZWxvcGVSZXN1bHQgPSByZXN1bHQuYm9keVsncmVzdWx0J10gYXMgRW52ZWxvcGVbXTtcbiAgICAgICAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLnNlYXJjaFRlbXBsYXRlcyh7IG5hbWU6IHNlYXJjaF9zdHJpbmcsIHJvdzogMyB9KS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBIdHRwUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVJlc3VsdCA9IHJlc3VsdC5ib2R5WydyZXN1bHQnXSBhcyBJVGVtcGxhdGVbXTtcbiAgICAgICAgICAgICAgdGhpcy5pc1NlYXJjaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS5zZWFyY2hUZW1wbGF0ZXMoeyBuYW1lOiBzZWFyY2hfc3RyaW5nLCByb3c6IDMgfSkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBIdHRwUmVzcG9uc2UpIHtcbiAgICAgICAgICB0aGlzLnRlbXBsYXRlUmVzdWx0ID0gcmVzdWx0LmJvZHlbJ3Jlc3VsdCddIGFzIElUZW1wbGF0ZVtdO1xuICAgICAgICAgIHRoaXMuaXNTZWFyY2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmVjaXBpZW50VHJhY2tpbmcoaW5kZXgsIGl0ZW0pIHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICB0b2dnbGVNZW51KCkge1xuICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UudG9nZ2xlU2lkZW5hdighdGhpcy5zaWRlbmF2T3Blbik7XG4gIH1cblxuICBzZXRJbnB1dEZvY3VzZWQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmlucHV0Rm9jdXNlZCA9IHZhbHVlO1xuICB9XG5cbiAgaGFzUHJvcChvYmo6IGFueSwga2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gb2JqLmhhc093blByb3BlcnR5KGtleSk7XG4gIH1cblxuICByb2xlQ29sb3IobmFtZSkge1xuICAgIHJldHVybiB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLmdldFJvbGVDb2xvcihuYW1lKTtcbiAgfVxuXG4gIHRvZ2dsZVNpZGVuYXYoKSB7XG4gICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50b2dnbGVCdWlsZGVyU2lkZU5hdigpO1xuICB9XG5cbiAgdG9nZ2xlVGVtcGxhdGVEZXRhaWxzKCkge1xuICAgIHRoaXMudGVtcGxhdGVEZXRhaWxzRXhwYW5kZWQgPSAhdGhpcy50ZW1wbGF0ZURldGFpbHNFeHBhbmRlZDtcbiAgICBpZiAodGhpcy50ZW1wbGF0ZURldGFpbHNFeHBhbmRlZCkge1xuICAgICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50ZW1wbGF0ZURldGFpbFRvZ2dsZVN1YmplY3QubmV4dCh0cnVlKTtcbiAgICB9XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnRlbXBsYXRlTmFtZSA9ICdVbml0aXRsZWQnO1xuICAgIC8vIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UudGVtcGxhdGVOYW1lU3ViamVjdC5uZXh0KCdVbnRpdGxlZCcpO1xuICB9XG5cbiAgZ2V0Um9sZU5hbWVzKHJvbGVzKSB7XG4gICAgaWYgKHJvbGVzICYmIHJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxhc3RfaW5kZXggPSByb2xlcy5sZW5ndGggLSAxO1xuICAgICAgbGV0IG5hbWVzX3N0cmluZyA9ICcnO1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCByb2xlcy5sZW5ndGg7IHgrKykge1xuICAgICAgICBpZiAoeCA8IGxhc3RfaW5kZXgpIHtcbiAgICAgICAgICBuYW1lc19zdHJpbmcgKz0gcm9sZXNbeF1bJ2Z1bGxfbmFtZSddICsgJywgJyBhcyBzdHJpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmFtZXNfc3RyaW5nICs9IHJvbGVzW3hdWydmdWxsX25hbWUnXSBhcyBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuYW1lc19zdHJpbmc7XG4gICAgfVxuICB9XG5cbiAgZ2V0VGVtcGxhdGVTdGF0cyh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0VGVtcGxhdGVQYWdlcyh0ZW1wbGF0ZSl9ICAke3RoaXMuZ2V0VGVtcGxhdGVTZXF1ZW5jZSh0ZW1wbGF0ZSl9ICAke3RoaXMuZ2V0VGVtcGxhdGVSZWNpcGllbnRzKHRlbXBsYXRlKX1gO1xuICB9XG5cbiAgZ2V0VGVtcGxhdGVQYWdlcyh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgaWYgKHRlbXBsYXRlICYmIHRlbXBsYXRlLnBhZ2VzKSB7XG4gICAgICByZXR1cm4gYCR7dGVtcGxhdGUucGFnZXMubGVuZ3RoID49IDIgPyB0ZW1wbGF0ZS5wYWdlcy5sZW5ndGggKyAnIFBhZ2VzJyA6ICcxIFBhZ2UnfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnMCBQYWdlJztcbiAgICB9XG4gIH1cblxuICBnZXRUZW1wbGF0ZVNlcXVlbmNlKHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucm9sZXMpIHtcbiAgICAgIGxldCBoYXNQcmVwYXJlciA9IGZhbHNlO1xuICAgICAgbGV0IG1heFNlcXVlbmNlID0gLTE7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRlbXBsYXRlLnJvbGVzLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgIGlmICh0ZW1wbGF0ZS5yb2xlc1t4XS5zZXF1ZW5jZSA+IG1heFNlcXVlbmNlKSB7XG4gICAgICAgICAgbWF4U2VxdWVuY2UgPSB0ZW1wbGF0ZS5yb2xlc1t4XS5zZXF1ZW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGVtcGxhdGUucm9sZXNbeF0uc2VxdWVuY2UgPT09IDApIHtcbiAgICAgICAgICBoYXNQcmVwYXJlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdG90YWxTZXF1ZW5jZSA9IGhhc1ByZXBhcmVyID8gbWF4U2VxdWVuY2UgKyAxIDogbWF4U2VxdWVuY2U7XG4gICAgICByZXR1cm4gdG90YWxTZXF1ZW5jZSA+IDEgPyB0b3RhbFNlcXVlbmNlICsgJyBTZXF1ZW5jZXMnIDogJzEgU2VxdWVuY2UnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJzAgU2VxdWVuY2UnO1xuICAgIH1cbiAgfVxuXG4gIGdldFRlbXBsYXRlUmVjaXBpZW50cyh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgaWYgKHRlbXBsYXRlICYmIHRlbXBsYXRlLnJvbGVzKSB7XG4gICAgICBjb25zdCB0b3RhbFJlY2lwaWVudHMgPSB0ZW1wbGF0ZS5yb2xlcy5sZW5ndGg7XG4gICAgICByZXR1cm4gdG90YWxSZWNpcGllbnRzID4gMSA/IHRvdGFsUmVjaXBpZW50cyArICcgUmVjaXBpZW50cycgOiAnMSBSZWNpcGllbnQnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJzAgUmVjaXBpZW50J1xuICAgIH1cbiAgfVxuXG4gIGdvVG9FbnZlbG9wZShlbnZlbG9wZV9pZDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudE9yaWdpbiA9PT0gJ3JGb3JtJyAmJiB0aGlzLmlzQXRPcmlnaW5hbE9yaWdpbikge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2AvZW52ZWxvcGUvJHtlbnZlbG9wZV9pZH1gXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLmNvbm5lY3Rpb25zLnJGb3JtX2Zyb250ZW5kX3VybH0vZW52ZWxvcGUvJHtlbnZlbG9wZV9pZH1gO1xuICAgIH1cbiAgICB0aGlzLmNsZWFyU2VhcmNoSW5wdXRzKCk7XG4gIH1cblxuICBnb1RvVGVtcGxhdGUodGVtcGxhdGU6IElUZW1wbGF0ZSkge1xuICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2Uub3BlblRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICB0aGlzLmNsZWFyU2VhcmNoSW5wdXRzKCk7XG4gIH1cblxuICBnb1RvVGVtcGxhdGVzKGtleXdvcmQpIHtcbiAgICB0aGlzLnZlcmRvY3NIZWFkZXJTZXJ2aWNlLm9wZW5UZW1wbGF0ZXMoa2V5d29yZCk7XG4gIH1cblxuICBzZWFyY2hFbnZlbG9wZXMoKSB7XG4gICAgY29uc3Qga2V5d29yZCA9IHRoaXMuZ2V0U2VhcmNoS2V5d29yZCgpO1xuICAgIGlmIChrZXl3b3JkICE9PSAnJykge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2AvbWFuYWdlYF0sIHsgcXVlcnlQYXJhbXM6IHsgZW52ZWxvcGVfbmFtZToga2V5d29yZCB9IH0pO1xuICAgICAgdGhpcy5jbGVhclNlYXJjaElucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHNlYXJjaFJlY2lwaWVudHMoKSB7XG4gICAgY29uc3Qga2V5d29yZCA9IHRoaXMuZ2V0U2VhcmNoS2V5d29yZCgpO1xuICAgIGlmIChrZXl3b3JkICE9PSAnJykge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2AvbWFuYWdlYF0sIHsgcXVlcnlQYXJhbXM6IHsgcmVjaXBpZW50X25hbWU6IGtleXdvcmQgfSB9KTtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dHMoKTtcbiAgICB9XG4gIH1cblxuICBzZWFyY2hUZW1wbGF0ZXMoKSB7XG4gICAgY29uc3Qga2V5d29yZCA9IHRoaXMuZ2V0U2VhcmNoS2V5d29yZCgpO1xuICAgIGlmIChrZXl3b3JkICE9PSAnJykge1xuICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2AvdGVtcGxhdGVzYF0sIHsgcXVlcnlQYXJhbXM6IHsgbmFtZToga2V5d29yZCB9IH0pO1xuICAgICAgdGhpcy5jbGVhclNlYXJjaElucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIGdldFNlYXJjaEtleXdvcmQoKSB7XG4gICAgaWYgKHRoaXMucHJldmlld0lucHV0ICYmIHRoaXMucHJldmlld0lucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByZXZpZXdJbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5nZW5lcmFsSW5wdXQgJiYgdGhpcy5nZW5lcmFsSW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGNsZWFyU2VhcmNoSW5wdXRzKCkge1xuICAgIGlmICh0aGlzLnByZXZpZXdJbnB1dCkge1xuICAgICAgdGhpcy5wcmV2aWV3SW5wdXQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBpZiAodGhpcy5nZW5lcmFsSW5wdXQpIHtcbiAgICAgIHRoaXMuZ2VuZXJhbElucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSAnJztcbiAgICB9XG4gICAgdGhpcy5lbnZlbG9wZVJlc3VsdCA9IFtdO1xuICAgIHRoaXMudGVtcGxhdGVSZXN1bHQgPSBbXTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXIoKSB7XG4gICAgaWYgKHRoaXMudGVtcGxhdGUgJiYgdGhpcy5jdXJyZW50UHJvZmlsZSAmJiB0aGlzLnRlbXBsYXRlLnRlbXBsYXRlX3N0YXJzKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1N0YXJJbmRleCA9IGZpbmRJbmRleCh0aGlzLnRlbXBsYXRlLnRlbXBsYXRlX3N0YXJzLCB7IHByb2ZpbGVfaWQ6IHRoaXMuY3VycmVudFByb2ZpbGUuaWQsIHRlbXBsYXRlX2lkOiB0aGlzLnRlbXBsYXRlLmlkIH0pO1xuICAgICAgdGhpcy5fdXNlclN0YXJyZWQgPSBleGlzdGluZ1N0YXJJbmRleCA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3RhclRlbXBsYXRlKCkge1xuICAgIGlmICh0aGlzLmNhblN0YXIpIHtcbiAgICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2Uuc3RhclRlbXBsYXRlKHRoaXMudGVtcGxhdGUuaWQpLnN1YnNjcmliZShyZXMgPT4ge1xuICAgICAgICB0aGlzLnRlbXBsYXRlLnRlbXBsYXRlX3N0YXJzLnB1c2gocmVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGFyKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdGhpcy5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHVuc3RhclRlbXBsYXRlKCkge1xuICAgIGlmICh0aGlzLmNhblN0YXIpIHtcbiAgICAgIHRoaXMudmVyZG9jc0hlYWRlclNlcnZpY2UudW5zdGFyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZS5pZCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRTdGFySW5kZXggPSBmaW5kSW5kZXgodGhpcy50ZW1wbGF0ZS50ZW1wbGF0ZV9zdGFycywgeyBwcm9maWxlX2lkOiB0aGlzLmN1cnJlbnRQcm9maWxlLmlkLCB0ZW1wbGF0ZV9pZDogdGhpcy50ZW1wbGF0ZS5pZCB9KTtcbiAgICAgICAgaWYgKHJlbW92ZWRTdGFySW5kZXggPiAtMSkge1xuICAgICAgICAgIHRoaXMudGVtcGxhdGUudGVtcGxhdGVfc3RhcnMuc3BsaWNlKHJlbW92ZWRTdGFySW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMudXBkYXRlU3RhcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzQXV0aGVudGljYXRlZCkge1xuICAgICAgdGhpcy5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGVkaXRUZW1wbGF0ZSgpIHtcbiAgICBpZiAodGhpcy5jYW5FZGl0KSB7XG4gICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYC9idWlsZGVyLyR7dGhpcy50ZW1wbGF0ZS5pZH0vZmllbGRzYF0pO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICB0aGlzLmNyZWF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlVGVtcGxhdGUoKSB7XG4gICAgdGhpcy52ZXJkb2NzSGVhZGVyU2VydmljZS50b2dnbGVDcmVhdGUoKTtcbiAgfVxuXG59XG4iXX0=