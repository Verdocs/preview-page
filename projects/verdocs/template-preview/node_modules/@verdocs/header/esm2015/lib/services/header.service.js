/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable, Injector, Inject, PLATFORM_ID } from '@angular/core';
import { isPlatformServer, isPlatformBrowser } from '@angular/common';
import { HttpClient, HttpResponse, HttpRequest, HttpHeaders } from '@angular/common/http';
import { Router } from '@angular/router';
import { MatSnackBar } from '@angular/material/snack-bar';
import { MatDialog } from '@angular/material/dialog';
import { ReplaySubject, Subject, BehaviorSubject, EMPTY } from 'rxjs';
import { map, catchError } from 'rxjs/operators';
import { findIndex, filter } from 'lodash';
import { saveAs } from 'file-saver';
import { ProfileModel, ProfileCollection } from '@verdocs/profiles';
import { VerdocsStateService, VerdocsTokenObjectService } from '@verdocs/tokens';
import { connectionConfigToken } from '../header.module';
import { TemplatesGuardService } from './templates.guard';
import { TemplateActions } from '../models/verdocs.model';
import { FourOhOneDialog } from '../error-dialogs/four-oh-one.dialog';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "@angular/router";
import * as i3 from "@angular/material/snack-bar";
import * as i4 from "@angular/material/dialog";
import * as i5 from "./templates.guard";
import * as i6 from "@verdocs/tokens";
export class VerdocsHeaderService {
    /**
     * @param {?} injector
     * @param {?} http
     * @param {?} router
     * @param {?} snackbar
     * @param {?} dialog
     * @param {?} templateGuard
     * @param {?} vTokenStateService
     * @param {?} vTokenObjectService
     * @param {?} platform
     */
    constructor(injector, http, router, snackbar, dialog, templateGuard, vTokenStateService, vTokenObjectService, platform) {
        this.injector = injector;
        this.http = http;
        this.router = router;
        this.snackbar = snackbar;
        this.dialog = dialog;
        this.templateGuard = templateGuard;
        this.vTokenStateService = vTokenStateService;
        this.vTokenObjectService = vTokenObjectService;
        this.platform = platform;
        this.titleSubject = new ReplaySubject();
        this.csvBlobSubject = new ReplaySubject();
        this.templates = new Subject();
        this.saveStatusSubject = new ReplaySubject();
        this.templateDetailToggleSubject = new Subject();
        this.profileLoadingSubject = new ReplaySubject();
        this.templateSubject = new Subject();
        this.allEnvelopes = new BehaviorSubject([]);
        this.sideNavStateSubject = new ReplaySubject();
        this.initiateBuilderAutofocus = new ReplaySubject();
        this.createToggleSubscription = new Subject();
        this._toggleSidenavSource = new BehaviorSubject(false);
        this._title = new BehaviorSubject('');
        this._selected = new BehaviorSubject(false);
        this._pdfUrl = new BehaviorSubject('');
        this._env = new BehaviorSubject({
            id: '',
            template_id: '',
            status: '',
            user_id: '',
            envelope_document_id: ''
        });
        this._envDoc = new BehaviorSubject({
            id: '',
            url: '',
            name: '',
            page_numbers: 0,
            mime: '',
        });
        this.userFullname = '';
        this.userInitial = '';
        this.userEmail = '';
        this.userPhone = '';
        this.userData = {
            name: this.userFullname,
            initial: null,
            email: this.userEmail,
            phone: this.userPhone
        };
        this.isAtOrigin = false;
        this.currentOrganizationId = null;
        this.sidenavOpened = false;
        this.toggleSidenav$ = this._toggleSidenavSource.asObservable();
        this.selectStatus$ = this._selected.asObservable();
        this.env$ = this._env.asObservable();
        this.titleValue$ = this._title.asObservable();
        this.pdfUrl$ = this._pdfUrl.asObservable();
        this.envDoc$ = this._envDoc.asObservable();
        this.userDataSubject = new ReplaySubject();
        this.userProfileSubject = new ReplaySubject();
        this.currentProfileSubject = new ReplaySubject();
        this.personalAccountSubject = new ReplaySubject();
        this.profilesSubject = new ReplaySubject();
        this.tokenConfig = this.injector.get(connectionConfigToken);
        this.envUrl = this.tokenConfig.rForm_backend_url + '/envelopes';
        this.rForm_url = this.tokenConfig.rForm_frontend_url;
        this.rAccount_url = this.tokenConfig.rAccount_frontend_url;
        this.rSecure_url = this.tokenConfig.rSecure_frontend_url;
    }
    /**
     * @param {?} originType
     * @return {?}
     */
    getAtOrigin(originType) {
        this.isAtOrigin = originType && this.tokenConfig.origin && originType === this.tokenConfig.origin;
        return this.isAtOrigin;
    }
    /**
     * @param {?} bool
     * @return {?}
     */
    toggleSidenav(bool) {
        this.updateToggleStatus(bool);
        this._toggleSidenavSource.next(this.sidenavOpened);
    }
    /**
     * @param {?} bool
     * @return {?}
     */
    updateToggleStatus(bool) {
        this.sidenavOpened = bool;
    }
    /**
     * @param {?} string
     * @return {?}
     */
    updateTitle(string) {
        this._title.next(string);
    }
    /**
     * @param {?} bool
     * @return {?}
     */
    updateSelectStatus(bool) {
        this._selected.next(bool);
    }
    /**
     * @param {?} string
     * @return {?}
     */
    updatePdfUrl(string) {
        this._pdfUrl.next(string);
    }
    /**
     * @param {?} string
     * @return {?}
     */
    updateEnv(string) {
        this._env.next(string);
    }
    /**
     * @param {?} IEnvelopeDocument
     * @return {?}
     */
    updateEnvDoc(IEnvelopeDocument) {
        this._envDoc.next(IEnvelopeDocument);
    }
    /**
     * @return {?}
     */
    initNotificationService() { }
    /**
     * @param {?} envelopes
     * @return {?}
     */
    updateEnvelopes(envelopes) {
        this.allEnvelopes.next(envelopes);
    }
    /**
     * @return {?}
     */
    toggleCreate() {
        this.createToggleSubscription.next(true);
    }
    /**
     * @param {?} searchParams
     * @return {?}
     */
    searchEnvelopes(searchParams) {
        for (const key in searchParams) {
            if (searchParams.hasOwnProperty(key)) {
                if (searchParams[key] === null) {
                    delete searchParams[key];
                }
            }
        }
        return this.http.request(new HttpRequest('POST', this.envUrl + '/search', searchParams, {
            reportProgress: true,
            responseType: 'json'
        })).pipe(map((/**
         * @param {?} event
         * @return {?}
         */
        event => {
            if (event instanceof HttpResponse) {
                this.updateEnvelopes(event.body);
            }
            return event;
        })));
    }
    /**
     * @param {?} searchParams
     * @return {?}
     */
    searchTemplates(searchParams) {
        for (const key in searchParams) {
            if (searchParams.hasOwnProperty(key)) {
                if (searchParams[key] === null) {
                    delete searchParams[key];
                }
            }
        }
        return this.http.request(new HttpRequest('POST', this.tokenConfig.rForm_backend_url + '/templates/search', searchParams, {
            reportProgress: true,
            responseType: 'json'
        })).pipe(map((/**
         * @param {?} event
         * @return {?}
         */
        event => {
            return event;
        })));
    }
    /**
     * @param {?} template
     * @return {?}
     */
    downloadTemplateDocument(template) {
        this.getTemplateDocument(template.id, template.template_documents[0]).then((/**
         * @param {?} template_file
         * @return {?}
         */
        template_file => {
            if (isPlatformBrowser(this.platform)) {
                if (window && window.URL) {
                    /** @type {?} */
                    const fileUrl = URL.createObjectURL(template_file);
                    saveAs(fileUrl, template.template_documents[0].name + '.pdf');
                }
            }
        }));
    }
    /**
     * @param {?} templateId
     * @param {?} templateDocument
     * @return {?}
     */
    getTemplateDocument(templateId, templateDocument) {
        return this.http.get(this.tokenConfig.rForm_backend_url + '/templates/' + templateId + '/documents/' +
            templateDocument.id + '?file=true', { responseType: 'blob' }).toPromise();
    }
    /**
     * @param {?} templates
     * @return {?}
     */
    updateTemplates(templates) {
        this.templates.next(templates);
    }
    /**
     * @return {?}
     */
    toggleBuilderSideNav() {
        this.builderSideNavState = !this.builderSideNavState;
        this.sideNavStateSubject.next(this.builderSideNavState);
        if (this.builderSideNavState === false) {
            this.initiateBuilderAutofocus.next(false);
        }
    }
    /**
     * @param {?} template
     * @return {?}
     */
    canUserEdit(template) {
        /** @type {?} */
        const response = this.templateGuard.canPerformAction(TemplateActions.WRITE, template);
        return response['canPerform'];
    }
    /**
     * @param {?} templateId
     * @param {?} body
     * @return {?}
     */
    updateTemplate(templateId, body) {
        return this.http
            .put(this.tokenConfig.rForm_backend_url + '/templates/' + templateId, body)
            .toPromise().then((/**
         * @param {?} template
         * @return {?}
         */
        template => template));
    }
    /**
     * @param {?} template
     * @return {?}
     */
    openTemplate(template) {
        if (this.canUserPreview(template)) {
            location.href = `${this.tokenConfig.rForm_frontend_url}/document/${template.id}`;
        }
        else if (this.canUserEdit(template)) {
            location.href = `${this.tokenConfig.rForm_frontend_url}/builder/${template.id}/fields`;
        }
        else {
            this.snackbar.open(`Template is in build mode, and not ready for use.  Please check back soon.`);
        }
    }
    /**
     * @param {?=} searchKeyword
     * @return {?}
     */
    openTemplates(searchKeyword) {
        if (this.tokenConfig.origin === 'rForm') {
            if (searchKeyword.trim() !== '') {
                this.router.navigate(['documents'], { queryParams: { name: searchKeyword } });
            }
            else {
                this.router.navigate(['documents']);
            }
        }
        else {
            if (searchKeyword.trim() !== '') {
                location.href = `${this.tokenConfig.rForm_frontend_url}/documents?name=${searchKeyword}`;
            }
            else {
                location.href = `${this.tokenConfig.rForm_frontend_url}/documents`;
            }
        }
    }
    /**
     * @param {?} id
     * @return {?}
     */
    getTemplateOwnerInfo(id) {
        return this.http.get(`${this.tokenConfig.rForm_backend_url}/templates/${id}?owner_info=true`)
            .toPromise().then((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            return res;
        }));
    }
    /**
     * @param {?} template
     * @return {?}
     */
    canUserPreview(template) {
        /** @type {?} */
        const hasPermission = (this.templateGuard.canPerformAction(TemplateActions.READ, template)).canPerform;
        /** @type {?} */
        let canPreview;
        /** @type {?} */
        const roles = template.roles;
        /** @type {?} */
        const signers = filter(roles, { type: 'signer' });
        canPreview = signers && signers.length > 0;
        for (const signer of signers) {
            canPreview = signer['fields'] && signer['fields'].length > 0;
        }
        return hasPermission && canPreview;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    starTemplate(id) {
        return this.http.post(this.tokenConfig.rForm_backend_url + `/templates/${id}/stars`, {}).pipe(catchError((/**
         * @param {?} err
         * @return {?}
         */
        err => {
            if (err && err.status === 401) {
                /** @type {?} */
                const errorDialog = this.dialog.open(FourOhOneDialog, {
                    panelClass: 'error__dialog',
                    disableClose: true
                });
                errorDialog.componentInstance.error = err;
            }
            return EMPTY;
        })), map((/**
         * @param {?} res
         * @return {?}
         */
        res => res)));
    }
    /**
     * @param {?} id
     * @return {?}
     */
    unstarTemplate(id) {
        return this.http.delete(this.tokenConfig.rForm_backend_url + `/templates/${id}/stars`).pipe(catchError((/**
         * @param {?} err
         * @return {?}
         */
        err => {
            if (err && err.status === 401) {
                /** @type {?} */
                const errorDialog = this.dialog.open(FourOhOneDialog, {
                    panelClass: 'error__dialog',
                    disableClose: true
                });
                errorDialog.componentInstance.error = err;
            }
            return EMPTY;
        })), map((/**
         * @param {?} res
         * @return {?}
         */
        res => res)));
    }
    //Account Services
    /**
     * @param {?=} sendMessage
     * @return {?}
     */
    updateTokens(sendMessage) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return new Promise((/**
             * @param {?} resolve
             * @param {?} reject
             * @return {?}
             */
            (resolve, reject) => {
                this.vTokenStateService.updateTokens(this.tokenConfig.rSecure_backend_url).subscribe((/**
                 * @param {?} tokens
                 * @return {?}
                 */
                tokens => {
                    if (tokens && tokens.length > 0) {
                        if (sendMessage) {
                            this.snackbar.dismiss();
                            this.snackbar.open('Status updated');
                        }
                    }
                    this.getAccountData();
                    return resolve();
                }));
            }));
        });
    }
    /**
     * @return {?}
     */
    getAccountData() {
        // might need if header needs to show condition
        /** @type {?} */
        const profile = this.vTokenObjectService.getProfile();
        if (profile) {
            this.getProfiles();
        }
    }
    /**
     * @return {?}
     */
    getProfiles() {
        return this.http.get(this.tokenConfig.rAccount_backend_url + '/profiles').toPromise().then((/**
         * @param {?} res
         * @return {?}
         */
        (res) => {
            /** @type {?} */
            const personal = res.splice(findIndex(res, (/**
             * @param {?} p
             * @return {?}
             */
            p => p.organization.name === 'realster')), 1);
            this.personalAccountSubject.next(personal[0]);
            this.profileData = res.sort((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            (a, b) => {
                if (a.organization.name < b.organization.name) {
                    return -1;
                }
                if (a.organization.name > b.organization.name) {
                    return 1;
                }
                return 0;
            }));
            this.profileData.unshift(personal[0]);
            /** @type {?} */
            const currentIndex = findIndex(this.profileData, { current: true });
            if (this.profileData[currentIndex]['first_name']) {
                this.userFullname = this.profileData[currentIndex]['first_name'] + ' ' + this.profileData[currentIndex]['last_name'];
                this.userInitial = this.profileData[currentIndex]['first_name'].charAt(0) +
                    this.profileData[currentIndex]['last_name'].charAt(0);
            }
            else {
                this.userFullname = '';
            }
            if (this.profileData[currentIndex]['phone']) {
                this.userPhone = this.profileData[currentIndex]['phone'];
            }
            else {
                this.userPhone = '';
            }
            if (this.profileData[currentIndex]['email']) {
                this.userEmail = this.profileData[currentIndex]['email'];
            }
            this.userData = {
                name: this.userFullname,
                initial: this.userInitial,
                email: this.userEmail,
                phone: this.userPhone
            };
            this.userProfileSubject.next(this.profileData);
            /** @type {?} */
            const currentProfile = this.profileData[currentIndex];
            this.currentProfileSubject.next(currentProfile);
            this.currentOrganizationId = currentProfile.organization_id;
            this.userDataSubject.next(this.userData);
            return this.userData;
        }));
    }
    /**
     * @param {?} profiles
     * @return {?}
     */
    getProfileCollection(profiles) {
        /** @type {?} */
        const profileModels = [];
        profiles.forEach((/**
         * @param {?} profile
         * @return {?}
         */
        profile => {
            profileModels.push(new ProfileModel(profile));
        }));
        /** @type {?} */
        const profileCollection = new ProfileCollection(profileModels);
        return profileCollection;
    }
    /**
     * @param {?} profile_id
     * @return {?}
     */
    switchProfile(profile_id) {
        this.profileLoadingSubject.next(true);
        return this.http.post(this.tokenConfig.rAccount_backend_url + '/profiles/' + profile_id + '/switch', null).toPromise().then((/**
         * @param {?} res
         * @return {?}
         */
        (res) => tslib_1.__awaiter(this, void 0, void 0, function* () {
            this.vTokenStateService.setTokens(res.tokens);
            this.profileLoadingSubject.next(false);
            return Promise.resolve(res);
        })));
    }
    /**
     * @return {?}
     */
    resendEmailVerification() {
        this.http.post(this.tokenConfig.rSecure_backend_url + '/user/email_verification', null).toPromise().then((/**
         * @return {?}
         */
        () => {
            this.snackbar.open('Verification email sent');
        }));
    }
    /**
     * @param {?} name
     * @return {?}
     */
    getNameValidity(name) {
        return this.http.get(this.tokenConfig.rAccount_backend_url + '/organizations/is_valid?name=' + name, this.getOptions())
            .toPromise()
            .then((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            return Promise.resolve(res);
        }));
    }
    /**
     * @param {?} body
     * @return {?}
     */
    createOrganization(body) {
        return this.http.post(this.tokenConfig.rAccount_backend_url + '/organizations', body, this.getOptions())
            .toPromise()
            .then((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            return Promise.resolve(res);
        }));
    }
    /**
     * @private
     * @return {?}
     */
    getOptions() {
        if (isPlatformServer(this.platform)) {
            return;
        }
        /** @type {?} */
        const vTokenCookie = this.vTokenStateService.getOtherCookieObject('rAccount_Verdocs');
        /** @type {?} */
        const authValue = 'Bearer ' + vTokenCookie['accessToken'];
        /** @type {?} */
        const headers = new HttpHeaders({
            'Cache-Control': 'no-cache',
            'Pragma': 'no-cache',
            'Expires': 'Sat, 01 Jan 2000 00:00:00 GMT',
            'If-Modified-Since': '0',
            'Content-Type': 'application/json',
            'Authorization': authValue,
            'Accept': 'application/json'
        });
        return { headers };
    }
    // End of Account Services
    /**
     * @param {?} name
     * @param {?=} index
     * @return {?}
     */
    getRoleColor(name, index) {
        if (index) {
            return this.getRGBA(index);
        }
        else if (this.template && this.template.roles && this.template.roles.length > 0) {
            index = findIndex(this.template.roles, { name: name });
            if (index >= 0) {
                return this.template.roles[index].rgba ? this.template.roles[index].rgba : this.getRGBA(index);
            }
            else {
                return this.nameToRGBA(name);
            }
        }
        else {
            return this.nameToRGBA(name);
        }
    }
    /**
     * @param {?} rgba
     * @return {?}
     */
    getRGB(rgba) {
        /** @type {?} */
        const rgbNumbers = rgba.replace('rgba(', '').replace(')', '').split(',');
        /** @type {?} */
        const rgbObject = {
            red: rgbNumbers[0],
            green: rgbNumbers[1],
            blue: rgbNumbers[2],
            alpha: rgbNumbers[3]
        };
        /** @type {?} */
        const alpha = 1 - rgbObject.alpha;
        /** @type {?} */
        const red = Math.round((rgbObject.alpha * (rgbObject.red / 255) + alpha) * 255);
        /** @type {?} */
        const green = Math.round((rgbObject.alpha * (rgbObject.green / 255) + alpha) * 255);
        /** @type {?} */
        const blue = Math.round((rgbObject.alpha * (rgbObject.blue / 255) + alpha) * 255);
        return ('#' + this.rgbToHex(red) + this.rgbToHex(green) + this.rgbToHex(blue));
    }
    /**
     * @param {?} rgb
     * @return {?}
     */
    rgbToHex(rgb) {
        /** @type {?} */
        const hex = rgb.toString(16);
        if (hex.length < 2) {
            return '0' + hex;
        }
        return hex;
    }
    /**
     * @param {?} index
     * @return {?}
     */
    getRGBA(index) {
        switch (index % 10) {
            case 0:
                return index === 0 ? 'rgba(255, 193, 7, 0.4)' : 'rgba(134, 134, 134, 0.3)'; //#FFE69C
            case 1:
                return 'rgba(156, 39, 176, .4)'; //'#E3C3E9'
            case 2:
                return 'rgba(33, 150, 243, .4)'; //'#C1E1FB'
            case 3:
                return 'rgba(220, 231, 117, 0.3)';
            case 4:
                return 'rgba(121, 134, 203, 0.3)';
            case 5:
                return 'rgba(77, 182, 172, 0.3)';
            case 6:
                return 'rgba(255, 202, 165, 0.3)';
            case 7:
                return 'rgba(2, 247, 190, 0.3)';
            case 8:
                return 'rgba(255, 138, 101, 0.3)';
            case 9:
                return 'rgba(82, 255, 79, 0.3)';
            default:
                return 'rgba(229, 115, 155, 0.3)';
        }
    }
    /**
     * @param {?} str
     * @return {?}
     */
    nameToRGBA(str) {
        if (!!str) {
            /** @type {?} */
            const validNum = parseInt(str.slice(-1), 10);
            if (!isNaN(validNum)) {
                str += (validNum * 99).toString();
            }
            /** @type {?} */
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = str.charCodeAt(i) + ((hash << 5) - hash);
            }
            hash = Math.round(hash / 1.3);
            /** @type {?} */
            const c = (hash & 0x00FFFF08)
                .toString(16)
                .toUpperCase();
            /** @type {?} */
            const hex = '#' + '00000'.substring(0, 6 - c.length) + c;
            /** @type {?} */
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            /** @type {?} */
            const color = {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            };
            return `rgba(${color.r}, ${color.g}, ${color.b}, 0.2)`;
        }
    }
}
VerdocsHeaderService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
VerdocsHeaderService.ctorParameters = () => [
    { type: Injector },
    { type: HttpClient },
    { type: Router },
    { type: MatSnackBar },
    { type: MatDialog },
    { type: TemplatesGuardService },
    { type: VerdocsStateService },
    { type: VerdocsTokenObjectService },
    { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }
];
/** @nocollapse */ VerdocsHeaderService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function VerdocsHeaderService_Factory() { return new VerdocsHeaderService(i0.ɵɵinject(i0.INJECTOR), i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.MatSnackBar), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(i5.TemplatesGuardService), i0.ɵɵinject(i6.VerdocsStateService), i0.ɵɵinject(i6.VerdocsTokenObjectService), i0.ɵɵinject(i0.PLATFORM_ID)); }, token: VerdocsHeaderService, providedIn: "root" });
if (false) {
    /** @type {?} */
    VerdocsHeaderService.prototype.tokenConfig;
    /** @type {?} */
    VerdocsHeaderService.prototype.titleSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.csvBlobSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.templates;
    /** @type {?} */
    VerdocsHeaderService.prototype.saveStatusSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.templateDetailToggleSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.profileLoadingSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.templateSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.template;
    /** @type {?} */
    VerdocsHeaderService.prototype.allEnvelopes;
    /** @type {?} */
    VerdocsHeaderService.prototype.sideNavStateSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.initiateBuilderAutofocus;
    /** @type {?} */
    VerdocsHeaderService.prototype.createToggleSubscription;
    /** @type {?} */
    VerdocsHeaderService.prototype.rAccount_url;
    /** @type {?} */
    VerdocsHeaderService.prototype.rSecure_url;
    /** @type {?} */
    VerdocsHeaderService.prototype.rForm_url;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.envUrl;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._toggleSidenavSource;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._title;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._selected;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._pdfUrl;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._env;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype._envDoc;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.builderSideNavState;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.userFullname;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.userInitial;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.userEmail;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.userPhone;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.userData;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.profileData;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.isAtOrigin;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.currentOrigin;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.currentOrganizationId;
    /** @type {?} */
    VerdocsHeaderService.prototype.sidenavOpened;
    /** @type {?} */
    VerdocsHeaderService.prototype.toggleSidenav$;
    /** @type {?} */
    VerdocsHeaderService.prototype.selectStatus$;
    /** @type {?} */
    VerdocsHeaderService.prototype.env$;
    /** @type {?} */
    VerdocsHeaderService.prototype.titleValue$;
    /** @type {?} */
    VerdocsHeaderService.prototype.pdfUrl$;
    /** @type {?} */
    VerdocsHeaderService.prototype.envDoc$;
    /** @type {?} */
    VerdocsHeaderService.prototype.userDataSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.userProfileSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.currentProfileSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.personalAccountSubject;
    /** @type {?} */
    VerdocsHeaderService.prototype.profilesSubject;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.http;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.router;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.snackbar;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.dialog;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.templateGuard;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.vTokenStateService;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.vTokenObjectService;
    /**
     * @type {?}
     * @private
     */
    VerdocsHeaderService.prototype.platform;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdmVyZG9jcy9oZWFkZXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvaGVhZGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlCQUFpQixDQUFBO0FBQ3JFLE9BQU8sRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDekMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsS0FBSyxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDakQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFDM0MsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFlBQVksQ0FBQztBQUNwQyxPQUFPLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLHlCQUF5QixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFakYsT0FBTyxFQUFvQixxQkFBcUIsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzNFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FB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NkNBQStEOzs7OztJQUMvRCxxREFBNkM7O0lBQzdDLDZDQUE2Qjs7SUFFN0IsOENBQTBEOztJQUMxRCw2Q0FBOEM7O0lBQzlDLG9DQUFnQzs7SUFDaEMsMkNBQXlDOztJQUN6Qyx1Q0FBc0M7O0lBQ3RDLHVDQUFzQzs7SUFDdEMsK0NBQWtEOztJQUNsRCxrREFBcUQ7O0lBQ3JELHFEQUF3RDs7SUFDeEQsc0RBQXlEOztJQUN6RCwrQ0FBa0Q7Ozs7O0lBR2hELHdDQUEwQjs7Ozs7SUFDMUIsb0NBQXdCOzs7OztJQUN4QixzQ0FBc0I7Ozs7O0lBQ3RCLHdDQUE2Qjs7Ozs7SUFDN0Isc0NBQXlCOzs7OztJQUN6Qiw2Q0FBNEM7Ozs7O0lBQzVDLGtEQUErQzs7Ozs7SUFDL0MsbURBQXNEOzs7OztJQUN0RCx3Q0FBcUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3RvciwgSW5qZWN0LCBQTEFURk9STV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybVNlcnZlciwgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nXG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwUmVzcG9uc2UsIEh0dHBSZXF1ZXN0LCBIdHRwSGVhZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBNYXRTbmFja0JhciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NuYWNrLWJhcic7XG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuaW1wb3J0IHsgUmVwbGF5U3ViamVjdCwgU3ViamVjdCwgQmVoYXZpb3JTdWJqZWN0LCBFTVBUWSwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgZmluZEluZGV4LCBmaWx0ZXIgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgeyBQcm9maWxlTW9kZWwsIFByb2ZpbGVDb2xsZWN0aW9uIH0gZnJvbSAnQHZlcmRvY3MvcHJvZmlsZXMnO1xuaW1wb3J0IHsgVmVyZG9jc1N0YXRlU2VydmljZSwgVmVyZG9jc1Rva2VuT2JqZWN0U2VydmljZSB9IGZyb20gJ0B2ZXJkb2NzL3Rva2Vucyc7XG5cbmltcG9ydCB7IGNvbm5lY3Rpb25Db25maWcsIGNvbm5lY3Rpb25Db25maWdUb2tlbiB9IGZyb20gJy4uL2hlYWRlci5tb2R1bGUnO1xuaW1wb3J0IHsgVGVtcGxhdGVzR3VhcmRTZXJ2aWNlIH0gZnJvbSAnLi90ZW1wbGF0ZXMuZ3VhcmQnO1xuXG5pbXBvcnQgeyBJVGVtcGxhdGUsIEVudmVsb3BlLCBJRW52ZWxvcGVTZWFyY2hQYXJhbXMsIElUZW1wbGF0ZVNlYXJjaFBhcmFtcywgSUVudmVsb3BlRG9jdW1lbnQsIFRlbXBsYXRlQWN0aW9ucyB9IGZyb20gJy4uL21vZGVscy92ZXJkb2NzLm1vZGVsJztcblxuaW1wb3J0IHsgRm91ck9oT25lRGlhbG9nIH0gZnJvbSAnLi4vZXJyb3ItZGlhbG9ncy9mb3VyLW9oLW9uZS5kaWFsb2cnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBWZXJkb2NzSGVhZGVyU2VydmljZSB7XG5cbiAgcHVibGljIHRva2VuQ29uZmlnOiBjb25uZWN0aW9uQ29uZmlnO1xuICBwdWJsaWMgdGl0bGVTdWJqZWN0ID0gbmV3IFJlcGxheVN1YmplY3Q8c3RyaW5nPigpO1xuICBwdWJsaWMgY3N2QmxvYlN1YmplY3QgPSBuZXcgUmVwbGF5U3ViamVjdDxCbG9iPigpO1xuICBwdWJsaWMgdGVtcGxhdGVzOiBTdWJqZWN0PElUZW1wbGF0ZVtdPiA9IG5ldyBTdWJqZWN0PElUZW1wbGF0ZVtdPigpO1xuICBwdWJsaWMgc2F2ZVN0YXR1c1N1YmplY3Q6IFJlcGxheVN1YmplY3Q8c3RyaW5nPiA9IG5ldyBSZXBsYXlTdWJqZWN0PHN0cmluZz4oKTtcbiAgcHVibGljIHRlbXBsYXRlRGV0YWlsVG9nZ2xlU3ViamVjdDogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG4gIHB1YmxpYyBwcm9maWxlTG9hZGluZ1N1YmplY3QgPSBuZXcgUmVwbGF5U3ViamVjdDxib29sZWFuPigpO1xuICBwdWJsaWMgdGVtcGxhdGVTdWJqZWN0OiBTdWJqZWN0PElUZW1wbGF0ZT4gPSBuZXcgU3ViamVjdDxJVGVtcGxhdGU+KCk7XG4gIHB1YmxpYyB0ZW1wbGF0ZTogSVRlbXBsYXRlO1xuICBwdWJsaWMgYWxsRW52ZWxvcGVzID0gbmV3IEJlaGF2aW9yU3ViamVjdDxFbnZlbG9wZVtdPihbXSk7XG4gIHB1YmxpYyBzaWRlTmF2U3RhdGVTdWJqZWN0OiBSZXBsYXlTdWJqZWN0PGJvb2xlYW4+ID0gbmV3IFJlcGxheVN1YmplY3QoKTtcbiAgcHVibGljIGluaXRpYXRlQnVpbGRlckF1dG9mb2N1czogUmVwbGF5U3ViamVjdDxib29sZWFuPiA9IG5ldyBSZXBsYXlTdWJqZWN0KCk7XG4gIHB1YmxpYyBjcmVhdGVUb2dnbGVTdWJzY3JpcHRpb246IFN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuICBwdWJsaWMgckFjY291bnRfdXJsOiBzdHJpbmc7XG4gIHB1YmxpYyByU2VjdXJlX3VybDogc3RyaW5nO1xuICBwdWJsaWMgckZvcm1fdXJsOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBlbnZVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBfdG9nZ2xlU2lkZW5hdlNvdXJjZSA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xuICBwcml2YXRlIF90aXRsZSA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPignJyk7XG4gIHByaXZhdGUgX3NlbGVjdGVkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihmYWxzZSk7XG4gIHByaXZhdGUgX3BkZlVybCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPignJyk7XG4gIHByaXZhdGUgX2VudiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8RW52ZWxvcGU+KHtcbiAgICBpZDogJycsXG4gICAgdGVtcGxhdGVfaWQ6ICcnLFxuICAgIHN0YXR1czogJycsXG4gICAgdXNlcl9pZDogJycsXG4gICAgZW52ZWxvcGVfZG9jdW1lbnRfaWQ6ICcnXG4gIH0pO1xuICBwcml2YXRlIF9lbnZEb2MgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PElFbnZlbG9wZURvY3VtZW50Pih7XG4gICAgaWQ6ICcnLFxuICAgIHVybDogJycsXG4gICAgbmFtZTogJycsXG4gICAgcGFnZV9udW1iZXJzOiAwLFxuICAgIG1pbWU6ICcnLFxuICB9KTtcbiAgcHJpdmF0ZSBidWlsZGVyU2lkZU5hdlN0YXRlOiBib29sZWFuO1xuICBwcml2YXRlIHVzZXJGdWxsbmFtZSA9ICcnO1xuICBwcml2YXRlIHVzZXJJbml0aWFsID0gJyc7XG4gIHByaXZhdGUgdXNlckVtYWlsID0gJyc7XG4gIHByaXZhdGUgdXNlclBob25lID0gJyc7XG4gIHByaXZhdGUgdXNlckRhdGEgPSB7XG4gICAgbmFtZTogdGhpcy51c2VyRnVsbG5hbWUsXG4gICAgaW5pdGlhbDogbnVsbCxcbiAgICBlbWFpbDogdGhpcy51c2VyRW1haWwsXG4gICAgcGhvbmU6IHRoaXMudXNlclBob25lXG4gIH07XG4gIHByaXZhdGUgcHJvZmlsZURhdGE6IGFueTtcbiAgcHJpdmF0ZSBpc0F0T3JpZ2luOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgY3VycmVudE9yaWdpbjogJ3JBY2NvdW50JyB8ICdyRm9ybScgfCAnclNlY3VyZScgfCBudWxsO1xuICBwcml2YXRlIGN1cnJlbnRPcmdhbml6YXRpb25JZDogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIHNpZGVuYXZPcGVuZWQgPSBmYWxzZTtcblxuICB0b2dnbGVTaWRlbmF2JCA9IHRoaXMuX3RvZ2dsZVNpZGVuYXZTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XG4gIHNlbGVjdFN0YXR1cyQgPSB0aGlzLl9zZWxlY3RlZC5hc09ic2VydmFibGUoKTtcbiAgZW52JCA9IHRoaXMuX2Vudi5hc09ic2VydmFibGUoKTtcbiAgdGl0bGVWYWx1ZSQgPSB0aGlzLl90aXRsZS5hc09ic2VydmFibGUoKTtcbiAgcGRmVXJsJCA9IHRoaXMuX3BkZlVybC5hc09ic2VydmFibGUoKTtcbiAgZW52RG9jJCA9IHRoaXMuX2VudkRvYy5hc09ic2VydmFibGUoKTtcbiAgcHVibGljIHVzZXJEYXRhU3ViamVjdCA9IG5ldyBSZXBsYXlTdWJqZWN0PGFueT4oKTtcbiAgcHVibGljIHVzZXJQcm9maWxlU3ViamVjdCA9IG5ldyBSZXBsYXlTdWJqZWN0PGFueT4oKTtcbiAgcHVibGljIGN1cnJlbnRQcm9maWxlU3ViamVjdCA9IG5ldyBSZXBsYXlTdWJqZWN0PGFueT4oKTtcbiAgcHVibGljIHBlcnNvbmFsQWNjb3VudFN1YmplY3QgPSBuZXcgUmVwbGF5U3ViamVjdDxhbnk+KCk7XG4gIHB1YmxpYyBwcm9maWxlc1N1YmplY3QgPSBuZXcgUmVwbGF5U3ViamVjdDxhbnk+KCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBzbmFja2JhcjogTWF0U25hY2tCYXIsXG4gICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICBwcml2YXRlIHRlbXBsYXRlR3VhcmQ6IFRlbXBsYXRlc0d1YXJkU2VydmljZSxcbiAgICBwcml2YXRlIHZUb2tlblN0YXRlU2VydmljZTogVmVyZG9jc1N0YXRlU2VydmljZSxcbiAgICBwcml2YXRlIHZUb2tlbk9iamVjdFNlcnZpY2U6IFZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2UsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybVxuICApIHtcbiAgICB0aGlzLnRva2VuQ29uZmlnID0gdGhpcy5pbmplY3Rvci5nZXQoY29ubmVjdGlvbkNvbmZpZ1Rva2VuKTtcbiAgICB0aGlzLmVudlVybCA9IHRoaXMudG9rZW5Db25maWcuckZvcm1fYmFja2VuZF91cmwgKyAnL2VudmVsb3Blcyc7XG4gICAgdGhpcy5yRm9ybV91cmwgPSB0aGlzLnRva2VuQ29uZmlnLnJGb3JtX2Zyb250ZW5kX3VybDtcbiAgICB0aGlzLnJBY2NvdW50X3VybCA9IHRoaXMudG9rZW5Db25maWcuckFjY291bnRfZnJvbnRlbmRfdXJsO1xuICAgIHRoaXMuclNlY3VyZV91cmwgPSB0aGlzLnRva2VuQ29uZmlnLnJTZWN1cmVfZnJvbnRlbmRfdXJsO1xuICB9XG5cbiAgcHVibGljIGdldEF0T3JpZ2luKG9yaWdpblR5cGUpIHtcbiAgICB0aGlzLmlzQXRPcmlnaW4gPSBvcmlnaW5UeXBlICYmIHRoaXMudG9rZW5Db25maWcub3JpZ2luICYmIG9yaWdpblR5cGUgPT09IHRoaXMudG9rZW5Db25maWcub3JpZ2luO1xuICAgIHJldHVybiB0aGlzLmlzQXRPcmlnaW47XG4gIH1cblxuICBwdWJsaWMgdG9nZ2xlU2lkZW5hdihib29sKSB7XG4gICAgdGhpcy51cGRhdGVUb2dnbGVTdGF0dXMoYm9vbCk7XG4gICAgdGhpcy5fdG9nZ2xlU2lkZW5hdlNvdXJjZS5uZXh0KHRoaXMuc2lkZW5hdk9wZW5lZCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVG9nZ2xlU3RhdHVzKGJvb2wpIHtcbiAgICB0aGlzLnNpZGVuYXZPcGVuZWQgPSBib29sO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVRpdGxlKHN0cmluZykge1xuICAgIHRoaXMuX3RpdGxlLm5leHQoc3RyaW5nKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTZWxlY3RTdGF0dXMoYm9vbCkge1xuICAgIHRoaXMuX3NlbGVjdGVkLm5leHQoYm9vbCk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlUGRmVXJsKHN0cmluZykge1xuICAgIHRoaXMuX3BkZlVybC5uZXh0KHN0cmluZyk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlRW52KHN0cmluZykge1xuICAgIHRoaXMuX2Vudi5uZXh0KHN0cmluZyk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlRW52RG9jKElFbnZlbG9wZURvY3VtZW50KSB7XG4gICAgdGhpcy5fZW52RG9jLm5leHQoSUVudmVsb3BlRG9jdW1lbnQpO1xuICB9XG5cbiAgaW5pdE5vdGlmaWNhdGlvblNlcnZpY2UoKSB7IH1cblxuICBwdWJsaWMgdXBkYXRlRW52ZWxvcGVzKGVudmVsb3Blcykge1xuICAgIHRoaXMuYWxsRW52ZWxvcGVzLm5leHQoZW52ZWxvcGVzKTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVDcmVhdGUoKSB7XG4gICAgdGhpcy5jcmVhdGVUb2dnbGVTdWJzY3JpcHRpb24ubmV4dCh0cnVlKTtcbiAgfVxuXG4gIHNlYXJjaEVudmVsb3BlcyhzZWFyY2hQYXJhbXM6IElFbnZlbG9wZVNlYXJjaFBhcmFtcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNlYXJjaFBhcmFtcykge1xuICAgICAgaWYgKHNlYXJjaFBhcmFtcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGlmIChzZWFyY2hQYXJhbXNba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSBzZWFyY2hQYXJhbXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5odHRwLnJlcXVlc3QobmV3IEh0dHBSZXF1ZXN0KFxuICAgICAgJ1BPU1QnLFxuICAgICAgdGhpcy5lbnZVcmwgKyAnL3NlYXJjaCcsXG4gICAgICBzZWFyY2hQYXJhbXMsXG4gICAgICB7XG4gICAgICAgIHJlcG9ydFByb2dyZXNzOiB0cnVlLFxuICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJ1xuICAgICAgfVxuICAgICkpLnBpcGUoXG4gICAgICBtYXAoZXZlbnQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBIdHRwUmVzcG9uc2UpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUVudmVsb3BlcyhldmVudC5ib2R5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBzZWFyY2hUZW1wbGF0ZXMoc2VhcmNoUGFyYW1zOiBJVGVtcGxhdGVTZWFyY2hQYXJhbXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzZWFyY2hQYXJhbXMpIHtcbiAgICAgIGlmIChzZWFyY2hQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBpZiAoc2VhcmNoUGFyYW1zW2tleV0gPT09IG51bGwpIHtcbiAgICAgICAgICBkZWxldGUgc2VhcmNoUGFyYW1zW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KG5ldyBIdHRwUmVxdWVzdChcbiAgICAgICdQT1NUJyxcbiAgICAgIHRoaXMudG9rZW5Db25maWcuckZvcm1fYmFja2VuZF91cmwgKyAnL3RlbXBsYXRlcy9zZWFyY2gnLFxuICAgICAgc2VhcmNoUGFyYW1zLFxuICAgICAge1xuICAgICAgICByZXBvcnRQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbidcbiAgICAgIH1cbiAgICApKS5waXBlKFxuICAgICAgbWFwKGV2ZW50ID0+IHtcbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZG93bmxvYWRUZW1wbGF0ZURvY3VtZW50KHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICB0aGlzLmdldFRlbXBsYXRlRG9jdW1lbnQodGVtcGxhdGUuaWQsIHRlbXBsYXRlLnRlbXBsYXRlX2RvY3VtZW50c1swXSkudGhlbih0ZW1wbGF0ZV9maWxlID0+IHtcbiAgICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtKSkge1xuICAgICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5VUkwpIHtcbiAgICAgICAgICBjb25zdCBmaWxlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0ZW1wbGF0ZV9maWxlKTtcbiAgICAgICAgICBzYXZlQXMoZmlsZVVybCwgdGVtcGxhdGUudGVtcGxhdGVfZG9jdW1lbnRzWzBdLm5hbWUgKyAnLnBkZicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRUZW1wbGF0ZURvY3VtZW50KHRlbXBsYXRlSWQsIHRlbXBsYXRlRG9jdW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCh0aGlzLnRva2VuQ29uZmlnLnJGb3JtX2JhY2tlbmRfdXJsICsgJy90ZW1wbGF0ZXMvJyArIHRlbXBsYXRlSWQgKyAnL2RvY3VtZW50cy8nICtcbiAgICAgIHRlbXBsYXRlRG9jdW1lbnQuaWQgKyAnP2ZpbGU9dHJ1ZScsIHsgcmVzcG9uc2VUeXBlOiAnYmxvYicgfSkudG9Qcm9taXNlKCk7XG4gIH1cblxuICB1cGRhdGVUZW1wbGF0ZXModGVtcGxhdGVzKSB7XG4gICAgdGhpcy50ZW1wbGF0ZXMubmV4dCh0ZW1wbGF0ZXMpO1xuICB9XG5cbiAgdG9nZ2xlQnVpbGRlclNpZGVOYXYoKSB7XG4gICAgdGhpcy5idWlsZGVyU2lkZU5hdlN0YXRlID0gIXRoaXMuYnVpbGRlclNpZGVOYXZTdGF0ZTtcbiAgICB0aGlzLnNpZGVOYXZTdGF0ZVN1YmplY3QubmV4dCh0aGlzLmJ1aWxkZXJTaWRlTmF2U3RhdGUpO1xuICAgIGlmICh0aGlzLmJ1aWxkZXJTaWRlTmF2U3RhdGUgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmluaXRpYXRlQnVpbGRlckF1dG9mb2N1cy5uZXh0KGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBjYW5Vc2VyRWRpdCh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnRlbXBsYXRlR3VhcmQuY2FuUGVyZm9ybUFjdGlvbihUZW1wbGF0ZUFjdGlvbnMuV1JJVEUsIHRlbXBsYXRlKTtcbiAgICByZXR1cm4gcmVzcG9uc2VbJ2NhblBlcmZvcm0nXVxuICB9XG5cbiAgdXBkYXRlVGVtcGxhdGUodGVtcGxhdGVJZDogc3RyaW5nLCBib2R5KTogUHJvbWlzZTxJVGVtcGxhdGU+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucHV0PElUZW1wbGF0ZT4odGhpcy50b2tlbkNvbmZpZy5yRm9ybV9iYWNrZW5kX3VybCArICcvdGVtcGxhdGVzLycgKyB0ZW1wbGF0ZUlkLCBib2R5KVxuICAgICAgLnRvUHJvbWlzZSgpLnRoZW4odGVtcGxhdGUgPT4gdGVtcGxhdGUpO1xuICB9XG5cbiAgb3BlblRlbXBsYXRlKHRlbXBsYXRlOiBJVGVtcGxhdGUpIHtcbiAgICBpZiAodGhpcy5jYW5Vc2VyUHJldmlldyh0ZW1wbGF0ZSkpIHtcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnRva2VuQ29uZmlnLnJGb3JtX2Zyb250ZW5kX3VybH0vZG9jdW1lbnQvJHt0ZW1wbGF0ZS5pZH1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jYW5Vc2VyRWRpdCh0ZW1wbGF0ZSkpIHtcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnRva2VuQ29uZmlnLnJGb3JtX2Zyb250ZW5kX3VybH0vYnVpbGRlci8ke3RlbXBsYXRlLmlkfS9maWVsZHNgO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNuYWNrYmFyLm9wZW4oYFRlbXBsYXRlIGlzIGluIGJ1aWxkIG1vZGUsIGFuZCBub3QgcmVhZHkgZm9yIHVzZS4gIFBsZWFzZSBjaGVjayBiYWNrIHNvb24uYClcbiAgICB9XG4gIH1cblxuICBvcGVuVGVtcGxhdGVzKHNlYXJjaEtleXdvcmQ/OiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy50b2tlbkNvbmZpZy5vcmlnaW4gPT09ICdyRm9ybScpIHtcbiAgICAgIGlmIChzZWFyY2hLZXl3b3JkLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWydkb2N1bWVudHMnXSwgeyBxdWVyeVBhcmFtczogeyBuYW1lOiBzZWFyY2hLZXl3b3JkIH0gfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJ2RvY3VtZW50cyddKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHNlYXJjaEtleXdvcmQudHJpbSgpICE9PSAnJykge1xuICAgICAgICBsb2NhdGlvbi5ocmVmID0gYCR7dGhpcy50b2tlbkNvbmZpZy5yRm9ybV9mcm9udGVuZF91cmx9L2RvY3VtZW50cz9uYW1lPSR7c2VhcmNoS2V5d29yZH1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGAke3RoaXMudG9rZW5Db25maWcuckZvcm1fZnJvbnRlbmRfdXJsfS9kb2N1bWVudHNgO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFRlbXBsYXRlT3duZXJJbmZvKGlkOiBzdHJpbmcpOiBQcm9taXNlPHsgcHJvZmlsZV9pZDogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PHsgcHJvZmlsZV9pZDogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfT4oYCR7dGhpcy50b2tlbkNvbmZpZy5yRm9ybV9iYWNrZW5kX3VybH0vdGVtcGxhdGVzLyR7aWR9P293bmVyX2luZm89dHJ1ZWApXG4gICAgICAudG9Qcm9taXNlKCkudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSk7XG4gIH1cblxuICBjYW5Vc2VyUHJldmlldyh0ZW1wbGF0ZTogSVRlbXBsYXRlKSB7XG4gICAgY29uc3QgaGFzUGVybWlzc2lvbiA9ICh0aGlzLnRlbXBsYXRlR3VhcmQuY2FuUGVyZm9ybUFjdGlvbihUZW1wbGF0ZUFjdGlvbnMuUkVBRCwgdGVtcGxhdGUpKS5jYW5QZXJmb3JtO1xuICAgIGxldCBjYW5QcmV2aWV3O1xuICAgIGNvbnN0IHJvbGVzID0gdGVtcGxhdGUucm9sZXM7XG4gICAgY29uc3Qgc2lnbmVycyA9IGZpbHRlcihyb2xlcywgeyB0eXBlOiAnc2lnbmVyJyB9KTtcbiAgICBjYW5QcmV2aWV3ID0gc2lnbmVycyAmJiBzaWduZXJzLmxlbmd0aCA+IDA7XG4gICAgZm9yIChjb25zdCBzaWduZXIgb2Ygc2lnbmVycykge1xuICAgICAgY2FuUHJldmlldyA9IHNpZ25lclsnZmllbGRzJ10gJiYgc2lnbmVyWydmaWVsZHMnXS5sZW5ndGggPiAwO1xuICAgIH1cbiAgICByZXR1cm4gaGFzUGVybWlzc2lvbiAmJiBjYW5QcmV2aWV3O1xuICB9XG5cbiAgc3RhclRlbXBsYXRlKGlkKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy50b2tlbkNvbmZpZy5yRm9ybV9iYWNrZW5kX3VybCArIGAvdGVtcGxhdGVzLyR7aWR9L3N0YXJzYCwge30pLnBpcGUoXG4gICAgICBjYXRjaEVycm9yKGVyciA9PiB7XG4gICAgICAgIGlmIChlcnIgJiYgZXJyLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JEaWFsb2cgPSB0aGlzLmRpYWxvZy5vcGVuKEZvdXJPaE9uZURpYWxvZywge1xuICAgICAgICAgICAgcGFuZWxDbGFzczogJ2Vycm9yX19kaWFsb2cnLFxuICAgICAgICAgICAgZGlzYWJsZUNsb3NlOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBlcnJvckRpYWxvZy5jb21wb25lbnRJbnN0YW5jZS5lcnJvciA9IGVycjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRU1QVFlcbiAgICAgIH0pLFxuICAgICAgbWFwKHJlcyA9PiByZXMpXG4gICAgKTtcbiAgfVxuXG4gIHVuc3RhclRlbXBsYXRlKGlkKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZSh0aGlzLnRva2VuQ29uZmlnLnJGb3JtX2JhY2tlbmRfdXJsICsgYC90ZW1wbGF0ZXMvJHtpZH0vc3RhcnNgKS5waXBlKFxuICAgICAgY2F0Y2hFcnJvcihlcnIgPT4ge1xuICAgICAgICBpZiAoZXJyICYmIGVyci5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgIGNvbnN0IGVycm9yRGlhbG9nID0gdGhpcy5kaWFsb2cub3BlbihGb3VyT2hPbmVEaWFsb2csIHtcbiAgICAgICAgICAgIHBhbmVsQ2xhc3M6ICdlcnJvcl9fZGlhbG9nJyxcbiAgICAgICAgICAgIGRpc2FibGVDbG9zZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgZXJyb3JEaWFsb2cuY29tcG9uZW50SW5zdGFuY2UuZXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEVNUFRZXG4gICAgICB9KSxcbiAgICAgIG1hcChyZXMgPT4gcmVzKVxuICAgICk7XG4gIH1cblxuICAvL0FjY291bnQgU2VydmljZXNcbiAgYXN5bmMgdXBkYXRlVG9rZW5zKHNlbmRNZXNzYWdlPzogYm9vbGVhbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLnZUb2tlblN0YXRlU2VydmljZS51cGRhdGVUb2tlbnModGhpcy50b2tlbkNvbmZpZy5yU2VjdXJlX2JhY2tlbmRfdXJsKS5zdWJzY3JpYmUodG9rZW5zID0+IHtcbiAgICAgICAgaWYgKHRva2VucyAmJiB0b2tlbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChzZW5kTWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5zbmFja2Jhci5kaXNtaXNzKCk7XG4gICAgICAgICAgICB0aGlzLnNuYWNrYmFyLm9wZW4oJ1N0YXR1cyB1cGRhdGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0QWNjb3VudERhdGEoKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuICBnZXRBY2NvdW50RGF0YSgpIHtcbiAgICAvLyBtaWdodCBuZWVkIGlmIGhlYWRlciBuZWVkcyB0byBzaG93IGNvbmRpdGlvblxuICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnZUb2tlbk9iamVjdFNlcnZpY2UuZ2V0UHJvZmlsZSgpO1xuICAgIGlmIChwcm9maWxlKSB7XG4gICAgICB0aGlzLmdldFByb2ZpbGVzKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJvZmlsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQodGhpcy50b2tlbkNvbmZpZy5yQWNjb3VudF9iYWNrZW5kX3VybCArICcvcHJvZmlsZXMnKS50b1Byb21pc2UoKS50aGVuKChyZXM6IGFueVtdKSA9PiB7XG4gICAgICBjb25zdCBwZXJzb25hbCA9IHJlcy5zcGxpY2UoZmluZEluZGV4KHJlcywgcCA9PiBwLm9yZ2FuaXphdGlvbi5uYW1lID09PSAncmVhbHN0ZXInKSwgMSk7XG4gICAgICB0aGlzLnBlcnNvbmFsQWNjb3VudFN1YmplY3QubmV4dChwZXJzb25hbFswXSk7XG4gICAgICB0aGlzLnByb2ZpbGVEYXRhID0gcmVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEub3JnYW5pemF0aW9uLm5hbWUgPCBiLm9yZ2FuaXphdGlvbi5uYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhLm9yZ2FuaXphdGlvbi5uYW1lID4gYi5vcmdhbml6YXRpb24ubmFtZSkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnByb2ZpbGVEYXRhLnVuc2hpZnQocGVyc29uYWxbMF0pO1xuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gZmluZEluZGV4KHRoaXMucHJvZmlsZURhdGEsIHsgY3VycmVudDogdHJ1ZSB9KTtcbiAgICAgIGlmICh0aGlzLnByb2ZpbGVEYXRhW2N1cnJlbnRJbmRleF1bJ2ZpcnN0X25hbWUnXSkge1xuICAgICAgICB0aGlzLnVzZXJGdWxsbmFtZSA9IHRoaXMucHJvZmlsZURhdGFbY3VycmVudEluZGV4XVsnZmlyc3RfbmFtZSddICsgJyAnICsgdGhpcy5wcm9maWxlRGF0YVtjdXJyZW50SW5kZXhdWydsYXN0X25hbWUnXTtcbiAgICAgICAgdGhpcy51c2VySW5pdGlhbCA9IHRoaXMucHJvZmlsZURhdGFbY3VycmVudEluZGV4XVsnZmlyc3RfbmFtZSddLmNoYXJBdCgwKSArXG4gICAgICAgICAgdGhpcy5wcm9maWxlRGF0YVtjdXJyZW50SW5kZXhdWydsYXN0X25hbWUnXS5jaGFyQXQoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVzZXJGdWxsbmFtZSA9ICcnO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucHJvZmlsZURhdGFbY3VycmVudEluZGV4XVsncGhvbmUnXSkge1xuICAgICAgICB0aGlzLnVzZXJQaG9uZSA9IHRoaXMucHJvZmlsZURhdGFbY3VycmVudEluZGV4XVsncGhvbmUnXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXNlclBob25lID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9maWxlRGF0YVtjdXJyZW50SW5kZXhdWydlbWFpbCddKSB7XG4gICAgICAgIHRoaXMudXNlckVtYWlsID0gdGhpcy5wcm9maWxlRGF0YVtjdXJyZW50SW5kZXhdWydlbWFpbCddO1xuICAgICAgfVxuICAgICAgdGhpcy51c2VyRGF0YSA9IHtcbiAgICAgICAgbmFtZTogdGhpcy51c2VyRnVsbG5hbWUsXG4gICAgICAgIGluaXRpYWw6IHRoaXMudXNlckluaXRpYWwsXG4gICAgICAgIGVtYWlsOiB0aGlzLnVzZXJFbWFpbCxcbiAgICAgICAgcGhvbmU6IHRoaXMudXNlclBob25lXG4gICAgICB9O1xuICAgICAgdGhpcy51c2VyUHJvZmlsZVN1YmplY3QubmV4dCh0aGlzLnByb2ZpbGVEYXRhKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9maWxlID0gdGhpcy5wcm9maWxlRGF0YVtjdXJyZW50SW5kZXhdO1xuICAgICAgdGhpcy5jdXJyZW50UHJvZmlsZVN1YmplY3QubmV4dChjdXJyZW50UHJvZmlsZSk7XG4gICAgICB0aGlzLmN1cnJlbnRPcmdhbml6YXRpb25JZCA9IGN1cnJlbnRQcm9maWxlLm9yZ2FuaXphdGlvbl9pZDtcbiAgICAgIHRoaXMudXNlckRhdGFTdWJqZWN0Lm5leHQodGhpcy51c2VyRGF0YSk7XG4gICAgICByZXR1cm4gdGhpcy51c2VyRGF0YTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFByb2ZpbGVDb2xsZWN0aW9uKHByb2ZpbGVzKSB7XG4gICAgY29uc3QgcHJvZmlsZU1vZGVsczogUHJvZmlsZU1vZGVsW10gPSBbXTtcbiAgICBwcm9maWxlcy5mb3JFYWNoKHByb2ZpbGUgPT4ge1xuICAgICAgcHJvZmlsZU1vZGVscy5wdXNoKG5ldyBQcm9maWxlTW9kZWwocHJvZmlsZSkpO1xuICAgIH0pO1xuICAgIGNvbnN0IHByb2ZpbGVDb2xsZWN0aW9uID0gbmV3IFByb2ZpbGVDb2xsZWN0aW9uKHByb2ZpbGVNb2RlbHMpO1xuICAgIHJldHVybiBwcm9maWxlQ29sbGVjdGlvbjtcbiAgfVxuXG4gIHN3aXRjaFByb2ZpbGUocHJvZmlsZV9pZCkge1xuICAgIHRoaXMucHJvZmlsZUxvYWRpbmdTdWJqZWN0Lm5leHQodHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KHRoaXMudG9rZW5Db25maWcuckFjY291bnRfYmFja2VuZF91cmwgKyAnL3Byb2ZpbGVzLycgKyBwcm9maWxlX2lkICsgJy9zd2l0Y2gnLCBudWxsKS50b1Byb21pc2UoKS50aGVuKGFzeW5jIChyZXM6IGFueSkgPT4ge1xuICAgICAgdGhpcy52VG9rZW5TdGF0ZVNlcnZpY2Uuc2V0VG9rZW5zKHJlcy50b2tlbnMpO1xuICAgICAgdGhpcy5wcm9maWxlTG9hZGluZ1N1YmplY3QubmV4dChmYWxzZSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICByZXNlbmRFbWFpbFZlcmlmaWNhdGlvbigpIHtcbiAgICB0aGlzLmh0dHAucG9zdCh0aGlzLnRva2VuQ29uZmlnLnJTZWN1cmVfYmFja2VuZF91cmwgKyAnL3VzZXIvZW1haWxfdmVyaWZpY2F0aW9uJywgbnVsbCkudG9Qcm9taXNlKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnNuYWNrYmFyLm9wZW4oJ1ZlcmlmaWNhdGlvbiBlbWFpbCBzZW50Jyk7XG4gICAgfSk7XG4gIH1cblxuICBnZXROYW1lVmFsaWRpdHkobmFtZSkge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHRoaXMudG9rZW5Db25maWcuckFjY291bnRfYmFja2VuZF91cmwgKyAnL29yZ2FuaXphdGlvbnMvaXNfdmFsaWQ/bmFtZT0nICsgbmFtZSwgdGhpcy5nZXRPcHRpb25zKCkpXG4gICAgICAudG9Qcm9taXNlKClcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlT3JnYW5pemF0aW9uKGJvZHkpIHtcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy50b2tlbkNvbmZpZy5yQWNjb3VudF9iYWNrZW5kX3VybCArICcvb3JnYW5pemF0aW9ucycsIGJvZHksIHRoaXMuZ2V0T3B0aW9ucygpKVxuICAgICAgLnRvUHJvbWlzZSgpXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3B0aW9ucygpOiBhbnkge1xuICAgIGlmIChpc1BsYXRmb3JtU2VydmVyKHRoaXMucGxhdGZvcm0pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZUb2tlbkNvb2tpZSA9IHRoaXMudlRva2VuU3RhdGVTZXJ2aWNlLmdldE90aGVyQ29va2llT2JqZWN0KCdyQWNjb3VudF9WZXJkb2NzJyk7XG4gICAgY29uc3QgYXV0aFZhbHVlID0gJ0JlYXJlciAnICsgdlRva2VuQ29va2llWydhY2Nlc3NUb2tlbiddO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoe1xuICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLFxuICAgICAgJ1ByYWdtYSc6ICduby1jYWNoZScsXG4gICAgICAnRXhwaXJlcyc6ICdTYXQsIDAxIEphbiAyMDAwIDAwOjAwOjAwIEdNVCcsXG4gICAgICAnSWYtTW9kaWZpZWQtU2luY2UnOiAnMCcsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0F1dGhvcml6YXRpb24nOiBhdXRoVmFsdWUsXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgaGVhZGVycyB9O1xuICB9XG5cbiAgLy8gRW5kIG9mIEFjY291bnQgU2VydmljZXNcblxuICBnZXRSb2xlQ29sb3IobmFtZSwgaW5kZXg/KSB7XG4gICAgaWYgKGluZGV4KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRSR0JBKGluZGV4KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudGVtcGxhdGUgJiYgdGhpcy50ZW1wbGF0ZS5yb2xlcyAmJiB0aGlzLnRlbXBsYXRlLnJvbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGluZGV4ID0gZmluZEluZGV4KHRoaXMudGVtcGxhdGUucm9sZXMsIHsgbmFtZTogbmFtZSB9KTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlLnJvbGVzW2luZGV4XS5yZ2JhID8gdGhpcy50ZW1wbGF0ZS5yb2xlc1tpbmRleF0ucmdiYSA6IHRoaXMuZ2V0UkdCQShpbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lVG9SR0JBKG5hbWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lVG9SR0JBKG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGdldFJHQihyZ2JhKSB7XG4gICAgY29uc3QgcmdiTnVtYmVycyA9IHJnYmEucmVwbGFjZSgncmdiYSgnLCAnJykucmVwbGFjZSgnKScsICcnKS5zcGxpdCgnLCcpO1xuICAgIGNvbnN0IHJnYk9iamVjdCA9IHtcbiAgICAgIHJlZDogcmdiTnVtYmVyc1swXSxcbiAgICAgIGdyZWVuOiByZ2JOdW1iZXJzWzFdLFxuICAgICAgYmx1ZTogcmdiTnVtYmVyc1syXSxcbiAgICAgIGFscGhhOiByZ2JOdW1iZXJzWzNdXG4gICAgfTtcbiAgICBjb25zdCBhbHBoYSA9IDEgLSByZ2JPYmplY3QuYWxwaGE7XG4gICAgY29uc3QgcmVkID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5yZWQgLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICBjb25zdCBncmVlbiA9IE1hdGgucm91bmQoKHJnYk9iamVjdC5hbHBoYSAqIChyZ2JPYmplY3QuZ3JlZW4gLyAyNTUpICsgYWxwaGEpICogMjU1KTtcbiAgICBjb25zdCBibHVlID0gTWF0aC5yb3VuZCgocmdiT2JqZWN0LmFscGhhICogKHJnYk9iamVjdC5ibHVlIC8gMjU1KSArIGFscGhhKSAqIDI1NSk7XG4gICAgcmV0dXJuICgnIycgKyB0aGlzLnJnYlRvSGV4KHJlZCkgKyB0aGlzLnJnYlRvSGV4KGdyZWVuKSArIHRoaXMucmdiVG9IZXgoYmx1ZSkpO1xuICB9XG5cbiAgcmdiVG9IZXgocmdiOiBudW1iZXIpIHtcbiAgICBjb25zdCBoZXggPSByZ2IudG9TdHJpbmcoMTYpO1xuICAgIGlmIChoZXgubGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuICcwJyArIGhleDtcbiAgICB9XG4gICAgcmV0dXJuIGhleDtcbiAgfVxuXG4gIGdldFJHQkEoaW5kZXgpIHtcbiAgICBzd2l0Y2ggKGluZGV4ICUgMTApIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSAwID8gJ3JnYmEoMjU1LCAxOTMsIDcsIDAuNCknIDogJ3JnYmEoMTM0LCAxMzQsIDEzNCwgMC4zKSc7IC8vI0ZGRTY5Q1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gJ3JnYmEoMTU2LCAzOSwgMTc2LCAuNCknOyAvLycjRTNDM0U5J1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gJ3JnYmEoMzMsIDE1MCwgMjQzLCAuNCknOyAvLycjQzFFMUZCJ1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gJ3JnYmEoMjIwLCAyMzEsIDExNywgMC4zKSc7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiAncmdiYSgxMjEsIDEzNCwgMjAzLCAwLjMpJztcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgcmV0dXJuICdyZ2JhKDc3LCAxODIsIDE3MiwgMC4zKSc7XG4gICAgICBjYXNlIDY6XG4gICAgICAgIHJldHVybiAncmdiYSgyNTUsIDIwMiwgMTY1LCAwLjMpJztcbiAgICAgIGNhc2UgNzpcbiAgICAgICAgcmV0dXJuICdyZ2JhKDIsIDI0NywgMTkwLCAwLjMpJztcbiAgICAgIGNhc2UgODpcbiAgICAgICAgcmV0dXJuICdyZ2JhKDI1NSwgMTM4LCAxMDEsIDAuMyknO1xuICAgICAgY2FzZSA5OlxuICAgICAgICByZXR1cm4gJ3JnYmEoODIsIDI1NSwgNzksIDAuMyknO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdyZ2JhKDIyOSwgMTE1LCAxNTUsIDAuMyknO1xuICAgIH1cbiAgfVxuXG4gIG5hbWVUb1JHQkEoc3RyKSB7XG4gICAgaWYgKCEhc3RyKSB7XG4gICAgICBjb25zdCB2YWxpZE51bSA9IHBhcnNlSW50KHN0ci5zbGljZSgtMSksIDEwKTtcbiAgICAgIGlmICghaXNOYU4odmFsaWROdW0pKSB7XG4gICAgICAgIHN0ciArPSAodmFsaWROdW0gKiA5OSkudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGxldCBoYXNoID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xuICAgICAgfVxuICAgICAgaGFzaCA9IE1hdGgucm91bmQoaGFzaCAvIDEuMyk7XG4gICAgICBjb25zdCBjID0gKGhhc2ggJiAweDAwRkZGRjA4KVxuICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgIC50b1VwcGVyQ2FzZSgpO1xuICAgICAgY29uc3QgaGV4ID0gJyMnICsgJzAwMDAwJy5zdWJzdHJpbmcoMCwgNiAtIGMubGVuZ3RoKSArIGM7XG4gICAgICBjb25zdCByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgIGNvbnN0IGNvbG9yID0ge1xuICAgICAgICByOiBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgZzogcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXG4gICAgICAgIGI6IHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGByZ2JhKCR7Y29sb3Iucn0sICR7Y29sb3IuZ30sICR7Y29sb3IuYn0sIDAuMilgO1xuICAgIH1cbiAgfVxufVxuIl19