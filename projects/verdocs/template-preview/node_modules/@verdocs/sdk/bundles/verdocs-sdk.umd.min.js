!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@verdocs/tokens"),require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("@verdocs/event-tracker")):"function"==typeof define&&define.amd?define("@verdocs/sdk",["exports","@angular/core","@angular/common/http","@verdocs/tokens","@angular/common","rxjs","rxjs/operators","lodash","@verdocs/event-tracker"],t):t(((e=e||self).verdocs=e.verdocs||{},e.verdocs.sdk={}),e.ng.core,e.ng.common.http,e.tokens,e.ng.common,e.rxjs,e.rxjs.operators,e.lodash,e.eventTracker)}(this,function(exports,core,http,tokens,common,rxjs,operators,lodash,eventTracker){"use strict";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function __decorate(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})}function __generator(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function __exportStar(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function __values(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(e){l(a[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function ComponentData(){}var TemplateSenderTypes={CREATOR:"creator",ORGANIZATION_MEMBER:"organization_member",ORGANIZATION_MEMBER_AS_CREATOR:"organization_member_as_creator",EVERYONE:"everyone",EVERYONE_AS_CREATOR:"everyone_as_creator"},TemplatePermissions={TEMPLATE_CREATOR_CREATE_PUBLIC:"template:creator:create:public",TEMPLATE_CREATOR_CREATE_ORG:"template:creator:create:org",TEMPLATE_CREATOR_CREATE_PERSONAL:"template:creator:create:personal",TEMPLATE_CREATOR_DELETE:"template:creator:delete",TEMPLATE_CREATOR_VISIBILITY:"template:creator:visibility",TEMPLATE_MEMBER_READ:"template:member:read",TEMPLATE_MEMBER_WRITE:"template:member:write",TEMPLATE_MEMBER_DELETE:"template:member:delete",TEMPLATE_MEMBER_VISIBILITY:"template:member:visibility"},TemplateActions={CREATE_PERSONAL:"create_personal",CREATE_ORG:"create_org",CREATE_PUBLIC:"create_public",READ:"read",WRITE:"write",DELETE:"delete",CHANGE_VISIBILITY_PERSONAL:"change_visibility_personal",CHANGE_VISIBILITY_ORG:"change_visibility_org",CHANGE_VISIBILITY_PUBLIC:"change_visibility_public"};function IDocument(){}function EnvelopeComponent(){}function IDocumentField(){}function ISetting(){}function IEnvelopeHistory(){}function IActivity(){}function IEnvelopeSearchParams(){}function IEnvelopeSearchResult(){}function IEnvelopeFilterParams(){}var DocumentSortOptions={created_at:"created_at",updated_at:"updated_at",envelope_name:"envelope_name",canceled_at:"canceled_at",envelope_status:"envelope_status"};function IEnvelopeDocument(){}var FieldData=function(e){void 0===e&&(e={}),this.value=e.value,this.pageNum=e.pageNum,this.id=e.id,this.fName=e.fName,this.required=e.required,this.order=e.order,this.vName=e.vName,this.error=e.error||"",this.type=e.type};function FieldRole(){}function IField(){}function OptionType(){}function IPage(){}function IRecipient(){}function IEnvelopeSignature(){}function IReminder(){}function IRole(){}function ITemplate(){}function IStarTemplate(){}function ITemplateDocument(){}function ITemplateSearchParams(){}function ITemplateSearchResult(){}var SortOptions={CREATED_AT:"created_at",UPDATED_AT:"updated_at",NAME:"name",LAST_USED_AT:"last_used_at",COUNTER:"counter",STAR_COUNTER:"star_counter"};function ITimePeriod(){}function regParse(string){return JSON.parse(string,function(key,value){var prefix;return"string"!=typeof value?value:value.length<8?value:(prefix=value.substring(0,8),"function"===prefix?eval("("+value+")"):"_PxEgEr_"===prefix?eval(value.slice(8)):"_NuFrRa_"===prefix?eval(value.slice(8)):value)})}function getRGB(e){var t=e.replace("rgba(","").replace(")","").split(","),n=t[0],r=t[1],o=t[2],a=t[3],i=1-a,s=Math.round(255*(a*(n/255)+i)),u=Math.round(255*(a*(r/255)+i)),c=Math.round(255*(a*(o/255)+i));return"#"+rgbToHex(s)+rgbToHex(u)+rgbToHex(c)}function rgbToHex(e){var t=e.toString(16);return t.length<2?"0"+t:t}function getRGBA(e){switch(e%10){case 0:return 0===e?"rgba(255, 193, 7, 0.4)":"rgba(134, 134, 134, 0.3)";case 1:return"rgba(156, 39, 176, .4)";case 2:return"rgba(33, 150, 243, .4)";case 3:return"rgba(220, 231, 117, 0.3)";case 4:return"rgba(121, 134, 203, 0.3)";case 5:return"rgba(77, 182, 172, 0.3)";case 6:return"rgba(255, 202, 165, 0.3)";case 7:return"rgba(2, 247, 190, 0.3)";case 8:return"rgba(255, 138, 101, 0.3)";case 9:return"rgba(82, 255, 79, 0.3)";default:return"rgba(229, 115, 155, 0.3)"}}function nameToRGBA(e){if(e){var t=parseInt(e.slice(-1),10);isNaN(t)||(e+=(99*t).toString());for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);var o=(16776968&(n=Math.round(n/1.3))).toString(16).toUpperCase(),a="#"+"00000".substring(0,6-o.length)+o,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),s={r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)};return"rgba("+s.r+", "+s.g+", "+s.b+", 0.2)"}}var countries=[{code:"+7 840",name:"Abkhazia",value:"+7"},{code:"+93",name:"Afghanistan",value:"+93"},{code:"+355",name:"Albania",value:"+355"},{code:"+213",name:"Algeria",value:"+213"},{code:"+1",name:"American Samoa",value:"+1"},{code:"+376",name:"Andorra",value:"+376"},{code:"+244",name:"Angola",value:"+244"},{code:"+1",name:"Anguilla",value:"+1"},{code:"+1",name:"Antigua and Barbuda",value:"+1"},{code:"+54",name:"Argentina",value:"+54"},{code:"+374",name:"Armenia",value:"+374"},{code:"+297",name:"Aruba",value:"+297"},{code:"+247",name:"Ascension",value:"+247"},{code:"+61",name:"Australia",value:"+61"},{code:"+672",name:"Australian External Territories",value:"+672"},{code:"+43",name:"Austria",value:"+43"},{code:"+994",name:"Azerbaijan",value:"+994"},{code:"+1",name:"Bahamas",value:"+1"},{code:"+973",name:"Bahrain",value:"+973"},{code:"+880",name:"Bangladesh",value:"+880"},{code:"+1",name:"Barbados",value:"+1"},{code:"+1",name:"Barbuda",value:"+1"},{code:"+375",name:"Belarus",value:"+375"},{code:"+32",name:"Belgium",value:"+32"},{code:"+501",name:"Belize",value:"+501"},{code:"+229",name:"Benin",value:"+229"},{code:"+1",name:"Bermuda",value:"+1"},{code:"+975",name:"Bhutan",value:"+975"},{code:"+591",name:"Bolivia",value:"+591"},{code:"+387",name:"Bosnia and Herzegovina",value:"+387"},{code:"+267",name:"Botswana",value:"+267"},{code:"+55",name:"Brazil",value:"+55"},{code:"+246",name:"British Indian Ocean Territory",value:"+246"},{code:"+1",name:"British Virgin Islands",value:"+1"},{code:"+673",name:"Brunei",value:"+673"},{code:"+359",name:"Bulgaria",value:"+359"},{code:"+226",name:"Burkina Faso",value:"+226"},{code:"+257",name:"Burundi",value:"+257"},{code:"+855",name:"Cambodia",value:"+855"},{code:"+237",name:"Cameroon",value:"+237"},{code:"+1",name:"Canada",value:"+1"},{code:"+238",name:"Cape Verde",value:"+238"},{code:"+1",name:"Cayman Islands",value:"+1"},{code:"+236",name:"Central African Republic",value:"+236"},{code:"+235",name:"Chad",value:"+235"},{code:"+56",name:"Chile",value:"+56"},{code:"+86",name:"China",value:"+86"},{code:"+61",name:"Christmas Island",value:"+61"},{code:"+61",name:"Cocos-Keeling Islands",value:"+61"},{code:"+57",name:"Colombia",value:"+57"},{code:"+269",name:"Comoros",value:"+269"},{code:"+242",name:"Congo",value:"+242"},{code:"+243",name:"Congo, Dem. Rep. of (Zaire)",value:"+243"},{code:"+682",name:"Cook Islands",value:"+682"},{code:"+506",name:"Costa Rica",value:"+506"},{code:"+385",name:"Croatia",value:"+385"},{code:"+53",name:"Cuba",value:"+53"},{code:"+599",name:"Curacao",value:"+599"},{code:"+537",name:"Cyprus",value:"+537"},{code:"+420",name:"Czech Republic",value:"+420"},{code:"+45",name:"Denmark",value:"+45"},{code:"+246",name:"Diego Garcia",value:"+246"},{code:"+253",name:"Djibouti",value:"+253"},{code:"+1",name:"Dominica",value:"+1"},{code:"+1",name:"Dominican Republic",value:"+1"},{code:"+670",name:"East Timor",value:"+670"},{code:"+56",name:"Easter Island",value:"+56"},{code:"+593",name:"Ecuador",value:"+593"},{code:"+20",name:"Egypt",value:"+20"},{code:"+503",name:"El Salvador",value:"+503"},{code:"+240",name:"Equatorial Guinea",value:"+240"},{code:"+291",name:"Eritrea",value:"+291"},{code:"+372",name:"Estonia",value:"+372"},{code:"+251",name:"Ethiopia",value:"+251"},{code:"+500",name:"Falkland Islands",value:"+500"},{code:"+298",name:"Faroe Islands",value:"+298"},{code:"+679",name:"Fiji",value:"+679"},{code:"+358",name:"Finland",value:"+358"},{code:"+33",name:"France",value:"+33"},{code:"+596",name:"Martinique",value:"+596"},{code:"+594",name:"French Guiana",value:"+594"},{code:"+689",name:"French Polynesia",value:"+689"},{code:"+241",name:"Gabon",value:"+241"},{code:"+220",name:"Gambia",value:"+220"},{code:"+995",name:"Georgia",value:"+995"},{code:"+49",name:"Germany",value:"+49"},{code:"+233",name:"Ghana",value:"+233"},{code:"+350",name:"Gibraltar",value:"+350"},{code:"+30",name:"Greece",value:"+30"},{code:"+299",name:"Greenland",value:"+299"},{code:"+1",name:"Grenada",value:"+1"},{code:"+590",name:"Guadeloupe",value:"+590"},{code:"+1",name:"Guam",value:"+1"},{code:"+502",name:"Guatemala",value:"+502"},{code:"+224",name:"Guinea",value:"+224"},{code:"+245",name:"Guinea-Bissau",value:"+245"},{code:"+595",name:"Guyana",value:"+595"},{code:"+509",name:"Haiti",value:"+509"},{code:"+504",name:"Honduras",value:"+504"},{code:"+852",name:"Hong Kong SAR China",value:"+852"},{code:"+36",name:"Hungary",value:"+36"},{code:"+354",name:"Iceland",value:"+354"},{code:"+91",name:"India",value:"+91"},{code:"+62",name:"Indonesia",value:"+62"},{code:"+98",name:"Iran",value:"+98"},{code:"+964",name:"Iraq",value:"+964"},{code:"+353",name:"Ireland",value:"+353"},{code:"+972",name:"Israel",value:"+972"},{code:"+39",name:"Italy",value:"+39"},{code:"+225",name:"Ivory Coast",value:"+225"},{code:"+1",name:"Jamaica",value:"+1"},{code:"+81",name:"Japan",value:"+81"},{code:"+962",name:"Jordan",value:"+962"},{code:"+77",name:"Kazakhstan",value:"+7"},{code:"+254",name:"Kenya",value:"+254"},{code:"+686",name:"Kiribati",value:"+686"},{code:"+965",name:"Kuwait",value:"+965"},{code:"+996",name:"Kyrgyzstan",value:"+996"},{code:"+856",name:"Laos",value:"+856"},{code:"+371",name:"Latvia",value:"+371"},{code:"+961",name:"Lebanon",value:"+961"},{code:"+266",name:"Lesotho",value:"+266"},{code:"+231",name:"Liberia",value:"+231"},{code:"+218",name:"Libya",value:"+218"},{code:"+423",name:"Liechtenstein",value:"+423"},{code:"+370",name:"Lithuania",value:"+370"},{code:"+352",name:"Luxembourg",value:"+352"},{code:"+853",name:"Macau SAR China",value:"+853"},{code:"+389",name:"Macedonia",value:"+389"},{code:"+261",name:"Madagascar",value:"+261"},{code:"+265",name:"Malawi",value:"+265"},{code:"+60",name:"Malaysia",value:"+60"},{code:"+960",name:"Maldives",value:"+960"},{code:"+223",name:"Mali",value:"+223"},{code:"+356",name:"Malta",value:"+356"},{code:"+692",name:"Marshall Islands",value:"+692"},{code:"+596",name:"Martinique",value:"+596"},{code:"+222",name:"Mauritania",value:"+222"},{code:"+230",name:"Mauritius",value:"+230"},{code:"+262",name:"Mayotte or Réunion",value:"+262"},{code:"+52",name:"Mexico",value:"+52"},{code:"+691",name:"Micronesia",value:"+691"},{code:"+1",name:"Midway Island",value:"+1"},{code:"+373",name:"Moldova",value:"+373"},{code:"+377",name:"Monaco",value:"+377"},{code:"+976",name:"Mongolia",value:"+976"},{code:"+382",name:"Montenegro",value:"+382"},{code:"+1",name:"Montserrat",value:"+1"},{code:"+212",name:"Morocco",value:"+212"},{code:"+95",name:"Myanmar",value:"+95"},{code:"+264",name:"Namibia",value:"+264"},{code:"+674",name:"Nauru",value:"+674"},{code:"+977",name:"Nepal",value:"+977"},{code:"+31",name:"Netherlands",value:"+31"},{code:"+599",name:"Netherlands Antilles",value:"+599"},{code:"+1",name:"Nevis",value:"+1"},{code:"+687",name:"New Caledonia",value:"+687"},{code:"+64",name:"New Zealand",value:"+64"},{code:"+505",name:"Nicaragua",value:"+505"},{code:"+227",name:"Niger",value:"+227"},{code:"+234",name:"Nigeria",value:"+234"},{code:"+683",name:"Niue",value:"+683"},{code:"+672",name:"Norfolk Island",value:"+672"},{code:"+850",name:"North Korea",value:"+850"},{code:"+1",name:"Northern Mariana Islands",value:"+1"},{code:"+47",name:"Norway",value:"+47"},{code:"+968",name:"Oman",value:"+968"},{code:"+92",name:"Pakistan",value:"+92"},{code:"+680",name:"Palau",value:"+680"},{code:"+970",name:"Palestinian Territory",value:"+970"},{code:"+507",name:"Panama",value:"+507"},{code:"+675",name:"Papua New Guinea",value:"+675"},{code:"+595",name:"Paraguay",value:"+595"},{code:"+51",name:"Peru",value:"+51"},{code:"+63",name:"Philippines",value:"+63"},{code:"+48",name:"Poland",value:"+48"},{code:"+351",name:"Portugal",value:"+351"},{code:"+1",name:"Puerto Rico",value:"+1"},{code:"+974",name:"Qatar",value:"+974"},{code:"+40",name:"Romania",value:"+40"},{code:"+7",name:"Russia",value:"+7"},{code:"+250",name:"Rwanda",value:"+250"},{code:"508",name:"Saint Pierre and Miquelon",value:"508"},{code:"+685",name:"Samoa",value:"+685"},{code:"+378",name:"San Marino",value:"+378"},{code:"+966",name:"Saudi Arabia",value:"+966"},{code:"+221",name:"Senegal",value:"+221"},{code:"+381",name:"Serbia",value:"+381"},{code:"+248",name:"Seychelles",value:"+248"},{code:"+232",name:"Sierra Leone",value:"+232"},{code:"+65",name:"Singapore",value:"+65"},{code:"+421",name:"Slovakia",value:"+421"},{code:"+386",name:"Slovenia",value:"+386"},{code:"+677",name:"Solomon Islands",value:"+677"},{code:"+27",name:"South Africa",value:"+27"},{code:"+500",name:"South Georgia and the South Sandwich Islands",value:"+500"},{code:"+82",name:"South Korea",value:"+82"},{code:"+34",name:"Spain",value:"+34"},{code:"+94",name:"Sri Lanka",value:"+94"},{code:"+249",name:"Sudan",value:"+249"},{code:"+597",name:"Suriname",value:"+597"},{code:"+268",name:"Swaziland",value:"+268"},{code:"+46",name:"Sweden",value:"+46"},{code:"+41",name:"Switzerland",value:"+41"},{code:"+963",name:"Syria",value:"+963"},{code:"+886",name:"Taiwan",value:"+886"},{code:"+992",name:"Tajikistan",value:"+992"},{code:"+255",name:"Tanzania",value:"+255"},{code:"+66",name:"Thailand",value:"+66"},{code:"+670",name:"Timor Leste",value:"+670"},{code:"+228",name:"Togo",value:"+228"},{code:"+690",name:"Tokelau",value:"+690"},{code:"+676",name:"Tonga",value:"+676"},{code:"+1",name:"Trinidad and Tobago",value:"+1"},{code:"+216",name:"Tunisia",value:"+216"},{code:"+90",name:"Turkey",value:"+90"},{code:"+993",name:"Turkmenistan",value:"+993"},{code:"+1",name:"Turks and Caicos Islands",value:"+1"},{code:"+688",name:"Tuvalu",value:"+688"},{code:"+1",name:"U.S. Virgin Islands",value:"+1"},{code:"+256",name:"Uganda",value:"+256"},{code:"+380",name:"Ukraine",value:"+380"},{code:"+971",name:"United Arab Emirates",value:"+971"},{code:"+44",name:"United Kingdom",value:"+44"},{code:"+1",name:"United States",value:"+1"},{code:"+598",name:"Uruguay",value:"+598"},{code:"+998",name:"Uzbekistan",value:"+998"},{code:"+678",name:"Vanuatu",value:"+678"},{code:"+58",name:"Venezuela",value:"+58"},{code:"+84",name:"Vietnam",value:"+84"},{code:"+1",name:"Wake Island",value:"+1"},{code:"+681",name:"Wallis and Futuna",value:"+681"},{code:"+967",name:"Yemen",value:"+967"},{code:"+260",name:"Zambia",value:"+260"},{code:"+255",name:"Zanzibar",value:"+255"},{code:"+263",name:"Zimbabwe",value:"+263"}];function getCountryByCode(e){if("+1"===e.substring(0,2));else{if(isFrenchGuiana(e))return{code:"+594",name:"French Guiana",value:"+594"};if(isGuadeloupe(e))return{code:"+590",name:"Guadeloupe",value:"+590"};if(isMartinique(e))return{code:"+596",name:"Martinique",value:"+596"};if(isMayotte(e))return{code:"+262",name:"Mayotte or Réunion",value:"+262"}}}function isFrenchGuiana(e){return"+594"===e.substring(0,4)}function isGuadeloupe(e){return"+590"===e.substring(0,4)}function isMartinique(e){return"+596"===e.substring(0,4)}function isMayotte(e){return"+262"===e.substring(0,4)}function getPlusOneCountry(e){var t;switch(e.substring(0,5)){case"+1684":t={code:"+1",name:"American Samoa",value:"+1"};break;case"+1264":t={code:"+1",name:"Anguilla",value:"+1"};case"+1268":t={code:"+1",name:"Antigua and Barbuda",value:"+1"};case"+1242":t={code:"+1",name:"Bahamas",value:"+1"};break;case"+1246":t={code:"+1",name:"Barbados",value:"+1"};break;case"+1441":t={code:"+1",name:"Bermuda",value:"+1"};break;case"+1284":t={code:"+1",name:"British Virgin Islands",value:"+1"};break;case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":case"+1":t={code:"+1",name:"",value:"+1"}}return t}function isCanada(e){var t=e.substring(0,5);return["403","587","780","825","604","250","778","236","204","431","506","709","867","782","902","867","548","705","365","613","807","226","289","437","519","647","905","249","343","416","902","782","450","418","579","873","367","514","581","819","438","639","306","867"].findIndex(function(e){return"+1"+e===t})>-1}function isAmericanSamoa(e){return"+1684"===e.substring(0,5)}function isDominicanRepublic(e){return"+1809"===e.substring(0,5)||"+1829"===e.substring(0,5)||"+1849"===e.substring(0,5)}function isPuertoRico(e){return"+"===e.substring(0,5)||"+"===e.substring(0,5)}function getMatchingCountry(e,t){for(var n=0;n<countries.length;n++)countries[n].code===e.substring(0,t)&&0}function simpleE164Validator(e){var t=new RegExp(/\+[1-9]\d{6,14}/g);return null!==e&&e.length<16&&e.length>6&&t.test(e)||""===e||null===e}var AuthGuardService=function(){function e(e,t,n,r){this.vTokenAuth=e,this.vTokenAuthGuard=t,this.vTokenStateService=n,this.document=r}return e.prototype.canActivate=function(e,t){var n=this.vTokenStateService.getOtherCookieObject("signer_token"),r=e&&e.routeConfig&&e.routeConfig.path?e.routeConfig.path:e.path,o=!!r&&(r.match(/(:id\/role\/:role)/g)||r.includes("envelope"));return!(!e.routeConfig||r)||(!(!n||!o)||this.checkLogin(e,t.url))},e.prototype.canActivateChild=function(e,t){return this.canActivate(e,t)},e.prototype.checkLogin=function(e,t){return!(!this.vTokenAuth.isAuthenticated()&&!this.isGuestLink(e))||(this.vTokenAuthGuard.signOut(),!1)},e.prototype.canLoad=function(e){var t="/"+e.path;return this.checkLogin(e,t)},e.prototype.canLoadBuilder=function(e,t){},e.prototype.isGuestLink=function(e){var t=this.vTokenStateService.getOtherCookie("signer_token"),n=e&&e.routeConfig&&e.routeConfig.path?e.routeConfig.path:e.path,r=!!n&&(n.match(/(:id\/role\/:role)/g)||n.includes("envelope"));if(e&&r&&t){if(t)return!0;this.vTokenStateService.setTimer(!0)}return e._routeConfig&&e._routeConfig.path.match(/(:id\/role\/:role)/g)&&!!t},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:tokens.VerdocsAuthService},{type:tokens.VerdocsAuthGuardService},{type:tokens.VerdocsStateService},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]},e}();var DocumentsService=function(){function e(e,t,n,r,o,a){this.httpClient=e,this.validatorService=t,this.tokenObjectService=n,this.vTokenStateService=r,this.injector=o,this.platform=a,this._currentFields=new rxjs.BehaviorSubject([]),this._currEnvelope=new rxjs.BehaviorSubject(""),this.allEnvelopes=new rxjs.BehaviorSubject([]),this._currentExtendedEnvelope=new rxjs.BehaviorSubject({}),this._customFilterSubject=new rxjs.BehaviorSubject({}),this.currEnvelope$=this._currEnvelope.asObservable(),this.fieldsStream=this._currentFields.asObservable(),this.inProgressSubject=new rxjs.BehaviorSubject(!1),this.workingField=new FieldData({order:0}),this.envelope=null,this.validators={},this.toggleNextSubject=new rxjs.BehaviorSubject(!1),this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url,this._documentUrl=this._rForm_backend_url+"/envelopes"}return e.prototype.setCurrentEnvelope=function(e){this.currEnvelope=e,this._currEnvelope.next(e)},e.prototype.setEnvData=function(e,t){this.currEnvelope=e,this.currRoleName=t},e.prototype.updateEnvelopes=function(e){this.allEnvelopes.next(e)},Object.defineProperty(e.prototype,"role_name",{get:function(){return this.currRoleName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"env_id",{get:function(){return this.currEnvelope},enumerable:!0,configurable:!0}),e.prototype.sendInvite=function(e){return this.httpClient.post(this._documentUrl,e).pipe(operators.map(function(e){return e},function(e){return e}))},e.prototype.sendDelegate=function(e,t){return this.httpClient.post(this._documentUrl+"/"+e+"/recipients/"+this.currRoleName+"/delegate",t).pipe(operators.map(function(e){return e},function(e){return e}))},e.prototype.resendInvitation=function(e,t){return this.httpClient.post(this._documentUrl+"/"+e+"/recipients/"+t+"/resend_invitation",null)},e.prototype.getEnvelope=function(e){var t=this,n=e||this.currEnvelope;return this.setCurrentEnvelope(n),this.httpClient.get(this._documentUrl+"/"+n).pipe(operators.map(function(e){return t.envelope=e,t.envelope.recipients=t.sortRecipients(t.envelope),t._currentExtendedEnvelope.next(t.envelope),t.envelopeData=t.envelope,t.envelope}))},e.prototype.getAllEnvelopes=function(e){var t=this,n=e?this._documentUrl+"?template_id="+e:this._documentUrl;return this.httpClient.request(new http.HttpRequest("GET",n,{},{reportProgress:!0,responseType:"json"})).pipe(operators.map(function(e){return e instanceof http.HttpResponse?(t.updateEnvelopes(e.body),e):e}))},e.prototype.searchEnvelopes=function(e){var t=this;for(var n in e)e.hasOwnProperty(n)&&null===e[n]&&delete e[n];return this.httpClient.request(new http.HttpRequest("POST",this._documentUrl+"/search",e,{reportProgress:!0,responseType:"json"})).pipe(operators.map(function(e){return e instanceof http.HttpResponse?(t.updateEnvelopes(e.body),e):e}))},e.prototype.getRecentActivities=function(e){var t={sort_by:"updated_at",ascending:!1,row:5,page:e||1};return this.searchEnvelopes(t)},e.prototype.applyCustomSearch=function(e,t){return e.envelope_status&&!t.envelope_status&&(t.envelope_status=e.envelope_status),e.updated_at&&(!t.updated_at&&t.envelope_status?t.updated_at=e.updated_at:t.envelope_status||(t.created_at=e.updated_at,t.sort_by||(t.sort_by="created_at"))),e.recipient_name&&(t.recipient_name=e.recipient_name),e.envelope_name&&(t.envelope_name=e.envelope_name),e.recipient_email&&(t.recipient_email=e.recipient_email),e.text_field_value&&(t.text_field_value=e.text_field_value),t},e.prototype.filterSearchBy=function(e,t,n,r,o,a,i){var s={ascending:t||!1,row:n||10,page:r||1};switch(e){case"action_required":s.is_recipient=!0,s.recipient_status=["invited","opened","signed"],s.envelope_status=["pending","in progress"],s.sort_by=a,o&&(s.updated_at=o,a||(s.sort_by="updated_at"));break;case"waiting_on_others":return this.getWaitingOnOthers(t,n,r,o,a,i);case"waiting_on_others_unfiltered":s.is_owner=!0,s.envelope_status=["pending","in progress"],s.sort_by=a||null,o&&(s.updated_at=o,a||(s.sort_by="updated_at"));break;case"inbox":s.is_recipient=!0,s.recipient_status=["invited","declined","opened","signed","submitted","canceled"],s.sort_by=a||null,o&&(s.created_at=o,a||(s.sort_by="created_at"));break;case"completed":s.envelope_status=["complete"],s.sort_by=a||null,o&&(s.updated_at=o,a||(s.sort_by="updated_at"));break;case"sent":s.is_owner=!0,s.sort_by=a||null,o&&(s.created_at=o,a||(s.sort_by="created_at"));break;case"all":s.sort_by=a||null,o&&(s.created_at=o,a||(s.sort_by="created_at"))}return i&&(s=this.applyCustomSearch(i,__assign({},s))),this.searchEnvelopes(s)},e.prototype.getWaitingOnOthers=function(e,t,n,r,o,a){var i=this,s=null;return this.filterSearchBy("action_required",e,t,n,r,o,a).pipe(operators.concatMap(function(u){return u instanceof http.HttpResponse?(s=u.body.result,i.filterSearchBy("waiting_on_others_unfiltered",e,t,n,r,o,a)):rxjs.empty()}),operators.map(function(e){if(e instanceof http.HttpResponse&&s){var t=e.body.result,n=lodash.differenceBy(t,s,"id");e.body.result=n,e.body.total=n.length}return e}))},e.prototype.getEnvelopeOwnerInfo=function(e){return this.httpClient.get(this._documentUrl+"/"+e+"?owner_info=true").pipe(operators.map(function(e){return e}))},e.prototype.getEnvelopeDocUrl=function(e,t){var n=this;return this.httpClient.get(this._documentUrl+"/"+e+"/envelope_documents/"+t+"?file=true",{responseType:"blob"}).pipe(operators.map(function(e){if(common.isPlatformBrowser(n.platform))return window.URL.createObjectURL(e)},function(e){console.error(e)}))},e.prototype.getEnvelopePdfWithProgress=function(e,t){var n=this._documentUrl+"/"+e+"/envelope_documents/"+t+"?file=true";return this.httpClient.request(new http.HttpRequest("GET",n,{},{reportProgress:!0,responseType:"blob"})).pipe(operators.map(function(e){return e}))},e.prototype.getEnvelopeDocBlob=function(e,t){return this.httpClient.get(this._documentUrl+"/"+e+"/envelope_documents/"+t+"?file=true",{responseType:"blob"}).pipe(operators.map(function(e){return e}))},e.prototype.getEnvelopeCertificateBlob=function(e){return this.httpClient.get(this._documentUrl+"/"+e+"?certificate_file=true",{responseType:"blob"}).pipe(operators.map(function(e){return e}))},e.prototype.getTemplateDoc=function(e,t,n){var r=this._rForm_backend_url+"/liveview/"+e+"/token/"+t;return this.httpClient.get(r,{responseType:"json"}).pipe(operators.map(function(e){return e},function(e){return console.error(e),e}))},e.prototype.getTemplatePDF=function(e,t){var n=this._rForm_backend_url+"/liveview/"+e+"/token/"+t+"?file=true";return this.httpClient.request(new http.HttpRequest("GET",n,{},{reportProgress:!0,responseType:"blob"})).pipe(operators.map(function(e){return e}))},e.prototype.cancelEnvelope=function(e){return this.httpClient.put(this._documentUrl+"/"+e,{action:"cancel"},{responseType:"json"}).pipe(operators.map(function(e){return e},function(e){return e}))},e.prototype.submitEnvelope=function(e,t){return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"submit"}).pipe(operators.map(function(e){return e}))},e.prototype.declineEnvelope=function(e,t){return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"decline"}).pipe(operators.map(function(e){return e}))},e.prototype.uploadAttachment=function(e,t,n){var r;if(t){var o=new FormData;return o.append("document",t,t.name),r=new http.HttpRequest("PUT",this._rForm_backend_url+"/envelopes/"+e+"/fields/"+n,o,{reportProgress:!0}),this.httpClient.request(r).pipe(operators.map(function(e){return e}))}},e.prototype.downloadAttachment=function(e){var t=(new http.HttpHeaders).set("content-type",e.settings.type);return this.httpClient.get(this._rForm_backend_url+"/envelopes/"+e.envelope_id+"/fields/"+e.name+"/document",{headers:t,responseType:"blob"}).pipe(operators.map(function(e){return e}))},e.prototype.getAttachmentDataByRecipients=function(e){var t,n,r,o,a=e.recipients;if(a&&a.length>0){var i=[];try{for(var s=__values(a),u=s.next();!u.done;u=s.next()){var c=u.value;if(c.fields&&c.fields.length>0)try{for(var l=(r=void 0,__values(c.fields)),p=l.next();!p.done;p=l.next()){var d=p.value;"attachment"===d.type&&d.settings.url&&i.push({recipient:c.full_name,fieldObject:d})}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}return[]},e.prototype.postSignatureBlob=function(e){var t=e,n=new FormData;n.append("signature",t,t.name);var r=new http.HttpRequest("POST",this._rForm_backend_url+"/signatures",n);return this.httpClient.request(r).toPromise().then(function(e){if(e&&e.body)return e.body;console.error("Failed to upload signature image")})},e.prototype.postInitialBlob=function(e){var t=e,n=new FormData;n.append("initial",t,t.name);var r=new http.HttpRequest("POST",this._rForm_backend_url+"/initials",n);return this.httpClient.request(r).toPromise().then(function(e){if(e&&e.body)return e.body;console.error("Failed to upload Initial")})},e.prototype.putSignatureField=function(e,t,n){var r=this;return new Promise(function(o,a){return __awaiter(r,void 0,void 0,function(){var r;return __generator(this,function(a){switch(a.label){case 0:return[4,this.getPublicIp()];case 1:return r=a.sent(),this.httpClient.put(this._documentUrl+"/"+e+"/fields/"+t+"/signature/"+n,{ip_address:r}).toPromise().then(function(e){return o(e)}),[2]}})})})},e.prototype.putInitialField=function(e,t,n){var r=this;return new Promise(function(o,a){return __awaiter(r,void 0,void 0,function(){var r;return __generator(this,function(a){switch(a.label){case 0:return[4,this.getPublicIp()];case 1:return r=a.sent(),this.httpClient.put(this._documentUrl+"/"+e+"/fields/"+t+"/initial/"+n,{ip_address:r}).toPromise().then(function(e){return o(e)}),[2]}})})})},e.prototype.putEnvelopeField=function(e,t){var n=this;return new Promise(function(r,o){n.httpClient.put(n._documentUrl+"/"+e+"/fields/"+n.workingField.fName,t).toPromise().then(function(e){return r(e)})})},e.prototype.updateGroupedField=function(e,t,n,r){var o=this;return"boolean"==typeof r&&(t.prepared=r),new Promise(function(r,a){o.httpClient.put(o._documentUrl+"/"+e+"/fields/"+n,t).toPromise().then(function(e){return r(e)})})},e.prototype.getPublicIp=function(){return this.httpClient.jsonp("https://api.ipify.org?format=jsonp","callback=JSONP_CALLBACK").toPromise().then(function(e){return e.ip}).catch(function(e){return console.error("Failed to get ip",e),"ip_unavailable"})},e.prototype.sortRecipients=function(e){if(e.recipients.length<1)return[];for(var t=e.recipients.sort(function(e,t){return e.sequence===t.sequence?e.role_name<t.role_name?-1:e.role_name>t.role_name?1:0:t.sequence>e.sequence?-1:t.sequence<e.sequence?1:0}),n=t.filter(function(e){return"signer"===e.type}),r=0;r<n.length;r++){var o=lodash.findIndex(t,{sequence:n[r].sequence,role_name:n[r].role_name});o>=0&&(t[o].rgba=getRGBA(r))}return t},e.prototype.getRecipientColor=function(e,t){if(t)return getRGBA(t);if(!(this.envelope&&this.envelope.recipients&&this.envelope.recipients.length>0))return nameToRGBA(e);var n=lodash.findIndex(this.envelope.recipients,{role_name:e});return n>=0&&this.envelope.recipients[n].rgba?this.envelope.recipients[n].rgba:void 0},e.prototype.validateEnvelopeField=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return null==this.workingField.vName||""===this.workingField.value?[3,2]:[4,this.validatorService.getValidatorsObject()];case 1:return[2,e.sent()[this.workingField.vName].test(this.workingField.value)&&this.satisfyRequired()];case 2:return[2,this.satisfyRequired()]}})})},e.prototype.satisfyRequired=function(){return!this.workingField.required||"checkbox"===this.workingField.type||"timestamp"===this.workingField.type||!!this.workingField.value},e.prototype.sortFields=function(e){var t=this;e=e.sort(function(e,t){return e.page-t.page});var n=null;return e=e.sort(function(e,r){var o="settings",a=t.canBeSameRow(e,r).distance,i=t.canBeSameRow(e,r).higherHeight;if(e[o]||(o="setting"),e.page<r.page)return-1;if(e.page>r.page)return 1;var s=e[o].x,u=r[o].x;e[o].y,r[o].y;return a>=-3&&a<=i?(n=null===n?a:a<n?a:n,s<u?-1:s>u?1:n>=a?-1:n<=a?1:0):r[o].y-e[o].y})},e.prototype.checkIfEnvelopeOwner=function(e){var t=this.vTokenStateService.getOtherCookie("signer_token"),n=this.tokenObjectService.getProfile();return!(t&&!n)&&(e?n.id===e.profile_id:void 0)},e.prototype.canBeSameRow=function(e,t){var n="setting";e[n]||(n="settings");var r,o,a,i=this.getHeight(e),s=this.getHeight(t),u=e[n].y,c=t[n].y;return u<c?(r=i+u,o=c,a=s):(r=s+c,o=u,a=i),{distance:r-o,higherHeight:a}},e.prototype.getHeight=function(e){var t="setting";e[t]||(t="settings");var n=0;switch(e.type){case"signature":case"initial":n=36;break;case"checkbox":n=13.5;break;case"attachment":case"payment":n=24;break;default:n=e[t].height||0}return n},e.prototype.hasCertificate=function(e){return e.certificate_document_id||-1!==["complete","canceled","declined"].indexOf(this.envelope.status)},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:ValidatorService},{type:tokens.VerdocsTokenObjectService},{type:tokens.VerdocsStateService},{type:core.Injector},{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]}]},e}();var EnvelopRemindersService=function(){function e(e,t){this.http=e,this.injector=t,this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.getReminder=function(e,t){return this.http.get(this._rForm_backend_url+"/envelopes/"+e+"/reminder/"+t).toPromise().then(function(e){return e})},e.prototype.updateReminder=function(e,t,n){return this.http.put(this._rForm_backend_url+"/envelopes/"+e+"/reminder/"+t,n).toPromise()},e.prototype.deleteReminder=function(e,t){return this.http.delete(this._rForm_backend_url+"/envelopes/"+e+"/reminder/"+t).toPromise()},e.prototype.createReminder=function(e,t){return this.http.post(this._rForm_backend_url+"/envelopes/"+e+"/reminder",t).toPromise().then(function(e){return e})},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:core.Injector}]},e}();var RecipientService=function(){function e(e,t){this.httpClient=e,this.injector=t,this.recipientsSubject=new rxjs.ReplaySubject,this.recipients=[],this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.updateRecipients=function(e){if(e&&e.length&&e.length>0)this.recipients=e;else if(e)if(this.recipients&&this.recipients.length&&this.recipients.length>0){var t=lodash.findIndex(this.recipients,{role_name:e.role_name});-1!==t&&(this.recipients[t]=e)}else this.recipients.push(e);this.recipientsSubject.next(this.recipients)},e.prototype.getRecipients=function(e){var t=this;return this.httpClient.get(this._rForm_backend_url+"/envelopes/"+e+"/recipients").toPromise().then(function(e){return t.updateRecipients(e),e}).catch(function(e){return console.error(e),[]})},e.prototype.prepareRecipients=function(e,t,n){var r=this;return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"prepare",recipients:n}).toPromise().then(function(e){r.updateRecipients(e)})},e.prototype.updateRecipientName=function(e,t,n){var r=this;return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"update",new_full_name:n}).toPromise().then(function(e){r.updateRecipients(e)})},e.prototype.setAsAgreed=function(e,t){var n=this;return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"update",agreed:!0}).toPromise().then(function(e){n.updateRecipients(e)})},e.prototype.claimProfile=function(e,t,n){var r=this;return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t+"/claim",{profile:n}).toPromise().then(function(e){r.updateRecipients(e)})},e.prototype.updateRecipientInfoByOwner=function(e,t,n){var r=this;return this.httpClient.put(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t,{action:"owner_update",full_name:n.full_name,email:n.email,phone:n.phone}).toPromise().then(function(e){return r.updateRecipients(e),e})},e.prototype.getInPersonLink=function(e,t){return this.httpClient.get(this._rForm_backend_url+"/envelopes/"+e+"/recipients/"+t+"?in_person_link=true").toPromise().then(function(e){return e})},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:core.Injector}]},e}();var BuilderService=function(){function e(e,t,n){this.http=e,this.injector=t,this.eventTracker=n,this.saveStatusSubject=new rxjs.ReplaySubject,this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.createTemplate=function(e){return this.http.post(this._rForm_backend_url+"/templates",e).pipe(operators.map(function(e){return e}))},e.prototype.uploadTemplateDocument=function(e,t){var n=new FormData;n.append("document",e,e.name);var r=new http.HttpRequest("POST",this._rForm_backend_url+"/templates/"+t.id+"/documents",n,{reportProgress:!0});return this.http.request(r).pipe(operators.map(function(e){return e}),operators.catchError(function(e){return rxjs.throwError(e)}))},e.prototype.addTemplatePage=function(e,t,n){var r={sequence:t,page_number:t,document_id:e.id};return this.http.post(this._rForm_backend_url+"/templates/"+n+"/pages",r).pipe(operators.map(function(e){return e}),operators.catchError(function(e){return rxjs.throwError(e)}))},e.prototype.addTemplatePages=function(e,t,n){var r=this;return rxjs.from(t).pipe(operators.mergeMap(function(t){var o={sequence:t,page_number:t,document_id:e.id};return r.http.post(r._rForm_backend_url+"/templates/"+n+"/pages",o).pipe(operators.delay(200))}))},e.prototype.addTemplateField=function(e,t,n,r){var o=this;return e.name=e.name.trim(),this.http.post(this._rForm_backend_url+"/templates/"+e.template_id+"/fields",e).pipe(operators.map(function(a){o.eventTracker.createEvent({category:"document",action:"document "+a.type+" field added",label:"document id: "+e.template_id}),r.pages[t].fields[n]=a;var i=lodash.findIndex(r.roles,{name:a.role_name});return i>=0&&r.roles[i].fields.push(a),r}))},e.prototype.deleteTemplateField=function(e,t,n,r){return this.http.delete(this._rForm_backend_url+"/templates/"+e.id+"/fields/"+t.trim()).pipe(operators.map(function(r){var o=lodash.findIndex(e.pages[n].fields,{name:t}),a=lodash.findIndex(e.roles,{name:e.pages[n].fields[o].role_name});if(a>-1){var i=lodash.findIndex(e.roles[a].fields,{name:t});i>-1&&e.roles[a].fields.splice(i,1)}return e.pages[n].fields.splice(o,1),e}))},e.prototype.updateRoleField=function(e,t,n,r){var o=lodash.findIndex(e.roles[n].fields,{name:r});return o>=0?e.roles[n].fields[o]=t:e.roles[n].fields.push(t),e},e.prototype.updateTemplateField=function(e,t,n,r,o){var a=this;return n=n.trim(),this.http.put(this._rForm_backend_url+"/templates/"+e.id+"/fields/"+n,t).pipe(operators.map(function(t){a.eventTracker.createEvent({category:"document",action:"document "+t.type+" field updated",label:"document id: "+e.id});var o=lodash.findIndex(e.pages[r].fields,{name:n});t.page_sequence-1!==r?(e.pages[r].fields.splice(o,1),e.pages[t.page_sequence-1].fields.push(t)):e.pages[r].fields[o]=t;var i=lodash.findIndex(e.roles,{name:t.role_name});return i>=0&&(e=a.updateRoleField(e,t,i,n)),a.saveStatusSubject.next("saved"),e}))},e.prototype.updateDropdownField=function(e,t,n,r,o){var a=this;return n=n.trim(),this.http.put(this._rForm_backend_url+"/templates/"+e.id+"/fields/"+n,t).pipe(operators.map(function(t){var o=lodash.findIndex(e.pages[r].fields,{name:n});return e.pages[r].fields[o]=t,a.saveStatusSubject.next("saved"),e}))},e.prototype.addFieldRole=function(e,t,n,r,o){var a=JSON.stringify({field_id:t,role_id:n});return this.http.post(this._rForm_backend_url+"/template/"+e+"/field_role",a).toPromise().then(function(e){return e})},e.prototype.addRole=function(e,t){var n=this,r=this._rForm_backend_url+"/templates/"+t.id+"/roles",o=[];o=o.concat(e);var a=[];return o.forEach(function(e){a.push(n.http.post(r,e))}),o&&o.length>0?rxjs.forkJoin(a).pipe(operators.map(function(e){e.concat(e),t.roles||(t.roles=[]);var n=e.map(function(e){return e.fields=[],e});return t.roles=t.roles.concat(n),t},function(e){return console.error(e),console.error("Couldn't save all the roles"),e})):rxjs.of(t)},e.prototype.deleteRole=function(e,t){return this.http.delete(this._rForm_backend_url+"/templates/"+t.id+"/roles/"+e).toPromise().then(function(){})},e.prototype.deleteRoles=function(e,t){var n=this,r=[];return e.forEach(function(e){t=__assign({},t,{roles:t.roles.filter(function(t){return t.name!==e})}),r.push(n.http.delete(n._rForm_backend_url+"/templates/"+t.id+"/roles/"+e))}),rxjs.forkJoin(r).pipe(operators.map(function(){return t},function(e){return console.error(e),console.error("Couldn't delete all the roles"),e}))},e.prototype.updateRoles=function(e,t){var n=this,r=[];return e.forEach(function(e){var o={template_id:t.id,name:e.name.trim(),full_name:e.full_name,email:e.email,sequence:e.sequence,type:e.type,delegator:e.delegator,message:e.message,phone:e.phone},a=lodash.findIndex(t.roles,{name:e.old_name});a>=0&&(t.roles[a]=__assign({},t.roles[a],{template_id:t.id,name:e.name.trim(),full_name:e.full_name,email:e.email,sequence:e.sequence,type:e.type,delegator:e.delegator,message:e.message,phone:e.phone})),n.eventTracker.createEvent({category:"document",action:"document role updated",label:"document id: "+t.id}),r.push(n.http.put(n._rForm_backend_url+"/templates/"+t.id+"/roles/"+e.old_name,o))}),rxjs.forkJoin(r).pipe(operators.map(function(){return t},function(e){return console.error(e),console.error("Couldn't save all the roles"),e}))},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:core.Injector},{type:eventTracker.EventTrackerService}]},e}();var TemplatesRemindersService=function(){function e(e,t){this.http=e,this.injector=t,this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.getReminder=function(e,t){return this.http.get(this._rForm_backend_url+"/templates/"+e+"/reminder/"+t).toPromise().then(function(e){return e})},e.prototype.updateReminder=function(e,t,n){return this.http.put(this._rForm_backend_url+"/templates/"+e+"/reminder/"+t,n).toPromise()},e.prototype.deleteReminder=function(e,t){return this.http.delete(this._rForm_backend_url+"/templates/"+e+"/reminder/"+t).toPromise()},e.prototype.createReminder=function(e,t){return this.http.post(this._rForm_backend_url+"/templates/"+e+"/reminder",t).toPromise().then(function(e){return e})},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:core.Injector}]},e}();var TemplatesGuardService=function(){function e(e){this.vTokenObjectService=e}return e.prototype.canPerformAction=function(e,t){try{var n=!1,r=null,o=[];if(!t&&!e.includes("create"))throw{error:"You need to provide template object"};var a=this.vTokenObjectService.getProfile(),i=!!a&&(t&&t.profile_id===a.id),s=!!a&&(t&&t.organization_id===a.organization_id),u=t?t.is_personal:null,c=t?t.is_public:null;switch(e){case TemplateActions.CREATE_PERSONAL:o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL);break;case TemplateActions.CREATE_ORG:o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG);break;case TemplateActions.CREATE_PUBLIC:o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC);break;case TemplateActions.READ:i||(!u&&s||!c)&&o.push(TemplatePermissions.TEMPLATE_MEMBER_READ);break;case TemplateActions.WRITE:i||(o.push(TemplatePermissions.TEMPLATE_MEMBER_READ),o.push(TemplatePermissions.TEMPLATE_MEMBER_WRITE));break;case TemplateActions.CHANGE_VISIBILITY_PERSONAL:i?o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL):o.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);break;case TemplateActions.CHANGE_VISIBILITY_ORG:i?o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG):o.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);break;case TemplateActions.CHANGE_VISIBILITY_PUBLIC:i?(o.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC),o.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY)):o.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);break;case TemplateActions.DELETE:i?o.push(TemplatePermissions.TEMPLATE_CREATOR_DELETE):o.push(TemplatePermissions.TEMPLATE_MEMBER_DELETE);break;default:throw{error:"Action is not defined"}}return this.hasPermissions(o)?n=!0:r="Insufficient access to perform '"+e+"'. Needed permissions: "+o.toString(),{canPerform:n,message:r}}catch(t){console.error({message:"Failed to check whether action ("+e+") can be done, in TemplateGuardService",err:t})}},e.prototype.hasPermissions=function(e){var t=this.vTokenObjectService.getPermissions();return lodash.intersection(t,e).length===e.length},e.prototype.canBeSender=function(e){var t=this.vTokenObjectService.getProfile();if(!t)return!1;switch(e.sender){case TemplateSenderTypes.CREATOR:return t.id===e.profile_id;case TemplateSenderTypes.ORGANIZATION_MEMBER:case TemplateSenderTypes.ORGANIZATION_MEMBER_AS_CREATOR:return t.id===e.profile_id||e.organization_id===t.organization_id;default:return!0}},e.prototype.canUserCreateTemplate=function(){return this.canPerformAction(TemplateActions.CREATE_PERSONAL,null).canPerform||this.canPerformAction(TemplateActions.CREATE_ORG,null).canPerform||this.canPerformAction(TemplateActions.CREATE_PUBLIC,null).canPerform},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:tokens.VerdocsTokenObjectService}]},e}();var TemplatesService=function(){function e(e,t,n,r,o){this.http=e,this.vTokenObjectService=t,this.templateGuard=n,this.injector=r,this.platform=o,this.templates=new rxjs.Subject,this.template=new rxjs.Subject,this.loadingStatus=new rxjs.Subject,this._config_token=this.injector.get(VSDKConfigToken),this.rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.errorMessageNotVerified=function(e){return"email is not verified"===e.error.error&&401===e.error.code},e.prototype.getTemplates=function(e){var t=this;this.loadingStatus.next(!0),this.templates.next([]);var n=null;if(e)switch(e){case"creator":n="?is_creator=true";break;case"organization":n="?is_organization=true";break;case"starred":n="?is_starred=true";break;default:n=""}var r=this.rForm_backend_url+"/templates"+(n||"");return this.http.request(new http.HttpRequest("GET",r,{},{reportProgress:!0})).pipe(operators.map(function(e){if(e instanceof http.HttpResponse){var n=e.body;return t.templates.next(n),t.loadingStatus.next(!1),e}return e}),operators.catchError(function(e){return e&&401===e.status&&t.errorMessageNotVerified(e),t.loadingStatus.next(!1),rxjs.Observable.throw(e)}))},e.prototype.getTemplateObservable=function(e,t){var n=this;this.loadingStatus.next(!0);var r=this.rForm_backend_url+"/templates/"+e;return!0===t&&(r+="?thumbnail=true"),this.http.get(r).pipe(operators.map(function(e){return n.loadingStatus.next(!1),e}),operators.catchError(function(e){return n.loadingStatus.next(!1),e&&401===e.status&&!n.errorMessageNotVerified(e)?rxjs.of(e):rxjs.EMPTY}))},e.prototype.starTemplate=function(e){var t=this;return this.http.post(this.rForm_backend_url+"/templates/"+e+"/stars",{}).pipe(operators.map(function(e){return e}),operators.catchError(function(e){return e&&401===e.status&&t.errorMessageNotVerified(e)?rxjs.of(e):rxjs.Observable.throw(e)}))},e.prototype.unstarTemplate=function(e){var t=this;return this.http.delete(this.rForm_backend_url+"/templates/"+e+"/stars").pipe(operators.catchError(function(e){return e&&401===e.status&&t.errorMessageNotVerified(e)?rxjs.of(e):rxjs.Observable.throw(e)}))},e.prototype.getTemplate=function(e){var t=this;return this.getTemplateObservable(e).pipe(operators.map(function(e){return t.template.next(e),e}))},e.prototype.getCreatorTemplates=function(){return this.getTemplates("creator")},e.prototype.getOrganizationTemplates=function(){return this.getTemplates("organization")},e.prototype.getStarredTemplates=function(){return this.getTemplates("starred")},e.prototype.getPermissions=function(){return this.vTokenObjectService.getPermissions()},e.prototype.getTemplateOwnerInfo=function(e){return this.http.get(this.rForm_backend_url+"/templates/"+e+"?owner_info=true").toPromise().then(function(e){return e})},e.prototype.getTemplateDocumentPDFObservable=function(e,t){return this.http.get(this.rForm_backend_url+"/templates/"+e+"/documents/"+t.id+"?file=true",{responseType:"blob"})},e.prototype.getTemplateDocument=function(e,t){return this.getTemplateDocumentPDFObservable(e,t).toPromise()},e.prototype.getTemplateThumbnail=function(e,t){return this.http.get(this.rForm_backend_url+"/templates/"+e+"/documents/"+t+"?thumbnail=true",{responseType:"blob"}).toPromise()},e.prototype.getAllTemplateDocumentsObservable=function(e){return this.http.get(this.rForm_backend_url+"/templates/"+e+"/documents")},e.prototype.getAllTemplateDocuments=function(e){return this.http.get(this.rForm_backend_url+"/templates/"+e+"/documents").toPromise()},e.prototype.downloadTemplateDocument=function(e){var t=this;common.isPlatformBrowser(this.platform)&&this.getTemplateDocument(e.id,e.template_documents[0]).then(function(n){t.prepareSave(e,n)})},e.prototype.prepareSave=function(e,t){if(window&&window.URL)URL.createObjectURL(t)},e.prototype.searchTemplates=function(e){for(var t in e)e.hasOwnProperty(t)&&null===e[t]&&delete e[t];return this.http.request(new http.HttpRequest("POST",this.rForm_backend_url+"/templates/search",e,{reportProgress:!0,responseType:"json"})).pipe(operators.map(function(e){return e}))},e.prototype.updateTemplateObservable=function(e,t){return this.http.put(this.rForm_backend_url+"/templates/"+e,t)},e.prototype.updateTemplate=function(e,t){return this.updateTemplateObservable(e,t).toPromise().then(function(e){return e})},e.prototype.deleteTemplate=function(e){return this.http.delete(this.rForm_backend_url+"/templates/"+e)},e.prototype.deleteSequence=function(e,t){return this.http.delete(this.rForm_backend_url+"/templates/"+e+"/roles?sequence="+t).toPromise()},e.prototype.updateTemplates=function(e){this.templates.next(e)},e.prototype.canSendEnvelope=function(e){var t,n;if(e){var r=lodash.filter(e.roles,{type:"signer"}),o=r.length>0,a=!1;if(o)try{for(var i=__values(r),s=i.next();!s.done;s=i.next()){var u=s.value;a=u.fields&&u.fields.length>0}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this.templateGuard.canPerformAction(TemplateActions.READ,e).canPerform&&o&&a&&this.templateGuard.canBeSender(e)}return!1},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:tokens.VerdocsTokenObjectService},{type:TemplatesGuardService},{type:core.Injector},{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]}]},e}();function VSDKConfig(){}var VSDKConfigToken=new core.InjectionToken("VSDKConfig"),AngularApiModule=function(){function e(){}return e.initSDK=function(t){return{ngModule:e,imports:[tokens.TokensModule.initInterceptor({cookieName:"",domain:t.domain,origin:t.origin,verdocs_name:"rForm",account_name:"rAccount",loginURL:t.loginURL,production:t.production})],providers:[{provide:VSDKConfigToken,useValue:t},{provide:tokens.VTokenConfigToken,useValue:{cookieName:"",domain:t.domain,origin:t.origin,verdocs_name:"rForm",account_name:"rAccount",loginURL:t.loginURL,production:t.production}},ValidatorService,AuthGuardService,DocumentsService,EnvelopRemindersService,RecipientService,BuilderService,TemplatesGuardService,TemplatesRemindersService,TemplatesService]}},e.decorators=[{type:core.NgModule,args:[{imports:[],providers:[]}]}],e}(),ValidatorService=function(){function e(e,t){this.http=e,this.injector=t,this.validators=[],this.validatorsObject={},this._config_token=this.injector.get(VSDKConfigToken),this._rForm_backend_url=this._config_token.rForm_backend_url}return e.prototype.getValidatorsArray=function(){var e=this;return this.validators&&this.validators.length>0?this.validators:this.http.get(this._rForm_backend_url+"/validators").toPromise().then(function(t){return e.validators=t,e.validators},function(e){return null})},e.prototype.getValidatorsObject=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return this.validatorsObject={},[4,this.getValidatorsArray()];case 1:for(n.sent(),e=0;e<this.validators.length;e++)t=this.validators[e].name,this.validatorsObject[t]=regParse(this.validators[e].regex);return[2,this.validatorsObject]}})})},e.decorators=[{type:core.Injectable}],e.ctorParameters=function(){return[{type:http.HttpClient},{type:core.Injector}]},e}();var PhoneValidator=function(){function e(){}return e.MatchPhone=function(e){return!simpleE164Validator(e.value)&&{phone:!0}},e}();function roleNameValidator(e){return function(t){return lodash.find(e,{name:t.value})?{roleName:!0}:null}}var TagValidator=function(){function e(){}return e.MatchTag=function(e){return/^[a-zA-Z0-9-]{0,32}$/.test(e.value)?null:{textPattern:!0}},e}();function TagDuplicateValidator(e){return function(t){return lodash.findIndex(e,{tag_name:t.value})>-1?{duplicate:!0}:null}}var TagErrorStateMatcher=function(){function e(){}return e.prototype.isErrorState=function(e,t){return!(e&&e.invalid&&(e.dirty||e.touched))},e}();exports.AngularApiModule=AngularApiModule,exports.AuthGuardService=AuthGuardService,exports.BuilderService=BuilderService,exports.DocumentSortOptions=DocumentSortOptions,exports.DocumentsService=DocumentsService,exports.EnvelopRemindersService=EnvelopRemindersService,exports.FieldData=FieldData,exports.PhoneValidator=PhoneValidator,exports.RecipientService=RecipientService,exports.SortOptions=SortOptions,exports.TagDuplicateValidator=TagDuplicateValidator,exports.TagErrorStateMatcher=TagErrorStateMatcher,exports.TagValidator=TagValidator,exports.TemplateActions=TemplateActions,exports.TemplatePermissions=TemplatePermissions,exports.TemplateSenderTypes=TemplateSenderTypes,exports.TemplatesGuardService=TemplatesGuardService,exports.TemplatesRemindersService=TemplatesRemindersService,exports.TemplatesService=TemplatesService,exports.VSDKConfigToken=VSDKConfigToken,exports.ValidatorService=ValidatorService,exports.countries=countries,exports.getCountryByCode=getCountryByCode,exports.getMatchingCountry=getMatchingCountry,exports.getPlusOneCountry=getPlusOneCountry,exports.getRGB=getRGB,exports.getRGBA=getRGBA,exports.isAmericanSamoa=isAmericanSamoa,exports.isCanada=isCanada,exports.isDominicanRepublic=isDominicanRepublic,exports.isFrenchGuiana=isFrenchGuiana,exports.isGuadeloupe=isGuadeloupe,exports.isMartinique=isMartinique,exports.isMayotte=isMayotte,exports.isPuertoRico=isPuertoRico,exports.nameToRGBA=nameToRGBA,exports.regParse=regParse,exports.roleNameValidator=roleNameValidator,exports.simpleE164Validator=simpleE164Validator,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=verdocs-sdk.umd.min.js.map