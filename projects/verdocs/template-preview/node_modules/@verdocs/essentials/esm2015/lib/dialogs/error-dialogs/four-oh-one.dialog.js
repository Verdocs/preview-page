/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Injector } from '@angular/core';
import { VerdocsTokenObjectService } from '@verdocs/tokens';
import { Router } from '@angular/router';
import { EssentialsConfigToken } from '../../essentials.module';
export class FourOhOneDialog {
    /**
     * @param {?} router
     * @param {?} injector
     * @param {?} vTokenObjectService
     */
    constructor(router, injector, vTokenObjectService) {
        this.router = router;
        this.injector = injector;
        this.vTokenObjectService = vTokenObjectService;
        this.error = null;
        this.currentProfile = null;
        this.error_code = null;
        this.error_title = null;
        this.error_message = null;
        this._config_token = this.injector.get(EssentialsConfigToken);
        this.rSecureUrl = this._config_token.rSecure_frontend_url;
        this.rFormUrl = this._config_token.rForm_frontend_url;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.currentProfile = this.vTokenObjectService.getProfile();
        if (this.error && this.error.hasOwnProperty('error')) {
            this.error_code = this.error.error.code || null;
            if (this.error_code) {
                this.prepareErroContent();
            }
        }
    }
    /**
     * @return {?}
     */
    prepareErroContent() {
        switch (this.error_code) {
            case 'AUTH0002':
                this.error_title = 'Authorization key is missing';
                this.error_message = 'Try after ' + (this.currentProfile ? 'signing in again.' : 'signing in or signing up.');
                break;
            case 'T000001':
                this.error_title = 'This document is not accessible';
                this.error_message = (this.currentProfile ? 'Try using a different organization/account, ' : 'Try signing in, signing up, ') + 'or requesting access from the owner of this document.';
                break;
            case 'AUTH0003':
                this.error_title = 'Cannot complete your request';
                this.error_message = 'Try after ' + (this.currentProfile ? 'signing in again.' : 'signing in or signing up.');
                break;
            default:
                this.error_title = 'Your request has been denied.';
                this.error_message = null;
                break;
        }
    }
    /**
     * @return {?}
     */
    goToDashboard() {
        this.router.navigate(['/dashboard']);
    }
    /**
     * @return {?}
     */
    signIn() {
        if (window) {
            window.location.href = `${this.rSecureUrl}/login?redirect_url=${this.rFormUrl + this.router.url}`;
        }
    }
    /**
     * @return {?}
     */
    signUp() {
        if (window) {
            window.location.href = `${this.rSecureUrl}/signup?redirect_url=${this.rFormUrl + this.router.url}`;
        }
    }
}
FourOhOneDialog.decorators = [
    { type: Component, args: [{
                selector: 'four-oh-one-dialog',
                template: "<div class=\"error__container\">\n  <div class=\"error__title\">\n    {{error_title}}\n  </div>\n  <div class=\"error__body\" *ngIf=\"error_message\">\n    {{error_message}}\n  </div>\n  <div class=\"error__action\">\n    <button class=\"error__action-button left\" mat-button *ngIf=\"currentProfile\" (click)=\"goToDashboard()\">go to dashboard</button>\n    <button class=\"error__action-button left\" mat-button *ngIf=\"!currentProfile\" (click)=\"signUp()\">sign up</button>\n    <button class=\"error__action-button\" mat-button (click)=\"signIn()\">sign in</button>\n  </div>\n</div>",
                styles: [".error__container{padding-top:8px;padding-left:8px;padding-right:8px;max-width:640px}.error__title{padding:16px 16px 8px;font-size:20px;line-height:24px;font-weight:500;color:rgba(0,0,0,.87)}.error__body{padding:16px 16px 8px;font-size:16px;line-height:24px;color:rgba(0,0,0,.54)}.error__action{padding:8px;text-align:right}.error__action-button{color:#37474f;text-transform:uppercase}.error__action-button.left{margin-right:8px}"]
            }] }
];
/** @nocollapse */
FourOhOneDialog.ctorParameters = () => [
    { type: Router },
    { type: Injector },
    { type: VerdocsTokenObjectService }
];
if (false) {
    /** @type {?} */
    FourOhOneDialog.prototype.error;
    /** @type {?} */
    FourOhOneDialog.prototype.currentProfile;
    /** @type {?} */
    FourOhOneDialog.prototype.error_code;
    /** @type {?} */
    FourOhOneDialog.prototype.error_title;
    /** @type {?} */
    FourOhOneDialog.prototype.error_message;
    /** @type {?} */
    FourOhOneDialog.prototype.rSecureUrl;
    /** @type {?} */
    FourOhOneDialog.prototype.rFormUrl;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype._config_token;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.router;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.injector;
    /**
     * @type {?}
     * @private
     */
    FourOhOneDialog.prototype.vTokenObjectService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm91ci1vaC1vbmUuZGlhbG9nLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHZlcmRvY3MvZXNzZW50aWFscy8iLCJzb3VyY2VzIjpbImxpYi9kaWFsb2dzL2Vycm9yLWRpYWxvZ3MvZm91ci1vaC1vbmUuZGlhbG9nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM1RCxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFekMsT0FBTyxFQUFvQixxQkFBcUIsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBT2xGLE1BQU0sT0FBTyxlQUFlOzs7Ozs7SUFXMUIsWUFDVSxNQUFjLEVBQ2QsUUFBa0IsRUFDbEIsbUJBQThDO1FBRjlDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBMkI7UUFiakQsVUFBSyxHQUFRLElBQUksQ0FBQztRQUNsQixtQkFBYyxHQUFRLElBQUksQ0FBQztRQUMzQixlQUFVLEdBQVcsSUFBSSxDQUFDO1FBQzFCLGdCQUFXLEdBQVcsSUFBSSxDQUFDO1FBQzNCLGtCQUFhLEdBQVcsSUFBSSxDQUFDO1FBV2xDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUM7UUFDMUQsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDO0lBQ3hELENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDNUQsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3BELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQztZQUNoRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2FBQzNCO1NBQ0Y7SUFDSCxDQUFDOzs7O0lBRUQsa0JBQWtCO1FBQ2hCLFFBQVEsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUN2QixLQUFLLFVBQVU7Z0JBQ2IsSUFBSSxDQUFDLFdBQVcsR0FBRyw4QkFBOEIsQ0FBQztnQkFDbEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQztnQkFDOUcsTUFBTTtZQUNSLEtBQUssU0FBUztnQkFDWixJQUFJLENBQUMsV0FBVyxHQUFHLGlDQUFpQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsOENBQThDLENBQUMsQ0FBQyxDQUFDLDhCQUE4QixDQUFDLEdBQUcsdURBQXVELENBQUM7Z0JBQ3ZMLE1BQU07WUFDUixLQUFLLFVBQVU7Z0JBQ2IsSUFBSSxDQUFDLFdBQVcsR0FBRyw4QkFBOEIsQ0FBQztnQkFDbEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsMkJBQTJCLENBQUMsQ0FBQztnQkFDOUcsTUFBTTtZQUNSO2dCQUNFLElBQUksQ0FBQyxXQUFXLEdBQUcsK0JBQStCLENBQUM7Z0JBQ25ELElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO2dCQUMxQixNQUFNO1NBQ1Q7SUFDSCxDQUFDOzs7O0lBRUQsYUFBYTtRQUNYLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUN2QyxDQUFDOzs7O0lBRUQsTUFBTTtRQUNKLElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSx1QkFBdUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO1NBQ25HO0lBQ0gsQ0FBQzs7OztJQUVELE1BQU07UUFDSixJQUFJLE1BQU0sRUFBRTtZQUNWLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsd0JBQXdCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztTQUNwRztJQUNILENBQUM7OztZQXZFRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLG9CQUFvQjtnQkFDOUIseWxCQUF3Qzs7YUFFekM7Ozs7WUFSUSxNQUFNO1lBRmEsUUFBUTtZQUMzQix5QkFBeUI7Ozs7SUFXaEMsZ0NBQXlCOztJQUN6Qix5Q0FBa0M7O0lBQ2xDLHFDQUFpQzs7SUFDakMsc0NBQWtDOztJQUNsQyx3Q0FBb0M7O0lBQ3BDLHFDQUEwQjs7SUFDMUIsbUNBQXdCOzs7OztJQUV4Qix3Q0FBd0M7Ozs7O0lBR3RDLGlDQUFzQjs7Ozs7SUFDdEIsbUNBQTBCOzs7OztJQUMxQiw4Q0FBc0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5qZWN0b3IgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFZlcmRvY3NUb2tlbk9iamVjdFNlcnZpY2UgfSBmcm9tICdAdmVyZG9jcy90b2tlbnMnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgRXNzZW50aWFsc0NvbmZpZywgRXNzZW50aWFsc0NvbmZpZ1Rva2VuIH0gZnJvbSAnLi4vLi4vZXNzZW50aWFscy5tb2R1bGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdmb3VyLW9oLW9uZS1kaWFsb2cnLFxuICB0ZW1wbGF0ZVVybDogJy4vZm91ci1vaC1vbmUuZGlhbG9nLmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9mb3VyLW9oLW9uZS5kaWFsb2cuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZvdXJPaE9uZURpYWxvZyBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIHB1YmxpYyBlcnJvcjogYW55ID0gbnVsbDtcbiAgcHVibGljIGN1cnJlbnRQcm9maWxlOiBhbnkgPSBudWxsO1xuICBwdWJsaWMgZXJyb3JfY29kZTogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIGVycm9yX3RpdGxlOiBzdHJpbmcgPSBudWxsO1xuICBwdWJsaWMgZXJyb3JfbWVzc2FnZTogc3RyaW5nID0gbnVsbDtcbiAgcHVibGljIHJTZWN1cmVVcmw6IHN0cmluZztcbiAgcHVibGljIHJGb3JtVXJsOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfY29uZmlnX3Rva2VuOiBFc3NlbnRpYWxzQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSB2VG9rZW5PYmplY3RTZXJ2aWNlOiBWZXJkb2NzVG9rZW5PYmplY3RTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX2NvbmZpZ190b2tlbiA9IHRoaXMuaW5qZWN0b3IuZ2V0KEVzc2VudGlhbHNDb25maWdUb2tlbik7XG4gICAgdGhpcy5yU2VjdXJlVXJsID0gdGhpcy5fY29uZmlnX3Rva2VuLnJTZWN1cmVfZnJvbnRlbmRfdXJsO1xuICAgIHRoaXMuckZvcm1VcmwgPSB0aGlzLl9jb25maWdfdG9rZW4uckZvcm1fZnJvbnRlbmRfdXJsO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5jdXJyZW50UHJvZmlsZSA9IHRoaXMudlRva2VuT2JqZWN0U2VydmljZS5nZXRQcm9maWxlKCk7XG4gICAgaWYgKHRoaXMuZXJyb3IgJiYgdGhpcy5lcnJvci5oYXNPd25Qcm9wZXJ0eSgnZXJyb3InKSkge1xuICAgICAgdGhpcy5lcnJvcl9jb2RlID0gdGhpcy5lcnJvci5lcnJvci5jb2RlIHx8IG51bGw7XG4gICAgICBpZiAodGhpcy5lcnJvcl9jb2RlKSB7XG4gICAgICAgIHRoaXMucHJlcGFyZUVycm9Db250ZW50KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJlcGFyZUVycm9Db250ZW50KCkge1xuICAgIHN3aXRjaCAodGhpcy5lcnJvcl9jb2RlKSB7XG4gICAgICBjYXNlICdBVVRIMDAwMic6XG4gICAgICAgIHRoaXMuZXJyb3JfdGl0bGUgPSAnQXV0aG9yaXphdGlvbiBrZXkgaXMgbWlzc2luZyc7XG4gICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICdUcnkgYWZ0ZXIgJyArICh0aGlzLmN1cnJlbnRQcm9maWxlID8gJ3NpZ25pbmcgaW4gYWdhaW4uJyA6ICdzaWduaW5nIGluIG9yIHNpZ25pbmcgdXAuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVDAwMDAwMSc6XG4gICAgICAgIHRoaXMuZXJyb3JfdGl0bGUgPSAnVGhpcyBkb2N1bWVudCBpcyBub3QgYWNjZXNzaWJsZSc7XG4gICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICh0aGlzLmN1cnJlbnRQcm9maWxlID8gJ1RyeSB1c2luZyBhIGRpZmZlcmVudCBvcmdhbml6YXRpb24vYWNjb3VudCwgJyA6ICdUcnkgc2lnbmluZyBpbiwgc2lnbmluZyB1cCwgJykgKyAnb3IgcmVxdWVzdGluZyBhY2Nlc3MgZnJvbSB0aGUgb3duZXIgb2YgdGhpcyBkb2N1bWVudC4nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0FVVEgwMDAzJzpcbiAgICAgICAgdGhpcy5lcnJvcl90aXRsZSA9ICdDYW5ub3QgY29tcGxldGUgeW91ciByZXF1ZXN0JztcbiAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gJ1RyeSBhZnRlciAnICsgKHRoaXMuY3VycmVudFByb2ZpbGUgPyAnc2lnbmluZyBpbiBhZ2Fpbi4nIDogJ3NpZ25pbmcgaW4gb3Igc2lnbmluZyB1cC4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLmVycm9yX3RpdGxlID0gJ1lvdXIgcmVxdWVzdCBoYXMgYmVlbiBkZW5pZWQuJztcbiAgICAgICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZ29Ub0Rhc2hib2FyZCgpIHtcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9kYXNoYm9hcmQnXSk7XG4gIH1cblxuICBzaWduSW4oKSB7XG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnJTZWN1cmVVcmx9L2xvZ2luP3JlZGlyZWN0X3VybD0ke3RoaXMuckZvcm1VcmwgKyB0aGlzLnJvdXRlci51cmx9YDtcbiAgICB9XG4gIH1cblxuICBzaWduVXAoKSB7XG4gICAgaWYgKHdpbmRvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBgJHt0aGlzLnJTZWN1cmVVcmx9L3NpZ251cD9yZWRpcmVjdF91cmw9JHt0aGlzLnJGb3JtVXJsICsgdGhpcy5yb3V0ZXIudXJsfWA7XG4gICAgfVxuICB9XG59XG4iXX0=