/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { v4 as uuid } from 'uuid';
import { getDefaultHeight, getDefaultWidth, getUIFieldStyling } from '../functions/conversion';
export class ConversionService {
    constructor() {
        this.ITextWidth = 612;
        this.ITextHeight = 792;
        this.XRatio = 1;
        this.YRatio = 1;
        this.a3Portrait = {
            x: 842,
            y: 1191
        };
        this.a3Landscape = {
            x: this.a3Portrait.y,
            y: this.a3Portrait.x
        };
        this.a4Portrait = {
            x: 595,
            y: 842
        };
        this.a4Landscape = {
            x: this.a4Portrait.y,
            y: this.a4Portrait.x
        };
        this.a5Portrait = {
            x: 420,
            y: 595
        };
        this.a5Landscape = {
            x: this.a5Portrait.y,
            y: this.a5Portrait.x
        };
        this.letterPortrait = {
            x: 612,
            y: 792
        };
        this.letterLandscape = {
            x: this.letterPortrait.y,
            y: this.letterPortrait.x
        };
        this.legalPortrait = {
            x: 612,
            y: 1008
        };
        this.legalLandscape = {
            x: this.legalPortrait.y,
            y: this.legalPortrait.x
        };
        this.portraitSizes = [
            this.a3Portrait, this.a4Portrait, this.a5Portrait, this.letterPortrait, this.legalPortrait
        ];
        this.landscapeSizes = [
            this.a3Landscape, this.a4Landscape, this.a5Landscape, this.letterLandscape, this.legalLandscape
        ];
        this.rFormWidth = 0;
        this.rFormHeight = 0;
        this.pageCache = [];
    }
    /**
     * @param {?} width
     * @param {?} height
     * @return {?}
     */
    setRValue(width, height) {
        this.rFormWidth = width;
        this.rFormHeight = height;
    }
    /**
     * @param {?} pageCache
     * @return {?}
     */
    setPageCache(pageCache) {
        this.pageCache = pageCache;
    }
    /**
     * @return {?}
     */
    get xRatio() {
        return this.XRatio;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setXRatio(value) {
        this.XRatio = value;
    }
    /**
     * @return {?}
     */
    get yRatio() {
        return this.YRatio;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setYRatio(value) {
        this.YRatio = value;
    }
    /**
     * @param {?} y
     * @param {?} fieldHeight
     * @param {?=} iTextHeight
     * @param {?=} yRatio
     * @return {?}
     */
    getRTop(y, fieldHeight, iTextHeight, yRatio) {
        if (!iTextHeight) {
            iTextHeight = this.ITextHeight;
        }
        if (!yRatio) {
            yRatio = this.yRatio;
        }
        return iTextHeight - ((y + fieldHeight) * yRatio);
    }
    /**
     * @param {?} y
     * @param {?=} ratio
     * @return {?}
     */
    getRValue(y, ratio) {
        if (!ratio) {
            ratio = this.yRatio;
        }
        return y * ratio;
    }
    /**
     * @param {?} x
     * @param {?=} ratio
     * @return {?}
     */
    getRLeft(x, ratio) {
        if (!ratio) {
            ratio = this.xRatio;
        }
        return x * ratio;
    }
    /**
     * @param {?} x
     * @param {?} xRatio
     * @return {?}
     */
    getITextLeft(x, xRatio) {
        if (!xRatio) {
            xRatio = this.xRatio;
        }
        return x / xRatio;
    }
    /**
     * @param {?} y
     * @param {?} fieldHeight
     * @param {?=} rFormHeight
     * @param {?=} yRatio
     * @return {?}
     */
    getITextBottomFromRTop(y, fieldHeight, rFormHeight, yRatio) {
        if (!rFormHeight) {
            rFormHeight = this.rFormHeight;
        }
        /** @type {?} */
        const uiHeight = fieldHeight;
        return (rFormHeight - y - uiHeight);
    }
    /**
     * @param {?} y
     * @return {?}
     */
    getITextBottom(y) {
        return y;
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getDefaultHeight(field) {
        return getDefaultHeight(field);
    }
    /**
     * @param {?} field
     * @return {?}
     */
    getDefaultWidth(field) {
        return getDefaultWidth(field);
    }
    /**
     * @param {?} field
     * @param {?} pageHeight
     * @param {?=} xRatio
     * @param {?=} yRatio
     * @return {?}
     */
    getUIFieldStyling(field, pageHeight, xRatio, yRatio) {
        if (!xRatio) {
            xRatio = this.xRatio;
        }
        if (!yRatio) {
            yRatio = this.yRatio;
        }
        return getUIFieldStyling(field);
    }
    /**
     * @param {?} field
     * @param {?} x
     * @param {?} y
     * @param {?} pageHeight
     * @return {?}
     */
    getUIFieldSetting(field, x, y, pageHeight) {
        /** @type {?} */
        let setting;
        if (field.type === 'textbox' || field.type === 'date' || field.type === 'placeholder') {
            setting = {
                width: field.setting.width ? field.setting.width : 150,
                height: field.setting.height ? field.setting.height : 15,
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, field.setting.height ? field.setting.height : 15, pageHeight)
            };
            if (field.type === 'date') {
                setting.width = 64;
            }
        }
        else if (field.type === 'timestamp') {
            setting = {
                width: field.setting.width ? field.setting.width : 64,
                height: field.setting.height ? field.setting.height : 15,
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, field.setting.height ? field.setting.height : 15, pageHeight)
            };
        }
        else if (field.type === 'signature' || field.type === 'initial') {
            setting = {
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, 36, pageHeight)
            };
        }
        else if (field.type === 'checkbox_group') {
            setting = {
                options: [{
                        id: uuid(),
                        x: field.setting.x ? field.setting.x : x,
                        y: this.getITextBottomFromRTop(y, 13.5, pageHeight),
                        checked: false,
                        value: 'Option 1'
                    }]
            };
        }
        else if (field.type === 'radio_button_group') {
            setting = {
                options: [{
                        id: uuid(),
                        x: field.setting.x ? field.setting.x : x,
                        y: this.getITextBottomFromRTop(y, 13.5, pageHeight),
                        selected: false,
                        value: 'Option 1'
                    }]
            };
        }
        else if (field.type === 'dropdown') {
            setting = {
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, 15, pageHeight),
                width: field.setting.width ? field.setting.width : 64,
                height: field.setting.height ? field.setting.height : 15,
                value: null,
                placeholder: 'Choose',
                options: [{
                        id: uuid(),
                        value: 'Option 1'
                    }]
            };
        }
        else if (field.type === 'attachment') {
            setting = {
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, 24, pageHeight),
                label: ''
            };
        }
        else if (field.type === 'payment') {
            setting = {
                x: field.setting.x ? field.setting.x : x,
                y: this.getITextBottomFromRTop(y, 24, pageHeight),
                account_id: '',
                currency: 'usd',
                payment_fee_type: 'static',
                amount: 1,
                if_transfer_fee: false
            };
        }
        return setting;
    }
    /**
     * @param {?} newHeight
     * @param {?} newWidth
     * @return {?}
     */
    updateITextValues(newHeight, newWidth) {
        this.ITextHeight = newHeight;
        this.ITextWidth = newWidth;
    }
}
ConversionService.decorators = [
    { type: Injectable }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.ITextWidth;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.ITextHeight;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.XRatio;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.YRatio;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a3Portrait;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a3Landscape;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a4Portrait;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a4Landscape;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a5Portrait;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.a5Landscape;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.letterPortrait;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.letterLandscape;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.legalPortrait;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.legalLandscape;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.portraitSizes;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.landscapeSizes;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.rFormWidth;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.rFormHeight;
    /**
     * @type {?}
     * @private
     */
    ConversionService.prototype.pageCache;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udmVyc2lvbi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHZlcmRvY3MvZXNzZW50aWFscy8iLCJzb3VyY2VzIjpbImxpYi9maWVsZHMvY29udmVyc2lvbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxFQUFFLElBQUksSUFBSSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRWxDLE9BQU8sRUFDTCxnQkFBZ0IsRUFDaEIsZUFBZSxFQUNmLGlCQUFpQixFQUNsQixNQUFNLHlCQUF5QixDQUFDO0FBR2pDLE1BQU0sT0FBTyxpQkFBaUI7SUFEOUI7UUFFVSxlQUFVLEdBQUcsR0FBRyxDQUFDO1FBQ2pCLGdCQUFXLEdBQUcsR0FBRyxDQUFDO1FBQ2xCLFdBQU0sR0FBRyxDQUFDLENBQUM7UUFDWCxXQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ1gsZUFBVSxHQUFHO1lBQ25CLENBQUMsRUFBRSxHQUFHO1lBQ04sQ0FBQyxFQUFFLElBQUk7U0FDUixDQUFDO1FBQ00sZ0JBQVcsR0FBRztZQUNwQixDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDckIsQ0FBQztRQUNNLGVBQVUsR0FBRztZQUNuQixDQUFDLEVBQUUsR0FBRztZQUNOLENBQUMsRUFBRSxHQUFHO1NBQ1AsQ0FBQztRQUNNLGdCQUFXLEdBQUc7WUFDcEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNwQixDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ3JCLENBQUM7UUFDTSxlQUFVLEdBQUc7WUFDbkIsQ0FBQyxFQUFFLEdBQUc7WUFDTixDQUFDLEVBQUUsR0FBRztTQUNQLENBQUM7UUFDTSxnQkFBVyxHQUFHO1lBQ3BCLENBQUMsRUFBRSxJ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Q0Ysd0NBR0U7Ozs7O0lBQ0YsMkNBR0U7Ozs7O0lBQ0YsNENBR0M7Ozs7O0lBQ0QsMENBR0U7Ozs7O0lBQ0YsMkNBR0U7Ozs7O0lBQ0YsMENBRUU7Ozs7O0lBQ0YsMkNBRUU7Ozs7O0lBQ0YsdUNBQXVCOzs7OztJQUN2Qix3Q0FBd0I7Ozs7O0lBQ3hCLHNDQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcblxuaW1wb3J0IHtcbiAgZ2V0RGVmYXVsdEhlaWdodCxcbiAgZ2V0RGVmYXVsdFdpZHRoLFxuICBnZXRVSUZpZWxkU3R5bGluZ1xufSBmcm9tICcuLi9mdW5jdGlvbnMvY29udmVyc2lvbic7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBDb252ZXJzaW9uU2VydmljZSB7XG4gIHByaXZhdGUgSVRleHRXaWR0aCA9IDYxMjtcbiAgcHJpdmF0ZSBJVGV4dEhlaWdodCA9IDc5MjtcbiAgcHJpdmF0ZSBYUmF0aW8gPSAxO1xuICBwcml2YXRlIFlSYXRpbyA9IDE7XG4gIHByaXZhdGUgYTNQb3J0cmFpdCA9IHtcbiAgICB4OiA4NDIsXG4gICAgeTogMTE5MVxuICB9O1xuICBwcml2YXRlIGEzTGFuZHNjYXBlID0ge1xuICAgIHg6IHRoaXMuYTNQb3J0cmFpdC55LFxuICAgIHk6IHRoaXMuYTNQb3J0cmFpdC54XG4gIH07XG4gIHByaXZhdGUgYTRQb3J0cmFpdCA9IHtcbiAgICB4OiA1OTUsXG4gICAgeTogODQyXG4gIH07XG4gIHByaXZhdGUgYTRMYW5kc2NhcGUgPSB7XG4gICAgeDogdGhpcy5hNFBvcnRyYWl0LnksXG4gICAgeTogdGhpcy5hNFBvcnRyYWl0LnhcbiAgfTtcbiAgcHJpdmF0ZSBhNVBvcnRyYWl0ID0ge1xuICAgIHg6IDQyMCxcbiAgICB5OiA1OTVcbiAgfTtcbiAgcHJpdmF0ZSBhNUxhbmRzY2FwZSA9IHtcbiAgICB4OiB0aGlzLmE1UG9ydHJhaXQueSxcbiAgICB5OiB0aGlzLmE1UG9ydHJhaXQueFxuICB9O1xuICBwcml2YXRlIGxldHRlclBvcnRyYWl0ID0ge1xuICAgIHg6IDYxMixcbiAgICB5OiA3OTJcbiAgfTtcbiAgcHJpdmF0ZSBsZXR0ZXJMYW5kc2NhcGUgPSB7XG4gICAgeDogdGhpcy5sZXR0ZXJQb3J0cmFpdC55LFxuICAgIHk6IHRoaXMubGV0dGVyUG9ydHJhaXQueFxuICB9XG4gIHByaXZhdGUgbGVnYWxQb3J0cmFpdCA9IHtcbiAgICB4OiA2MTIsXG4gICAgeTogMTAwOFxuICB9O1xuICBwcml2YXRlIGxlZ2FsTGFuZHNjYXBlID0ge1xuICAgIHg6IHRoaXMubGVnYWxQb3J0cmFpdC55LFxuICAgIHk6IHRoaXMubGVnYWxQb3J0cmFpdC54XG4gIH07XG4gIHByaXZhdGUgcG9ydHJhaXRTaXplcyA9IFtcbiAgICB0aGlzLmEzUG9ydHJhaXQsIHRoaXMuYTRQb3J0cmFpdCwgdGhpcy5hNVBvcnRyYWl0LCB0aGlzLmxldHRlclBvcnRyYWl0LCB0aGlzLmxlZ2FsUG9ydHJhaXRcbiAgXTtcbiAgcHJpdmF0ZSBsYW5kc2NhcGVTaXplcyA9IFtcbiAgICB0aGlzLmEzTGFuZHNjYXBlLCB0aGlzLmE0TGFuZHNjYXBlLCB0aGlzLmE1TGFuZHNjYXBlLCB0aGlzLmxldHRlckxhbmRzY2FwZSwgdGhpcy5sZWdhbExhbmRzY2FwZVxuICBdO1xuICBwcml2YXRlIHJGb3JtV2lkdGggPSAwO1xuICBwcml2YXRlIHJGb3JtSGVpZ2h0ID0gMDtcbiAgcHJpdmF0ZSBwYWdlQ2FjaGUgPSBbXTtcblxuICBzZXRSVmFsdWUod2lkdGgsIGhlaWdodCkge1xuICAgIHRoaXMuckZvcm1XaWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuckZvcm1IZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBzZXRQYWdlQ2FjaGUocGFnZUNhY2hlKSB7XG4gICAgdGhpcy5wYWdlQ2FjaGUgPSBwYWdlQ2FjaGU7XG4gIH1cblxuICBnZXQgeFJhdGlvKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuWFJhdGlvO1xuICB9XG5cbiAgc2V0WFJhdGlvKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLlhSYXRpbyA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IHlSYXRpbygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLllSYXRpbztcbiAgfVxuXG4gIHNldFlSYXRpbyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5ZUmF0aW8gPSB2YWx1ZTtcbiAgfVxuXG4gIGdldFJUb3AoeSwgZmllbGRIZWlnaHQsIGlUZXh0SGVpZ2h0PywgeVJhdGlvPykge1xuICAgIGlmICghaVRleHRIZWlnaHQpIHtcbiAgICAgIGlUZXh0SGVpZ2h0ID0gdGhpcy5JVGV4dEhlaWdodDtcbiAgICB9XG5cbiAgICBpZiAoIXlSYXRpbykge1xuICAgICAgeVJhdGlvID0gdGhpcy55UmF0aW87XG4gICAgfVxuICAgIHJldHVybiBpVGV4dEhlaWdodCAtICgoeSArIGZpZWxkSGVpZ2h0KSAqIHlSYXRpbyk7XG4gIH1cblxuICBnZXRSVmFsdWUoeSwgcmF0aW8/KSB7XG4gICAgaWYgKCFyYXRpbykge1xuICAgICAgcmF0aW8gPSB0aGlzLnlSYXRpb1xuICAgIH1cbiAgICByZXR1cm4geSAqIHJhdGlvO1xuICB9XG5cbiAgZ2V0UkxlZnQoeCwgcmF0aW8/KSB7XG4gICAgaWYgKCFyYXRpbykge1xuICAgICAgcmF0aW8gPSB0aGlzLnhSYXRpbztcbiAgICB9XG4gICAgcmV0dXJuIHggKiByYXRpbztcbiAgfVxuXG4gIGdldElUZXh0TGVmdCh4LCB4UmF0aW8pIHtcbiAgICBpZiAoIXhSYXRpbykge1xuICAgICAgeFJhdGlvID0gdGhpcy54UmF0aW87XG4gICAgfVxuICAgIHJldHVybiB4IC8geFJhdGlvO1xuICB9XG5cbiAgZ2V0SVRleHRCb3R0b21Gcm9tUlRvcCh5LCBmaWVsZEhlaWdodCwgckZvcm1IZWlnaHQ/LCB5UmF0aW8/KSB7XG4gICAgaWYgKCFyRm9ybUhlaWdodCkge1xuICAgICAgckZvcm1IZWlnaHQgPSB0aGlzLnJGb3JtSGVpZ2h0O1xuICAgIH1cbiAgICBjb25zdCB1aUhlaWdodCA9IGZpZWxkSGVpZ2h0O1xuICAgIHJldHVybiAockZvcm1IZWlnaHQgLSB5IC0gdWlIZWlnaHQpO1xuICB9XG5cbiAgZ2V0SVRleHRCb3R0b20oeSkge1xuICAgIHJldHVybiB5O1xuICB9XG5cbiAgZ2V0RGVmYXVsdEhlaWdodChmaWVsZCkge1xuICAgIHJldHVybiBnZXREZWZhdWx0SGVpZ2h0KGZpZWxkKTtcbiAgfVxuXG4gIGdldERlZmF1bHRXaWR0aChmaWVsZCkge1xuICAgIHJldHVybiBnZXREZWZhdWx0V2lkdGgoZmllbGQpO1xuICB9XG5cbiAgZ2V0VUlGaWVsZFN0eWxpbmcoZmllbGQsIHBhZ2VIZWlnaHQsIHhSYXRpbz8sIHlSYXRpbz8pIHtcbiAgICBpZiAoIXhSYXRpbykge1xuICAgICAgeFJhdGlvID0gdGhpcy54UmF0aW87XG4gICAgfVxuICAgIGlmICgheVJhdGlvKSB7XG4gICAgICB5UmF0aW8gPSB0aGlzLnlSYXRpbztcbiAgICB9XG4gICAgcmV0dXJuIGdldFVJRmllbGRTdHlsaW5nKGZpZWxkKTtcbiAgfVxuXG4gIGdldFVJRmllbGRTZXR0aW5nKGZpZWxkLCB4LCB5LCBwYWdlSGVpZ2h0KSB7XG4gICAgbGV0IHNldHRpbmc7XG4gICAgaWYgKGZpZWxkLnR5cGUgPT09ICd0ZXh0Ym94JyB8fCBmaWVsZC50eXBlID09PSAnZGF0ZScgfHwgZmllbGQudHlwZSA9PT0gJ3BsYWNlaG9sZGVyJykge1xuICAgICAgc2V0dGluZyA9IHtcbiAgICAgICAgd2lkdGg6IGZpZWxkLnNldHRpbmcud2lkdGggPyBmaWVsZC5zZXR0aW5nLndpZHRoIDogMTUwLFxuICAgICAgICBoZWlnaHQ6IGZpZWxkLnNldHRpbmcuaGVpZ2h0ID8gZmllbGQuc2V0dGluZy5oZWlnaHQgOiAxNSxcbiAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgeTogdGhpcy5nZXRJVGV4dEJvdHRvbUZyb21SVG9wKHksIGZpZWxkLnNldHRpbmcuaGVpZ2h0ID8gZmllbGQuc2V0dGluZy5oZWlnaHQgOiAxNSwgcGFnZUhlaWdodClcbiAgICAgIH1cbiAgICAgIGlmIChmaWVsZC50eXBlID09PSAnZGF0ZScpIHtcbiAgICAgICAgc2V0dGluZy53aWR0aCA9IDY0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gJ3RpbWVzdGFtcCcpIHtcbiAgICAgIHNldHRpbmcgPSB7XG4gICAgICAgIHdpZHRoOiBmaWVsZC5zZXR0aW5nLndpZHRoID8gZmllbGQuc2V0dGluZy53aWR0aCA6IDY0LFxuICAgICAgICBoZWlnaHQ6IGZpZWxkLnNldHRpbmcuaGVpZ2h0ID8gZmllbGQuc2V0dGluZy5oZWlnaHQgOiAxNSxcbiAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgeTogdGhpcy5nZXRJVGV4dEJvdHRvbUZyb21SVG9wKHksIGZpZWxkLnNldHRpbmcuaGVpZ2h0ID8gZmllbGQuc2V0dGluZy5oZWlnaHQgOiAxNSwgcGFnZUhlaWdodClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09ICdzaWduYXR1cmUnIHx8IGZpZWxkLnR5cGUgPT09ICdpbml0aWFsJykge1xuICAgICAgc2V0dGluZyA9IHtcbiAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgeTogdGhpcy5nZXRJVGV4dEJvdHRvbUZyb21SVG9wKHksIDM2LCBwYWdlSGVpZ2h0KVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09ICdjaGVja2JveF9ncm91cCcpIHtcbiAgICAgIHNldHRpbmcgPSB7XG4gICAgICAgIG9wdGlvbnM6IFt7XG4gICAgICAgICAgaWQ6IHV1aWQoKSxcbiAgICAgICAgICB4OiBmaWVsZC5zZXR0aW5nLnggPyBmaWVsZC5zZXR0aW5nLnggOiB4LFxuICAgICAgICAgIHk6IHRoaXMuZ2V0SVRleHRCb3R0b21Gcm9tUlRvcCh5LCAxMy41LCBwYWdlSGVpZ2h0KSxcbiAgICAgICAgICBjaGVja2VkOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogJ09wdGlvbiAxJ1xuICAgICAgICB9XVxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09ICdyYWRpb19idXR0b25fZ3JvdXAnKSB7XG4gICAgICBzZXR0aW5nID0ge1xuICAgICAgICBvcHRpb25zOiBbe1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgICB5OiB0aGlzLmdldElUZXh0Qm90dG9tRnJvbVJUb3AoeSwgMTMuNSwgcGFnZUhlaWdodCksXG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiAnT3B0aW9uIDEnXG4gICAgICAgIH1dXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gJ2Ryb3Bkb3duJykge1xuICAgICAgc2V0dGluZyA9IHtcbiAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgeTogdGhpcy5nZXRJVGV4dEJvdHRvbUZyb21SVG9wKHksIDE1LCBwYWdlSGVpZ2h0KSxcbiAgICAgICAgd2lkdGg6IGZpZWxkLnNldHRpbmcud2lkdGggPyBmaWVsZC5zZXR0aW5nLndpZHRoIDogNjQsXG4gICAgICAgIGhlaWdodDogZmllbGQuc2V0dGluZy5oZWlnaHQgPyBmaWVsZC5zZXR0aW5nLmhlaWdodCA6IDE1LFxuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgcGxhY2Vob2xkZXI6ICdDaG9vc2UnLFxuICAgICAgICBvcHRpb25zOiBbe1xuICAgICAgICAgIGlkOiB1dWlkKCksXG4gICAgICAgICAgdmFsdWU6ICdPcHRpb24gMSdcbiAgICAgICAgfV1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChmaWVsZC50eXBlID09PSAnYXR0YWNobWVudCcpIHtcbiAgICAgIHNldHRpbmcgPSB7XG4gICAgICAgIHg6IGZpZWxkLnNldHRpbmcueCA/IGZpZWxkLnNldHRpbmcueCA6IHgsXG4gICAgICAgIHk6IHRoaXMuZ2V0SVRleHRCb3R0b21Gcm9tUlRvcCh5LCAyNCwgcGFnZUhlaWdodCksXG4gICAgICAgIGxhYmVsOiAnJ1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09ICdwYXltZW50Jykge1xuICAgICAgc2V0dGluZyA9IHtcbiAgICAgICAgeDogZmllbGQuc2V0dGluZy54ID8gZmllbGQuc2V0dGluZy54IDogeCxcbiAgICAgICAgeTogdGhpcy5nZXRJVGV4dEJvdHRvbUZyb21SVG9wKHksIDI0LCBwYWdlSGVpZ2h0KSxcbiAgICAgICAgYWNjb3VudF9pZDogJycsXG4gICAgICAgIGN1cnJlbmN5OiAndXNkJyxcbiAgICAgICAgcGF5bWVudF9mZWVfdHlwZTogJ3N0YXRpYycsXG4gICAgICAgIGFtb3VudDogMSxcbiAgICAgICAgaWZfdHJhbnNmZXJfZmVlOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V0dGluZztcbiAgfVxuXG4gIHVwZGF0ZUlUZXh0VmFsdWVzKG5ld0hlaWdodCwgbmV3V2lkdGgpIHtcbiAgICB0aGlzLklUZXh0SGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgIHRoaXMuSVRleHRXaWR0aCA9IG5ld1dpZHRoO1xuICB9XG59XG4iXX0=