{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@verdocs/sdk/lib/definitions/componentData.ts","ng://@verdocs/sdk/lib/definitions/template.enums.ts","ng://@verdocs/sdk/lib/models/document.model.ts","ng://@verdocs/sdk/lib/models/document_fields.model.ts","ng://@verdocs/sdk/lib/models/document_histories.model.ts","ng://@verdocs/sdk/lib/models/document_search.model.ts","ng://@verdocs/sdk/lib/models/envelope_document.model.ts","ng://@verdocs/sdk/lib/models/field-data.model.ts","ng://@verdocs/sdk/lib/models/field-role.model.ts","ng://@verdocs/sdk/lib/models/field.model.ts","ng://@verdocs/sdk/lib/models/options.model.ts","ng://@verdocs/sdk/lib/models/page.model.ts","ng://@verdocs/sdk/lib/models/recipient.model.ts","ng://@verdocs/sdk/lib/models/reminder.model.ts","ng://@verdocs/sdk/lib/models/role.model.ts","ng://@verdocs/sdk/lib/models/template.model.ts","ng://@verdocs/sdk/lib/models/template_document.model.ts","ng://@verdocs/sdk/lib/models/template_search.model.ts","ng://@verdocs/sdk/lib/models/time_period.model.ts","ng://@verdocs/sdk/lib/functions/regex.ts","ng://@verdocs/sdk/lib/functions/rgb.ts","ng://@verdocs/sdk/lib/functions/country-code.ts","ng://@verdocs/sdk/lib/guards/auth-guard.service.ts","ng://@verdocs/sdk/lib/documents/document.service.ts","ng://@verdocs/sdk/lib/documents/envelope-reminders.service.ts","ng://@verdocs/sdk/lib/recipients/recipients.service.ts","ng://@verdocs/sdk/lib/templates/builder.service.ts","ng://@verdocs/sdk/lib/templates/template-reminders.service.ts","ng://@verdocs/sdk/lib/templates/templates.guard.ts","ng://@verdocs/sdk/lib/templates/templates.service.ts","ng://@verdocs/sdk/lib/angular-api.module.ts","ng://@verdocs/sdk/lib/validators/validator.service.ts","ng://@verdocs/sdk/lib/validators/phone.validator.ts","ng://@verdocs/sdk/lib/validators/role-name.validator.ts","ng://@verdocs/sdk/lib/validators/tag.validator.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","ComponentData","CREATOR","ORGANIZATION_MEMBER","ORGANIZATION_MEMBER_AS_CREATOR","EVERYONE","EVERYONE_AS_CREATOR","TEMPLATE_CREATOR_CREATE_PUBLIC","TEMPLATE_CREATOR_CREATE_ORG","TEMPLATE_CREATOR_CREATE_PERSONAL","TEMPLATE_CREATOR_DELETE","TEMPLATE_CREATOR_VISIBILITY","TEMPLATE_MEMBER_READ","TEMPLATE_MEMBER_WRITE","TEMPLATE_MEMBER_DELETE","TEMPLATE_MEMBER_VISIBILITY","CREATE_PERSONAL","CREATE_ORG","CREATE_PUBLIC","READ","WRITE","DELETE","CHANGE_VISIBILITY_PERSONAL","CHANGE_VISIBILITY_ORG","CHANGE_VISIBILITY_PUBLIC","IDocument","EnvelopeComponent","IDocumentField","ISetting","IEnvelopeHistory","IActivity","IEnvelopeSearchParams","IEnvelopeSearchResult","IEnvelopeFilterParams","created_at","updated_at","envelope_name","canceled_at","envelope_status","IEnvelopeDocument","options","pageNum","id","fName","required","order","vName","type","FieldRole","IField","OptionType","IPage","IRecipient","IEnvelopeSignature","IReminder","IRole","ITemplate","IStarTemplate","ITemplateDocument","ITemplateSearchParams","ITemplateSearchResult","CREATED_AT","UPDATED_AT","NAME","LAST_USED_AT","COUNTER","STAR_COUNTER","ITimePeriod","regParse","string","JSON","parse","prefix","substring","eval","slice","getRGB","rgba","rgbNumbers","replace","split","rgbObject","alpha","red","Math","round","green","blue","rgbToHex","rgb","hex","toString","getRGBA","index","nameToRGBA","str","validNum","parseInt","isNaN","hash","charCodeAt","toUpperCase","exec","color","countries","code","name","getCountryByCode","number","isFrenchGuiana","isGuadeloupe","isMartinique","isMayotte","getPlusOneCountry","country_info","isCanada","areaCode","findIndex","x","isAmericanSamoa","isDominicanRepublic","isPuertoRico","getMatchingCountry","number_of_substrings","number_of_match","simpleE164Validator","e164_regex","RegExp","test","AuthGuardService","vTokenAuth","vTokenAuthGuard","vTokenStateService","document","canActivate","route","state","signerToken","getOtherCookieObject","currentPath","routeConfig","path","matchesPath","match","includes","checkLogin","url","canActivateChild","isAuthenticated","isGuestLink","signOut","canLoad","canLoadBuilder","signer_token","getOtherCookie","setTimer","_routeConfig","Injectable","VerdocsAuthService","VerdocsAuthGuardService","VerdocsStateService","Inject","args","DOCUMENT","DocumentsService","httpClient","validatorService","tokenObjectService","injector","platform","_currentFields","BehaviorSubject","_currEnvelope","allEnvelopes","_currentExtendedEnvelope","_customFilterSubject","currEnvelope$","asObservable","fieldsStream","inProgressSubject","workingField","FieldData","envelope","validators","toggleNextSubject","_config_token","get","VSDKConfigToken","_rForm_backend_url","rForm_backend_url","_documentUrl","setCurrentEnvelope","currEnvelope","setEnvData","envId","roleId","currRoleName","updateEnvelopes","envelopes","sendInvite","post","pipe","map","err","sendDelegate","envelopeId","role","resendInvitation","roleName","getEnvelope","_this","envelopeExtended","recipients","sortRecipients","envelopeData","getAllEnvelopes","templateId","endpoint","request","HttpRequest","reportProgress","responseType","event","HttpResponse","searchEnvelopes","searchParams","getRecentActivities","page","searchBody","sort_by","ascending","row","applyCustomSearch","filters","filterSearchBy","filterTime","sortBy","customFilters","getWaitingOnOthers","actionRequiredEnvelopes","concatMap","res","empty","response","unfilteredWaitingOnOthers","filteredWaitingOnOthers","differenceBy","getEnvelopeOwnerInfo","getEnvelopeDocUrl","docId","isPlatformBrowser","window","URL","createObjectURL","console","getEnvelopePdfWithProgress","documentId","requestUrl","getEnvelopeDocBlob","file","getEnvelopeCertificateBlob","getTemplateDoc","token","getTemplatePDF","cancelEnvelope","put","action","submitEnvelope","declineEnvelope","uploadAttachment","fieldName","req","formdata","FormData","append","downloadAttachment","field","header","HttpHeaders","set","settings","envelope_id","headers","getAttachmentDataByRecipients","attachments","recipients_1","tslib_1.__values","recipients_1_1","recipient","fields","_c","e_2","_d","full_name","fieldObject","postSignatureBlob","signatureBlob","blobFile","formData","toPromise","postInitialBlob","initialBlob","putSignatureField","signatureId","getPublicIp","ipAddress","_a","ip_address","putInitialField","initialId","putEnvelopeField","updateGroupedField","ifPrepared","jsonp","catch","sort","sequence","role_name","signers","filter","rIndex","getRecipientColor","index_1","validateEnvelopeField","getValidatorsObject","satisfyRequired","sortFields","previousDistance","setting","distance","canBeSameRow","higherHeight","ax","bx","checkIfEnvelopeOwner","profile","getProfile","top","higherBottom","aHeight","getHeight","bHeight","aBottom","bBottom","height","hasCertificate","certificate_document_id","status","HttpClient","ValidatorService","VerdocsTokenObjectService","Injector","PLATFORM_ID","EnvelopRemindersService","http","getReminder","reminderId","reminder","updateReminder","deleteReminder","delete","createReminder","RecipientService","recipientsSubject","ReplaySubject","updateRecipients","updatedRecipientIndex","getRecipients","prepareRecipients","recipientsToUpdate","updatedRecipient","updateRecipientName","newFullName","new_full_name","setAsAgreed","agreed","claimProfile","profileToClaim","updateRecipientInfoByOwner","recipientInfo","email","phone","getInPersonLink","inPersonLink","BuilderService","eventTracker","saveStatusSubject","createTemplate","template_body","uploadTemplateDocument","template","catchError","throwError","addTemplatePage","page_number","document_id","addTemplatePages","pageNums","from","mergeMap","delay","addTemplateField","newField","trim","template_id","createEvent","category","pages","roleIndex","roles","deleteTemplateField","fieldIndex","roleFieldIndex","splice","updateRoleField","updated_field","role_index","old_name","field_index","updateTemplateField","oldName","page_sequence","updateDropdownField","addFieldRole","fieldId","fieldRoleInfo","stringify","field_id","role_id","fieldRole","addRole","templateBackend","roleRequests","forEach","forkJoin","savedRoles","savedRolesWithFields","newRole","of","deleteRole","deleteRoles","roleNames","deleteCalls","updateRoles","updateCalls","delegator","message","EventTrackerService","TemplatesRemindersService","TemplatesGuardService","vTokenObjectService","canPerformAction","canPerform","neededPermissions","userProfile","isCreator","profile_id","isSameOrg","organization_id","isPersonal","is_personal","isPublic","is_public","TemplateActions","TemplatePermissions","hasPermissions","requiredPermissions","userPermissions","getPermissions","intersection","canBeSender","sender","TemplateSenderTypes","canUserCreateTemplate","TemplatesService","templateGuard","templates","Subject","loadingStatus","errorMessageNotVerified","getTemplates","query","Observable","getTemplateObservable","thumbnail","templateUrl","EMPTY","starTemplate","unstarTemplate","getTemplate","getCreatorTemplates","getOrganizationTemplates","getStarredTemplates","getTemplateOwnerInfo","getTemplateDocumentPDFObservable","template_document","getTemplateDocument","templateDocument","getTemplateThumbnail","templateDocumentId","getAllTemplateDocumentsObservable","getAllTemplateDocuments","downloadTemplateDocument","template_documents","template_file","prepareSave","searchTemplates","updateTemplateObservable","updateTemplate","deleteTemplate","deleteSequence","sequence_number","updateTemplates","canSendEnvelope","hasSigner","signersHaveFields","signers_1","signers_1_1","signer","VSDKConfig","InjectionToken","AngularApiModule","initSDK","config","ngModule","imports","TokensModule","initInterceptor","cookieName","domain","origin","verdocs_name","account_name","loginURL","production","providers","provide","useValue","NgModule","validatorsObject","getValidatorsArray","name_1","PhoneValidator","MatchPhone","control","roleNameValidator","find","TagValidator","MatchTag","textPattern","TagDuplicateValidator","tags","tag_name","duplicate","TagErrorStateMatcher","isErrorState","form","invalid","dirty","touched"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export interface ComponentData {\n  component: any;\n  inputs: any;\n}\n","export enum TemplateSenderTypes {\n  CREATOR = 'creator', // same as legacy\n  ORGANIZATION_MEMBER = 'organization_member',\n  ORGANIZATION_MEMBER_AS_CREATOR = 'organization_member_as_creator',\n  EVERYONE = 'everyone',\n  EVERYONE_AS_CREATOR = 'everyone_as_creator' // Creator would be sender of envelope no matter who creates the envelope\n}\n\nexport enum TemplatePermissions {\n  TEMPLATE_CREATOR_CREATE_PUBLIC = 'template:creator:create:public',\n  TEMPLATE_CREATOR_CREATE_ORG = 'template:creator:create:org',\n  TEMPLATE_CREATOR_CREATE_PERSONAL = 'template:creator:create:personal',\n  TEMPLATE_CREATOR_DELETE = 'template:creator:delete',\n  TEMPLATE_CREATOR_VISIBILITY = 'template:creator:visibility',\n  TEMPLATE_MEMBER_READ = 'template:member:read',\n  TEMPLATE_MEMBER_WRITE = 'template:member:write',\n  TEMPLATE_MEMBER_DELETE = 'template:member:delete',\n  TEMPLATE_MEMBER_VISIBILITY = 'template:member:visibility'\n};\n\nexport enum TemplateActions {\n  CREATE_PERSONAL = 'create_personal',\n  CREATE_ORG = 'create_org',\n  CREATE_PUBLIC = 'create_public',\n  READ = 'read',\n  WRITE = 'write',\n  DELETE = 'delete',\n  CHANGE_VISIBILITY_PERSONAL = 'change_visibility_personal',\n  CHANGE_VISIBILITY_ORG = 'change_visibility_org',\n  CHANGE_VISIBILITY_PUBLIC = 'change_visibility_public'\n}\n\n","import { IRecipient } from './recipient.model';\nimport { IEnvelopeHistory } from './document_histories.model';\nimport { IEnvelopeDocument } from './envelope_document.model';\nimport { IDocumentField } from './document_fields.model';\nimport { IReminder } from './reminder.model';\n\nexport interface IDocument {\n  id?: string;\n  status: string;\n  profile_id: string;\n  template_id: string;\n  created_at?: Date;\n  updated_at?: Date;\n  canceled_at?: Date;\n  envelope_document_id: string;\n  certificate_document_id?: string;\n  document?: IEnvelopeDocument;\n  certificate?: IEnvelopeDocument;\n  fields?: IDocumentField[];\n  recipients?: IRecipient[];\n  histories?: IEnvelopeHistory[];\n  component?: EnvelopeComponent;\n  name?: string;\n  reminder_id?: string;\n  reminder?: IReminder;\n  owner?: {\n    profile_id: string;\n    email: string;\n    name: string;\n  };\n}\n\nexport interface EnvelopeComponent {\n  progress?: number;\n  status_color?: string;\n  selected_format_time?: string;\n  format_time?: string;\n  selected?: boolean;\n  envelope__list__class?: string;\n}\n","import { IRecipient } from './recipient.model';\n\nexport interface IDocumentField {\n  name?: string;\n  recipient_role: string;\n  envelope_id: string;\n  page: number;\n  type: string;\n  required: boolean;\n  settings?: ISetting;\n  recipients?: IRecipient;\n  validator?: string;\n  label?: string;\n  prepared: boolean;\n}\n\ninterface ISetting {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  result?: string;\n  type?: string;\n  options?: Array<{ value: string, id: string, selected?: boolean, checked?: boolean, x?: number, y?: number }>;\n  leading?: number;\n  alignment?: number;\n  upperCase?: boolean;\n  url?: string;\n}\n","export interface IEnvelopeHistory {\n    id?: string;\n    envelope_id?: string;\n    role_name?: string;\n    event: string;\n    event_detail?: string;\n    created_at: Date;\n}\n\nexport interface IActivity {\n    date: string;\n    log: string;\n    icon: string;\n}\n","import { IDocument } from './document.model';\nimport { ITimePeriod } from './time_period.model';\nexport interface IEnvelopeSearchParams {\n  envelope_status?: string[];\n  recipient_status?: string[];\n  envelope_name?: string;\n  recipient_name?: string;\n  recipient_email?: string;\n  updated_at?: ITimePeriod;\n  canceled_at?: ITimePeriod;\n  created_at?: ITimePeriod;\n  text_field_value?: string;\n  is_owner?: boolean;\n  is_recipient?: boolean;\n  sort_by?: DocumentSortOptions;\n  ascending?: boolean;\n  row?: number;\n  page?: number;\n  template_id?: string;\n  recipient_claimed?: boolean;\n}\n\nexport interface IEnvelopeSearchResult {\n  page: number,\n  row: number,\n  result: IDocument[]\n  total: number\n}\n\nexport interface IEnvelopeFilterParams {\n  type: string;\n  ascending?: boolean;\n  row?: number;\n  page?: number;\n  filterTime?: ITimePeriod;\n  sortBy?: DocumentSortOptions;\n  customerFilters?: IEnvelopeSearchParams;\n}\n\nexport enum DocumentSortOptions {\n  created_at = 'created_at',\n  updated_at = 'updated_at',\n  envelope_name = 'envelope_name',\n  canceled_at = 'canceled_at',\n  envelope_status = 'envelope_status'\n}\n","export interface IEnvelopeDocument {\n  id?: string;\n  url: string;\n  name: string;\n  created_at?: Date;\n  updated_at?: Date;\n  page_numbers: number;\n  mime: string;\n}\n","export class FieldData<T> {\n  value: T;\n  pageNum: number;\n  id: number;\n  fName: string;\n  required: boolean;\n  order: number;\n  vName: string;\n  error: string;\n  type: string;\n\n  constructor(options: {\n    value?: T,\n    pageNum?: number,\n    id?: number,\n    fName?: string,\n    required?:boolean,\n    order?: number,\n    vName?: string,\n    error?: string,\n    type?: string\n  } = {}) {\n    this.value = options.value;\n    this.pageNum = options.pageNum;\n    this.id = options.id;\n    this.fName = options.fName;\n    this.required = options.required;\n    this.order = options.order;\n    this.vName = options.vName;\n    this.error = options.error || '';\n    this.type = options.type;\n  }\n}\n","export interface FieldRole {\n    role_id: string;\n    field_id: string;\n}\n","export interface IField {\n  label: string;\n  name: string;\n  role_name: string;\n  template_id: string;\n  type: string;\n  required: boolean;\n  setting: Object;\n  page_sequence: number;\n  validator?: string;\n}\n","export interface OptionType {\n  type: string;\n  page_sequence: number;\n  field_name?: string;\n  field_index?: number;\n}","import { ITemplateDocument } from './template_document.model';\nimport { IField } from './field.model';\n\nexport interface IPage {\n    template_id: string;\n    document_id: string;\n    document?: ITemplateDocument;\n    sequence: number;\n    page_number: number;\n    thumbnail_url?: string;\n    thumbnail_safe?: any;\n    fields?: IField[];\n}\n","import { IDocumentField } from './document_fields.model';\n\nexport interface IRecipient {\n  role_name: string;\n  envelope_id: string;\n  status: string;\n  email: string;\n  full_name: string;\n  sequence: number;\n  type: string;\n  delegator: boolean;\n  token: string;\n  profile_id?: string;\n  created_at?: Date;\n  updated_at?: Date;\n  message?: string;\n  fields?: IDocumentField[];\n  delegated_to?: string;\n  claimed?: boolean;\n  agreed?: boolean;\n  signatureUrl?: any;\n  signatures?: IEnvelopeSignature[];\n  rgba?: string;\n}\n\nexport interface IEnvelopeSignature {\n  envelope_id: string;\n  signature_id: string;\n  role_name: string;\n  signed_at?: Date;\n  ip_address?: string;\n  hash?: string;\n}\n","export interface IReminder {\n  id?: string;\n  created_at?: Date;\n  is_on: boolean;\n  setup_time: number;\n  interval_time: number;\n  last_time: number;\n  next_time: number;\n  envelope_id: string;\n  template_id: string;\n}\n","import { IField } from './field.model';\n\nexport interface IRole {\n  id?: string;\n  template_id: string;\n  name: string;\n  full_name?: string;\n  old_name?: string;\n  email?: string;\n  phone?: string;\n  type: string;\n  sequence: number;\n  fields?: IField[];\n  message?: string;\n  rgba?: string;\n  delegator: boolean;\n}\n","import { ITemplateDocument } from './template_document.model';\nimport { IPage } from './page.model';\nimport { IRole } from './role.model';\nimport { TemplateSenderTypes } from '../definitions/template.enums';\n\nexport interface ITemplate {\n    template_documents?: ITemplateDocument[];\n    pages?: IPage[];\n    roles?: IRole[];\n    counter?: number;\n    tags?: any[];\n    description?: string;\n    name: string;\n    id?: string;\n    profile_id?: string;\n    created_at?: Date;\n    updated_at?: Date;\n    token?: string;\n    reminder_id?: string;\n    reminder?: object;\n    template_stars?: any[];\n    organization_id?: string;\n    is_personal?: boolean;\n    is_public?: boolean;\n    sender?: TemplateSenderTypes;\n    last_used?: { at: string }[];\n    thumbnail_base64?: string;\n}\n\nexport interface IStarTemplate {\n    profile_id: string,\n    template_id: string\n}\n","export interface ITemplateDocument {\n    url: string;\n    name: string;\n    page_numbers: number;\n    id?: string;\n    updated_at?: Date;\n    created_at?: Date;\n    template_id: string;\n    thumbnail_url: string;\n    thumbnail_safe?: any;\n    mime: string;\n}\n","import { ITemplate } from './template.model';\nimport { ITimePeriod } from './time_period.model';\n\nexport interface ITemplateSearchParams {\n  name?: string;\n  sender?: string;\n  description?: string;\n  profile_id?: string;\n  organization_id?: string;\n  updated_at?: ITimePeriod;\n  created_at?: ITimePeriod;\n  last_used_at?: ITimePeriod;\n  is_personal?: boolean;\n  is_public?: boolean;\n  tags?: string[];\n  document_name?: string;\n  sort_by?: SortOptions;\n  ascending?: boolean;\n  row?: number;\n  page?: number;\n}\n\nexport interface ITemplateSearchResult {\n  page: number;\n  row: number;\n  total: number;\n  result: ITemplate[]\n}\n\nexport enum SortOptions {\n  CREATED_AT = 'created_at',\n  UPDATED_AT = 'updated_at',\n  NAME = 'name',\n  LAST_USED_AT = 'last_used_at',\n  COUNTER = 'counter',\n  STAR_COUNTER = 'star_counter'\n}","export interface ITimePeriod {\n  start_time: string; // Date\n  end_time: string; // Date\n}","export function regParse(string: string) {\n  return JSON.parse(string, function (key, value) {\n    let prefix;\n    if (typeof value !== 'string') {\n      return value;\n    }\n    if (value.length < 8) {\n      return value;\n    }\n    prefix = value.substring(0, 8);\n\n    if (prefix === 'function') {\n      return eval('(' + value + ')');\n    }\n    if (prefix === '_PxEgEr_') {\n      return eval(value.slice(8));\n    }\n    if (prefix === '_NuFrRa_') {\n      return eval(value.slice(8));\n    }\n    return value;\n  });\n}\n","export function getRGB(rgba) {\n  const rgbNumbers = rgba.replace('rgba(', '').replace(')', '').split(',');\n  const rgbObject = {\n    red: rgbNumbers[0],\n    green: rgbNumbers[1],\n    blue: rgbNumbers[2],\n    alpha: rgbNumbers[3]\n  };\n  const alpha = 1 - rgbObject.alpha;\n  const red = Math.round((rgbObject.alpha * (rgbObject.red / 255) + alpha) * 255);\n  const green = Math.round((rgbObject.alpha * (rgbObject.green / 255) + alpha) * 255);\n  const blue = Math.round((rgbObject.alpha * (rgbObject.blue / 255) + alpha) * 255);\n  return ('#' + rgbToHex(red) + rgbToHex(green) + rgbToHex(blue));\n}\n\nfunction rgbToHex(rgb: number) {\n  const hex = rgb.toString(16);\n  if (hex.length < 2) {\n    return '0' + hex;\n  }\n  return hex;\n}\n\nexport function getRGBA(index) {\n  switch (index % 10) {\n    case 0:\n      return index === 0 ? 'rgba(255, 193, 7, 0.4)' : 'rgba(134, 134, 134, 0.3)'; //#FFE69C\n    case 1:\n      return 'rgba(156, 39, 176, .4)'; //'#E3C3E9'\n    case 2:\n      return 'rgba(33, 150, 243, .4)'; //'#C1E1FB'\n    case 3:\n      return 'rgba(220, 231, 117, 0.3)';\n    case 4:\n      return 'rgba(121, 134, 203, 0.3)';\n    case 5:\n      return 'rgba(77, 182, 172, 0.3)';\n    case 6:\n      return 'rgba(255, 202, 165, 0.3)';\n    case 7:\n      return 'rgba(2, 247, 190, 0.3)';\n    case 8:\n      return 'rgba(255, 138, 101, 0.3)';\n    case 9:\n      return 'rgba(82, 255, 79, 0.3)';\n    default:\n      return 'rgba(229, 115, 155, 0.3)';\n  }\n}\n\nexport function nameToRGBA(str) {\n  if (!!str) {\n    const validNum = parseInt(str.slice(-1), 10);\n    if (!isNaN(validNum)) {\n      str += (validNum * 99).toString();\n    }\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    hash = Math.round(hash / 1.3);\n    const c = (hash & 0x00FFFF08)\n      .toString(16)\n      .toUpperCase();\n    const hex = '#' + '00000'.substring(0, 6 - c.length) + c;\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    const color = {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    };\n    return `rgba(${color.r}, ${color.g}, ${color.b}, 0.2)`;\n  }\n}","export const countries = [\n  {\n    \"code\": \"+7 840\",\n    \"name\": \"Abkhazia\",\n    \"value\": \"+7\"\n  },\n  {\n    \"code\": \"+93\",\n    \"name\": \"Afghanistan\",\n    \"value\": \"+93\"\n  },\n  {\n    \"code\": \"+355\",\n    \"name\": \"Albania\",\n    \"value\": \"+355\"\n  },\n  {\n    \"code\": \"+213\",\n    \"name\": \"Algeria\",\n    \"value\": \"+213\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"American Samoa\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+376\",\n    \"name\": \"Andorra\",\n    \"value\": \"+376\"\n  },\n  {\n    \"code\": \"+244\",\n    \"name\": \"Angola\",\n    \"value\": \"+244\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Anguilla\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Antigua and Barbuda\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+54\",\n    \"name\": \"Argentina\",\n    \"value\": \"+54\"\n  },\n  {\n    \"code\": \"+374\",\n    \"name\": \"Armenia\",\n    \"value\": \"+374\"\n  },\n  {\n    \"code\": \"+297\",\n    \"name\": \"Aruba\",\n    \"value\": \"+297\"\n  },\n  {\n    \"code\": \"+247\",\n    \"name\": \"Ascension\",\n    \"value\": \"+247\"\n  },\n  {\n    \"code\": \"+61\",\n    \"name\": \"Australia\",\n    \"value\": \"+61\"\n  },\n  {\n    \"code\": \"+672\",\n    \"name\": \"Australian External Territories\",\n    \"value\": \"+672\"\n  },\n  {\n    \"code\": \"+43\",\n    \"name\": \"Austria\",\n    \"value\": \"+43\"\n  },\n  {\n    \"code\": \"+994\",\n    \"name\": \"Azerbaijan\",\n    \"value\": \"+994\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Bahamas\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+973\",\n    \"name\": \"Bahrain\",\n    \"value\": \"+973\"\n  },\n  {\n    \"code\": \"+880\",\n    \"name\": \"Bangladesh\",\n    \"value\": \"+880\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Barbados\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Barbuda\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+375\",\n    \"name\": \"Belarus\",\n    \"value\": \"+375\"\n  },\n  {\n    \"code\": \"+32\",\n    \"name\": \"Belgium\",\n    \"value\": \"+32\"\n  },\n  {\n    \"code\": \"+501\",\n    \"name\": \"Belize\",\n    \"value\": \"+501\"\n  },\n  {\n    \"code\": \"+229\",\n    \"name\": \"Benin\",\n    \"value\": \"+229\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Bermuda\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+975\",\n    \"name\": \"Bhutan\",\n    \"value\": \"+975\"\n  },\n  {\n    \"code\": \"+591\",\n    \"name\": \"Bolivia\",\n    \"value\": \"+591\"\n  },\n  {\n    \"code\": \"+387\",\n    \"name\": \"Bosnia and Herzegovina\",\n    \"value\": \"+387\"\n  },\n  {\n    \"code\": \"+267\",\n    \"name\": \"Botswana\",\n    \"value\": \"+267\"\n  },\n  {\n    \"code\": \"+55\",\n    \"name\": \"Brazil\",\n    \"value\": \"+55\"\n  },\n  {\n    \"code\": \"+246\",\n    \"name\": \"British Indian Ocean Territory\",\n    \"value\": \"+246\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"British Virgin Islands\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+673\",\n    \"name\": \"Brunei\",\n    \"value\": \"+673\"\n  },\n  {\n    \"code\": \"+359\",\n    \"name\": \"Bulgaria\",\n    \"value\": \"+359\"\n  },\n  {\n    \"code\": \"+226\",\n    \"name\": \"Burkina Faso\",\n    \"value\": \"+226\"\n  },\n  {\n    \"code\": \"+257\",\n    \"name\": \"Burundi\",\n    \"value\": \"+257\"\n  },\n  {\n    \"code\": \"+855\",\n    \"name\": \"Cambodia\",\n    \"value\": \"+855\"\n  },\n  {\n    \"code\": \"+237\",\n    \"name\": \"Cameroon\",\n    \"value\": \"+237\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Canada\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+238\",\n    \"name\": \"Cape Verde\",\n    \"value\": \"+238\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Cayman Islands\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+236\",\n    \"name\": \"Central African Republic\",\n    \"value\": \"+236\"\n  },\n  {\n    \"code\": \"+235\",\n    \"name\": \"Chad\",\n    \"value\": \"+235\"\n  },\n  {\n    \"code\": \"+56\",\n    \"name\": \"Chile\",\n    \"value\": \"+56\"\n  },\n  {\n    \"code\": \"+86\",\n    \"name\": \"China\",\n    \"value\": \"+86\"\n  },\n  {\n    \"code\": \"+61\",\n    \"name\": \"Christmas Island\",\n    \"value\": \"+61\"\n  },\n  {\n    \"code\": \"+61\",\n    \"name\": \"Cocos-Keeling Islands\",\n    \"value\": \"+61\"\n  },\n  {\n    \"code\": \"+57\",\n    \"name\": \"Colombia\",\n    \"value\": \"+57\"\n  },\n  {\n    \"code\": \"+269\",\n    \"name\": \"Comoros\",\n    \"value\": \"+269\"\n  },\n  {\n    \"code\": \"+242\",\n    \"name\": \"Congo\",\n    \"value\": \"+242\"\n  },\n  {\n    \"code\": \"+243\",\n    \"name\": \"Congo, Dem. Rep. of (Zaire)\",\n    \"value\": \"+243\"\n  },\n  {\n    \"code\": \"+682\",\n    \"name\": \"Cook Islands\",\n    \"value\": \"+682\"\n  },\n  {\n    \"code\": \"+506\",\n    \"name\": \"Costa Rica\",\n    \"value\": \"+506\"\n  },\n  {\n    \"code\": \"+385\",\n    \"name\": \"Croatia\",\n    \"value\": \"+385\"\n  },\n  {\n    \"code\": \"+53\",\n    \"name\": \"Cuba\",\n    \"value\": \"+53\"\n  },\n  {\n    \"code\": \"+599\",\n    \"name\": \"Curacao\",\n    \"value\": \"+599\"\n  },\n  {\n    \"code\": \"+537\",\n    \"name\": \"Cyprus\",\n    \"value\": \"+537\"\n  },\n  {\n    \"code\": \"+420\",\n    \"name\": \"Czech Republic\",\n    \"value\": \"+420\"\n  },\n  {\n    \"code\": \"+45\",\n    \"name\": \"Denmark\",\n    \"value\": \"+45\"\n  },\n  {\n    \"code\": \"+246\",\n    \"name\": \"Diego Garcia\",\n    \"value\": \"+246\"\n  },\n  {\n    \"code\": \"+253\",\n    \"name\": \"Djibouti\",\n    \"value\": \"+253\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Dominica\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Dominican Republic\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+670\",\n    \"name\": \"East Timor\",\n    \"value\": \"+670\"\n  },\n  {\n    \"code\": \"+56\",\n    \"name\": \"Easter Island\",\n    \"value\": \"+56\"\n  },\n  {\n    \"code\": \"+593\",\n    \"name\": \"Ecuador\",\n    \"value\": \"+593\"\n  },\n  {\n    \"code\": \"+20\",\n    \"name\": \"Egypt\",\n    \"value\": \"+20\"\n  },\n  {\n    \"code\": \"+503\",\n    \"name\": \"El Salvador\",\n    \"value\": \"+503\"\n  },\n  {\n    \"code\": \"+240\",\n    \"name\": \"Equatorial Guinea\",\n    \"value\": \"+240\"\n  },\n  {\n    \"code\": \"+291\",\n    \"name\": \"Eritrea\",\n    \"value\": \"+291\"\n  },\n  {\n    \"code\": \"+372\",\n    \"name\": \"Estonia\",\n    \"value\": \"+372\"\n  },\n  {\n    \"code\": \"+251\",\n    \"name\": \"Ethiopia\",\n    \"value\": \"+251\"\n  },\n  {\n    \"code\": \"+500\",\n    \"name\": \"Falkland Islands\",\n    \"value\": \"+500\"\n  },\n  {\n    \"code\": \"+298\",\n    \"name\": \"Faroe Islands\",\n    \"value\": \"+298\"\n  },\n  {\n    \"code\": \"+679\",\n    \"name\": \"Fiji\",\n    \"value\": \"+679\"\n  },\n  {\n    \"code\": \"+358\",\n    \"name\": \"Finland\",\n    \"value\": \"+358\"\n  },\n  {\n    \"code\": \"+33\",\n    \"name\": \"France\",\n    \"value\": \"+33\"\n  },\n  {\n    \"code\": \"+596\",\n    \"name\": \"Martinique\",\n    \"value\": \"+596\"\n  },\n  {\n    \"code\": \"+594\",\n    \"name\": \"French Guiana\",\n    \"value\": \"+594\"\n  },\n  {\n    \"code\": \"+689\",\n    \"name\": \"French Polynesia\",\n    \"value\": \"+689\"\n  },\n  {\n    \"code\": \"+241\",\n    \"name\": \"Gabon\",\n    \"value\": \"+241\"\n  },\n  {\n    \"code\": \"+220\",\n    \"name\": \"Gambia\",\n    \"value\": \"+220\"\n  },\n  {\n    \"code\": \"+995\",\n    \"name\": \"Georgia\",\n    \"value\": \"+995\"\n  },\n  {\n    \"code\": \"+49\",\n    \"name\": \"Germany\",\n    \"value\": \"+49\"\n  },\n  {\n    \"code\": \"+233\",\n    \"name\": \"Ghana\",\n    \"value\": \"+233\"\n  },\n  {\n    \"code\": \"+350\",\n    \"name\": \"Gibraltar\",\n    \"value\": \"+350\"\n  },\n  {\n    \"code\": \"+30\",\n    \"name\": \"Greece\",\n    \"value\": \"+30\"\n  },\n  {\n    \"code\": \"+299\",\n    \"name\": \"Greenland\",\n    \"value\": \"+299\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Grenada\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+590\",\n    \"name\": \"Guadeloupe\",\n    \"value\": \"+590\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Guam\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+502\",\n    \"name\": \"Guatemala\",\n    \"value\": \"+502\"\n  },\n  {\n    \"code\": \"+224\",\n    \"name\": \"Guinea\",\n    \"value\": \"+224\"\n  },\n  {\n    \"code\": \"+245\",\n    \"name\": \"Guinea-Bissau\",\n    \"value\": \"+245\"\n  },\n  {\n    \"code\": \"+595\",\n    \"name\": \"Guyana\",\n    \"value\": \"+595\"\n  },\n  {\n    \"code\": \"+509\",\n    \"name\": \"Haiti\",\n    \"value\": \"+509\"\n  },\n  {\n    \"code\": \"+504\",\n    \"name\": \"Honduras\",\n    \"value\": \"+504\"\n  },\n  {\n    \"code\": \"+852\",\n    \"name\": \"Hong Kong SAR China\",\n    \"value\": \"+852\"\n  },\n  {\n    \"code\": \"+36\",\n    \"name\": \"Hungary\",\n    \"value\": \"+36\"\n  },\n  {\n    \"code\": \"+354\",\n    \"name\": \"Iceland\",\n    \"value\": \"+354\"\n  },\n  {\n    \"code\": \"+91\",\n    \"name\": \"India\",\n    \"value\": \"+91\"\n  },\n  {\n    \"code\": \"+62\",\n    \"name\": \"Indonesia\",\n    \"value\": \"+62\"\n  },\n  {\n    \"code\": \"+98\",\n    \"name\": \"Iran\",\n    \"value\": \"+98\"\n  },\n  {\n    \"code\": \"+964\",\n    \"name\": \"Iraq\",\n    \"value\": \"+964\"\n  },\n  {\n    \"code\": \"+353\",\n    \"name\": \"Ireland\",\n    \"value\": \"+353\"\n  },\n  {\n    \"code\": \"+972\",\n    \"name\": \"Israel\",\n    \"value\": \"+972\"\n  },\n  {\n    \"code\": \"+39\",\n    \"name\": \"Italy\",\n    \"value\": \"+39\"\n  },\n  {\n    \"code\": \"+225\",\n    \"name\": \"Ivory Coast\",\n    \"value\": \"+225\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Jamaica\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+81\",\n    \"name\": \"Japan\",\n    \"value\": \"+81\"\n  },\n  {\n    \"code\": \"+962\",\n    \"name\": \"Jordan\",\n    \"value\": \"+962\"\n  },\n  {\n    \"code\": \"+77\",\n    \"name\": \"Kazakhstan\",\n    \"value\": \"+7\"\n  },\n  {\n    \"code\": \"+254\",\n    \"name\": \"Kenya\",\n    \"value\": \"+254\"\n  },\n  {\n    \"code\": \"+686\",\n    \"name\": \"Kiribati\",\n    \"value\": \"+686\"\n  },\n  {\n    \"code\": \"+965\",\n    \"name\": \"Kuwait\",\n    \"value\": \"+965\"\n  },\n  {\n    \"code\": \"+996\",\n    \"name\": \"Kyrgyzstan\",\n    \"value\": \"+996\"\n  },\n  {\n    \"code\": \"+856\",\n    \"name\": \"Laos\",\n    \"value\": \"+856\"\n  },\n  {\n    \"code\": \"+371\",\n    \"name\": \"Latvia\",\n    \"value\": \"+371\"\n  },\n  {\n    \"code\": \"+961\",\n    \"name\": \"Lebanon\",\n    \"value\": \"+961\"\n  },\n  {\n    \"code\": \"+266\",\n    \"name\": \"Lesotho\",\n    \"value\": \"+266\"\n  },\n  {\n    \"code\": \"+231\",\n    \"name\": \"Liberia\",\n    \"value\": \"+231\"\n  },\n  {\n    \"code\": \"+218\",\n    \"name\": \"Libya\",\n    \"value\": \"+218\"\n  },\n  {\n    \"code\": \"+423\",\n    \"name\": \"Liechtenstein\",\n    \"value\": \"+423\"\n  },\n  {\n    \"code\": \"+370\",\n    \"name\": \"Lithuania\",\n    \"value\": \"+370\"\n  },\n  {\n    \"code\": \"+352\",\n    \"name\": \"Luxembourg\",\n    \"value\": \"+352\"\n  },\n  {\n    \"code\": \"+853\",\n    \"name\": \"Macau SAR China\",\n    \"value\": \"+853\"\n  },\n  {\n    \"code\": \"+389\",\n    \"name\": \"Macedonia\",\n    \"value\": \"+389\"\n  },\n  {\n    \"code\": \"+261\",\n    \"name\": \"Madagascar\",\n    \"value\": \"+261\"\n  },\n  {\n    \"code\": \"+265\",\n    \"name\": \"Malawi\",\n    \"value\": \"+265\"\n  },\n  {\n    \"code\": \"+60\",\n    \"name\": \"Malaysia\",\n    \"value\": \"+60\"\n  },\n  {\n    \"code\": \"+960\",\n    \"name\": \"Maldives\",\n    \"value\": \"+960\"\n  },\n  {\n    \"code\": \"+223\",\n    \"name\": \"Mali\",\n    \"value\": \"+223\"\n  },\n  {\n    \"code\": \"+356\",\n    \"name\": \"Malta\",\n    \"value\": \"+356\"\n  },\n  {\n    \"code\": \"+692\",\n    \"name\": \"Marshall Islands\",\n    \"value\": \"+692\"\n  },\n  {\n    \"code\": \"+596\",\n    \"name\": \"Martinique\",\n    \"value\": \"+596\"\n  },\n  {\n    \"code\": \"+222\",\n    \"name\": \"Mauritania\",\n    \"value\": \"+222\"\n  },\n  {\n    \"code\": \"+230\",\n    \"name\": \"Mauritius\",\n    \"value\": \"+230\"\n  },\n  {\n    \"code\": \"+262\",\n    \"name\": \"Mayotte or RÃ©union\",\n    \"value\": \"+262\"\n  },\n  {\n    \"code\": \"+52\",\n    \"name\": \"Mexico\",\n    \"value\": \"+52\"\n  },\n  {\n    \"code\": \"+691\",\n    \"name\": \"Micronesia\",\n    \"value\": \"+691\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Midway Island\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+373\",\n    \"name\": \"Moldova\",\n    \"value\": \"+373\"\n  },\n  {\n    \"code\": \"+377\",\n    \"name\": \"Monaco\",\n    \"value\": \"+377\"\n  },\n  {\n    \"code\": \"+976\",\n    \"name\": \"Mongolia\",\n    \"value\": \"+976\"\n  },\n  {\n    \"code\": \"+382\",\n    \"name\": \"Montenegro\",\n    \"value\": \"+382\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Montserrat\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+212\",\n    \"name\": \"Morocco\",\n    \"value\": \"+212\"\n  },\n  {\n    \"code\": \"+95\",\n    \"name\": \"Myanmar\",\n    \"value\": \"+95\"\n  },\n  {\n    \"code\": \"+264\",\n    \"name\": \"Namibia\",\n    \"value\": \"+264\"\n  },\n  {\n    \"code\": \"+674\",\n    \"name\": \"Nauru\",\n    \"value\": \"+674\"\n  },\n  {\n    \"code\": \"+977\",\n    \"name\": \"Nepal\",\n    \"value\": \"+977\"\n  },\n  {\n    \"code\": \"+31\",\n    \"name\": \"Netherlands\",\n    \"value\": \"+31\"\n  },\n  {\n    \"code\": \"+599\",\n    \"name\": \"Netherlands Antilles\",\n    \"value\": \"+599\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Nevis\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+687\",\n    \"name\": \"New Caledonia\",\n    \"value\": \"+687\"\n  },\n  {\n    \"code\": \"+64\",\n    \"name\": \"New Zealand\",\n    \"value\": \"+64\"\n  },\n  {\n    \"code\": \"+505\",\n    \"name\": \"Nicaragua\",\n    \"value\": \"+505\"\n  },\n  {\n    \"code\": \"+227\",\n    \"name\": \"Niger\",\n    \"value\": \"+227\"\n  },\n  {\n    \"code\": \"+234\",\n    \"name\": \"Nigeria\",\n    \"value\": \"+234\"\n  },\n  {\n    \"code\": \"+683\",\n    \"name\": \"Niue\",\n    \"value\": \"+683\"\n  },\n  {\n    \"code\": \"+672\",\n    \"name\": \"Norfolk Island\",\n    \"value\": \"+672\"\n  },\n  {\n    \"code\": \"+850\",\n    \"name\": \"North Korea\",\n    \"value\": \"+850\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Northern Mariana Islands\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+47\",\n    \"name\": \"Norway\",\n    \"value\": \"+47\"\n  },\n  {\n    \"code\": \"+968\",\n    \"name\": \"Oman\",\n    \"value\": \"+968\"\n  },\n  {\n    \"code\": \"+92\",\n    \"name\": \"Pakistan\",\n    \"value\": \"+92\"\n  },\n  {\n    \"code\": \"+680\",\n    \"name\": \"Palau\",\n    \"value\": \"+680\"\n  },\n  {\n    \"code\": \"+970\",\n    \"name\": \"Palestinian Territory\",\n    \"value\": \"+970\"\n  },\n  {\n    \"code\": \"+507\",\n    \"name\": \"Panama\",\n    \"value\": \"+507\"\n  },\n  {\n    \"code\": \"+675\",\n    \"name\": \"Papua New Guinea\",\n    \"value\": \"+675\"\n  },\n  {\n    \"code\": \"+595\",\n    \"name\": \"Paraguay\",\n    \"value\": \"+595\"\n  },\n  {\n    \"code\": \"+51\",\n    \"name\": \"Peru\",\n    \"value\": \"+51\"\n  },\n  {\n    \"code\": \"+63\",\n    \"name\": \"Philippines\",\n    \"value\": \"+63\"\n  },\n  {\n    \"code\": \"+48\",\n    \"name\": \"Poland\",\n    \"value\": \"+48\"\n  },\n  {\n    \"code\": \"+351\",\n    \"name\": \"Portugal\",\n    \"value\": \"+351\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Puerto Rico\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+974\",\n    \"name\": \"Qatar\",\n    \"value\": \"+974\"\n  },\n  {\n    \"code\": \"+40\",\n    \"name\": \"Romania\",\n    \"value\": \"+40\"\n  },\n  {\n    \"code\": \"+7\",\n    \"name\": \"Russia\",\n    \"value\": \"+7\"\n  },\n  {\n    \"code\": \"+250\",\n    \"name\": \"Rwanda\",\n    \"value\": \"+250\"\n  },\n  {\n    \"code\": \"508\",\n    \"name\": \"Saint Pierre and Miquelon\",\n    \"value\": \"508\"\n  },\n  {\n    \"code\": \"+685\",\n    \"name\": \"Samoa\",\n    \"value\": \"+685\"\n  },\n  {\n    \"code\": \"+378\",\n    \"name\": \"San Marino\",\n    \"value\": \"+378\"\n  },\n  {\n    \"code\": \"+966\",\n    \"name\": \"Saudi Arabia\",\n    \"value\": \"+966\"\n  },\n  {\n    \"code\": \"+221\",\n    \"name\": \"Senegal\",\n    \"value\": \"+221\"\n  },\n  {\n    \"code\": \"+381\",\n    \"name\": \"Serbia\",\n    \"value\": \"+381\"\n  },\n  {\n    \"code\": \"+248\",\n    \"name\": \"Seychelles\",\n    \"value\": \"+248\"\n  },\n  {\n    \"code\": \"+232\",\n    \"name\": \"Sierra Leone\",\n    \"value\": \"+232\"\n  },\n  {\n    \"code\": \"+65\",\n    \"name\": \"Singapore\",\n    \"value\": \"+65\"\n  },\n  {\n    \"code\": \"+421\",\n    \"name\": \"Slovakia\",\n    \"value\": \"+421\"\n  },\n  {\n    \"code\": \"+386\",\n    \"name\": \"Slovenia\",\n    \"value\": \"+386\"\n  },\n  {\n    \"code\": \"+677\",\n    \"name\": \"Solomon Islands\",\n    \"value\": \"+677\"\n  },\n  {\n    \"code\": \"+27\",\n    \"name\": \"South Africa\",\n    \"value\": \"+27\"\n  },\n  {\n    \"code\": \"+500\",\n    \"name\": \"South Georgia and the South Sandwich Islands\",\n    \"value\": \"+500\"\n  },\n  {\n    \"code\": \"+82\",\n    \"name\": \"South Korea\",\n    \"value\": \"+82\"\n  },\n  {\n    \"code\": \"+34\",\n    \"name\": \"Spain\",\n    \"value\": \"+34\"\n  },\n  {\n    \"code\": \"+94\",\n    \"name\": \"Sri Lanka\",\n    \"value\": \"+94\"\n  },\n  {\n    \"code\": \"+249\",\n    \"name\": \"Sudan\",\n    \"value\": \"+249\"\n  },\n  {\n    \"code\": \"+597\",\n    \"name\": \"Suriname\",\n    \"value\": \"+597\"\n  },\n  {\n    \"code\": \"+268\",\n    \"name\": \"Swaziland\",\n    \"value\": \"+268\"\n  },\n  {\n    \"code\": \"+46\",\n    \"name\": \"Sweden\",\n    \"value\": \"+46\"\n  },\n  {\n    \"code\": \"+41\",\n    \"name\": \"Switzerland\",\n    \"value\": \"+41\"\n  },\n  {\n    \"code\": \"+963\",\n    \"name\": \"Syria\",\n    \"value\": \"+963\"\n  },\n  {\n    \"code\": \"+886\",\n    \"name\": \"Taiwan\",\n    \"value\": \"+886\"\n  },\n  {\n    \"code\": \"+992\",\n    \"name\": \"Tajikistan\",\n    \"value\": \"+992\"\n  },\n  {\n    \"code\": \"+255\",\n    \"name\": \"Tanzania\",\n    \"value\": \"+255\"\n  },\n  {\n    \"code\": \"+66\",\n    \"name\": \"Thailand\",\n    \"value\": \"+66\"\n  },\n  {\n    \"code\": \"+670\",\n    \"name\": \"Timor Leste\",\n    \"value\": \"+670\"\n  },\n  {\n    \"code\": \"+228\",\n    \"name\": \"Togo\",\n    \"value\": \"+228\"\n  },\n  {\n    \"code\": \"+690\",\n    \"name\": \"Tokelau\",\n    \"value\": \"+690\"\n  },\n  {\n    \"code\": \"+676\",\n    \"name\": \"Tonga\",\n    \"value\": \"+676\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Trinidad and Tobago\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+216\",\n    \"name\": \"Tunisia\",\n    \"value\": \"+216\"\n  },\n  {\n    \"code\": \"+90\",\n    \"name\": \"Turkey\",\n    \"value\": \"+90\"\n  },\n  {\n    \"code\": \"+993\",\n    \"name\": \"Turkmenistan\",\n    \"value\": \"+993\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Turks and Caicos Islands\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+688\",\n    \"name\": \"Tuvalu\",\n    \"value\": \"+688\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"U.S. Virgin Islands\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+256\",\n    \"name\": \"Uganda\",\n    \"value\": \"+256\"\n  },\n  {\n    \"code\": \"+380\",\n    \"name\": \"Ukraine\",\n    \"value\": \"+380\"\n  },\n  {\n    \"code\": \"+971\",\n    \"name\": \"United Arab Emirates\",\n    \"value\": \"+971\"\n  },\n  {\n    \"code\": \"+44\",\n    \"name\": \"United Kingdom\",\n    \"value\": \"+44\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"United States\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+598\",\n    \"name\": \"Uruguay\",\n    \"value\": \"+598\"\n  },\n  {\n    \"code\": \"+998\",\n    \"name\": \"Uzbekistan\",\n    \"value\": \"+998\"\n  },\n  {\n    \"code\": \"+678\",\n    \"name\": \"Vanuatu\",\n    \"value\": \"+678\"\n  },\n  {\n    \"code\": \"+58\",\n    \"name\": \"Venezuela\",\n    \"value\": \"+58\"\n  },\n  {\n    \"code\": \"+84\",\n    \"name\": \"Vietnam\",\n    \"value\": \"+84\"\n  },\n  {\n    \"code\": \"+1\",\n    \"name\": \"Wake Island\",\n    \"value\": \"+1\"\n  },\n  {\n    \"code\": \"+681\",\n    \"name\": \"Wallis and Futuna\",\n    \"value\": \"+681\"\n  },\n  {\n    \"code\": \"+967\",\n    \"name\": \"Yemen\",\n    \"value\": \"+967\"\n  },\n  {\n    \"code\": \"+260\",\n    \"name\": \"Zambia\",\n    \"value\": \"+260\"\n  },\n  {\n    \"code\": \"+255\",\n    \"name\": \"Zanzibar\",\n    \"value\": \"+255\"\n  },\n  {\n    \"code\": \"+263\",\n    \"name\": \"Zimbabwe\",\n    \"value\": \"+263\"\n  }\n];\n\nexport function getCountryByCode(number: string) {\n  if (number.substring(0, 2) === '+1') {\n\n  } else if (isFrenchGuiana(number)) {\n    return {\n      \"code\": \"+594\",\n      \"name\": \"French Guiana\",\n      \"value\": \"+594\"\n    }\n  } else if (isGuadeloupe(number)) {\n    return {\n      \"code\": \"+590\",\n      \"name\": \"Guadeloupe\",\n      \"value\": \"+590\"\n    }\n  } else if (isMartinique(number)) {\n    return {\n      \"code\": \"+596\",\n      \"name\": \"Martinique\",\n      \"value\": \"+596\"\n    }\n  } else if (isMayotte(number)) {\n    return {\n      \"code\": \"+262\",\n      \"name\": \"Mayotte or RÃ©union\",\n      \"value\": \"+262\"\n    }\n  } else {\n\n  }\n}\n\nexport function isFrenchGuiana(number: string) {\n  return '+594' === number.substring(0, 4);\n}\n\nexport function isGuadeloupe(number: string) {\n  return '+590' === number.substring(0, 4);\n}\n\nexport function isMartinique(number: string) {\n  return '+596' === number.substring(0, 4);\n}\n\nexport function isMayotte(number: string) {\n  return '+262' === number.substring(0, 4);\n}\n\nexport function getPlusOneCountry(number: string) {\n  let country_info: any;\n  switch (number.substring(0, 5)) {\n    case '+1684':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"American Samoa\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1264':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"Anguilla\",\n        \"value\": \"+1\"\n      }\n    case '+1268':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"Antigua and Barbuda\",\n        \"value\": \"+1\"\n      }\n    case '+1242':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"Bahamas\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1246':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"Barbados\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1441':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"Bermuda\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1284':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"British Virgin Islands\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    case '+1':\n      country_info = {\n        \"code\": \"+1\",\n        \"name\": \"\",\n        \"value\": \"+1\"\n      }\n      break;\n    default:\n      break;\n  }\n  return country_info\n}\n\nexport function isCanada(number: string) {\n  const canadianAreaCodes = [\n    '403', '587', '780', '825', '604', '250', '778', '236', '204', '431', '506', '709', '867', '782', '902', '867',\n    '548', '705', '365', '613', '807', '226', '289', '437', '519', '647', '905', '249', '343', '416', '902', '782',\n    '450', '418', '579', '873', '367', '514', '581', '819', '438', '639', '306', '867'\n  ]\n  const areaCode = number.substring(0, 5);\n  return canadianAreaCodes.findIndex(x => \"+1\" + x === areaCode) > -1;\n}\n\nexport function isAmericanSamoa(number: string) {\n  return number.substring(0, 5) === '+1684';\n}\n\nexport function isDominicanRepublic(number: string) {\n  return '+1809' === number.substring(0, 5) || '+1829' === number.substring(0, 5) || '+1849' === number.substring(0, 5);\n}\n\nexport function isPuertoRico(number: string) {\n  return number.substring(0, 5) === '+' || number.substring(0, 5) === '+';\n}\n\n// need to finish\nexport function getMatchingCountry(number: string, number_of_substrings: number) {\n  let number_of_match = 0;\n  for (let x = 0; x < countries.length; x++) {\n    if (countries[x].code === number.substring(0, number_of_substrings)) {\n      number_of_match++;\n    }\n  }\n  return;\n}\n\nexport function simpleE164Validator(number: string) {\n  const e164_regex = new RegExp(/\\+[1-9]\\d{6,14}/g);\n  return number !== null && number.length < 16 && number.length > 6 && e164_regex.test(number) || number === '' || number === null;\n}\n","import { Injectable, Inject } from '@angular/core';\nimport {\n  CanActivate,\n  CanActivateChild,\n  CanLoad,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n  Route\n} from '@angular/router';\nimport { DOCUMENT } from \"@angular/common\";\nimport { VerdocsAuthService, VerdocsAuthGuardService, VerdocsStateService } from '@verdocs/tokens';\n\n@Injectable()\nexport class AuthGuardService implements CanActivate, CanActivateChild, CanLoad {\n\n  constructor(\n    private vTokenAuth: VerdocsAuthService,\n    private vTokenAuthGuard: VerdocsAuthGuardService,\n    private vTokenStateService: VerdocsStateService,\n    @Inject(DOCUMENT) private document: any\n  ) { }\n\n  canActivate(route, state: RouterStateSnapshot): boolean {\n    const signerToken = this.vTokenStateService.getOtherCookieObject('signer_token');\n    const currentPath = route && route.routeConfig && route.routeConfig.path ? route.routeConfig.path : route.path;\n    const matchesPath = currentPath ? currentPath.match(/(:id\\/role\\/:role)/g) || currentPath.includes('envelope') : false;\n    if (route.routeConfig && !currentPath) {\n      return true;\n    } else if (signerToken && !!matchesPath) {\n      return true;\n    } else {\n      return this.checkLogin(route, state.url);\n    }\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.canActivate(route, state);\n  }\n\n  checkLogin(route, url) {\n    if (this.vTokenAuth.isAuthenticated() || this.isGuestLink(route)) {\n      return true;\n    }\n    this.vTokenAuthGuard.signOut();\n    return false;\n  }\n\n  canLoad(route: Route) {\n    const url = `/${route.path}`;\n    return this.checkLogin(route, url);\n  }\n  canLoadBuilder(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n\n\n  }\n\n  isGuestLink(route) {\n    const signer_token = this.vTokenStateService.getOtherCookie('signer_token');\n    const currentPath = route && route.routeConfig && route.routeConfig.path ? route.routeConfig.path : route.path;\n    const matchesPath = currentPath ? currentPath.match(/(:id\\/role\\/:role)/g) || currentPath.includes('envelope') : false;\n    if (route && !!matchesPath && !!signer_token) {\n      if (signer_token) {\n        return true;\n      }\n      this.vTokenStateService.setTimer(true);\n    }\n    return route._routeConfig && route._routeConfig.path.match(/(:id\\/role\\/:role)/g) && !!signer_token;\n  }\n\n}\n","import { Injectable, Injector, Inject, PLATFORM_ID  } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { HttpClient, HttpResponse, HttpRequest, HttpHeaders, HttpEvent } from '@angular/common/http';\nimport { BehaviorSubject, empty, Observable } from 'rxjs';\nimport { concatMap, map } from 'rxjs/operators';\nimport { findIndex } from 'lodash';\nimport { differenceBy } from 'lodash';\nimport { VerdocsTokenObjectService, VerdocsStateService } from '@verdocs/tokens';\n// import { saveAs } from 'file-saver';\n// import * as jszip from 'jszip';\n// import * as moment from 'moment';\n\nimport { ValidatorService } from '../validators/validator.service';\nimport { getRGBA, nameToRGBA } from '../functions/rgb';\nimport { VSDKConfigToken, VSDKConfig } from '../angular-api.module';\n\n// Models\nimport { IEnvelopeSearchParams, DocumentSortOptions, IEnvelopeSearchResult } from '../models/document_search.model';\nimport { ITimePeriod } from '../models/time_period.model';\nimport { FieldData } from '../models/field-data.model';\nimport { IDocument } from '../models/document.model';\nimport { IRecipient } from '../models/recipient.model';\n\n@Injectable()\nexport class DocumentsService {\n  private _config_token: VSDKConfig;\n  private _currentFields = new BehaviorSubject<any[]>([]);\n  private _currEnvelope = new BehaviorSubject<string>('');\n  public allEnvelopes = new BehaviorSubject<IDocument[]>([]);\n  public _currentExtendedEnvelope = new BehaviorSubject<any>({});\n  public _customFilterSubject = new BehaviorSubject<any>({});\n\n  public currEnvelope$ = this._currEnvelope.asObservable();\n  public fieldsStream = this._currentFields.asObservable();\n  public inProgressSubject = new BehaviorSubject<boolean>(false);\n  public envelopeData: IDocument;\n\n  private currEnvelope: string;\n  private currRoleName: string;\n  private _rForm_backend_url: string;\n  private _documentUrl: string;\n  private workingField: FieldData<any> = new FieldData({ order: 0 });\n  private envelope: IDocument = null;\n  public validators: any = {};\n  public toggleNextSubject = new BehaviorSubject<boolean>(false);\n\n  constructor(\n    private httpClient: HttpClient,\n    private validatorService: ValidatorService,\n    private tokenObjectService: VerdocsTokenObjectService,\n    private vTokenStateService: VerdocsStateService,\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n    this._documentUrl = `${this._rForm_backend_url}/envelopes`\n  }\n\n  public setCurrentEnvelope(id) {\n    this.currEnvelope = id;\n    this._currEnvelope.next(id);\n  }\n\n  public setEnvData(envId, roleId) {\n    this.currEnvelope = envId;\n    this.currRoleName = roleId;\n  }\n\n  public updateEnvelopes(envelopes) {\n    this.allEnvelopes.next(envelopes);\n  }\n\n  get role_name() {\n    return this.currRoleName;\n  }\n\n  get env_id() {\n    return this.currEnvelope;\n  }\n\n  sendInvite(body): Observable<IDocument | never> {\n    return this.httpClient.post(this._documentUrl, body)\n      .pipe(\n        map(\n          (envelope: IDocument) => envelope,\n          err => {\n            return err;\n          })\n      );\n  }\n\n  sendDelegate(envelopeId, role): Observable<IDocument | never> {\n    return this.httpClient.post(this._documentUrl + `/${envelopeId}/recipients/${this.currRoleName}/delegate`, role)\n      .pipe(\n        map((envelope: IDocument) => envelope, err => err)\n      );\n  }\n\n  resendInvitation(envelopeId: string, roleName: string) {\n    return this.httpClient.post(this._documentUrl + `/${envelopeId}/recipients/${roleName}/resend_invitation`, null);\n  }\n\n  getEnvelope(id?: string): Observable<IDocument> {\n    const envelopeId = id ? id : this.currEnvelope;\n    this.setCurrentEnvelope(envelopeId);\n    return this.httpClient.get(this._documentUrl + `/${envelopeId}`)\n      .pipe(\n        map((envelopeExtended) => {\n          this.envelope = <IDocument>envelopeExtended;\n          this.envelope.recipients = this.sortRecipients(this.envelope);\n          this._currentExtendedEnvelope.next(this.envelope);\n          this.envelopeData = this.envelope;\n          return this.envelope;\n        })\n      );\n  }\n\n  getAllEnvelopes(templateId?: string) {\n    const endpoint = templateId ? this._documentUrl + `?template_id=${templateId}` : this._documentUrl;\n    return this.httpClient.request(new HttpRequest(\n      'GET',\n      endpoint,\n      {},\n      {\n        reportProgress: true,\n        responseType: 'json'\n      }\n    )).pipe(\n      map(event => {\n        if (event instanceof HttpResponse) {\n          this.updateEnvelopes(event.body);\n          return event as HttpResponse<any>\n        }\n        return event;\n      })\n    );\n  }\n\n  searchEnvelopes(searchParams: IEnvelopeSearchParams): Observable<HttpEvent<any> | IEnvelopeSearchResult> {\n    for (const key in searchParams) {\n      if (searchParams.hasOwnProperty(key)) {\n        if (searchParams[key] === null) {\n          delete searchParams[key];\n        }\n      }\n    }\n    return this.httpClient.request(new HttpRequest(\n      'POST',\n      this._documentUrl + '/search',\n      searchParams,\n      {\n        reportProgress: true,\n        responseType: 'json'\n      }\n    )).pipe(\n      map(event => {\n        if (event instanceof HttpResponse) {\n          this.updateEnvelopes(event.body);\n          return event as HttpResponse<IEnvelopeSearchResult>;\n        }\n        return event;\n      })\n    );\n  }\n\n  getRecentActivities(page?: number) {\n    const searchBody = {\n      sort_by: 'updated_at' as DocumentSortOptions,\n      ascending: false,\n      row: 5,\n      page: page ? page : 1\n    }\n    return this.searchEnvelopes(searchBody)\n  }\n\n  applyCustomSearch(filters: IEnvelopeSearchParams, searchParams) {\n    if (filters['envelope_status'] && !searchParams['envelope_status']) {\n      searchParams['envelope_status'] = filters['envelope_status']\n    }\n    if (filters['updated_at']) {\n      if (!searchParams['updated_at'] && !!searchParams['envelope_status']) {\n        searchParams['updated_at'] = filters['updated_at']\n      } else if (!searchParams['envelope_status']) {\n        searchParams['created_at'] = filters['updated_at']\n        if (!searchParams['sort_by']) {\n          searchParams['sort_by'] = 'created_at' as DocumentSortOptions;\n        }\n      }\n    }\n    if (filters['recipient_name']) {\n      searchParams['recipient_name'] = filters['recipient_name']\n    }\n    if (filters['envelope_name']) {\n      searchParams['envelope_name'] = filters['envelope_name']\n    }\n    if (filters['recipient_email']) {\n      searchParams['recipient_email'] = filters['recipient_email']\n    }\n    if (filters['text_field_value']) {\n      searchParams['text_field_value'] = filters['text_field_value']\n    }\n    return searchParams;\n  }\n\n  filterSearchBy(type: string, ascending?: boolean, row?: number, page?: number, filterTime?: ITimePeriod, sortBy?: DocumentSortOptions, customFilters?: IEnvelopeSearchParams) {\n    let searchParams = {\n      ascending: ascending || false,\n      row: row || 10,\n      page: page || 1\n    }\n\n    switch (type) {\n      case 'action_required':\n        searchParams['is_recipient'] = true;\n        searchParams['recipient_status'] = ['invited', 'opened', 'signed'];\n        searchParams['envelope_status'] = ['pending', 'in progress'];\n        searchParams['sort_by'] = sortBy as DocumentSortOptions;\n        if (filterTime) {\n          searchParams['updated_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'updated_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      case 'waiting_on_others':\n        return this.getWaitingOnOthers(ascending, row, page, filterTime, sortBy, customFilters);\n      case 'waiting_on_others_unfiltered':\n        searchParams['is_owner'] = true;\n        searchParams['envelope_status'] = ['pending', 'in progress'];\n        searchParams['sort_by'] = sortBy as DocumentSortOptions || null;\n        if (filterTime) {\n          searchParams['updated_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'updated_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      case 'inbox':\n        searchParams['is_recipient'] = true;\n        searchParams['recipient_status'] = ['invited', 'declined', 'opened', 'signed', 'submitted', 'canceled'];\n        searchParams['sort_by'] = sortBy as DocumentSortOptions || null;\n        if (filterTime) {\n          searchParams['created_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'created_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      case 'completed':\n        searchParams['envelope_status'] = ['complete'];\n        searchParams['sort_by'] = sortBy as DocumentSortOptions || null;\n        if (filterTime) {\n          searchParams['updated_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'updated_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      case 'sent':\n        searchParams['is_owner'] = true;\n        searchParams['sort_by'] = sortBy as DocumentSortOptions || null;\n        if (filterTime) {\n          searchParams['created_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'created_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      case 'all':\n        searchParams['sort_by'] = sortBy as DocumentSortOptions || null;\n        if (filterTime) {\n          searchParams['created_at'] = filterTime;\n          if (!sortBy) {\n            searchParams['sort_by'] = 'created_at' as DocumentSortOptions;\n          }\n        }\n        break;\n      default:\n        break;\n    }\n\n    if (!!customFilters) {\n      searchParams = this.applyCustomSearch(customFilters, { ...searchParams });\n    }\n    return this.searchEnvelopes(searchParams);\n  }\n\n  public getWaitingOnOthers(ascending?: boolean, row?: number, page?: number, filterTime?: ITimePeriod, sortBy?: DocumentSortOptions, customFilters?: IEnvelopeSearchParams) {\n    let actionRequiredEnvelopes = null;\n    return this.filterSearchBy('action_required', ascending, row, page, filterTime, sortBy, customFilters)\n      .pipe(\n        concatMap((res) => {\n          if (res instanceof HttpResponse) {\n            actionRequiredEnvelopes = res.body['result'];\n            return this.filterSearchBy('waiting_on_others_unfiltered', ascending, row, page, filterTime, sortBy, customFilters)\n          } else {\n            return empty();\n          }\n        }),\n        map((response) => {\n          if (response instanceof HttpResponse && actionRequiredEnvelopes) {\n            const unfilteredWaitingOnOthers = response['body']['result'];\n            const filteredWaitingOnOthers = differenceBy(unfilteredWaitingOnOthers, actionRequiredEnvelopes, 'id');\n            response.body['result'] = filteredWaitingOnOthers;\n            response.body['total'] = filteredWaitingOnOthers.length;\n          }\n          return response;\n        })\n      )\n  }\n\n  getEnvelopeOwnerInfo(envId: string) {\n    return this.httpClient.get(this._documentUrl + `/${envId}?owner_info=true`).pipe(\n      map(res => {\n        return res;\n      })\n    );\n  }\n\n  getEnvelopeDocUrl(envId: string, docId: string) {\n    return this.httpClient.get(this._documentUrl + `/${envId}/envelope_documents/${docId}?file=true`,\n      { responseType: 'blob' })\n      .pipe(\n        map(res => {\n          if (isPlatformBrowser(this.platform)) {\n            const urlCreator = window.URL;\n            const pdfUrl = urlCreator.createObjectURL(res);\n            return pdfUrl;\n          }\n        }, err => {\n          // use a snackBar/error.service\n          console.error(err);\n        })\n      );\n  }\n\n  getEnvelopePdfWithProgress(envelopeId: string, documentId: string) {\n    const requestUrl = this._documentUrl + `/${envelopeId}/envelope_documents/${documentId}?file=true`;\n    return this.httpClient.request(new HttpRequest(\n      'GET',\n      requestUrl,\n      {},\n      { reportProgress: true, responseType: 'blob' }\n    )).pipe(\n      map(event => event)\n    );\n  }\n\n  getEnvelopeDocBlob(envId: string, docId: string) {\n    return this.httpClient.get(this._documentUrl + `/${envId}/envelope_documents/${docId}?file=true`,\n      { responseType: 'blob' })\n      .pipe(map(file => {\n        return file;\n      }));\n  }\n\n  getEnvelopeCertificateBlob(envId: string) {\n    return this.httpClient.get(this._documentUrl + `/${envId}?certificate_file=true`,\n      { responseType: 'blob' })\n      .pipe(\n        map(file => {\n          return file;\n        })\n      );\n  }\n\n  /********************************\n   * Move logic to public library *\n   *******************************/\n\n  // downloadEnvelope(envelope) {\n  //   this.getEnvelopeDocBlob(envelope.id, envelope.envelope_document_id).toPromise().then(pdfBlob => {\n  //     saveAs(pdfBlob, envelope.name + '-' + moment(envelope.updated_at).format('MM-DD-YY') + '.pdf');\n  //   });\n  // }\n\n  // downloadEnvelopeCertificate(envelope) {\n  //   this.getEnvelopeCertificateBlob(envelope.id).toPromise().then(pdfBlob => {\n  //     if (pdfBlob) {\n  //       saveAs(pdfBlob, `${envelope.name}_certificate.pdf`);\n  //     }\n  //   });\n  // }\n\n  getTemplateDoc(templateId: string, token: string, file: boolean) {\n    const requestUrl = this._rForm_backend_url + `/liveview/${templateId}/token/${token}`;\n    return this.httpClient.get(requestUrl, { responseType: 'json' })\n      .pipe(\n        map((res: any) => {\n          return res;\n        }, err => {\n          console.error(err);\n          return err;\n        })\n      );\n  }\n\n  getTemplatePDF(templateId: string, token: string) {\n    const requestUrl = this._rForm_backend_url + `/liveview/${templateId}/token/${token}?file=true`;\n    return this.httpClient.request(new HttpRequest(\n      'GET',\n      requestUrl,\n      {},\n      { reportProgress: true, responseType: 'blob' }\n    )).pipe(\n      map(event => {\n        return event;\n      })\n    );\n  }\n\n  cancelEnvelope(id: string) {\n    return this.httpClient.put(this._documentUrl + `/${id}`, { action: 'cancel' }, { responseType: 'json' })\n      .pipe(\n        map(envelopeData => envelopeData, err => err)\n      );\n  }\n\n  submitEnvelope(envId: string, roleName: string): Observable<IRecipient> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}`,\n      { action: 'submit' }\n    ).pipe(\n      map((res: IRecipient) => {\n        return res\n      })\n    );\n  }\n\n  declineEnvelope(envId: string, roleName: string): Observable<IRecipient> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}`,\n      { action: 'decline' }\n    ).pipe(\n      map((res: IRecipient) => {\n        return res;\n      })\n    );\n  }\n\n\n  uploadAttachment(envelopeId, file: File, fieldName) {\n    let req;\n    if (file) {\n      const formdata = new FormData();\n      formdata.append('document', file, file.name);\n      req = new HttpRequest('PUT', this._rForm_backend_url + '/envelopes/' + envelopeId +\n        '/fields/' + fieldName, formdata, {\n        reportProgress: true\n      })\n      return this.httpClient.request(req).pipe(\n        map(res => res)\n      );\n    }\n  }\n\n  downloadAttachment(field) {\n    const header = new HttpHeaders().set('content-type', field.settings.type);\n    return this.httpClient.get(this._rForm_backend_url + '/envelopes/' + field.envelope_id +\n      '/fields/' + field.name + '/document', { headers: header, responseType: 'blob' })\n      .pipe(\n        map(file => {\n          return file;\n        })\n      );\n  }\n\n  getAttachmentDataByRecipients(envelope) {\n    const recipients = envelope['recipients'];\n    if (recipients && recipients.length > 0) {\n      const attachments = []\n      for (const recipient of recipients) {\n        if (recipient.fields && recipient.fields.length > 0) {\n          for (const field of recipient.fields) {\n            if (field.type === 'attachment' && !!field.settings.url) {\n              attachments.push({\n                recipient: recipient.full_name,\n                fieldObject: field\n              });\n            }\n          }\n        }\n      }\n      return attachments;\n    }\n    return [];\n  }\n\n  /*****************\n   * Signature API *\n   ****************/\n\n  postSignatureBlob(signatureBlob: Blob) {\n    const blobFile = signatureBlob;\n    const formData = new FormData();\n    formData.append('signature', blobFile, blobFile['name']);\n    const request = new HttpRequest('POST', this._rForm_backend_url + '/signatures', formData);\n    return this.httpClient.request(request)\n      .toPromise()\n      .then(response => {\n        if (response && response['body']) {\n          return response['body'];\n        } else {\n          console.error('Failed to upload signature image');\n        }\n      });\n  }\n\n  postInitialBlob(initialBlob) {\n    const blobFile = initialBlob;\n    const formData = new FormData();\n    formData.append('initial', blobFile, blobFile['name']);\n    const request = new HttpRequest('POST', this._rForm_backend_url + '/initials', formData);\n    return this.httpClient.request(request)\n      .toPromise()\n      .then(response => {\n        if (response && response['body']) {\n          return response['body'];\n        } else {\n          console.error('Failed to upload Initial');\n        }\n      });\n  }\n\n  putSignatureField(envelopeId, fieldName, signatureId) {\n    return new Promise<any>(async (resolve, reject) => {\n      const ipAddress = await this.getPublicIp();\n      this.httpClient\n        .put(this._documentUrl + `/${envelopeId}/fields/${fieldName}/signature/${signatureId}`,\n          {\n            ip_address: ipAddress\n          }\n        ).toPromise().then(res => {\n          return resolve(res);\n        })\n    });\n  }\n\n  putInitialField(envelopeId, fieldName, initialId) {\n    return new Promise<any>(async (resolve, reject) => {\n      const ipAddress = await this.getPublicIp();\n      this.httpClient\n        .put(this._documentUrl + `/${envelopeId}/fields/${fieldName}/initial/${initialId}`,\n          {\n            ip_address: ipAddress\n          }\n        ).toPromise().then(res => {\n          return resolve(res);\n        })\n    });\n  }\n\n  putEnvelopeField(envelopeId, result) {\n    return new Promise<any>((resolve, reject) => {\n      this.httpClient\n        .put(this._documentUrl + `/${envelopeId}/fields/${this.workingField.fName}`,\n          result\n        ).toPromise().then(res => {\n          return resolve(res);\n        })\n    });\n  }\n\n  updateGroupedField(envelopeId, body, fieldName, ifPrepared?: boolean) {\n    if (typeof (ifPrepared) === 'boolean') {\n      body['prepared'] = ifPrepared;\n    }\n    return new Promise<any>((resolve, reject) => {\n      this.httpClient\n        .put(this._documentUrl + `/${envelopeId}/fields/${fieldName}`,\n          body\n        ).toPromise().then(res => {\n          return resolve(res);\n        })\n    });\n  }\n\n  private getPublicIp() {\n    const apiUrl = 'https://api.ipify.org?format=jsonp';\n    const callback = 'callback=JSONP_CALLBACK';\n    return this.httpClient\n      .jsonp(apiUrl, callback)\n      .toPromise()\n      .then((res) => {\n        return res['ip']\n      }).catch((err) => {\n        console.error('Failed to get ip', err)\n        return 'ip_unavailable'\n      });\n  }\n\n  /********************************\n   * Move logic to public library *\n   *******************************/\n\n  // async zipEnvelopeDocs(envelope) {\n  //   const zip = new jszip();\n  //   const envelopeZipName = envelope.name + ' - ' + moment(envelope.updated_at).format('MM-DD-YY');\n\n  //   await this.getEnvelopeDocBlob(envelope.id, envelope.envelope_document_id).toPromise().then(envelopeBlob => {\n  //     zip.file(envelope.name + '.pdf', envelopeBlob, { compression: 'DEFLATE' });\n  //   });\n\n  //   if (this.hasCertificate(envelope)) {\n  //     await this.getEnvelopeCertificateBlob(envelope.id).toPromise().then(envelopeCertificateBlob => {\n  //       zip.file(envelope.name + '_certificate.pdf', envelopeCertificateBlob, { compression: 'DEFLATE' });\n  //     });\n  //   }\n\n  //   const attachment = zip.folder('attachments');\n  //   const fields = envelope.fields;\n  //   let numOfAttachments = 0;\n  //   for (let x = 0; x < fields.length; x++) {\n  //     if (fields[x] && fields[x].type === 'attachment' && fields[x].settings['name']) {\n  //       await this.downloadAttachment(fields[x]).toPromise().then(fileBlob => {\n  //         attachment.file(fields[x].settings.name, fileBlob, { compression: 'DEFLATE' });\n  //         numOfAttachments++;\n  //       });\n  //     }\n  //   }\n  //   if (numOfAttachments === 0) {\n  //     zip.remove('attachments');\n  //   }\n  //   zip.generateAsync({ type: 'blob', compression: 'DEFLATE' }).then(content => {\n  //     saveAs(content, envelopeZipName + '.zip');\n  //   })\n  // }\n\n  sortRecipients(envelope: IDocument) {\n    if (envelope.recipients.length < 1) {\n      return [];\n    }\n\n    const recipients = envelope.recipients.sort((a: IRecipient, b: IRecipient) => {\n      if (a.sequence === b.sequence) {\n        return a.role_name < b.role_name ? -1 : a.role_name > b.role_name ? 1 : 0;\n      }\n      return b.sequence > a.sequence ? -1 : b.sequence < a.sequence ? 1 : 0;\n    });\n\n    const signers = recipients.filter(recipient => {\n      return recipient.type === 'signer';\n    });\n\n    for (let x = 0; x < signers.length; x++) {\n      const rIndex = findIndex(recipients, { sequence: signers[x].sequence, role_name: signers[x].role_name });\n      if (rIndex >= 0) {\n        recipients[rIndex]['rgba'] = getRGBA(x);\n      }\n    }\n\n    return recipients;\n  }\n\n  getRecipientColor(name, index?) {\n    if (index) {\n      return getRGBA(index);\n    } else if (this.envelope && this.envelope.recipients && this.envelope.recipients.length > 0) {\n      let index = findIndex(this.envelope.recipients, { role_name: name });\n      if (index >= 0 && this.envelope.recipients[index].rgba) {\n        return this.envelope.recipients[index].rgba;\n      }\n    } else {\n      return nameToRGBA(name);\n    }\n  }\n\n  // Check the logic\n  async validateEnvelopeField(): Promise<boolean> {\n    if (this.workingField.vName != null && this.workingField.value !== '') {\n      const validators = await this.validatorService.getValidatorsObject();\n      return validators[this.workingField.vName].test(this.workingField.value) && this.satisfyRequired();\n    } else {\n      return this.satisfyRequired();\n    }\n  }\n\n  private satisfyRequired() {\n    if (!!this.workingField.required && this.workingField.type !== 'checkbox' && this.workingField.type !== 'timestamp') {\n      return !!this.workingField.value;\n    }\n    return true;\n  }\n\n  sortFields(fields) {\n    fields = fields.sort((a, b) => {\n      return a.page - b.page;\n    });\n    let previousDistance = null;\n    fields = fields.sort((a, b) => {\n      let setting = 'settings';\n      let distance = this.canBeSameRow(a, b).distance;\n      let higherHeight = this.canBeSameRow(a, b).higherHeight;\n      if (!a[setting]) {\n        setting = 'setting';\n      }\n      if (a.page < b.page) {\n        return -1;\n      }\n      if (a.page > b.page) {\n        return 1;\n      }\n      const ax = a[setting].x, bx = b[setting].x, ay = a[setting].y, by = b[setting].y;\n      if (distance >= -3 && distance <= higherHeight) {\n        previousDistance = previousDistance === null ? distance : distance < previousDistance ? distance : previousDistance;\n        if (ax < bx) {\n          return -1;\n        } else if (ax > bx) {\n          return 1\n        } else if (previousDistance >= distance) {\n          return -1;\n        } else if (previousDistance <= distance) {\n          return 1\n        } return 0;\n      }\n      return b[setting].y - a[setting].y\n    })\n    return fields;\n  }\n\n  checkIfEnvelopeOwner(envelope) {\n    const signer_token = this.vTokenStateService.getOtherCookie('signer_token');\n    const profile = this.tokenObjectService.getProfile();\n    if (signer_token && !profile) {\n      return false;\n    } else if (envelope) {\n      const currentUserId = profile['id'];\n      return currentUserId === envelope['profile_id'];\n    }\n  }\n\n  private canBeSameRow(a, b) {\n    let setting = 'setting';\n    if (!a[setting]) {\n      setting = 'settings';\n    }\n    const aHeight = this.getHeight(a);\n    const bHeight = this.getHeight(b);\n    const aBottom = a[setting].y;\n    const bBottom = b[setting].y;\n    let top;\n    let higherBottom;\n    let higherHeight;\n    if (aBottom < bBottom) {\n      top = aHeight + aBottom;\n      higherBottom = bBottom;\n      higherHeight = bHeight;\n    } else {\n      top = bHeight + bBottom;\n      higherBottom = aBottom;\n      higherHeight = aHeight;\n    }\n    const distance = top - higherBottom;\n    return { distance, higherHeight };\n  }\n\n  private getHeight(field) {\n    let setting = 'setting';\n    if (!field[setting]) {\n      setting = 'settings';\n    }\n    let height = 0;\n    switch (field.type) {\n      case 'signature':\n      case 'initial':\n        height = 36;\n        break;\n      case 'checkbox':\n        height = 13.5;\n        break;\n      case 'attachment':\n      case 'payment':\n        height = 24;\n        break;\n      default:\n        height = field[setting]['height'] || 0;\n        break;\n    }\n    return height;\n  }\n\n  public hasCertificate(envelope) {\n    return envelope.certificate_document_id || ['complete', 'canceled', 'declined'].indexOf(this.envelope.status) !== -1;\n  }\n}","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { IReminder } from '../models/reminder.model';\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\n\n\n@Injectable()\nexport class EnvelopRemindersService {\n\n  private _config_token: VSDKConfig;\n  private _rForm_backend_url: string;\n\n  constructor(\n    private http: HttpClient,\n    private injector: Injector\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n  getReminder(envelopeId, reminderId): Promise<IReminder> {\n    return this.http.get<IReminder>(`${this._rForm_backend_url}/envelopes/${envelopeId}/reminder/${reminderId}`).toPromise()\n      .then((reminder) => {\n        return reminder;\n      });\n  }\n\n  updateReminder(envelopeId: string, reminderId, body): Promise<IReminder> {\n    return this.http\n      .put<IReminder>(`${this._rForm_backend_url}/envelopes/${envelopeId}/reminder/${reminderId}`, body)\n      .toPromise();\n  }\n\n  deleteReminder(envelopeId, reminderId) {\n    return this.http.delete(`${this._rForm_backend_url}/envelopes/${envelopeId}/reminder/${reminderId}`).toPromise();\n  }\n\n  createReminder(envelopeId, body: { setup_time: number, interval_time: number, is_on: boolean }): Promise<IReminder> {\n    return this.http.post<IReminder>(`${this._rForm_backend_url}/envelopes/${envelopeId}/reminder`, body).toPromise()\n      .then((reminder) => {\n        return reminder;\n      });\n  }\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ReplaySubject } from 'rxjs';\n\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\nimport { IRecipient } from '../models/recipient.model';\nimport { findIndex } from 'lodash';\n\n@Injectable()\nexport class RecipientService {\n  public recipientsSubject = new ReplaySubject<IRecipient[]>();\n\n  private _config_token: VSDKConfig;\n  private _rForm_backend_url: string;\n  private recipients: IRecipient[] = [];\n\n  constructor(\n    private httpClient: HttpClient,\n    private injector: Injector\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n  private updateRecipients(recipient: IRecipient | IRecipient[]) {\n    if (recipient && recipient['length'] && recipient['length'] > 0) {\n      this.recipients = recipient as IRecipient[];\n    } else if (recipient) {\n      if (this.recipients && this.recipients['length'] && this.recipients['length'] > 0) {\n        const updatedRecipientIndex = findIndex(this.recipients as any, { role_name: recipient['role_name'] });\n        if (updatedRecipientIndex !== -1) {\n          this.recipients[updatedRecipientIndex] = recipient as IRecipient;\n        }\n      } else {\n        this.recipients.push(recipient as IRecipient);\n      }\n    }\n    this.recipientsSubject.next(this.recipients);\n  }\n\n  public getRecipients(envelopeId) {\n    return this.httpClient.get(this._rForm_backend_url + `/envelopes/${envelopeId}/recipients`)\n      .toPromise().then((recipients: IRecipient[]) => {\n        this.updateRecipients(recipients);\n        return recipients;\n      }).catch(err => {\n        console.error(err)\n        return [];\n      })\n  }\n\n  prepareRecipients(envId: string, roleName: string, recipientsToUpdate: any[]): Promise<void> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}`,\n      { action: 'prepare', recipients: recipientsToUpdate }\n    ).toPromise().then((updatedRecipient: IRecipient) => {\n      this.updateRecipients(updatedRecipient);\n    })\n  }\n\n  updateRecipientName(envId: string, roleName: string, newFullName: string): Promise<void> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}`,\n      { action: 'update', new_full_name: newFullName }\n    ).toPromise().then((updatedRecipient: IRecipient) => {\n      this.updateRecipients(updatedRecipient);\n    });\n  }\n\n  setAsAgreed(envId: string, roleName: string): Promise<void> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}`,\n      { action: 'update', agreed: true }\n    ).toPromise().then((updatedRecipient: IRecipient) => {\n      this.updateRecipients(updatedRecipient);\n    });\n  }\n\n  claimProfile(envId: string, roleName: string, profileToClaim: any): Promise<void> {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envId}/recipients/${roleName}/claim`,\n      { profile: profileToClaim }\n    ).toPromise().then((updatedRecipient: IRecipient) => {\n      this.updateRecipients(updatedRecipient);\n    });\n  }\n\n  updateRecipientInfoByOwner(envelopeId: string, roleName: string, recipientInfo: { full_name: string; email: string; phone: string; }) {\n    return this.httpClient.put(\n      this._rForm_backend_url + `/envelopes/${envelopeId}/recipients/${roleName}`,\n      { action: 'owner_update', full_name: recipientInfo.full_name, email: recipientInfo.email, phone: recipientInfo.phone }\n    ).toPromise().then((updatedRecipient: IRecipient) => {\n      this.updateRecipients(updatedRecipient);\n      return updatedRecipient;\n    });\n  }\n\n  getInPersonLink(envelopeId, roleName: string) {\n    return this.httpClient.get(\n      this._rForm_backend_url + `/envelopes/${envelopeId}/recipients/${roleName}?in_person_link=true`)\n      .toPromise().then((inPersonLink) => {\n        return inPersonLink;\n      });\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient, HttpRequest } from '@angular/common/http';\nimport { EventTrackerService } from '@verdocs/event-tracker';\nimport { Observable, ReplaySubject, throwError, from, forkJoin, of } from 'rxjs';\nimport { catchError, map, delay, mergeMap } from 'rxjs/operators';\nimport { findIndex } from 'lodash';\n\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\n\nimport { ITemplate } from '../models/template.model';\nimport { IPage } from '../models/page.model';\nimport { IRole } from '../models/role.model';\nimport { IField } from '../models/field.model';\nimport { FieldRole } from '../models/field-role.model';\n\n@Injectable()\nexport class BuilderService {\n  public saveStatusSubject: ReplaySubject<string> = new ReplaySubject<string>();\n\n  private _config_token: VSDKConfig;\n  private _rForm_backend_url: string;\n\n  constructor(\n    private http: HttpClient,\n    private injector: Injector,\n    private eventTracker: EventTrackerService\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n  createTemplate(template_body: ITemplate): Observable<ITemplate> {\n    return this.http\n      .post<ITemplate>(this._rForm_backend_url + '/templates', template_body)\n      .pipe(\n        map((res) => {\n          return res;\n        })\n      );\n  }\n\n  uploadTemplateDocument(file: File, template: ITemplate) {\n    const formdata = new FormData();\n    formdata.append('document', file, file.name);\n    const req = new HttpRequest('POST', `${this._rForm_backend_url}/templates/${template.id}/documents`, formdata, {\n      reportProgress: true\n    });\n    return this.http.request(req)\n      .pipe(\n        map(res => res),\n        catchError(err => {\n          return throwError(err);\n        })\n      )\n  }\n\n  addTemplatePage(document, pageNum, templateId) {\n    const body = {\n      sequence: pageNum,\n      page_number: pageNum,\n      document_id: document.id\n    }\n    return this.http.post<IPage>(`${this._rForm_backend_url}/templates/${templateId}/pages`, body)\n      .pipe(\n        map((res: IPage) => res),\n        catchError(err => {\n          return throwError(err);\n        })\n      )\n  }\n\n  addTemplatePages(document, pageNums: number[], templateId: string) {\n    return from(pageNums)\n      .pipe(\n        mergeMap(pageNum => {\n          const page = {\n            sequence: pageNum,\n            page_number: pageNum,\n            document_id: document.id\n          };\n          return <Observable<IPage>>this.http.post(`${this._rForm_backend_url}/templates/${templateId}/pages`, page).pipe(delay(200));\n        })\n      )\n  }\n\n  addTemplateField(newField: IField, i, j, template: ITemplate): Observable<ITemplate> {\n    newField.name = newField.name.trim();\n    return this.http\n      .post<IField>(this._rForm_backend_url + '/templates/' + newField.template_id + '/fields', newField)\n      .pipe(\n        map(field => {\n          this.eventTracker.createEvent({\n            category: 'document',\n            action: `document ${field.type} field added`,\n            label: `document id: ${newField.template_id}`\n          });\n          template.pages[i].fields[j] = field;\n          // this.checkForFields(template.roles);\n          const roleIndex = findIndex(template.roles, { name: field.role_name });\n          if (roleIndex >= 0) {\n            template.roles[roleIndex]['fields'].push(field);\n          }\n          // this.templateSubject.next(template);\n          return template;\n        })\n      );\n  }\n\n  deleteTemplateField(template: ITemplate, fieldName: string, i, j): Observable<ITemplate> {\n    return this.http\n      .delete<void>(`${this._rForm_backend_url}/templates/${template.id}/fields/${fieldName.trim()}`)\n      .pipe(\n        map(field => {\n          const fieldIndex = findIndex(template.pages[i].fields, { name: fieldName });\n          const roleIndex = findIndex(template.roles, { name: template.pages[i].fields[fieldIndex].role_name });\n\n          if (roleIndex > -1) {\n            const roleFieldIndex = findIndex(template.roles[roleIndex].fields, { name: fieldName });\n            if (roleFieldIndex > -1) {\n              template.roles[roleIndex].fields.splice(roleFieldIndex, 1);\n            }\n          }\n          template.pages[i].fields.splice(fieldIndex, 1);\n          // this.updateLocalTemplate(template);\n          // this.saveStatusSubject.next('saved');\n          // this.checkForFields(template.roles);\n          return template;\n        })\n      );\n  }\n\n  updateRoleField(template: ITemplate, updated_field, role_index, old_name) {\n    const field_index = findIndex(template.roles[role_index].fields, { name: old_name });\n    if (field_index >= 0) {\n      template.roles[role_index].fields[field_index] = updated_field;\n    } else {\n      template.roles[role_index].fields.push(updated_field);\n    }\n    return template;\n  }\n\n  updateTemplateField(template: ITemplate, body: IField, oldName, i, j): Observable<ITemplate> {\n    oldName = oldName.trim();\n    return this.http\n      .put<IField>(this._rForm_backend_url + '/templates/' + template.id + '/fields/' + oldName, body)\n      .pipe(\n        map(field => {\n          this.eventTracker.createEvent({\n            category: 'document',\n            action: `document ${field.type} field updated`,\n            label: `document id: ${template.id}`\n          });\n          const fieldIndex = findIndex(template.pages[i].fields, { name: oldName });\n          if (field.page_sequence - 1 !== i) {\n            template.pages[i].fields.splice(fieldIndex, 1);\n            template.pages[field.page_sequence - 1].fields.push(field);\n          } else {\n            template.pages[i].fields[fieldIndex] = field;\n          }\n          const roleIndex = findIndex(template.roles, { name: field.role_name });\n          if (roleIndex >= 0) {\n            template = this.updateRoleField(template, field, roleIndex, oldName);\n          }\n          // this.templateSubject.next(template);\n          this.saveStatusSubject.next('saved');\n          return template;\n        })\n      );\n  }\n\n  updateDropdownField(template: ITemplate, body: any, oldName, i, j): Observable<ITemplate> {\n    oldName = oldName.trim();\n    return this.http\n      .put<any>(this._rForm_backend_url + '/templates/' + template.id + '/fields/' + oldName, body)\n      .pipe(\n        map(field => {\n          const fieldIndex = findIndex(template.pages[i].fields, { name: oldName });\n          template.pages[i].fields[fieldIndex] = field;\n          // this.templateSubject.next(template);\n          this.saveStatusSubject.next('saved');\n          return template;\n        })\n      );\n  }\n\n  addFieldRole(templateId: string, fieldId: string, roleId: string, i, j): Promise<FieldRole> {\n    const fieldRoleInfo = JSON.stringify({\n      field_id: fieldId,\n      role_id: roleId\n    });\n    return this.http\n      .post<FieldRole>(this._rForm_backend_url + '/template/' + templateId + '/field_role', fieldRoleInfo).toPromise().then(fieldRole => {\n        return fieldRole;\n      });\n  }\n\n  addRole(role: IRole | IRole[], template: ITemplate): Observable<ITemplate> {\n    const templateBackend = this._rForm_backend_url + '/templates/' + template.id + '/roles';\n    let roles = [];\n    roles = roles.concat(role);\n    const roleRequests = [];\n    roles.forEach(role => {\n      roleRequests.push(this.http.post(templateBackend, role));\n    })\n\n    if (roles && roles.length > 0) {\n      return forkJoin(roleRequests).pipe(\n        map(savedRoles => {\n          savedRoles.concat(savedRoles as IRole[]);\n          if (!template['roles']) {\n            template['roles'] = <IRole[]>[];\n          }\n          const savedRolesWithFields = savedRoles.map(newRole => {\n            newRole['fields'] = [];\n            return newRole;\n          });\n          template['roles'] = template['roles'].concat(savedRolesWithFields);\n          // this.recipients = this.sortRoles(template);\n          // this.roles = this.recipients;\n          // this.templateSubject.next(template);\n          // this.recipientsSubject.next(this.recipients);\n          // this.recipients;\n          return template\n        }, (err) => {\n          console.error(err);\n          console.error('Couldn\\'t save all the roles');\n          return err;\n        })\n      );\n    } else {\n      return of(template);\n    }\n  }\n\n  deleteRole(roleName, template: ITemplate) {\n    return this.http.delete(this._rForm_backend_url + '/templates/' + template.id + '/roles/' + roleName)\n      .toPromise()\n      .then(() => {\n        // remove(template.roles, (role: IRole) => {\n          // this.recipients = this.sortRoles(template);\n          // if (role.name === roleName) {\n          //   const fields = role.fields;\n          //   const fieldNames = [];\n          //   for (const field of fields) {\n          //     fieldNames.push(field.name);\n          //   }\n          //   this.deleteTemplateFields(fieldNames, template);\n          // }\n          // this.templateSubject.next(template);\n          // this.recipientsSubject.next(this.recipients);\n        //   return role.name === roleName\n        // });\n      });\n  }\n\n  deleteRoles(roleNames: Array<string>, template: ITemplate) {\n    const deleteCalls = [];\n    roleNames.forEach(role_name => {\n      template = {\n        ...template,\n        roles: template.roles.filter(role => role.name !== role_name)\n      }\n      deleteCalls.push(this.http.delete(this._rForm_backend_url + '/templates/' + template.id + '/roles/' + role_name))\n    });\n    return forkJoin(deleteCalls).pipe(\n      map(() => {\n        return template;\n      }, err => {\n        console.error(err);\n        console.error('Couldn\\'t delete all the roles');\n        return err;\n      })\n    )\n  }\n\n  updateRoles(roles, template: ITemplate): Observable<ITemplate> {\n    const updateCalls = [];\n    roles.forEach(role => {\n      const body = {\n        template_id: template.id,\n        name: role.name.trim(),\n        full_name: role.full_name,\n        email: role.email,\n        sequence: role.sequence,\n        type: role.type,\n        delegator: role.delegator,\n        message: role.message,\n        phone: role.phone\n      }\n\n      const role_index = findIndex(template.roles, { name: role.old_name });\n      if (role_index >= 0) {\n        template.roles[role_index] = {\n          ...template.roles[role_index],\n          template_id: template.id,\n          name: role.name.trim(),\n          full_name: role.full_name,\n          email: role.email,\n          sequence: role.sequence,\n          type: role.type,\n          delegator: role.delegator,\n          message: role.message,\n          phone: role.phone\n        }\n      }\n      this.eventTracker.createEvent({\n        category: 'document',\n        action: 'document role updated',\n        label: `document id: ${template.id}`\n      });\n      updateCalls.push(this.http.put(this._rForm_backend_url + '/templates/' + template.id + '/roles/' + role.old_name, body));\n    });\n    return forkJoin(updateCalls)\n      .pipe(\n        map(() => {\n          return template;\n        }, (err) => {\n          console.error(err);\n          console.error('Couldn\\'t save all the roles');\n          return err;\n        })\n      );\n  }\n}","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\nimport { IReminder } from '../models/reminder.model';\n\n\n@Injectable()\nexport class TemplatesRemindersService {\n\n  private _config_token: VSDKConfig;\n  private _rForm_backend_url: string;\n\n  constructor(\n    private http: HttpClient,\n    private injector: Injector\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n\n  getReminder(templateId, reminderId): Promise<IReminder> {\n    return this.http.get<IReminder>(`${this._rForm_backend_url}/templates/${templateId}/reminder/${reminderId}`).toPromise()\n      .then((reminder) => {\n        return reminder;\n      });\n  }\n\n  updateReminder(templateId: string, reminderId, body): Promise<IReminder> {\n    return this.http\n      .put<IReminder>(`${this._rForm_backend_url}/templates/${templateId}/reminder/${reminderId}`, body)\n      .toPromise();\n  }\n\n  deleteReminder(templateId, reminderId) {\n    return this.http.delete(`${this._rForm_backend_url}/templates/${templateId}/reminder/${reminderId}`).toPromise();\n  }\n\n  createReminder(templateId, body: { setup_time: number, interval_time: number }): Promise<IReminder> {\n    return this.http.post<IReminder>(`${this._rForm_backend_url}/templates/${templateId}/reminder`, body).toPromise()\n      .then((reminder) => {\n        return reminder;\n      });\n  }\n\n}\n","import { VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { intersection } from 'lodash';\n\nimport { Injectable } from '@angular/core';\nimport { TemplateActions, TemplatePermissions, TemplateSenderTypes } from '../definitions/template.enums';\nimport { ITemplate } from '../models/template.model';\n\n@Injectable()\nexport class TemplatesGuardService {\n\n\n  constructor(\n    private vTokenObjectService: VerdocsTokenObjectService\n  ) { }\n\n\n  public canPerformAction(action: TemplateActions, template: ITemplate): { canPerform: boolean, message: string } {\n    try {\n      let canPerform = false;\n      let message = null;\n      const neededPermissions = [];\n      if (!template && !action.includes('create')) {\n        throw {\n          error:\n            'You need to provide template object'\n        }\n      }\n      const userProfile = this.vTokenObjectService.getProfile();\n      const isCreator = userProfile ? template && template.profile_id === userProfile.id : false;\n      const isSameOrg = userProfile ? template && template.organization_id === userProfile.organization_id : false;\n      const isPersonal = template ? template.is_personal : null;\n      const isPublic = template ? template.is_public : null;\n      switch (action) {\n        case TemplateActions.CREATE_PERSONAL:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL)\n          break;\n        case TemplateActions.CREATE_ORG:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG);\n          break;\n        case TemplateActions.CREATE_PUBLIC:\n          neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC)\n          break;\n        case TemplateActions.READ:\n          if (!isCreator) {\n            if ((!isPersonal && isSameOrg) || !isPublic) {\n              neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_READ);\n            }\n          }\n          break;\n        case TemplateActions.WRITE:\n          if (!isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_READ);\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_WRITE);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_PERSONAL:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PERSONAL);\n            // neededPermission.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_ORG:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_ORG);\n            // neededPermission.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.CHANGE_VISIBILITY_PUBLIC:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_CREATE_PUBLIC);\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_VISIBILITY);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_VISIBILITY);\n          }\n          break;\n        case TemplateActions.DELETE:\n          if (isCreator) {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_CREATOR_DELETE);\n          } else {\n            neededPermissions.push(TemplatePermissions.TEMPLATE_MEMBER_DELETE);\n          }\n          break;\n        default:\n          throw {\n            error: 'Action is not defined'\n          }\n      }\n      if (this.hasPermissions(neededPermissions)) {\n        canPerform = true;\n      } else {\n        message = `Insufficient access to perform '${action}'. Needed permissions: ${neededPermissions.toString()}`;\n      }\n      return {\n        canPerform,\n        message\n      }\n    } catch (err) {\n      console.error({\n        message: `Failed to check whether action (${action}) can be done, in TemplateGuardService`,\n        err: err\n      });\n    }\n  }\n\n  private hasPermissions(requiredPermissions: string[]) {\n    const userPermissions = this.vTokenObjectService.getPermissions();\n    const hasPermissions = intersection(userPermissions, requiredPermissions).length === requiredPermissions.length;\n    return hasPermissions;\n  }\n\n  public canBeSender(template): boolean {\n    const userProfile = this.vTokenObjectService.getProfile();\n    if (!userProfile) {\n      return false;\n    }\n    switch (template.sender) {\n      case TemplateSenderTypes.CREATOR:\n        return userProfile.id === template.profile_id;\n      case TemplateSenderTypes.ORGANIZATION_MEMBER:\n      case TemplateSenderTypes.ORGANIZATION_MEMBER_AS_CREATOR:\n        return userProfile.id === template.profile_id || template.organization_id === userProfile.organization_id;\n      default:\n        return true;\n    }\n  }\n\n  canUserCreateTemplate() {\n    return this.canPerformAction(TemplateActions.CREATE_PERSONAL, null)['canPerform']\n      || this.canPerformAction(TemplateActions.CREATE_ORG, null)['canPerform']\n      || this.canPerformAction(TemplateActions.CREATE_PUBLIC, null)['canPerform']\n  }\n\n}\n","import { Injectable, Inject, Injector, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { HttpClient, HttpResponse, HttpRequest, HttpEvent, HttpErrorResponse } from '@angular/common/http';\n// import { MatDialog } from '@angular/material/dialog'\nimport { catchError, map } from 'rxjs/operators';\nimport { Subject, Observable, EMPTY, of } from 'rxjs';\nimport { VerdocsTokenObjectService } from '@verdocs/tokens';\nimport { filter } from 'lodash';\n// import { saveAs } from 'file-saver';\n\nimport { ITemplate, IStarTemplate } from '../models/template.model'\n// import { environment } from '../../../environments/environment';\nimport { TemplatesGuardService } from './templates.guard';\nimport { TemplateActions } from '../definitions/template.enums';\n// import { FourOhOneDialog } from '../../shared/dialogs/error-dialogs/four-oh-one.dialog';\nimport { ITemplateSearchParams } from '../models/template_search.model';\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\n\n@Injectable()\nexport class TemplatesService {\n  public templates: Subject<ITemplate[]> = new Subject<ITemplate[]>();\n  public template: Subject<ITemplate | {}> = new Subject<ITemplate>();\n  public loadingStatus = new Subject<boolean>();\n\n  private _config_token: VSDKConfig;\n  private rForm_backend_url: string;\n\n  constructor(\n    private http: HttpClient,\n    private vTokenObjectService: VerdocsTokenObjectService,\n    private templateGuard: TemplatesGuardService,\n    // private dialog: MatDialog,\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platform\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this.rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n  errorMessageNotVerified(err) {\n    return err.error.error === 'email is not verified' && err.error.code === 401;\n  }\n\n  getTemplates(filter?: 'creator' | 'organization' | 'starred'): Observable<HttpEvent<any> | ITemplate[] | HttpErrorResponse> {\n    this.loadingStatus.next(true);\n    this.templates.next([]);\n    let query = null;\n    if (filter) {\n      switch (filter) {\n        case 'creator':\n          query = '?is_creator=true';\n          break;\n        case 'organization':\n          query = '?is_organization=true';\n          break;\n        case 'starred':\n          query = '?is_starred=true';\n          break;\n        default:\n          query = '';\n          break;\n      }\n    }\n    const requestUrl = this.rForm_backend_url + '/templates' + (query ? query : '');\n    return this.http.request(new HttpRequest(\n      'GET',\n      requestUrl,\n      {},\n      { reportProgress: true }\n    )).pipe(\n      map((event) => {\n        if (event instanceof HttpResponse) {\n          const template = <ITemplate[]>event.body;\n          this.templates.next(template);\n          this.loadingStatus.next(false);\n          return event as HttpResponse<ITemplate[]>;\n        }\n        return event;\n      }),\n      catchError((err: HttpErrorResponse) => {\n        if (err && err.status === 401 && !this.errorMessageNotVerified(err)) {\n          // const errorDialog = this.dialog.open(FourOhOneDialog, {\n          //   panelClass: 'error__dialog',\n          //   disableClose: true\n          // })\n          // errorDialog.componentInstance.error = err;\n        }\n        this.loadingStatus.next(false);\n        return Observable.throw(err)\n      })\n    );\n  }\n\n  // Move this to another service\n  getTemplateObservable(id: string, thumbnail?: boolean): Observable<ITemplate> {\n    this.loadingStatus.next(true);\n    let templateUrl = this.rForm_backend_url + '/templates/' + id;\n    if (thumbnail === true) {\n      templateUrl += '?thumbnail=true';\n    }\n    return this.http.get<ITemplate>(templateUrl)\n      .pipe(\n        map(template => {\n          this.loadingStatus.next(false);\n          return template;\n        }),\n        catchError(err => {\n          this.loadingStatus.next(false);\n          if (err && err.status === 401 && !this.errorMessageNotVerified(err)) {\n            // const errorDialog = this.dialog.open(FourOhOneDialog, {\n            //   panelClass: 'error__dialog',\n            //   disableClose: true\n            // })\n            // errorDialog.componentInstance.error = err;\n            return of(err)\n          }\n          return EMPTY\n        })\n      );\n  }\n\n  starTemplate(id): Observable<IStarTemplate | HttpErrorResponse> {\n    return this.http.post(this.rForm_backend_url + `/templates/${id}/stars`, {}).pipe(\n      map((res: IStarTemplate) => res),\n      catchError((err: HttpErrorResponse) => {\n        if (err && err.status === 401 && this.errorMessageNotVerified(err)) {\n          // const errorDialog = this.dialog.open(FourOhOneDialog, {\n          //   panelClass: 'error__dialog',\n          //   disableClose: true\n          // })\n          // errorDialog.componentInstance.error = err;\n          return of(err);\n        }\n        return Observable.throw(err);\n      })\n    );\n  }\n\n  unstarTemplate(id) {\n    return this.http.delete(this.rForm_backend_url+ `/templates/${id}/stars`).pipe(\n      catchError(err => {\n        if (err && err.status === 401 && this.errorMessageNotVerified(err)) {\n          // const errorDialog = this.dialog.open(FourOhOneDialog, {\n          //   panelClass: 'error__dialog',\n          //   disableClose: true\n          // })\n          // errorDialog.componentInstance.error = err;\n          return of(err);\n        }\n        return Observable.throw(err as HttpErrorResponse);\n      })\n    );\n  }\n\n  getTemplate(id): Observable<ITemplate> {\n    return this.getTemplateObservable(id).pipe(\n      map((template: ITemplate) => {\n        this.template.next(template);\n        return template;\n      })\n    );\n  }\n\n  getCreatorTemplates() {\n    return this.getTemplates('creator');\n  }\n\n  getOrganizationTemplates() {\n    return this.getTemplates('organization');\n  }\n\n  getStarredTemplates() {\n    return this.getTemplates('starred');\n  }\n\n  getPermissions() {\n    return this.vTokenObjectService.getPermissions();\n  }\n\n\n  getTemplateOwnerInfo(id: string): Promise<{ profile_id: string, email: string, name: string }> {\n    return this.http.get<{ profile_id: string, email: string, name: string }>(`${this.rForm_backend_url}/templates/${id}?owner_info=true`)\n      .toPromise().then(res => {\n        return res;\n      });\n  }\n\n  getTemplateDocumentPDFObservable(template_id, template_document) {\n    return this.http.get(this.rForm_backend_url + '/templates/' + template_id + '/documents/' +\n      template_document.id + '?file=true', { responseType: 'blob' })\n  }\n\n  getTemplateDocument(templateId, templateDocument) {\n    return this.getTemplateDocumentPDFObservable(templateId, templateDocument).toPromise();\n  }\n\n  getTemplateThumbnail(templateId, templateDocumentId) {\n    return this.http.get(this.rForm_backend_url + '/templates/' + templateId + '/documents/' +\n      templateDocumentId + '?thumbnail=true', { responseType: 'blob' }).toPromise();\n  }\n\n  getAllTemplateDocumentsObservable(templateId) {\n    return this.http.get(this.rForm_backend_url + '/templates/' + templateId + '/documents')\n  }\n\n  getAllTemplateDocuments(templateId) {\n    return this.http.get(this.rForm_backend_url + '/templates/' + templateId + '/documents')\n      .toPromise()\n  }\n\n  downloadTemplateDocument(template: ITemplate) {\n    if ((isPlatformBrowser(this.platform))) {\n      this.getTemplateDocument(template.id, template.template_documents[0]).then(template_file => {\n        this.prepareSave(template, template_file);\n      });\n    }\n  }\n\n  prepareSave(template, template_file) {\n    if (window && window.URL) {\n      const fileUrl = URL.createObjectURL(template_file);\n      // saveAs(fileUrl, template.template_documents[0].name + '.pdf');\n    }\n  }\n\n  searchTemplates(searchParams: ITemplateSearchParams) {\n    for (const key in searchParams) {\n      if (searchParams.hasOwnProperty(key)) {\n        if (searchParams[key] === null) {\n          delete searchParams[key];\n        }\n      }\n    }\n    return this.http.request(new HttpRequest(\n      'POST',\n      this.rForm_backend_url + '/templates/search',\n      searchParams,\n      {\n        reportProgress: true,\n        responseType: 'json'\n      }\n    )).pipe(\n      map(event => {\n        return event;\n      })\n    );\n  }\n\n  updateTemplateObservable(templateId: string, body): Observable<ITemplate> {\n    return this.http.put<ITemplate>(this.rForm_backend_url+ '/templates/' + templateId, body);\n  }\n\n  updateTemplate(templateId: string, body): Promise<ITemplate> {\n    return this.updateTemplateObservable(templateId, body)\n      .toPromise().then(template => template);\n  }\n\n  deleteTemplate(templateId) {\n    return this.http.delete(this.rForm_backend_url + '/templates/' + templateId);\n  }\n\n  deleteSequence(templateId, sequence_number) {\n    return this.http.delete(this.rForm_backend_url + '/templates/' + templateId + '/roles?sequence=' + sequence_number).toPromise()\n  }\n\n  updateTemplates(templates) {\n    this.templates.next(templates);\n  }\n\n  canSendEnvelope(template) {\n    if (template) {\n      const signers = filter(template.roles, { type: 'signer' });\n      const hasSigner = signers.length > 0;\n      let signersHaveFields = false;\n      if (hasSigner) {\n        for (const signer of signers) {\n          signersHaveFields = signer['fields'] && signer['fields'].length > 0\n        }\n      }\n      const hasAccessToTemplate = this.templateGuard.canPerformAction(TemplateActions.READ, template).canPerform;\n      return hasAccessToTemplate && hasSigner && signersHaveFields && this.templateGuard.canBeSender(template);\n    } else {\n      return false;\n    }\n  }\n}\n","import { NgModule, InjectionToken } from '@angular/core';\nimport { TokensModule } from '@verdocs/tokens';\n\nimport { ValidatorService } from './validators/validator.service';\nimport { AuthGuardService } from './guards/auth-guard.service';\nimport { DocumentsService } from './documents/document.service';\nimport { EnvelopRemindersService } from './documents/envelope-reminders.service';\nimport { RecipientService } from './recipients/recipients.service';\nimport { BuilderService } from './templates/builder.service';\nimport { TemplatesRemindersService } from './templates/template-reminders.service';\nimport { TemplatesGuardService } from './templates/templates.guard';\nimport { TemplatesService } from './templates/templates.service';\n\nexport interface VSDKConfig {\n  production: boolean;\n  domain: string;\n  rForm_backend_url: string;\n  rForm_frontend_url: string;\n  rSecure_frontend_url: string;\n  rSecure_backend_url: string;\n  rAccount_frontend_url: string;\n  rAccount_backend_url: string;\n  rNotification_backend_url: string;\n  loginURL: string;\n  origin: 'rAccount' | 'rForm';\n  plans: {\n    'level-1': string;\n    'level-2': string;\n    'level-3': string;\n  }\n}\n\nexport const VSDKConfigToken = new InjectionToken<VSDKConfig>('VSDKConfig');\n\n@NgModule({\n  imports: [\n  ],\n  providers: [\n    \n  ]\n})\nexport class AngularApiModule {\n  static initSDK(config: VSDKConfig) {\n    return {\n      ngModule: AngularApiModule,\n      imports: [\n        TokensModule.initInterceptor({\n          cookieName: '',\n          domain: config.domain,\n          origin: config.origin,\n          verdocs_name: 'rForm',\n          account_name: 'rAccount',\n          loginURL: config.loginURL,\n          production: config.production\n        })\n      ],\n      providers: [\n        {\n          provide: VSDKConfigToken,\n          useValue: config\n        },\n        ValidatorService,\n        AuthGuardService,\n        DocumentsService,\n        EnvelopRemindersService,\n        RecipientService,\n        BuilderService,\n        TemplatesGuardService,\n        TemplatesRemindersService,\n        TemplatesService\n      ]\n    }\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { regParse } from '../functions/regex';\nimport { VSDKConfig, VSDKConfigToken } from '../angular-api.module';\n\n\n@Injectable()\nexport class ValidatorService {\n  private _config_token: VSDKConfig;\n  private _rForm_backend_url: string;\n  private validators: any[] = [];\n  private validatorsObject: any = {};\n\n  constructor(\n    private http: HttpClient,\n    private injector: Injector\n  ) {\n    this._config_token = this.injector.get(VSDKConfigToken);\n    this._rForm_backend_url = this._config_token.rForm_backend_url;\n  }\n\n  public getValidatorsArray() {\n    if (this.validators && this.validators.length > 0) {\n      return this.validators;\n    } else {\n        return this.http.get(this._rForm_backend_url + '/validators').toPromise().then((response: any[]) => {\n        this.validators = response;\n        return this.validators as any[];\n      }, (err) => {\n        return null;\n      });\n    }\n  }\n\n  public async getValidatorsObject() {\n    this.validatorsObject = {};\n    await this.getValidatorsArray();\n    for (let i = 0; i < this.validators['length']; i++) {\n      const name = this.validators[i]['name'];\n      this.validatorsObject[name] = regParse(this.validators[i]['regex']);\n    }\n    return this.validatorsObject;\n  }\n}\n","import { AbstractControl } from '@angular/forms';\nimport { simpleE164Validator } from '../functions/country-code'\n\nexport class PhoneValidator {\n  static MatchPhone(control: AbstractControl) {\n    const validates = simpleE164Validator(control.value);\n    if (!validates) {\n      return {\n        phone: true\n      }\n    }\n    return false;\n  }\n}\n","import { ValidatorFn, AbstractControl } from '@angular/forms';\nimport { find } from 'lodash';\n\nexport function roleNameValidator(roles: any[]): ValidatorFn {\n  return (control: AbstractControl): {[key: string]: boolean} | null => {\n    const duplicateRoleName = find(roles, {name: control.value});\n    if (!!duplicateRoleName) {\n      return {'roleName': true};\n    }\n    return null;\n  };\n}","import { AbstractControl, ValidatorFn, FormControl, FormGroupDirective, NgForm } from '@angular/forms';\nimport {findIndex} from 'lodash';\nimport {ErrorStateMatcher} from '@angular/material/core'\n\nexport class TagValidator {\n  static MatchTag(control: AbstractControl) {\n    const tagRegEx = /^[a-zA-Z0-9-]{0,32}$/;\n    const patternValidation = tagRegEx.test(control.value);\n    if (!patternValidation) {\n      return { textPattern: true };\n    }\n    return null;\n  }\n}\n\nexport function TagDuplicateValidator(tags: any[]): ValidatorFn {\n  return (control: AbstractControl): {[key: string]: boolean} | null => {\n    const duplicateIndex = findIndex(tags, {tag_name: control.value});\n    return duplicateIndex > -1 ? {duplicate: true} : null;\n  }\n}\n\nexport class TagErrorStateMatcher implements ErrorStateMatcher {\n  isErrorState(control: FormControl | null, form: FormGroupDirective | NgForm | null): boolean {\n    return !(control && control.invalid && (control.dirty || control.touched))\n  }\n}\n"]}